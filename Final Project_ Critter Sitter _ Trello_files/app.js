window.siteDomain=location.origin||/^[^\/]+?[\/]{2}[^\/]+/.exec(location.href)[0];var e=[],t=function(t){e.push(t)},r=window;!function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return o(r?r:e)},l,l.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g,v;s=void 0,t(function(){return s=e(402)}),a=void 0,t(function(){return a=e(330)}),u=void 0,t(function(){return u=e(367)}),c=void 0,t(function(){return c=e(454)}),l=void 0,t(function(){return l=e(30)}),d=e("bluebird"),o=e("jquery"),m=e("moment"),v=e(38),f=e(112),p=e(209),i=e(191),g=function(e){var t;return t=parseInt(e,10),isNaN(t)?void 0:t},h=function(e,t){return null!=t?e(t):void 0},r.exports={routes:[["board/*path","oldBoardView"],["b/:shortLink(/*path)","boardView"],["card/board/(:slug/):idBoard/:cardComponent","oldCardView"],["card/(:slug/):idBoard/:cardComponent","oldCardView"],["c/:id(/*path)","cardView"]],boardView:function(e,t){var r,n,o,i,s,a,u,c;return null==t&&(t=""),i=t.split("/"),u=i[0],s=i[1],c=i[2],o=i[3],n=i[4],a={idBoard:e},"calendar"===s&&(r=m().startOf("day"),r.year(g(c)),r.month(h(p.sub(1),g(o))),r.date(g(n)),r.isValid()&&(a.calendarDate=r.toDate())),"member"===s&&null!=c&&(a.usernameBoardProfile=c),this.displayBoard(a).done()},oldBoardView:function(e){var t,r;return r={},t=e.split("/"),1===t.length?r.idBoard=t[0]:r.idBoard=t[1],3===t.length?r.section=t[2]:4===t.length&&(r.usernameBoardProfile=t[3]),this.displayBoard(r).done()},cardView:function(e,t){var r;return r=location.hash.length>1?location.hash.substr(1):null,this.displayBoard({idCard:e,highlight:r}).done()},oldCardView:function(e,t,r){var n,o;return o=function(e){return/^\d+$/.test(e)},n=o(r)?l.for("top-level","loadCardId",t,r).catch(i,function(){return null}):d.resolve(r),n.then(function(e){return function(r){return e.displayBoard({idBoard:t,idCard:r})}}(this)).done()},showCardDetail:function(e,t){var r,n,o,i,l,d,p,h;if(l=null!=t?t:{},o=l.highlight,p=l.runMethod,i=l.isNavigating,null!=e){if(!this.onBoardView(null!=(d=e.getBoard())?d.id:void 0)||e.modelCache!==this.getCurrentModelCache())return void this.navigate(this.getCardUrl(e,o),{trigger:!0});v("Card Front","Open Card Detail"),n=new u({modelCache:this.getCurrentModelCache(),model:e}),r=e.getBoard(),h=this.showingCalendar(e.getBoard()&&this.applicationView.existingSubviewOrUndefined(a,e.getBoard())),c.show({view:n,hide:function(e){return function(t){return s.clear(),t?void 0:(e.setBoardLocation(r.id,h?"calendar":void 0),e.title(r.get("name")))}}(this),isNavigating:i}),this.waitForId(e,function(t){return function(){return t.navigate(t.getCardUrl(e,o),{replace:t.onCardView(),trigger:!1})}}(this)),null!=p&&n[p](),null!=o&&n.highlight(o,!0)}}}},{}],2:[function(e,r,n){var o,i,s,a,u,c;a=e(674),i=void 0,t(function(){return i=e(30)}),s=e("underscore"),u=e(84),o=e(25),c=e(674),r.exports={routes:[["*splat","displayErrorPage"]],displayErrorPage:function(e){var t;return t=s.extend({errorType:"notFound"},e,{url:location.pathname,isLoggedIn:o.isLoggedIn()}),this.staticView({title:u("error"),template:c,templateData:t,viewType:"error"})}}},{}],3:[function(e,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S;a=e(25),i=e(451),s=e(191),u=void 0,t(function(){return u=e(137)}),c=void 0,t(function(){return c=e(330)}),p=void 0,t(function(){return p=e(30)}),d=void 0,t(function(){return d=e(29)}),h=e(459),m=e("bluebird"),f=e(109),g=e("underscore"),o=e("jquery"),v=e(62),b=e(209),C=e(35),x=e(85),j=e("moment"),S=e(112),l=x("DisplayBoard",["ConfirmToView","CardNotFound","CardNotFoundOnThisBoard","BoardNotFound"]),y=function(e){return"board_"+e},w=function(e,t){var r,n;null==t&&(t=m.resolve()),n=p.for("top-level","loadBoardSecondary",e),r=m.try(function(){var r;return r=function(){var t,r;return t=d.get("Board",e),null!=t&&null!=(r=t.getOrganization())?r.isFeatureEnabled("plugins"):void 0},r()?!0:t.then(function(){return r()})}).then(function(t){t&&p.for("top-level","loadBoardPluginData",e)}),m.all([n,r]).catch(s,function(){}).done()},k=function(e){var t;return t=p.for("top-level","loadCurrentBoardData",e),w(e,t),t.catch(s.Unconfirmed,function(){return m.reject(l.ConfirmToView())}).catch(s,function(){return m.reject(l.BoardNotFound())})},_=function(){return h.hold(),m.resolve().disposer(function(){return h.release()})},r.exports={showCardOnBoard:function(e,t,r,n){return m.try(function(){var t;return null!=(t=r.getCard(e))?(v(null!=t.get("idBoard")&&null!=t.get("idList")&&null!=t.get("name"),"Tried to display a card that was only partially loaded"),t):n(e).tap(function(e){e.get("idBoard")!==r.id&&m.reject(l.CardNotFoundOnThisBoard("",{idBoard:r.id}))})}).then(function(e){return function(r){return e.showCardDetail(r,{highlight:t})}}(this))},showBoardDetailView:function(e,t){return m.try(function(r){return function(){var n,o,i,s;return n=t.model,null!=(i=e.idCard)?r.showCardOnBoard(i,e.highlight,n,e.loadCardData):e.usernameBoardProfile&&null!=(s=n.modelCache.findOne("Member","username",e.usernameBoardProfile))?t.showMemberProfile(s):null!=(o=e.calendarDate)?t.showCalendar(o):(e.openListComposer&&t.openListComposer(),r.setBoardLocation(n.id))}}(this))},renderBoard:function(e){var t;return m.resolve(this.onBoardView(e.id)?(t=this.existingTopLevelView(c,e),t.closeDetailView(),t):(this.clearPreviousView(),this.setViewType(e),this.showHeader(),t=this.topLevelView(c,e,{modelCache:e.modelCache}),o("#content").html(t.render().el),o("body").addClass("body-board-view"),t))},displayBoard:function(e){var t,r,n,o,u;return C("controller",["boardView",e.idBoard]),n=e.idBoard,o=e.idCard,v(n||o,"Illegal invocation of displayBoard: requires one of idBoard, or idCard"),v(null==n||f.checkId(n)||f.isShortLink(n),'Illegal invocation of displayBoard: idBoard must be a board ID or a short link (got "'+n+'")'),v(null==o||f.checkId(o)||f.isShortLink(o),'Illegal invocation of displayBoard: idCard must be a card ID or a short link (got "'+o+'")'),u=g.once(function(e){return p.for("top-level","loadCardData",e).catch(s,function(){return m.reject(l.CardNotFound())})}),t=function(e){return function(t){var r;return r=t.model,new m(function(t){return e.waitForId(r,t)})}}(this),r=g.extend({loadCardData:u},e),m.using(this.getSpinner(),function(e){return function(){return p.release("top-level"),m.try(function(){return null!=o?u(o).call("get","idBoard"):n}).then(k).then(function(n){return m.using(_(),function(){return e.renderBoard(n).tap(t).then(b(e,"showBoardDetailView",r))})}).catch(l.ConfirmToView,function(){return v(a.isLoggedIn(),"Got 401: 'Confirm to view' while not logged in"),S(d,"waitFor","Member",a.myId()).then(function(){return e.displayErrorPage(g.extend({errorType:"unconfirmedBoardNotFound"},a.me().toJSON()))})}).catch(l.CardNotFound,function(){return e.displayErrorPage({errorType:"cardNotFound"})}).catch(l.BoardNotFound,function(){return e.displayErrorPage({errorType:"boardNotFound"})}).catch(l.CardNotFoundOnThisBoard,function(t){var r;return r=t.idBoard,i.show("card does not exist","warning","doesnotexist",5e3),e.setBoardLocation(r)})}}(this))}}},{}],4:[function(e,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w;i=e(25),s=void 0,t(function(){return s=e(345)}),a=void 0,t(function(){return a=e(386)}),u=void 0,t(function(){return u=e(388)}),c=void 0,t(function(){return c=e(392)}),l=void 0,t(function(){return l=e(394)}),d=void 0,t(function(){return d=e(396)}),p=void 0,t(function(){return p=e(29)}),h=e(398),m=void 0,t(function(){return m=e(399)}),f=void 0,t(function(){return f=e(583)}),g=void 0,t(function(){return g=e(400)}),v=e(109),y=e("underscore"),o=e("jquery"),w=e(438),b=e(23),r.exports={showHeader:function(e){var t,r,n,_;null==e&&(e={}),o("#header .header-user").remove(),o("#header .header-boards-button").remove(),o("#header #header-search").parent().remove(),o("#header-search").empty(),o(".header-banner").remove(),o("#header nav").remove(),o("#boards-drawer").empty(),_=i.me(),r=p,o("#header").empty().prepend(w.fill("header_logo")),e.promo||!i.isLoggedIn()?o("#header").append(w.fill("header_promo_nav")):(o("#header").append(this.topLevelView(u,_,{modelCache:r}).render().el),e.noSearch||o("#header").append(this.topLevelView(f,_,{modelCache:r}).render().el),o("#header .header-woof").parent().remove(),o("#header").append(this.topLevelView(l,_,{modelCache:r}).render().el),o("#boards-drawer").append(this.topLevelView(s,_,{modelCache:r}).render().el)),o("#header").append(this.topLevelView(c,_,{modelCache:r}).render(e.promo).el),t=y.chain(b).pluck("code").filter(function(e){return 0!==e.indexOf("en")}).value(),null!=this.currentModel.get()&&v.hasValidInviteTokenFor(this.currentModel.get())?(e={modelCache:this.getCurrentModelCache()},this.onAnyBoardView()?e.idBoard=this.currentModel.get().id:this.onAnyOrganizationView()&&(e.idOrganization=this.currentModel.get().id),o("#header").after(this.topLevelView(d,_,e,this.currentModel.get().id).render().el)):i.isLoggedIn()&&!i.confirmed()?o("#header").after(this.topLevelView(a,_,{modelCache:r}).render().el):i.isLoggedIn()&&!i.canLogIn()?o("#header").after(this.topLevelView(g,_,{modelCache:r}).render().el):i.isLoggedIn()&&(n=y.find(t,function(e){return i.me().shouldShowNewLanguageBannerFor(e)}))?o("#header").after(this.topLevelView(h,_,{modelCache:r,locale:n}).render().el):!i.isLoggedIn()&&this.onAnyBoardView()&&this.currentModel.get().isPublic()&&o("#header").after(this.topLevelView(m,this.currentModel.get(),{modelCache:this.getCurrentModelCache()}).render().el),_.checkColorBlindMode()}}},{}],5:[function(e,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M,B,T,O,L,P,A,E,D,I,V,N,$,z,F,R,U,q,H,K,W,J,G,Q=function(e,t){function r(){this.constructor=e}for(var n in t)Y.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},Y={}.hasOwnProperty;o=e("jquery"),i=void 0,t(function(){return i=e(451)}),a=void 0,t(function(){return a=e(252)}),u=void 0,t(function(){return u=e(402)}),c=e(25),l=e(205),d=void 0,t(function(){return d=e(137)}),p=void 0,t(function(){return p=e(330)}),m=void 0,t(function(){return m=e(454)}),f=e(69),g=void 0,t(function(){return g=e(70)}),v=e("hearsay"),y=e(16),b=void 0,t(function(){return b=e(178)}),w=void 0,t(function(){return w=e(29)}),_=void 0,t(function(){return _=e(30)}),k=void 0,t(function(){return k=e(180)}),C=void 0,t(function(){return C=e(182)}),x=void 0,t(function(){return x=e(458)}),j=e("bluebird"),S=void 0,t(function(){return S=e(239)}),M=void 0,t(function(){return M=e(240)}),W=e(38),T=e(109),B=e(439),O=e("underscore"),z=e(89),K=e(438),$=e(84),L=e(62),A=e(209),s=e(191),G=e("xtend"),I=e(33),q=function(e){return RegExp("^/"+T.escapeForRegex(e)+"/([a-zA-Z0-9]{8})(/|$)")},D=function(e){var t;return null!=(t=q("c").exec(e))?t[1]:void 0},E=function(e){var t;return null!=(t=q("b").exec(e))?t[1]:void 0},R=function(e,t){return e&&t&&e===t},N=function(e,t){var r,n,o,i;return o=D(e),i=D(t),R(o,i)?!0:(r=E(e),n=E(t),R(r,n)?!0:!1)},V=function(e,t){var r;return r=c.isLoggedIn()?_.for("header",e):j.resolve(null),r.then(function(){return _.triggerWaits(t)}).done()},z(f,h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Q(t,e),t.prototype.initialize=function(){return this._savedTitle="",this.currentModel=new v.Slot(null),this.currentModel.use()},t.prototype.start=function(){return V("loadHeaderData","headerData"),setTimeout(A(V,"loadBoardsMenuData","boardsData"),500),B.addHandler({shortcut:function(e){return function(t){return t===y.QuestionMark?(e.navigate("shortcuts"),e.shortcutsView(),"Shortcuts page"):void 0}}(this)},{scope:"global"})},t.prototype.viewType="none",t.prototype.topLevelView=function(e,t,r){return null==this.applicationView&&(this.applicationView=new a),null==r&&(r={}),null==r.modelCache&&(r.modelCache=this.getCurrentModelCache()),this.applicationView.subview(e,t,r)},t.prototype.existingTopLevelView=function(e,t){return this.applicationView.existingSubview(e,t)},t.prototype.existingTopLevelViewOrUndefined=function(e,t){var r;return null!=(r=this.applicationView)?r.existingSubviewOrUndefined(e,t):void 0},t.prototype.title=function(e){var t,r,n,o,i;return null!=e&&(this._savedTitle=e),o=k.unreadCount(w),i=o?"("+o+") ":"",t=i,(null!=(r=this._savedTitle)?r.length:void 0)>0&&(t+=this._savedTitle+" | "),t+="Trello",null!=(n=window.fluid)&&(n.dockBadge=o?o:null),g.setNotifications(o>0),document.title=t},t.prototype.setLocation=function(e){var t,r,n;n=e.title,t=e.location,r=e.options,null!=n&&this.title(n),t&&(/^#/.test(t)&&(t=t.substr(1)),this.navigate(t,r),this.location=t)},t.prototype.showingCalendar=function(e){return(null!=e?e.$(".calendar-wrapper").length:void 0)>0},t.prototype.setBoardLocation=function(e,t,r,n){var o;null==t&&(t=""),null==r&&(r=[]),o=w.get("Board",e).get("name"),this.setLocation({title:o,location:this.getBoardUrl(e,t,r),options:n})},t.prototype.saveMemberBoardProfileLocation=function(e,t){return this.setLocation({title:e.get("fullName"),location:this.getMemberBoardProfileUrl(e.get("username"),t)})},t.prototype.isOnSearchPage=function(){return"search"===this.currentPage},t.prototype.onAnyOrganizationView=function(){return this.currentModel.get()instanceof C},t.prototype.onOrganizationView=function(e){return this.onAnyOrganizationView()&&this.currentModel.get().id===e},t.prototype.onAnyBoardView=function(){return this.currentModel.get()instanceof d},t.prototype.onBoardView=function(e){return this.onAnyBoardView()?T.checkId(e)?this.currentModel.get().id===e:T.isShortLink(e)?this.currentModel.get().get("shortLink")===e:void 0:!1},t.prototype.getCurrentBoardView=function(){return this.existingTopLevelViewOrUndefined(p,this.getCurrentBoard())},t.prototype.getCurrentBoard=function(){return this.onAnyBoardView()?this.currentModel.get():null},t.prototype.getCurrentModelCache=function(){return this.currentModelCache},t.prototype.saveBoardsView=function(){null==this.savedBoardViewInformation&&this.onAnyBoardView()&&(this.savedBoardViewInformation={idBoard:this.currentModel.get().id,path:/\/b\/[^\/]*\/(.*)/.exec(this.location)[1]})},t.prototype.loadBoardsView=function(){var e,t,r;if(this.savedBoardViewInformation)return r=this.savedBoardViewInformation,e=r.idBoard,t=r.path,this.boardView(e,t),delete this.savedBoardViewInformation},t.prototype.clearPreviousView=function(){var e;this.overBoardsPage&&(this.overBoardsPage=!1),S.setQuery(""),null!=(e=this.applicationView)&&e.remove(),delete this.applicationView,x.hide(),m.isVisible&&m.hide(!0),o("#content").html(""),o("body").scrollTop("0").removeClass("body-single-column body-tabbed-page body-search-page body-board-view body-custom-board-background body-custom-board-background-tiled body-light-board-background body-dark-board-background body-default-header").css({"background-image":"","background-color":""},u.clear())},t.prototype.setViewType=function(e){var t;this.currentModel.get()instanceof d&&this.currentModel.get().markAsViewed(),O.isString(e)?(this.currentModelCache=w,this.currentModel.set(null)):(this.currentModelCache=e.modelCache,this.currentModel.set(e)),this.currentPage=e,this.currentModel.get()instanceof d?(t=this.currentModel.get(),this.waitForId(t,function(){return t.markAsViewed(),M.pushBoard(t.id)})):g.setBackground({useDefault:!0})},t.prototype.onCardView=function(){return/^c\/[a-zA-Z0-9]{8}(\/[^\/]+)?/.test(l.history.fragment)},t.prototype.organizationById=function(e){return _.for("top-level","loadOrgNameById",e).then(function(e){return function(t){return e.organizationBoardsView(t)}}(this)).catch(s,function(e){return function(){return e.displayErrorPage()}}(this)).done()},t.prototype.getSpinner=function(){return o(".header-logo").addClass("is-throbbing"),j.resolve().disposer(function(){o(".header-logo").removeClass("is-throbbing")})},t.prototype.syncError=function(){i.showHtml(K.fill("sync_error"),"error","modelSync"),this._reportedError||(this._reportedError=!0,W("Error","Sync Error"))},t}(l.Router)),F=l.History.prototype.navigate,J=function(e){return""===e&&(e="boards"),"function"==typeof window.ga&&window.ga("send","pageview","/"+e),"function"==typeof window.sp?window.sp("trackPageView",null,I()):void 0},O.extend(l.History.prototype,{navigate:function(e,t){N(e,this.location.pathname)&&(t=G(t,{replace:!0})),F.call(this,e,t),J(e)}}),P=[e(3),e(11),e(4),e(10),e(9),e(6),e(12),e(1),e(7),e(8),e(2)],U=O.chain(P).map(function(e){return O.extend(h.prototype,e),delete h.prototype.routes,e.routes}).compact().flatten(!0).value().reverse(),H=new h,U.forEach(function(e){var t,r;return r=e[0],t=e[1],H.route(r,t)}),r.exports=H},{}],6:[function(e,r,n){var o,i,s,a,u,c,l,d,p,h,m;o=e("jquery"),i=e(191),s=void 0,t(function(){return s=e(192)}),a=e(25),u=void 0,t(function(){return u=e(444)}),c=void 0,t(function(){return c=e(29)}),l=void 0,t(function(){return l=e(30)}),d=e(197),p=e("bluebird"),h=e("underscore"),m=function(e){var t,r,n,i,s;return r=o.cookie("invitation")||"",n=r.split(":"),s=n[0],t=n[1],i=n[2],s!==e&&(t=null),{id:t,secret:i}},r.exports={routes:[["invite/accept-board","handleBoardCookieInvitation"],["invite/accept-team","handleTeamCookieInvitation"]],_handleInvitation:function(e){var t,r,n,c,d,h,m,f;return n=e.id,c=e.loadModel,m=e.targetUrl,f=e.viewType,t=e.apiUrl,d=e.nameFromInvite,h=function(e){return function(){return l.await("headerData").then(function(){if(!a.isLoggedIn())throw i.Unauthorized();return c()}).then(function(){var t;if(null!=(t=m()))return e.navigate(t,{trigger:!0});throw i.Unauthorized()})}}(this),r=null!=t?s({url:t,type:"get"}):p.reject(i.NotFound()),p.using(this.getSpinner(),function(e){return function(){return h().catch(i.NotFound,i.Unauthorized,function(){var n;return e.clearPreviousView(),n=a.me(),null!=n&&e.setViewType(n),e.showHeader(),r.then(function(r){return new p(function(i,a){var c;return c=e.topLevelView(u,n,{inviter:r.memberInviter,name:d(r),fxJoin:function(){return s({method:"post",url:t}).then(h).then(i,a)}}),o("#content").html(c.render().el)})})})}}(this))},handleBoardInvitation:function(e,t){var r;r=e&&t?"/1/board/"+e+"/invitationSecret/"+t:null,this._handleInvitation({loadModel:function(){if(e)return l.for("top-level","loadBoardData",e,d.currentBoardMinimal);throw i.BadRequest("invalid board shortLink")},targetUrl:function(t){return function(){var r;return null!=(r=c.get("Board",e))&&r.isMember(a.me())?t.getBoardUrl(r):null}}(this),viewType:"board-invitation-link",apiUrl:r,nameFromInvite:function(e){return e.board.name}}).catch(i,function(e){return function(){return e.displayErrorPage({errorType:"boardInvitationNotFound"})}}(this)).done()},handleOrgInvitation:function(e,t){var r;r=e&&t?"/1/organization/"+e+"/invitationSecret/"+t:null,this._handleInvitation({loadModel:function(){if(e)return l.for("top-level","loadOrganizationData",e);throw i.BadRequest("invalid orgname")},targetUrl:function(t){return function(){var r;return null!=(r=c.findOne("Organization",function(t){return t.get("name")===e}))&&r.isMember(a.me())?t.getOrganizationUrl(e):null}}(this),viewType:"org-invitation-link",apiUrl:r,nameFromInvite:function(e){return e.organization.displayName}}).catch(i.Conflict,function(e){return function(t){if(/ENTERPRISE_STATE_VIOLATION/.test(t.message))return e.displayErrorPage({errorType:"memberMustBeInEnterprise"});throw t}}(this)).catch(i,function(e){return function(t){return e.displayErrorPage({errorType:"orgInvitationNotFound"})}}(this)).done()},handleBoardCookieInvitation:function(){var e,t,r;return e=m("board"),r=e.id,t=e.secret,this.handleBoardInvitation(r,t)},handleTeamCookieInvitation:function(){var e,t,r;return t=m("organization"),e=t.id,r=t.secret,this.handleOrgInvitation(e,r)}}},{}],7:[function(e,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k;s=e(25),a=void 0,t(function(){return a=e(454)}),w=e(84),u=void 0,t(function(){return u=e(178)}),c=void 0,t(function(){return c=e(485)}),l=void 0,t(function(){return l=e(489)}),d=void 0,t(function(){return d=e(491)}),p=void 0,t(function(){return p=e(496)}),h=void 0,t(function(){return h=e(501)}),m=void 0,t(function(){return m=e(502)}),f=void 0,t(function(){return f=e(29)}),g=void 0,t(function(){return g=e(30)}),v=e("bluebird"),k=e(101),o=e("jquery"),_=e(35),y=e("underscore"),b=e(62),i=e(191),r.exports={routes:[["","memberBoardsView"],[":username/cards","memberCardsView"],[":username/notifications","memberNotificationsView"]],displayMemberPage:function(e){var t,r,n,u,c,l,d,p,h,m;return h=e.username,c=e.loadFn,m=e.viewClass,n=e.getLocation,t=e.bodyClass,u=e.inDialogIfOnBoard,l=e.maxDialogWidth,d=e.product,p=e.titleKey,null==h&&(h=s.myUsername()),r=this.onAnyBoardView()&&u||this.overBoardsPage,_("controller",["memberBoardsView"]),v.using(this.getSpinner(),function(u){return function(){return g.release("top-level"),g.for("top-level",c,h).then(function(i){var c,l,h,g;r&&u.saveBoardsView(),r||u.clearPreviousView(),u.setViewType(i),h={product:d,modelCache:f},r?(l=new m(y.extend({model:i},h)),c=null,null!=e.maxDialogWidth&&(c=e.maxDialogWidth),a.show({isNavigating:!0,view:l,maxWidth:c,hide:function(e){return e?void 0:u.loadBoardsView()}})):(l=u.topLevelView(m,i,h),u.showHeader(),t?o("body").addClass(t):o("body").addClass("body-tabbed-page"),o("#content").html(l.render().el)),g=s.isMe(i)&&null!=p?w(["page title",p]):i.get("fullName")+" ("+i.get("username")+")",u.setLocation({title:g,location:n.call(u,i.get("username"),d),options:{replace:!0}})}).catch(i,function(){u.displayErrorPage()})}}(this))},memberBoardsView:function(){var e;return s.isLoggedIn()?(e={username:"me",loadFn:"loadMemberBoardsData",viewClass:d,getLocation:this.getMemberBoardsUrl,titleKey:"boards"},this.displayMemberPage(e).then(k).done()):this.displayErrorPage()},memberNotificationsView:function(e){return null==e&&(e="me"),s.isLoggedIn()?(e="me",this.displayMemberPage({username:e,loadFn:"loadNotificationData",viewClass:h,inDialogIfOnBoard:!0,maxDialogWidth:530,getLocation:this.getMemberNotificationsUrl,titleKey:"notifications"}).done()):this.displayErrorPage()},memberProfileView:function(e){return null==e&&(e="me"),this.displayMemberPage({username:e,loadFn:"loadMemberProfileData",viewClass:m,getLocation:this.getMemberProfileUrl,titleKey:"profile"}).done()},memberCardsView:function(e,t){var r;return null==e&&(e="me"),r=y.extend({username:e,loadFn:"loadMemberCardsData",viewClass:p,getLocation:this.getMemberCardsUrl,titleKey:"cards"},t),this.displayMemberPage(r).done()},memberAccountView:function(e){return e="me",this.displayMemberPage({username:e,loadFn:"loadMemberAccountData",viewClass:c,getLocation:this.getMemberAccountUrl,titleKey:"settings"}).done()},memberBillingView:function(e){return e="me",this.displayMemberPage({username:e,loadFn:"loadMemberAccountData",viewClass:l,getLocation:this.getMemberBillingUrl,titleKey:"billing"}).done()}}},{}],8:[function(e,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C;s=e(25),a=void 0,t(function(){return a=e(454)}),u=void 0,t(function(){return u=e(178)}),c=void 0,t(function(){return c=e(29)}),l=void 0,t(function(){return l=e(30)}),d=void 0,t(function(){return d=e(182)}),p=void 0,t(function(){return p=e(533)}),h=void 0,t(function(){return h=e(535)}),m=void 0,t(function(){return m=e(539)}),f=void 0,t(function(){return f=e(540)}),g=void 0,t(function(){return g=e(544)}),v=void 0,t(function(){return v=e(549)}),o=e("jquery"),_=e(35),b=e("underscore"),w=e(209),y=e("bluebird"),k=e(112),i=e(191),C=e("xtend"),r.exports={routes:[["org/:id","organizationById"],[":name/members","organizationMembersView"],[":name/:username/cards","organizationMemberCardsView"],[":name/export","organizationExportView"]],organizationBoardsView:function(e){return this.displayOrganizationPage({orgname:e,loadFn:"loadOrganizationBoardsData",additionalFns:{members:"loadOrganizationMemberGhost"},viewClass:m,getLocation:this.getOrganizationUrl}).done()},organizationMembersView:function(e){return this.displayOrganizationPage({orgname:e,loadFn:"loadOrganizationMembersData",viewClass:v,getLocation:this.getOrganizationMembersUrl}).get("id").then(w(l,"loadOrganizationMembersExtraData")).done()},organizationMemberCardsView:function(e,t){return this.displayOrganizationPage({orgname:e,username:t,loadFn:"loadOrganizationMinimal",additionalFns:{cards:"loadOrgMemberCardData",members:"loadOrganizationMemberMinimal"},viewClass:g,getLocation:this.getOrganizationMemberCardsUrl}).done()},organizationAccountView:function(e){return this.displayOrganizationPage({orgname:e,loadFn:"loadOrganizationData",viewClass:p,getLocation:this.getOrganizationAccountUrl,membersOnly:!0}).done()},organizationExportView:function(e){return this.displayOrganizationPage({orgname:e,loadFn:"loadOrganizationExportData",viewClass:f,getLocation:this.getOrganizationExportUrl,adminOnly:!0}).done()},organizationBillingView:function(e){return this.displayOrganizationPage({orgname:e,loadFn:"loadOrganizationData",viewClass:h,getLocation:this.getOrganizationBillingUrl,adminOnly:!0}).done()},displayOrganizationPage:function(e){var t,r,n,d;return r=e.orgname,d=e.username,n=e.product,t=this.onAnyBoardView()&&e.inDialogIfOnBoard||this.overBoardsPage,_("controller",["organization"]),y.using(this.getSpinner(),function(p){return function(){return l.release("top-level"),l.for("top-level",e.loadFn,r).tap(function(t){var r;return y.all(b.values(null!=(r=e.additionalFns)?r:{}).map(function(e){return l[e](t.id,d)}))}).then(function(i){var l,h,m,f,g,v;return m=c.findOne(u,"username",d),!i.owned()&&e.adminOnly||!i.isMember(s.me())&&e.membersOnly||null!=e.businessClass&&!i.isFeatureEnabled(e.businessClass)?(p.organizationBoardsView(r),i):(t?p.saveBoardsView():p.clearPreviousView(),p.setViewType(i),f={},m&&(f.member=m),null!=n&&(f.product=n),f.modelCache=p.getCurrentModelCache(),t?(h=null,null!=e.maxDialogWidth&&(h=e.maxDialogWidth),g=new e.viewClass(b.extend({model:i},f)),a.show({isNavigating:!0,view:g,maxWidth:h,hide:function(e){return e?void 0:p.loadBoardsView()}})):(g=p.topLevelView(e.viewClass,i,f),p.showHeader(),o("body").addClass("body-tabbed-page"),o("#content").html(g.render().el)),v=i.get("displayName")+" ("+i.get("name")+")",l=e.getLocation.apply(p,m?[i.get("name"),m.get("username")]:n?[i.get("name"),n]:[i.get("name")]),p.setLocation({title:v,location:l}),i)}).catch(i.Unconfirmed,function(){return k(c,"waitFor","Member",s.myId()).then(function(){return p.displayErrorPage(b.extend({errorType:"unconfirmedOrgNotFound"},s.me().toJSON()))})}).catch(i,function(){return p.displayErrorPage()})}}(this))}}},{}],9:[function(e,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y;i=e(25),s=void 0,t(function(){return s=e(524)}),a=void 0,t(function(){return a=e(454)}),u=void 0,t(function(){return u=e(178)}),c=void 0,t(function(){return c=e(29)}),l=void 0,t(function(){return l=e(30)}),d=e("bluebird"),p=void 0,t(function(){return p=e(583)}),h=void 0,t(function(){return h=e(239)}),m=e(109),o=e("jquery"),g=e(84),v=e(35),f=e("underscore"),y=e(438),r.exports={routes:[["shortcuts","shortcutsView"],["blank","blankView"],["select-org-to-upgrade","businessClassSelectOrgView"],["select-team-to-upgrade","businessClassSelectTeamView"],["search(?*query)","searchView"]],businessClassSelectOrgView:function(){this.navigate("/select-team-to-upgrade",{replace:!0,trigger:!0})},businessClassSelectTeamView:function(){var e;return e="/select-team-to-upgrade",i.isLoggedIn()?d.using(this.getSpinner(),function(t){return function(){return l.for("top-level","loadMyOrganizations").then(function(r){var n,i;return t.setViewType("select-org"),n=f.filter(r.organizationList.models,function(e){return!e.isPremium()}),1===n.length?void t.navigate("/"+n[0].get("name")+"/billing",{trigger:!0}):(t.setLocation({title:g("select organization to upgrade to business class"),location:e}),t.clearPreviousView(),i=t.topLevelView(s,r),t.showHeader(),o("#content").html(i.render().el))})}}(this)).done():void(window.location="/login?returnUrl="+e)},searchView:function(){return v("controller",["searchView"]),d.using(this.getSpinner(),function(e){return function(){return l.await("headerData").then(function(){var t,r,n,s,a;e.setViewType("search"),e.clearPreviousView(),n=i.me(),t=c,s=m.getQueryParameter("q",""),r=e.topLevelView(p,n,{modelCache:t}),a=r.getResultsView(),h.setQuery(s),a.update(),e.showHeader({noSearch:!0}),o("body").addClass("body-search-page"),o("#content").append(r.render().el).append(a.render().el),f.defer(function(){return r.focusInput()})})}}(this)).done()},blankView:function(){return d.using(this.getSpinner(),function(e){return function(){return l.await("headerData").then(function(){e.setViewType("blank"),e.clearPreviousView(),e.showHeader()})}}(this)).done()},shortcutsView:function(){l.waitFor("headerData",function(e){return function(){var t,r;return r=g("keyboard shortcuts"),t="shortcuts",e.onAnyBoardView()||e.overBoardsPage?(e.saveBoardsView(),a.show({html:y.fill("shortcuts"),maxWidth:550,hide:function(t){return t?void 0:e.loadBoardsView()}}),e.setLocation(r,t)):e.staticView({title:r,location:t,bodyClass:"body-single-column",template:function(){return y.fill("shortcuts")}})}}(this))},staticView:function(e){var t,r,n,i,s,a,u;return a=e.title,n=e.location,i=e.template,s=e.templateData,t=e.bodyClass,u=e.viewType,r=e.headerOpts,v("controller",[n+"View"]),d.using(this.getSpinner(),function(e){return function(){return l.await("headerData").then(function(){return e.setViewType(null!=u?u:n),e.clearPreviousView(),e.showHeader(r),i(s)}).then(function(r){return o("body").addClass(t),o("#content").html(r),e.setLocation({title:a,location:n})})}}(this)).done()}}},{}],10:[function(e,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g;o=e("jquery"),u=e("underscore"),s=void 0,t(function(){return s=e(30)}),i=e(25),a=e("bluebird"),h=function(e){return e.toLowerCase().replace(/[-_()\[\]:,]/g," ").replace(/\s+/g," ")},l=function(e,t){var r;return r=h(t),u.find(e,function(e){return h(e.get("name"))===r})},g=function(e){return e.toLowerCase().split(/[-_ ]/)},f=function(e,t){var r;return r=g(t),u.find(e,function(e){var t;return t=g(h(e.get("name"))),u.all(r,function(e){return u.any(t,function(t){return 0===t.indexOf(e)})})})},p=function(e,t){var r;return r=g(t),u.find(e,function(e){var t;return t=h(e.get("name")),u.all(r,function(e){return-1!==t.indexOf(e)})})},m=function(e){return e.isOpen()},c=function(e){return-new Date(e.get("dateLastActivity"))},d=function(e){return e.replace(/[-_ ]+/g," ")},r.exports={routes:[["go/*search","quickBoard"],["to/*search","quickBoard"],["/*search","quickBoard"]],quickBoard:function(e){return e=decodeURIComponent(e),i.isLoggedIn()?void a.using(this.getSpinner(),function(t){return function(){return a.all([s.await("headerData").then(function(){return t.showHeader()}),a.try(function(){return e?s.for("top-level","loadQuickBoardsSearch",d(e)):void 0}),s.for("top-level","loadQuickBoardsData")]).then(function(){var r,n,o,s,a,u,h,g,v,y,b,w,_;for(y=i.me(),_=y.boardStarList.chain().invoke("getBoard").compact().filter(m).value(),b=y.boardList.chain().filter(m).sortBy(c).value(),w=y.organizationList.chain().pluck("boardList").pluck("models").flatten().filter(m).sortBy(c).value(),v=[l,f,p],o=[_,b,w],s=0,u=v.length;u>s;s++)for(g=v[s],a=0,h=o.length;h>a;a++)if(n=o[a],null!=(r=g(n,e)))return history.replaceState(null,null,t.getBoardUrl(r)),void t.displayBoard({idBoard:r.id});return t.navigate("/search?q="+encodeURIComponent(d(e)),{trigger:!0})})}}(this)).done():void(window.location="/login?returnUrl="+encodeURIComponent("//"+e))}}},{}],11:[function(e,r,n){var o,i,s,a;o=e(25),i=void 0,t(function(){return i=e(29)}),s=e(109),a=e("underscore"),r.exports={getSearchUrl:function(e){return"/search?q="+encodeURIComponent(e)},getOrganizationUrl:function(e){var t;return t=a.isString(e)?e:e.get("name"),"/"+t},_orgUrl:function(e,t){return""+this.getOrganizationUrl(e)+t},getOrganizationMemberCardsUrl:function(e,t){return this._orgUrl(e,"/"+t+"/cards");
},getOrganizationAccountUrl:function(e){return this._orgUrl(e,"/account")},getOrganizationBillingUrl:function(e){return this._orgUrl(e,"/billing")},getOrganizationExportUrl:function(e){return this._orgUrl(e,"/export")},getOrganizationMembersUrl:function(e){return this._orgUrl(e,"/members")},getBoardUrl:function(e,t,r){var n,o,a,u,c,l,d;for(null==r&&(r=[]),null!=(null!=e?e.id:void 0)&&(e=e.id),o=i.get("Board",e),null!=(d=null!=o?o.get("url"):void 0)?n=s.relativeUrl(d):(c=null!=o?o.get("name"):void 0,n=c?"/board/"+s.makeSlug(c)+"/"+e:"/board/"+e),t&&(n+="/"+t),a=0,u=r.length;u>a;a++)l=r[a],n+="/"+l;return n},getBoardShortUrl:function(e,t){var r,n,o,a;return null!=(null!=e?e.id:void 0)&&(e=e.id),n=i.get("Board",e),null!=(a=null!=n?n.get("shortUrl"):void 0)?r=s.relativeUrl(a):(o=null!=n?n.get("shortLink"):void 0,r="/b/"+o),t&&(r+="/"+t),r},getMemberBoardProfileUrl:function(e,t){return[this.getBoardUrl(t),"member",e].join("/")},getMemberProfileUrl:function(e){return null==e&&(e=o.myUsername()),"/"+e},getMemberNotificationsUrl:function(e){return null==e&&(e=o.myUsername()),"/"+e+"/notifications"},getMemberBoardsUrl:function(e){return null==e&&(e=o.myUsername()),e===o.myUsername()?"/":"/"+e+"/boards"},getMemberCardsUrl:function(e){return null==e&&(e=o.myUsername()),"/"+e+"/cards"},getMemberAccountUrl:function(e){return null==e&&(e=o.myUsername()),"/"+e+"/account"},getMemberBillingUrl:function(e){return null==e&&(e=o.myUsername()),"/"+e+"/billing"},getCardUrl:function(e,t){var r,n,o,i;return r=null!=(i=e.get("url"))?s.relativeUrl(i):(n=e.get("name"),this.getCardUrlWithoutModels(e.get("idBoard"),null!=(o=e.get("idShort"))?o:e.id,n)),t?[r,t].join("#"):r},getCardUrlWithoutModels:function(e,t,r){return null==t?null:s.isShortId(t)?"/card/"+s.makeSlug(r)+"/"+e+"/"+t:"/card/board/"+s.makeSlug(r)+"/"+e+"/"+t},getBoardInvitationLinkUrl:function(e,t){return"/invite/b/"+e.get("shortLink")+"/"+t+"/"+s.makeSlug(e.get("name"))},getOrganizationInvitationLinkUrl:function(e,t){return"/invite/"+e.get("name")+"/"+t},getActionUrl:function(e){var t,r;return r=e.isCommentLike()?"comment":"action",t=[r,e.id].join("-"),this.getCardUrl(e.getCard(),t)}}},{}],12:[function(e,r,n){var o,i,s,a,u,c,l,d;o=e("jquery"),i=e(191),s=void 0,t(function(){return s=e(192)}),a=e("bluebird"),u=e(95),c=e("underscore"),d=e(209),l=e(62),r.exports={routes:[[":name/account","userOrOrgAccountView"],[":name/billing","userOrOrgBillingView"],[":name/billing/card","userOrOrgBillingCardView"],[":name/billing/card/:product","userOrOrgBillingCardView"],[":name(/)","userOrOrgProfileView"]],userOrOrgProfileView:function(e){null==e&&(e="me"),this.userOrOrgView(e,this.memberProfileView,this.organizationBoardsView)},userOrOrgAccountView:function(e){null==e&&(e="me"),this.userOrOrgView(e,this.memberAccountView,this.organizationAccountView)},userOrOrgBillingView:function(e){null==e&&(e="me"),this.userOrOrgView(e,this.memberBillingView,this.organizationBillingView)},userOrOrgBillingCardView:function(e,t){null==e&&(e="me"),this.navigate([e,"billing"].join("/"),{replace:!0,trigger:!0})},getViewData:function(e){var t,r;return t="typeof_"+e,null!=(r=u.get(t))?a.resolve(r):s({url:"/1/types/"+e}).tap(d(u,"set",t))},userOrOrgView:function(e,t,r){return this.getViewData(e).then(function(n){return function(o){var i;return i=function(){switch(o.type){case"member":return t;case"organization":return r}}(),l(null!=i,"/1/types/"+e+" resolved to "+o.type),i.call(n,e)}}(this)).catch(i.NotFound,function(e){return function(){return e.displayErrorPage()}}(this)).done()}}},{}],13:[function(e,t,r){var n,o;o="http://creativecommons.org/licenses/by/2.0/deed.en",n={photos:{name:"Photos"},patterns:{name:"Patterns and Textures"}},t.exports={blue:{type:"default",brightness:"dark",color:"#0079BF"},orange:{type:"default",brightness:"dark",color:"#D29034"},green:{type:"default",brightness:"dark",color:"#519839"},red:{type:"default",brightness:"dark",color:"#B04632"},purple:{type:"default",brightness:"dark",color:"#89609E"},pink:{type:"default",brightness:"dark",color:"#CD5A91"},lime:{type:"default",brightness:"dark",color:"#4BBF6B"},sky:{type:"default",brightness:"dark",color:"#00AECC"},grey:{type:"default",brightness:"dark",color:"#838C91"},mountain:{type:"premium",pack:n.photos,brightness:"light",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/mountain/171b0c9aea08e21f0020f359408b73e4/full.jpg",scaled:[{width:2400,height:1696,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/mountain/46616ebeae7245d4a16cf00cf1e21e86/large.jpg"},{width:1024,height:724,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/mountain/07627e0760eb74e7109a82057ac86881/medium.jpg"},{width:320,height:227,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/mountain/da8d70dd70d666361767b9e30acdba65/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/62681247@N00/6575973407/",name:"jqmj (Queralt)",license:o}},cosmos:{type:"premium",pack:n.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/cosmos/92448e055514fdc92923c9b591aa31df/full.jpg",scaled:[{width:2047,height:1638,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/cosmos/be5121d350dd3e3ac97e209c3a7fce58/large.jpg"},{width:1600,height:1280,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/cosmos/f95acce485fc44f9a07853aa15965f90/medium.jpg"},{width:320,height:256,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/cosmos/0646808c900b7409dbeb96d36f55e980/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/gsfc/6945160410/",name:"NASA Goddard Space Flight Center",license:o}},rain:{type:"premium",pack:n.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/rain/2e8209ee9f21d7147a24cac28ea61358/full.jpg",scaled:[{width:2400,height:1600,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/rain/9de9b88a694019ab77d129f1729b05b7/large.jpg"},{width:1024,height:683,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/rain/b8ac88f9c4e8097c1ef8cc269d66e089/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/rain/e9147244c93e3990f361bc8123cacca9/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/vinothchandar/5243641910/",name:"Vinoth Chandar",license:o}},dew:{type:"premium",pack:n.photos,brightness:"light",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/dew/1d638bc56d179d5a8c35177305d4ea09/full.jpg",scaled:[{width:2400,height:1594,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/dew/5b5f4c5cd0d7e144e40168345c8c6075/large.jpg"},{width:1024,height:680,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/dew/3c8daf991e3132f453ad0c822175b34d/medium.jpg"},{width:320,height:212,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/dew/71633df28ad4038a6fb6f647c1b29b27/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/jenny-pics/5584430423/",name:"Jenny Downing",license:o}},"snow-bokeh":{type:"premium",pack:n.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow-bokeh/75b2ce11e6652e76ad0d3629d9886ca5/full.jpg",scaled:[{width:2400,height:1596,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow-bokeh/11fc1afae97ec97b3b46b149d701e180/large.jpg"},{width:1024,height:681,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow-bokeh/9f4c60883dec8b5aa5bc949607081505/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow-bokeh/d74c2d921e28c822e92b881b3e2cb10b/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/tabor-roeder/5337595458/",name:"Phil Roeder",license:o}},city:{type:"premium",pack:n.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/city/1bbbf09d491d444d207e5d8b792a86ba/full.jpg",scaled:[{width:2400,height:1594,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/city/d23508735801f1190b365330eb8ec0a5/large.jpg"},{width:1024,height:680,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/city/a7eea5e35c08388ec3da7dbc814f1da2/medium.jpg"},{width:320,height:212,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/city/27e00a7bee7a783ae7568a819fa9bb97/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/nosha/2907855809/",name:"Nathan Siemers",license:o}},canyon:{type:"premium",pack:n.photos,brightness:"light",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/canyon/0c35d8049641c307de51cac7d449bf4e/full.jpg",scaled:[{width:2400,height:1596,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/canyon/ee79179217e377e332d217cbe10405b4/large.jpg"},{width:1024,height:681,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/canyon/976ada2d506ebb7c2f8708f2ccc47192/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/canyon/1478a9382a5ab8c493685223ff36e6f7/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/wolfgangstaudt/2252688630/",name:"Wolfgang Staudt",license:o}},ocean:{type:"premium",pack:n.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/ocean/4ce437330ab9d2fe40dd3d8504a143e6/full.jpg",scaled:[{width:2400,height:1600,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/ocean/ede6927e92b4515102b2d86e919c77fa/large.jpg"},{width:1024,height:683,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/ocean/c8a238f606e3288c461fc7ea3daa36d9/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/ocean/2de3527d131722c66ec5315205d64104/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/mattphipps/4635112852/",name:"MattJP",license:o}},river:{type:"premium",pack:n.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/river/b031ec422c9048f4b6fb3b53f80eba3c/full.jpg",scaled:[{width:2400,height:1600,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/river/801d937c765a9996d4eccf4aee6bfc36/large.jpg"},{width:1024,height:683,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/river/67c2c39a74a32f383ffd10dc53ffb535/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/river/15967f866d002762d13d20d258140418/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/22746515@N02/3114276532/",name:"Bert Kaufmann",license:o}},fall:{type:"premium",pack:n.photos,discontinued:!0,fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/fall/72c32b15d265b78e7058896d4bc85c3b/full.jpg",scaled:[{width:2400,height:1596,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/fall/a42f50fe10ff082519a499a2e86be1dc/large.jpg"},{width:1024,height:681,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/fall/a999e10749c6db57a5acd9960324ed6f/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/fall/8c8e3c5c5eebeac446c7e19ee36d23ae/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/mendhak/4107993637/",name:"mendhak",license:o}},snow:{type:"premium",pack:n.photos,discontinued:!0,fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow/d5dd0a98d6b0a7ebcaff02dad1535fab/full.jpg",scaled:[{width:2400,height:1600,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow/149d6adb0c746612aa21ec3c46455583/large.jpg"},{width:1024,height:683,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow/147471be1b6fa8858c40febf9702795b/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow/da5f83eace8c3f4e13f1287cefd07956/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/zachd1_618/5386165480/",name:"Zach Dischner",license:o}},purty_wood_dark:{type:"premium",pack:n.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/7a14a57fef9435b0def0f613d0114334/purty_wood_dark.png",attribution:{url:"http://subtlepatterns.com/purty-wood/",name:"Richard Tabor",license:o}},"subtle-irongrip":{type:"premium",pack:n.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/c9f15836db29df79c2a0092a6758d81e/subtle-irongrip.png",attribution:{url:"http://subtlepatterns.com/iron-grip/",name:"Tony Kinard",license:o}},"red-sweater":{type:"premium",pack:n.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/17d3a6bc27bdcd05caeae11f67fa46d6/red-sweater.png",attribution:{url:"http://subtlepatterns.com/wild-oliva/",name:"Badhon Ebrahim",license:o}},hex:{type:"premium",pack:n.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/2e2cb18ce229869faec815b4d8fe2770/hex.png"},wave:{type:"premium",pack:n.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/bb289a4f00f13e8ca52e67afd11c1648/wave.png"},bricks:{type:"premium",pack:n.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/5e21dfb838e99d8a7c540a2b90d36f29/bricks.png"},"purple-blur":{type:"premium",pack:n.patterns,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/3a02eab932195316109bd905d3341323/purple-blur.png"},"orange-blur":{type:"premium",pack:n.patterns,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/07a3436eabfd187ee94ae8c578584d07/orange-blur.png"}}},{}],14:[function(e,t,r){var n,o,i,s,a,u,c;for(t.exports=n={},c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i=0,s=c.length;s>i;i++)o=c[i],n[o.toLowerCase().charCodeAt(0)]=o;u={" ":"Space","?":"QuestionMark",",":"Comma",".":"Period","/":"ForwardSlash","<":"AngleLeft",">":"AngleRight"};for(o in u)a=u[o],n[o.charCodeAt(0)]=a},{}],15:[function(e,t,r){var n;t.exports=n={8:"Backspace",9:"Tab",10:"LineFeed",13:"Enter",27:"Escape",46:"Delete",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown"}},{}],16:[function(e,t,r){var n,o,i,s,a,u,c,l,d;n=e(14),o=e(15),t.exports=i={Unknown:"Unknown"};for(d in n)c=n[d],i[c]=c;for(d in o)c=o[d],i[c]=c;for(l="0123456789".split(""),a=0,u=l.length;u>a;a++)s=l[a],i["_"+s]=i[s]},{}],17:[function(e,t,r){var n,o,i,s,a,u=[].slice;n=e(71),a=["additionalStickers","customStickers","additionalBoardBackgrounds","customBoardBackgrounds","largeAttachments","customEmoji","savedSearches"],s=u.call(a).concat(["crown"]),i={10:{shortName:"trelloGoldFromBC",name:"Trello Gold from BC",features:a},37:{shortName:"trelloGoldMonthly",name:"Trello Gold",interval:"monthly",price:5,features:s},38:{shortName:"trelloGoldYearly",name:"Trello Gold",interval:"yearly",price:45,features:s}},o={currentProducts:{monthly:"trelloGoldMonthly",yearly:"trelloGoldYearly"},extras:{currentPriceObjectForModel:function(e){var t,r;return t=this.currentProducts.monthly,r=this.currentProducts.yearly,{monthly:{productNumber:this.getProductNumber(t),price:this.getPrice(t),monthlyPrice:this.getPrice(t)},yearly:{productNumber:this.getProductNumber(r),price:this.getPrice(r),monthlyPrice:this.getPrice(r)/12,savePercent:this.getYearlyDiscountPercent(r,t)},billingStrategy:{flatRate:!0}}}}},t.exports=new n(i,o)},{}],18:[function(e,t,r){var n,o,i,s,a,u,c=[].slice;n=e(71),o=["export","logo","observers","removal","activity","deactivated","orgCards","googleApps","orgMembersPage","superAdmins","prefs","inviteOrg","restrictVis","disableExternalMembers"],i=c.call(o).concat(["goldMembers"],["csvExport"],["shortExportHistory"]),s=c.call(i).concat(["tags"],["plugins"]),u={35:{shortName:"businessClassMonthly",name:"Business Class",interval:"monthly",price:25,features:o,hidden:!0,prebill:!1},36:{shortName:"businessClassYearly",name:"Business Class",interval:"yearly",price:200,features:o,hidden:!0},39:{shortName:"businessClassMonthly",name:"Business Class",interval:"monthly",price:50,features:o,hidden:!0},40:{shortName:"businessClassYearly",name:"Business Class",interval:"yearly",price:500,features:o,hidden:!0},96:{shortName:"businessClassMonthly",name:"Business Class",interval:"monthly",price:5,features:i,perUser:!0},97:{shortName:"businessClassYearly",name:"Business Class",interval:"yearly",price:45,features:i,perUser:!0},98:{shortName:"businessClass3Monthly",name:"Business Class",interval:"monthly",price:10,features:s,perUser:!0,perActiveUser:!0},99:{shortName:"businessClass3Yearly",name:"Business Class",interval:"yearly",price:100,features:s,perUser:!0,perActiveUser:!0}},a={globalFeatures:["logo"],currentProducts:{monthly:"businessClass3Monthly",yearly:"businessClass3Yearly"},extras:{BC1Products:[35,36,39,40],currentPriceObjectForModel:function(e){var t,r;return t=this.currentProducts.monthly,r=this.currentProducts.yearly,{monthly:{productNumber:this.getProductNumber(t),price:this.getPrice(t),totalPrice:e.totalPerUserPrice(t),monthlyPrice:this.getPrice(t),totalMonthlyPrice:e.totalPerUserPrice(t)},yearly:{productNumber:this.getProductNumber(r),price:this.getPrice(r),totalPrice:e.totalPerUserPrice(r),monthlyPrice:this.getPrice(r)/12,totalMonthlyPrice:e.totalPerUserPrice(r)/12,savePercent:this.getYearlyDiscountPercent(r,t)},billingStrategy:e.getBillingStrategy(r)}}}},t.exports=new n(u,a)},{}],19:[function(e,t,r){var n,o,i,s;n={"й":"Q","ц":"W","у":"E","к":"R","е":"T","н":"Y","г":"U","ш":"I","щ":"O","з":"P","ф":"A","ы":"S","в":"D","а":"F","п":"G","р":"H","о":"J","л":"K","д":"L","я":"Z","ч":"X","с":"C","м":"V","и":"B","т":"N","ь":"M","б":"Comma","ю":"Period"},i={};for(o in n)s=n[o],i[o.charCodeAt(0)]=s;t.exports=i},{}],20:[function(e,t,r){t.exports=10},{}],21:[function(e,t,r){t.exports=80},{}],22:[function(e,t,r){t.exports={standard:{premium:!1,stickers:[{image:"check",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/90e26477b42f93cf816eecc39c9a7067/check.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/90e26477b42f93cf816eecc39c9a7067/check.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/5168d92437a5fc166632f0006879d5ea/check%402x.png"}]},{image:"heart",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/cc9d955a9ae38ff99b641f8e0ab719ed/heart.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/cc9d955a9ae38ff99b641f8e0ab719ed/heart.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/51a19b35bc5092e9e2761b479ce6105d/heart%402x.png"}]},{image:"warning",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/f8832dabce0aabd9a3b550c6f571bbab/warning.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/f8832dabce0aabd9a3b550c6f571bbab/warning.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e0197b2fb0cbd4a389d4ab5de9e1193a/warning%402x.png"}]},{image:"clock",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/5bd7338f370c3fd7238d40410f200736/clock.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/5bd7338f370c3fd7238d40410f200736/clock.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/b678287abafc2d8c99f3dfa9b8e7a30c/clock%402x.png"}]},{image:"smile",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/90a8856b7465d57b1ac30925181198b4/smile.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/90a8856b7465d57b1ac30925181198b4/smile.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/fa6754c4dd9625bdce765781c5c69635/smile%402x.png"}]},{image:"laugh",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/31ce444242a6f930b52180a2a0d27813/laugh.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/31ce444242a6f930b52180a2a0d27813/laugh.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/6a4570e57d1e3df870143fc016ed2f7d/laugh%402x.png"}]},{image:"huh",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/405fd9e6997ac365e4da29d6e550cd3e/huh.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/405fd9e6997ac365e4da29d6e550cd3e/huh.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/4a513d5705f0f89b365f27ec05784147/huh%402x.png"}]},{image:"frown",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/49afc75f79a5719a3871b3640a4d1e70/frown.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/49afc75f79a5719a3871b3640a4d1e70/frown.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c414ef32894f9c9873142fc964ec4e08/frown%402x.png"}]},{image:"thumbsup",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ebab8d33a9e50bfb92724e51254be4fa/thumbsup.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ebab8d33a9e50bfb92724e51254be4fa/thumbsup.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/6f6cea3566b6fbbc0067561b53f4048a/thumbsup%402x.png"}]},{image:"thumbsdown",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/8accff79fb0229cb8940be8c35aa1838/thumbsdown.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/8accff79fb0229cb8940be8c35aa1838/thumbsdown.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/79d155c5163ee1a67509b789f98a858b/thumbsdown%402x.png"}]},{image:"star",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/4c68ea50e4ffeeb97df52f7849f00845/star.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/4c68ea50e4ffeeb97df52f7849f00845/star.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/27460fa90f9753396db36bf60815e93a/star%402x.png"}]},{image:"rocketship",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/484099c2f7dfcfe5fef9c4245fa2802a/rocketship.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/484099c2f7dfcfe5fef9c4245fa2802a/rocketship.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/5bd888e40e6e27bd733d37015857b218/rocketship%402x.png"}]}]},taco:{premium:!0,stickers:[{image:"taco-love",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c17c5bf93797d71527ee91494fc85e2c/taco-love.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c17c5bf93797d71527ee91494fc85e2c/taco-love.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/06ddf78e10598774b89e3264d8e414da/taco-love%402x.png"}]},{image:"taco-confused",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/511723ee0c932684ca39cdec005bc2c5/taco-confused.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/511723ee0c932684ca39cdec005bc2c5/taco-confused.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/06668f130b632bf4ba0dc7f492628e00/taco-confused%402x.png"}]},{image:"taco-cool",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/f41573409925dd066cb509a465f4b3af/taco-cool.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/f41573409925dd066cb509a465f4b3af/taco-cool.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/8f4ac7820629d5aac2e2faca5b013e4c/taco-cool%402x.png"}]},{image:"taco-angry",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0787bf33623b40f2263dd9b0194c0066/taco-angry.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0787bf33623b40f2263dd9b0194c0066/taco-angry.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/88141aecd4c8fbdc3ff11ef292b4526f/taco-angry%402x.png"}]},{image:"taco-celebrate",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/20b0c2f6c78ca34d7c3d00b658f3b3df/taco-celebrate.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/20b0c2f6c78ca34d7c3d00b658f3b3df/taco-celebrate.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/905a89b9fb1f867747130360e6cbb4d4/taco-celebrate%402x.png"}]},{image:"taco-robot",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c695266748c83f796b9a56ea36f5c2de/taco-robot.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c695266748c83f796b9a56ea36f5c2de/taco-robot.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e1ac5a98088053a8b1ae90cd8f3f056e/taco-robot%402x.png"}]},{image:"taco-alert",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ccbcd6ce73f50359e71ad36316c3bcfb/taco-alert.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ccbcd6ce73f50359e71ad36316c3bcfb/taco-alert.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/60cf2c2b89c387f8c1ed92f301492b28/taco-alert%402x.png"}]},{image:"taco-active",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e027fa08f49b43a503a1e1dea1b854ea/taco-active.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e027fa08f49b43a503a1e1dea1b854ea/taco-active.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/afe6f31288619ede4f82d516cad6a11e/taco-active%402x.png"}]},{image:"taco-money",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/60cee75a249b578892938a6a491031e6/taco-money.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/60cee75a249b578892938a6a491031e6/taco-money.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/f0130dd81ed48f6e4626cbdc233b2fda/taco-money%402x.png"}]},{image:"taco-reading",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/d38e25e615cbc0d15bea3fe3277e4a83/taco-reading.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/d38e25e615cbc0d15bea3fe3277e4a83/taco-reading.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0c3110a4622a680fd4a9b63de14521da/taco-reading%402x.png"}]},{image:"taco-trophy",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/77785938bb3566b20d1eccb83001dddc/taco-trophy.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/77785938bb3566b20d1eccb83001dddc/taco-trophy.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9143546ce5c8a3e43736be79803ead39/taco-trophy%402x.png"}]},{image:"taco-sleeping",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/42698e61c8b85ce46dd08774536b820e/taco-sleeping.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/42698e61c8b85ce46dd08774536b820e/taco-sleeping.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9a51d634e8521dc0e19c09db4df95d8e/taco-sleeping%402x.png"}]},{image:"taco-pixel",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9044b8e8153407d9c35176baf4c41780/taco-pixel.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9044b8e8153407d9c35176baf4c41780/taco-pixel.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3751a48869a42911093b6eae9d0a7f8c/taco-pixel%402x.png"}]},{image:"taco-proto",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/2e050937d34005636192c415252f1b91/taco-proto.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/2e050937d34005636192c415252f1b91/taco-proto.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/51def85cdcf3c1a58cb1ab2ac3749251/taco-proto%402x.png"}]},{image:"taco-embarrassed",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/b84cc7c1ff4c870a78afff5645449883/taco-embarrassed.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/b84cc7c1ff4c870a78afff5645449883/taco-embarrassed.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/02663f87e33a2c79828098d1f2d9a086/taco-embarrassed%402x.png"}]},{image:"taco-clean",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e6462e51e766dbf494e304ea843856d9/taco-clean.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e6462e51e766dbf494e304ea843856d9/taco-clean.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/7c593a77fe481b61a2cad4b74b2f8c1c/taco-clean%402x.png"}]}]},pete:{premium:!0,stickers:[{image:"pete-happy",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ad61d60483a6bdbea53237330ea1183b/pete-happy.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ad61d60483a6bdbea53237330ea1183b/pete-happy.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0663bc183a0cf0d039498cd8c5db8043/pete-happy%402x.png"}]},{image:"pete-love",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e226d3edc2bc1c9439bc812f96527218/pete-love.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e226d3edc2bc1c9439bc812f96527218/pete-love.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/6e461f2c1917d10063fb169a33bb1191/pete-love%402x.png"}]},{image:"pete-broken",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e0c1fadd8cdf3173a4cf9bc93da81d97/pete-broken.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e0c1fadd8cdf3173a4cf9bc93da81d97/pete-broken.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/6d84909328bf960bdfcab760e46c886f/pete-broken%402x.png"}]},{image:"pete-alert",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/90e3c39fb39d5d79e8e2310406620f59/pete-alert.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/90e3c39fb39d5d79e8e2310406620f59/pete-alert.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3453c1a26ddd1187e56431940c7aedfc/pete-alert%402x.png"}]},{image:"pete-talk",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ca098514ef3b83d1e5a736817d3a132b/pete-talk.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ca098514ef3b83d1e5a736817d3a132b/pete-talk.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/217a5d2b04a6dea23726a7949dae9ac7/pete-talk%402x.png"}]},{image:"pete-vacation",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c50c5371bb78862a587a93df287459c0/pete-vacation.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c50c5371bb78862a587a93df287459c0/pete-vacation.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/060295310e437200bf334ff7322eede1/pete-vacation%402x.png"}]},{image:"pete-confused",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0d52a88328d4c0196564b207560e953e/pete-confused.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0d52a88328d4c0196564b207560e953e/pete-confused.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/7ff61659ad2cd4837aacd999aedcd233/pete-confused%402x.png"}]},{image:"pete-shipped",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/13b817ebec2282c5a7abb849056edfff/pete-shipped.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/13b817ebec2282c5a7abb849056edfff/pete-shipped.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0d9ff936d513aae5a67c8f9653a5c49e/pete-shipped%402x.png"}]},{image:"pete-busy",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ef0eb59b05378f25bb0cfae516b0615d/pete-busy.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ef0eb59b05378f25bb0cfae516b0615d/pete-busy.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/35503951628d67da2c8aaabd49aaf769/pete-busy%402x.png"}]},{image:"pete-completed",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/213df9ec14509a7f06281bba7482ae61/pete-completed.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/213df9ec14509a7f06281bba7482ae61/pete-completed.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3197b9305f52b722df47abdb84c063f8/pete-completed%402x.png"}]},{image:"pete-space",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ee70c40e8a7906f3adf2323d774e8320/pete-space.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ee70c40e8a7906f3adf2323d774e8320/pete-space.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/aa9cb8354739fb355a4abd1c977d975a/pete-space%402x.png"}]},{image:"pete-sketch",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/6e17baf06870f4bd1c301ede21bc5add/pete-sketch.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/6e17baf06870f4bd1c301ede21bc5add/pete-sketch.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3808b148cca5b1ed3da001b7c13d5110/pete-sketch%402x.png"}]},{image:"pete-ghost",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/fcb349d429bbaaf873eef3ea64eb570c/pete-ghost.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/fcb349d429bbaaf873eef3ea64eb570c/pete-ghost.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/4a28ad313694864c5a661b964a9510ff/pete-ghost%402x.png"}]},{image:"pete-award",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/eb0782174fdd08d4c76a587db6bc7caf/pete-award.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/eb0782174fdd08d4c76a587db6bc7caf/pete-award.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/43dd35d5e48a876a50fc6c63f53f005e/pete-award%402x.png"}]},{image:"pete-music",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/49ddddf5af19ae49ccc9c7aa9517ba62/pete-music.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/49ddddf5af19ae49ccc9c7aa9517ba62/pete-music.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/df6a7a7b952e8826916f00e69b503af1/pete-music%402x.png"}]}]}}},{}],23:[function(e,t,r){t.exports=[{code:"cs",name:"Čeština"},{code:"de",name:"Deutsch"},{code:"en-GB",name:"English (UK)"},{code:"en-US",name:"English (US)"},{code:"es",name:"Español"},{code:"fr",name:"Français"},{code:"fr-CA",name:"Français (Canada)"},{code:"it",name:"Italiano"},{code:"hu",name:"Magyar"},{code:"nl",name:"Nederlands"},{code:"nb",name:"Norsk (bokmål)"},{code:"pl",name:"Polski"},{code:"pt-BR",name:"Português (Brasil)"},{code:"fi",name:"Suomi"},{code:"sv",name:"Svenska"},{code:"vi",name:"Tiếng Việt"},{code:"tr",name:"Türkçe"},{code:"ru",name:"Русский"},{code:"uk",name:"Українська"},{code:"th",name:"ภาษาไทย"},{code:"zh-Hans",name:"中文 (简体)"},{code:"zh-Hant",name:"中文 (繁體)"},{code:"ja",name:"日本語"}]},{}],24:[function(e,t,r){t.exports=[{id:"guide-1",bgcolor:"#FAF3C0",imgUrl1x:"https://d78fikflryjgj.cloudfront.net/images/tips/3a63a6244ef2e7ade4d645ca0830dc63/guide-1%401x.png",imgUrl2x:"https://d78fikflryjgj.cloudfront.net/images/tips/eab001f563b4e3d8a5d1199cce807e59/guide-1%402x.png",url:"https://trello.com/guide?utm_source=trello&utm_medium=inapp&utm_content=header-tips&utm_campaign=guide"},{id:"inspiration-1",bgcolor:"#298FCA",imgUrl1x:"https://d78fikflryjgj.cloudfront.net/images/tips/e1565bd541d2b56ec792b202bd420c54/inspiration-1%401x.png",imgUrl2x:"https://d78fikflryjgj.cloudfront.net/images/tips/537647bd716153a10a3254e6912b623b/inspiration-1%402x.png",langs:["en-US","en-GB","fr","pt-BR"],url:"https://trello.com/inspiration?utm_source=trello&utm_medium=inapp&utm_content=header-tips&utm_campaign=inspiration"},{id:"power-ups-1",bgcolor:"#42548E",imgUrl1x:"https://d78fikflryjgj.cloudfront.net/images/tips/d7178bb1e5dc48fb4fe66ea30e772bed/power-ups-1%401x.png",imgUrl2x:"https://d78fikflryjgj.cloudfront.net/images/tips/283ff0f7ee60508a0ea9267b27351402/power-ups-1%402x.png",url:"https://trello.com/power-ups?utm_source=trello&utm_medium=inapp&utm_content=header-tips&utm_campaign=power-ups"},{id:"webinars-1",bgcolor:"#42548E",imgUrl1x:"https://d78fikflryjgj.cloudfront.net/images/tips/7e1a1e13b5deffa70d0e8ec4fda324cc/webinars-1%401x.png",imgUrl2x:"https://d78fikflryjgj.cloudfront.net/images/tips/f1f39fe1384c4439d9326e23b378a492/webinars-1%402x.png",url:"https://trello.com/webinars?utm_source=trello&utm_medium=inapp&utm_content=header-tips&utm_campaign=webinar"}]},{}],25:[function(e,r,n){var o,i,s,a;o=e("jquery"),i=void 0,t(function(){return i=e(178)}),s=void 0,t(function(){return s=e(29)}),a=e("underscore"),r.exports=new(function(){function e(){this.updateToken()}var t,r,n,u;return t="notLoggedIn",r=null,n=null,u="token"+window.location.port,e.prototype.isLoggedIn=function(){return r!==t},e.prototype.myId=function(){return r},e.prototype.myUsername=function(){var e;return null!=(e=this.me())?e.get("username"):void 0},e.prototype.myToken=function(){return n},e.prototype.me=function(){var e;return e=s.get("Member",r),null!=e||this.isLoggedIn()||(e=new i({id:t,notLoggedIn:!0},{modelCache:s}),s.add(e)),e},e.prototype.isMe=function(e){return(null!=e?e.id:void 0)?this.isMe(e.id):e===r},e.prototype.confirmed=function(){return this.me().get("confirmed")},e.prototype.canLogIn=function(){var e,t;return!a.isEmpty(null!=(e=null!=(t=this.me())?t.get("loginTypes"):void 0)?e:[])},e.prototype.updateToken=function(){return n=o.cookie(u)||"",r=n.split("/")[0]||t},e.prototype.logoutPost=function(){return o("<form>").attr({method:"post",action:"/logout"}).append('<input name="dsc" value="'+o.cookie("dsc")+'">').css({display:"none"}).appendTo("body").submit()},e}())},{}],26:[function(e,t,r){var n;n=e(109),t.exports=window.IdCache=new(function(){function e(){this._shortLinkToId={Card:{},Board:{}},this._idCardToIdBoard={}}return e.prototype.getId=function(e,t){if(n.checkId(t))return t;if(n.isShortLink(t))return this._shortLinkToId[e][t];throw new Error("Not a shortLink or id: "+t)},e.prototype.setId=function(e,t,r){if(!n.checkId(r))throw new Error("Not an id: "+r);if(!n.isShortLink(t))throw new Error("Not a shortLink: "+t);return this._shortLinkToId[e][t]=r},e.prototype.setCardId=function(e,t){return this.setId("Card",e,t)},e.prototype.setBoardId=function(e,t){return this.setId("Board",e,t)},e.prototype.getCardId=function(e){return this.getId("Card",e)},e.prototype.getBoardId=function(e){return this.getId("Board",e)},e}())},{}],27:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b=[].slice;n=e("jquery"),i=e(67),s=e(26),a=e(30),u=e("bluebird"),c=e(87),l=e("trello-markdown"),d=e(109),p=e("underscore"),g=e(438),v=e(119),m=e(84),f=e(228),y=e("xtend"),o=e(191),h=function(e,t){var r,n,o,i,s;if(null==t)return null;i=f(t),o=[t];for(r in e)if(n=e[r],p.isString(n)){if(n!==i[r])return null}else{if(!p.isRegExp(n))throw Error("invalid specification");if(null==(s=n.exec(i[r])))return null;o=o.concat(s.slice(1))}return o},t.exports=new(function(){function e(){}return e.prototype._knownUrls=[{key:"trello board",match:{protocol:location.protocol,host:location.host,pathname:/^\/b\/([a-zA-Z0-9]{8})(?:$|\/.*)/},previewClass:"attachment-thumbnail-preview-trello-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/e1b7406bd79656fdd26ca46dc8963bee/trello.png",getText:function(e,t){var r,n,i,u;return r=e[0],u=e[1],null!=(n=null!=(i=t.get("Board",s.getBoardId(u)))?i.get("name"):void 0)?n:a.loadBoardName(u).catch(o.NotFound,o.Unauthorized,function(){return r})}},{key:"trello action",match:{protocol:location.protocol,host:location.host,pathname:/^\/c\/([a-zA-Z0-9]{8})(?:$|\/.*)/,hash:/^\#(?:comment|action)-([0-9a-f]{24})$/},previewClass:"attachment-thumbnail-preview-trello-logo",getShared:function(e,t){var r,n,o;return r=e[0],o=e[1],n=e[2],u.try(function(){var e;return null!=(e=t.get("Action",n))?e:a.loadAction(n)}).then(function(e){return null!=e?{action:e,memberCreator:t.get("Member",e.get("idMemberCreator"))}:{}})},getIcon:function(e,t,r){var n,o,i,s,a;return o=e[0],a=e[1],i=e[2],s=r.memberCreator,null!=(n=null!=s?s.get("avatarHash"):void 0)?[window.avatarDomain,n,"30.png"].join("/"):"https://d78fikflryjgj.cloudfront.net/images/services/e1b7406bd79656fdd26ca46dc8963bee/trello.png"},getText:function(e,t,r){var n,o,s,a,u,l;return o=e[0],u=e[1],s=e[2],n=r.action,null==n?o:(l=p.chain(new i("action").getEntities(n.get("display"),null!=(a=n.get("data").card)?a.id:void 0)).map(function(e){var t,r;return r=e.type,t=e.text,"member"===r&&n.isCommentLike()?t+":":"comment"===r?c.comments.textInline(t):t}).join("").value(),v(l,64))}},{key:"trello card",match:{protocol:location.protocol,host:location.host,pathname:/^\/c\/([a-zA-Z0-9]{8})(?:$|\/.*)/},previewClass:"attachment-thumbnail-preview-trello-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/e1b7406bd79656fdd26ca46dc8963bee/trello.png",getText:function(e,t){var r,n,i,u;return r=e[0],u=e[1],null!=(n=null!=(i=t.get("Card",s.getCardId(u)))?i.get("name"):void 0)?n:a.loadCardName(u).catch(o.NotFound,o.Unauthorized,function(){return r})}},{key:"fogbugz case",match:{protocol:/^https?:$/,host:/^([^\.]+)\.fogbugz\.com$/,pathname:/^\/f\/cases\/([\d]+)/},previewClass:"attachment-thumbnail-preview-fogbugz-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/a1385c9ce999f8389ec7dc43c1b24b2c/fogbugz.png",getArgs:function(e){var t,r,n;return t=e[0],n=e[1],r=e[2],{caseNumber:r}}},{key:"kiln commit",match:{protocol:/^https?:$/,host:/^([^\.]+)\.(?:fogbugz\.com\/kiln|kilnhg\.com)$/,pathname:/^\/Code\/([^\/]+)\/([^\/]+)\/([^\/]+)\/History\/([^\/]+)/},previewClass:"attachment-thumbnail-preview-kiln-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/6c1d65d72873b01d740adfbb9de22234/kiln.png",getText:function(e){var t,r,n,o,i,s;return t=e[0],s=e[1],o=e[2],i=e[3],r=e[4],n=e[5],"Group"===i?o+" » "+r+": "+n:o+" » "+i+" » "+r+": "+n},dataUrl:function(e){return e.replace(/\/Code\//,"/trello/Code/")},_processJSON:function(e,t){var r,n,o,i,s;if(null!=t.reviews)for(i=t.reviews,r=0,o=i.length;o>r;r++)s=i[r],s.status=m(["known services","kiln commit","status",s.sStatus]),s.url=e.replace(/\/Code\/.*$/,"/Review/"+s.sReview);return t.sAuthor&&(t.author=t.sAuthor.replace(/\s<.*$/,"")),t.hash&&(t.shortHash=t.hash.substr(0,6)),t.sDescription&&(n=new l({restrict:{block:["paragraph","newline"],inline:["break","email","emoji","url"]}}),t.shortCommitMessage=t.sDescription.split("\n")[0],t.commitMessageHtml=n.format(t.sDescription).output),t.url=e,t},previewHtml:function(e,t){return g.fill("kiln_changeset_preview",this._processJSON(e,t))},previewHtmlError:function(e,t){var r;return/unable to access/i.test(t)?(e=null!=(r=/^https?:\/\/[-a-z0-9\.]+(\/kiln)?/.exec(e))?r[0]:void 0,{login:m("known services.kiln commit.error")}):null},thumbnailHtml:function(e,t,r){return g.fill("kiln_changeset_thumbnail",y(this._processJSON(e,t),r))}},{key:"github commit",match:{protocol:"https:",host:"github.com",pathname:/^\/([^\/]+)\/([^\/]+)\/commit\/([^\/]{7,40})$/},previewClass:"attachment-thumbnail-preview-github-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/8cab38550d1f23032facde191031d024/github.png",getText:function(e){var t,r,n,o;return t=e[0],o=e[1],n=e[2],r=e[3],o+"/"+n+": "+r.substr(0,7)}},{key:"github issue",match:{protocol:"https:",host:"github.com",pathname:/^\/([^\/]+)\/([^\/]+)\/issues\/(\d+)$/},previewClass:"attachment-thumbnail-preview-github-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/8cab38550d1f23032facde191031d024/github.png",getArgs:function(e){var t,r,n,o;return t=e[0],o=e[1],n=e[2],r=e[3],{user:o,repo:n,number:r}}},{name:"GitHub Pull Request",match:{protocol:"https:",host:"github.com",pathname:/^\/([^\/]+)\/([^\/]+)\/pull\/(\d+)$/},previewClass:"attachment-thumbnail-preview-github-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/8cab38550d1f23032facde191031d024/github.png",getArgs:function(e){var t,r,n,o;return t=e[0],o=e[1],n=e[2],r=e[3],{user:o,repo:n,number:r}},getText:function(e){var t,r,n,o;return t=e[0],o=e[1],n=e[2],r=e[3],o+"/"+n+": Pull Request "+r}}],e.prototype.interpret=function(e,t){var r,n,o,i,s;for(s=this._knownUrls,n=0,o=s.length;o>n;n++)if(r=s[n],null!=(i=h(r.match,e)))return function(e){var r,n,o,s,a,c,l,d;return c=e.key,l=e.name,s=e.getText,r=e.getArgs,d=e.previewClass,a=e.icon,o=e.getShared,n=e.getIcon,u.resolve("function"==typeof o?o(i,t):void 0).then(function(e){var o,p,h;return h=null!=s?s(i,t,e):(o=null!=(p="function"==typeof r?r(i,t):void 0)?p:{},m(["known services",c,"text"],o)),null!=n&&(a=n(i,t,e)),null==l&&(l=m(["known services",c,"name"])),u.props({name:l,previewClass:d,icon:a,text:h})})}(r);return u.resolve()},e.prototype._runHandler=function(){
var e,t,r,o,i,s,a,u,c,l,d;for(u=arguments[0],d=arguments[1],e=4<=arguments.length?b.call(arguments,2,r=arguments.length-1):(r=2,[]),c=arguments[r++],l=this._knownUrls,o=0,s=l.length;s>o;o++)if(i=l[o],null!=h(i.match,d)&&null!=i[u])return a=i.match,t=i.dataUrl,void n.ajax({url:t(d),xhrFields:{withCredentials:!0},headers:{"X-Trello":"Is it me you're looking for?"},success:function(t){return c(null,i[u].apply(i,[d,t].concat(b.call(e))))},error:function(t,r,n){var o,s;return o=u+"Error",s="function"==typeof i[o]?i[o].apply(i,[d,n].concat(b.call(e))):void 0,c(null!=s?s:"could not load")}});c()},e.prototype.previewHtml=function(e,t){return this._runHandler("previewHtml",e,t)},e.prototype.thumbnailHtml=function(e,t,r){return this._runHandler("thumbnailHtml",e,t,r)},e}())},{}],28:[function(e,t,r){var n;n=e(25),t.exports={locales:[window.locale,"en-GB"]}},{}],29:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M,B=[].slice,T=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(25),i=e(205),n=e(128),u=e(138),c=e(140),s=e(137),a=e(135),l=e(69),d=e(175),p=e(176),h=e(178),f=e(180),g=e(182),v=e(184),y=e(183),b=e("bluebird"),M=e(201),w=e(109),_=e("underscore"),j=e(35),S=e(89),x=e(209),k=e(62),C={Action:{type:n,test:x.eq("actions")},Card:{type:u,test:x.eq("cards")},Checklist:{type:c,test:x.eq("checklists")},Board:{type:s,test:function(e){return/^board($|s)/.test(e)}},BoardPlugin:{type:a,test:x.eq("boardPlugins")},Label:{type:d,test:x.eq("labels")},List:{type:p,test:function(e){return/^lists?/.test(e)}},Member:{type:h,test:function(e){return/^member/.test(e)&&"memberships"!==e&&"memberType"!==e&&"membershipCounts"!==e}},Notification:{type:f,test:x.eq("notifications")},Organization:{type:g,test:function(e){return/^organization/.test(e)}},Plugin:{type:v,test:function(e){return/^plugins?$/.test(e)}},PluginData:{type:y,test:x.eq("pluginData")}},S(l,m=function(){function e(){var e;this._cache={},this._locked=[],this._lockIndex=0,this._deltaQueue=[],this.uniqueId=_.uniqueId("mc");for(e in C)this._cache[e]={}}return e.prototype.get=function(e,t){var r;return _.isArray(t)?t.map(x(this,"get",e)):w.isShortLink(t)?this.findOne(e,"shortLink",t):(_.isString(e)||(e=e.prototype.typeName),null!=(r=this._cache[e])?r[t]:void 0)},e.prototype.find=function(){var e,t,r,n,o;return r=arguments[0],e=2<=arguments.length?B.call(arguments,1):[],1===e.length?(n=e[0],_.filter(this.all(r),n)):(t=e[0],o=e[1],this.find(r,function(e){return e.get(t)===o}))},e.prototype.findOne=function(){var e;return e=1<=arguments.length?B.call(arguments,0):[],_.first(this.find.apply(this,e))},e.prototype.waitFor=function(e,t,r){var n;return n=this.get(e,t),null!=n?r(null,n):this.once("add:"+e+":"+t,function(n){return function(){return n.waitFor(e,t,r)}}(this))},e.prototype.all=function(e){return _.isString(e)||(e=e.prototype.typeName),_.values(this._cache[e])},e.prototype.add=function(e){var t;e.id&&null!=this.get(e.typeName,e.id)||null!=C[e.typeName]&&(t=e.id?e.id:e.cid,this._cache[e.typeName][t]=e,this.stopListening(e),this.listenTo(e,"change",this.onModelChange),this.listenTo(e,"destroy",this.remove),this.waitForId(e,function(t){return function(r){return delete t._cache[e.typeName][e.cid],t._cache[e.typeName][r]=e,t.trigger("add:"+e.typeName+":"+r,e),"function"==typeof e.triggerCacheEvents?e.triggerCacheEvents(t,"add",e):void 0}}(this)),this.trigger("add:"+e.typeName,e))},e.prototype.onModelChange=function(e){var t,r,n;"function"==typeof e.triggerCacheEvents&&e.triggerCacheEvents(this,"change",e),this.trigger("change:"+e.typeName,e),r=e.changedAttributes();for(t in r)n=r[t],this.trigger("change:"+e.typeName+":"+t,e)},e.prototype.remove=function(e){var t,r,n,o;if(null!=e){if(e instanceof u)for(o=e.actionList.models,r=0,n=o.length;n>r;r++)t=o[r],this.remove(t);return delete this._cache[e.typeName][e.id],delete this._cache[e.typeName][e.cid],this.trigger("remove:"+e.typeName,e),null!=e.id&&this.trigger("remove:"+e.typeName+":"+e.id,e),"function"==typeof e.triggerCacheEvents&&e.triggerCacheEvents(this,"remove",e),this.stopListening(e),e.destructor()}},e.prototype._update=function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f;if(null==r&&(r={}),_.isArray(t))return t.map(function(t){return function(n){return t._update(e,n,r)}}(this));if(t.deleted)return void this.remove(this.get(e,t.id));d=_.clone(t),u=function(){var e;e=[];for(a in r)s=r[a],a in d&&(o=d[a],delete d[a],e.push(x(s,o)));return e}();for(n in C){l=C[n],h=l.type,p=l.test;for(a in t)f=t[a],p(a)&&(this._update(n,f,r),delete d[a])}return i=_.isString(e)?this.get(e,t.id):e,null!=i?(this.unmarkModel(i),i.set(d),u.forEach(function(e){return e(i)}),i):(m=C[e])?(c=new m.type(d,{modelCache:this}),u.forEach(function(e){return e(c)}),c):t},e.prototype.lock=function(e){var t;return t=this._lockIndex++,j("MC",e+" took lock "+t),this._locked.push(t),t},e.prototype.locked=function(){return!_.isEmpty(this._locked)},e.prototype.unlock=function(e){return T.call(this._locked,e)>=0?(j("MC","gave lock "+e),this._locked=_.without(this._locked,e),this.locked()||this.processDeltas(),!0):!1},e.prototype.getLock=function(){return b.resolve(this.lock()).disposer(function(e){return function(t){return e.unlock(t)}}(this))},e.prototype.enqueueDelta=function(e,t,r,n){null==r&&(r={}),null==n&&(n=function(){}),_.isFunction(r)&&(n=r,r={}),j("MC","got an update for "+(_.isString(e)?e:e.typeName)),this.locked()?this._deltaQueue.push({modelOrType:e,delta:t,mappingRules:r,next:n}):n(null,this._update(e,t,r))},e.prototype.processDeltas=function(){var e,t,r,n,o,i,s,a,u,c,l,d,p;for(u=this._deltaQueue,this._deltaQueue=[],p=function(e){return!_.isString(e)&&null==e.id},j("MC","Running "+u.length+" updates"),t=0,n=u.length;n>t;t++)c=u[t],s=c.modelOrType,e=c.delta,i=c.mappingRules,a=c.next,p(s)&&a(null,this._update(s,e,i));for(d=[],r=0,o=u.length;o>r;r++)l=u[r],s=l.modelOrType,e=l.delta,i=l.mappingRules,a=l.next,p(s)||d.push(a(null,this._update(s,e,i)));return d},e.prototype.markModel=function(e,t){return e._marked=t},e.prototype.unmarkModel=function(e){return delete e._marked},e.prototype.isMarked=function(e,t){return e._marked===t},e.prototype.forEachModel=function(e){var t,r,n,o;for(o in this._cache){n=this._cache[o];for(t in n)r=n[t],e(r)}},e.prototype.mark=function(){var e;return e=_.uniqueId("mark"),this.forEachModel(function(t){return function(r){return t.markModel(r,e)}}(this)),e},e.prototype.sweep=function(e){this.forEachModel(function(t){return function(r){return t.isMarked(r,e)?t.remove(r):void 0}}(this))},e}()),_.extend(m.prototype,i.Events),t.exports=window.ModelCache=new m},{}],30:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M,B,T,O,L,P,A,E,D,I,V=[].slice;n=e("jquery"),o=e(128),s=e(137),a=e(138),u=e(26),c=e(176),l=e(178),d=e(29),h=e(180),m=e(182),g=e(184),f=e(197),v=e("bluebird"),P=e(201),b=e(98),A=e(40),w=e(109),_=e("underscore"),B=e("moment"),T=e(112),I=e("xtend"),S=e(209),T=e(112),x=e(62),i=e(191),j=function(e,t){var r,n;return n=e.query,r=e.mappingRules,{query:I(n,t),mappingRules:r}},O={},y=5,L=function(e){var t;return t=O,v.fromNode(function(r){return t=QuickLoad.load(e,r)}).catch(function(e){var t,r;return r=e[0],t=e[1],v.reject(i.fromResponse(r,t))}).tap(function(){return x(t!==O,"Promises resolved synchronously; didn't get preload information from QuickLoad")}).spread(function(e,r){return[e,r,t]})},M=function(e){var t;null!=e&&(t=Date.now()-e.start,A("quickload use",e.url,{int_key_1:"time saved",int_val_1:t}))},E=function(e){var t;null!=(t=e.getResponseHeader("X-Server-Time"))&&b.updateServerTime(parseInt(t,10))},D=function(e){return function(t){return v.try(function(){var r;return null!=(r=p.getUpToDateBoard(t))?r:e.call(p,t)})}},C={},k={},t.exports=window.ModelLoader=p={_history:[],_replaying:!1,_loadApiData:function(){var e,t,r,n,o,i,s,a,u,c,l;return i=arguments[0],t=arguments[1],a=arguments[2],e=4<=arguments.length?V.call(arguments,3):[],s=e[0],n=e[1],u=a.query,o=null!=(c=a.mappingRules)?c:{},_.isString(i)||(i=i.prototype.typeName),null==s&&(s=w.pluralize(i)+"/"+t),r=w.invitationTokens().join(","),_.isEmpty(r)||(u=_.extend({},u,{invitationTokens:r})),l=QuickLoad.makeUrl("/1/"+s,u),L(l).spread(function(e,t,r){return E(t),M(r),e}).tap(function(){return n?void 0:new v(function(e){return p.waitFor("headerData",e)})}).then(function(e){return function(e){return T(d,"enqueueDelta",i,e,o)}}(this))},getUpToDateBoard:function(e){var t,r,n;return this.isReplaying()?null:(r=u.getBoardId(e),null==r?null:(t=d.get("Board",r),null==t?null:(n=P.getIxLastUpdate(t.id),null!=n?t:null)))},isReplaying:function(){return this._replaying},replay:function(){var e;return this._replaying=!0,e=d.mark(),v.map(this._history,function(e){return function(t){var r,n,o;return o=t.owner,n=t.loadName,r=t.args,e[n].apply(e,r)}}(this),{concurrency:y}).then(function(){return d.sweep(e)}).finally(function(e){return function(){return e._replaying=!1}}(this)).return()},record:function(){var e,t,r;if(r=arguments[0],t=arguments[1],e=3<=arguments.length?V.call(arguments,2):[],null!=r)return this._history.push({owner:r,loadName:t,args:e});throw Error("Unclaimed "+t)},for:function(){var e,t,r;return r=arguments[0],t=arguments[1],e=3<=arguments.length?V.call(arguments,2):[],this.record.apply(this,[r,t].concat(V.call(e))),this[t].apply(this,e)},release:function(e){this._history=_.reject(this._history,function(t){return t.owner===e})},loadHeaderData:function(){return this._loadApiData(l,"me",f.memberHeader,void 0,!0).then(function(e){return["Member",e,f.memberHeader.mappingRules]})},loadBoardsMenuData:function(){return this._loadApiData(l,"me",f.boardsMenuMinimal).then(function(e){return["Member",e,f.boardsMenuMinimal.mappingRules]})},loadBoardData:function(e,t){return this._loadApiData(s,e,t)},loadCardData:function(){var e,t,r,n;return e=2<=arguments.length?V.call(arguments,0,t=arguments.length-1):(t=0,[]),n=arguments[t++],r=e[0],null!=r?this._loadApiData(a,n,f.card,"boards/"+r+"/cards/"+n):this._loadApiData(a,n,f.card)},loadCardName:function(e){return this._loadApiData(a,e,{query:{fields:"name"}}).call("get","name")},loadCardId:function(e,t){return this._loadApiData(a,t,f.idCard,"boards/"+e+"/cards/"+t).get("id")},loadCardDetails:function(e,t){return this._loadApiData(a,e,j(f.cardDetails,{actions_limit:t}),"cards/"+e)},loadCardVoters:function(e){return this._loadApiData(a,e,f.cardVoters,"cards/"+e)},loadCardCopyData:function(e,t){return this._loadApiData(a,t,f.cardCopy,"boards/"+e+"/cards/"+t)},loadCardList:function(e){return this._loadApiData(c,e,f.cardList,"cards/"+e+"/list")},loadNotification:function(e){return this._loadApiData(h,e,{query:{fields:"all"}})},loadNotificationData:function(e){return this._loadApiData(l,e,f.memberNotifications)},loadMoreNotificationData:function(e,t){var r,n;return n={filter:"all",limit:10,display:!0,page:t},r="members/"+e+"/notifications",this._loadApiData(h,null,{query:n},r)},loadMemberBoardsData:function(e){return this._loadApiData(l,e,f.memberBoards)},loadMemberCardsData:function(e){return this._loadApiData(l,e,f.memberCards)},loadMemberEmail:function(e){return this._loadApiData(l,e,{query:{fields:"email",invitationTokens:w.invitationTokens().join(",")}})},loadOrganizationMemberGhost:function(e,t){var r,n,o;return r=null!=(o=w.inviteTokenFor(e))?o.split("-")[0]:void 0,null==r?v.resolve({}):(n={fields:f.memberFields,invitationTokens:w.invitationTokens().join(",")},this._loadApiData(l,r,{query:n}).catch(i,function(){return{}}))},loadMyBoardsUnreadData:function(){return this._loadApiData(l,"me",f.memberUnreadBoards)},loadMoreActionData:function(){var e,t,r,n,i,s,a,u;return s=arguments[0],n=arguments[1],a=arguments[2],i=arguments[3],e=5<=arguments.length?V.call(arguments,4):[],r=e[0],t=e[1],u={filter:"all",limit:i,page:a,display:!0},null!=r&&(u.idModels=r.join(",")),null!=t&&(u.filter=t),this._loadApiData(o,n,{query:u},s+"s/"+n+"/actions")},loadClosedCards:function(e,t){var r,n,o;return n=t.limit,r=t.before,o={stickers:!0,attachments:"cover"},null!=n&&(o.limit=n),null!=r&&(o.before=r),this._loadApiData(a,e,{query:o},"boards/"+e+"/cards/closed")},loadClosedBoards:function(){return this._loadApiData(s,null,{query:{filter:"closed"}},"members/me/boards")},loadArchivedLists:function(e){return this._loadApiData(s,e,f.archivedLists)},loadMemberPaidAccount:function(e){return this._loadApiData(l,e,f.memberPaidAccount)},loadMemberAccountData:function(e){return this._loadApiData(l,e,f.memberAccount)},loadMemberProfileData:function(e){var t,r;return r=f.memberProfile,t=f.memberProfile_daysBack,r.action_since=B().subtract(t,"days").toString(),this._loadApiData(l,e,f.memberProfile)},loadMemberCustomBackgrounds:function(e){return this._loadApiData(l,e,{query:{fields:"",boardBackgrounds:"custom"}})},loadMemberCustomStickers:function(e){return this._loadApiData(l,e,{query:{fields:"",customStickers:"all"}})},loadMemberCustomEmoji:function(e){return this._loadApiData(l,e,{query:{fields:"",customEmoji:"all"}})},_loadOrganizationPayload:function(e,t){return this._loadApiData(m,t,e)},loadOrganizationData:function(e){return this._loadOrganizationPayload(f.organization,e)},loadOrganizationBoardsData:function(e){return this._loadOrganizationPayload(f.organizationBoardsPage,e)},loadOrganizationPaidAccount:function(e){return this._loadOrganizationPayload(f.organizationPaidAccount,e)},loadOrganizationMinimal:function(e){return this._loadOrganizationPayload(f.organizationMinimal,e)},loadOrganizationMembersData:function(e){return this._loadOrganizationPayload(f.organizationMembers,e)},loadOrganizationMembersExtraData:function(e){return this._loadOrganizationPayload(f.organizationMembersExtra,e)},loadOrganizationMembersMinimal:function(e){return this._loadOrganizationPayload(f.organizationMembersMinimal,e)},loadOrganizationExportData:function(e){return this._loadOrganizationPayload(f.organizationExports,e)},loadOrganizationMemberMinimal:function(e,t){return this._loadApiData(l,t,f.memberMinimal)},loadOrgMemberCardData:function(e,t){var r;return r="organization/"+e+"/members/"+t+"/cards",this._loadApiData(a,e,f.orgMemberCards,r)},loadOrgNameById:function(e){var t;return t={fields:"name"},this._loadApiData(m,e,{query:t}).call("get","name")},loadCurrentBoardData:D(function(e){return this.loadBoardData(e,f.currentBoardMinimal)}),loadBoardSecondary:D(function(e){return this._loadApiData(s,e,f.currentBoardSecondary)}),loadBoardPluginData:D(function(e){return this._loadApiData(s,e,f.currentBoardPluginData)}),loadBoardName:function(e){var t;return t={fields:["name","closed"].join(",")},this._loadApiData(s,e,{query:t}).call("get","name")},loadMyOrganizations:function(){return this.loadMemberOrganizations("me")},loadMemberOrganizations:function(e){return this._loadApiData(l,e,f.organizations)},loadSearchData:function(e){return this._loadApiData("search",null,{query:e},"search")},loadModel:function(e,t,r){return this._loadApiData(e,t,r)},loadBoardAvailablePlugins:function(e){return this._loadApiData(g,null,{query:{filter:"available"}},"boards/"+e+"/plugins")},loadQuickBoardsData:function(){return this._loadApiData(l,"me",f.memberQuickBoards)},loadQuickBoardsSearch:function(e){return this._loadApiData("search",null,{query:f.quickBoardsSearch.query(e)},"search")},loadAction:function(e){return this._loadApiData(o,e,f.action)},triggerWaits:function(e){var t,r,n,o,i;for(C[e]=!0,i=null!=(o=k[e])?o:[],r=0,n=i.length;n>r;r++)(t=i[r])();return delete k[e]},waitFor:function(e,t){return C[e]?t():(null!=k[e]?k[e]:k[e]=[]).push(t)},await:function(e){return new v(function(t){return function(r){return t.waitFor(e,r)}}(this))}}},{}],31:[function(e,t,r){var n,o,i,s;n=e("jquery"),o=e(25),s=e(126),t.exports=i={version:new s.Client(window.clientVersion),server:{version:"0.0.0",environment:"dev"},setServerVersion:function(e){var t,r;t=!1;for(r in this.server)this.server[r]!==e[r]&&(t=!0,this.server[r]=e[r]);return t?n(this).triggerHandler("change:serverVersion"):void 0},setServerVersionFromResponse:function(e){var t,r;return r=e.getResponseHeader("X-Trello-Version"),t=e.getResponseHeader("X-Trello-Environment"),null!=r&&(this.server.version=r),null!=t?this.server.environment=t:void 0}},Object.defineProperty(window,"TrelloVersion",{get:function(){return"Server: "+i.server.version+" ("+i.server.environment+")\nClient: "+i.version+" ("+o.me().get("channels").active+")"}})},{}],32:[function(e,t,r){var n,o,i;o=e(97),i=e("underscore"),n="error_history",t.exports={add:function(e){var t;return t=this.recent(),t.unshift(e),t=i.first(t,5),o.set(n,t)},recent:function(){var e;return null!=(e=o.get(n))?e:[]}}},{}],33:[function(e,t,r){var n,o,i;n=e(31),i=e(28).locales,o=i[0],t.exports=function(){return[{schema:"iglu:com.trello/web-context/jsonschema/1-0-4",data:{client_version:n.version.toString(),client_locale:o}}]}},{}],34:[function(e,t,r){var n,o,i,s;n=e("jquery"),o=e(25),i=e(65),s=e(32),t.exports=function(e,t,r,a){var u,c,l,d,p,h,m;p=window.clientVersion.split("-"),d=p[0],m=p[1],m=parseInt(m,10),u={head:d,version:m,patch:0},c={name:e.name,msg:e.message,url:t,line:r,col:a,stack:e.stack,ua:navigator.userAgent,browser:i.asString,language:null!=(h=navigator.language)?h:navigator.browserLanguage,clientVersion:u},o.isLoggedIn()&&(c.idMember=o.myId());try{n.post("/err",{errors:[c]}),s.add({timestamp:(new Date).toISOString(),stack:e.stack,name:e.name,msg:e.message,url:t})}catch(e){l=e}}},{}],35:[function(e,t,r){var n;n=e(36),t.exports=n.log.bind(n)},{}],36:[function(e,t,r){var n,o,i,s=[].slice;n=e("jquery"),o=e(97),i=e("underscore"),t.exports=window.Logger=new(function(){function e(){var e;this.enabled=null!=(e=o.get("loggers"))?e:{},this.historyMap={},this.logHistory=!1,this.timeSpent={},this.timing={}}return e.prototype.log=function(){var e,t,r,o;o=arguments[0],e=2<=arguments.length?s.call(arguments,1):[],("undefined"!=typeof console&&null!==console?console.log:void 0)&&(r=!1,0===e.length?(r=!0,e.push(o),o="all"):r=this.enabled.all||this.enabled[o],r&&(1===e.length&&i.isArray(e[0])&&(e=e[0]),e.unshift(o),n("body").is(".chrome")?console.log(e):console.dir(e)),this.logHistory&&(null==(t=this.historyMap)[o]&&(t[o]=[]),this.historyMap[o].push(e)))},e.prototype.enable=function(e){null==e&&(e="all"),this.enabled[e]=!0,this.save()},e.prototype.disable=function(e){null==e&&(e="all"),delete this.enabled[e],this.save()},e.prototype.disableAll=function(){this.enabled={},this.save()},e.prototype.enableAll=function(){this.enabled.all=!0,this.save()},e.prototype.history=function(e){var t,r,n,o;if(e in this.historyMap)for(o=this.historyMap[e],r=0,n=o.length;n>r;r++)t=o[r],"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log(t)},e.prototype.list=function(){"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log(i.keys(this.historyMap))},e.prototype.save=function(){o.set("loggers",this.enabled)},e.prototype.time=function(e){return this.timing[e]=performance.now()},e.prototype.endTime=function(e){var t,r;return r=performance.now()-this.timing[e],null==(t=this.timeSpent)[e]&&(t[e]=0),this.timeSpent[e]+=r},e}())},{}],37:[function(e,t,r){var n,o,i,s;n=e(25),o=e(18),i=e(109),s=e("moment"),t.exports=function(e,t,r){var a,u,c,l,d,p,h,m,f,g,v,y,b;return null==t&&(t="not specified"),r||(r="none given"),p=e.toJSON(),d=n.me().toJSON(),h=null!=(m=p.paidAccount)&&null!=(f=m.products)?f[0]:void 0,u={},u.ID=p.id,(null!=(g=p.paidAccount)?g.ixSubscriber:void 0)&&(u.ixSubscriber=null!=(v=p.paidAccount)?v.ixSubscriber:void 0),p.displayName&&(u["Organization Display Name"]=p.displayName),p.name&&(u["Organization Name"]=p.name),p.fullName?u["Full Name"]=p.fullName:u["Full Name"]=d.fullName,p.username?u.Username=p.username:u.Username=d.username,p.idBoards&&(u["# Boards"]=p.idBoards.length),p.memberships&&(u["# Members"]=p.memberships.length),null!=h&&(u["Next Billing Date"]=(c=null!=(y=p.paidAccount.billingDates)?y[h]:void 0)?s(c).locale("en").format("LL"):"",o.isYearly(h)?u.Interval="Yearly":u.Interval="Monthly",u.Price=o.getPrice(h)),u["Trello Version"]=window.TrelloVersion.replace(/\s+/g," "),a=function(){var e;e=[];for(l in u)b=u[l],e.push(l+": "+b);return e}().join("\n"),i.bugzscout({me:d,project:"Sales",area:"Cancellations",forceNew:1,description:"Cancelled Business Class - "+u.Interval+"\n",extra:a+"\n\nReason: "+t+"\n\nDetails:\n\n"+r})}},{}],38:[function(e,t,r){var n;n=e(33),t.exports=function(e,t,r,o){return"function"==typeof window.ga&&window.ga("send","event",e,t,r,o),"function"==typeof window.sp?window.sp("trackStructEvent",e,t,r,"",o,n()):void 0}},{}],39:[function(e,t,r){t.exports=function(e){return"function"==typeof window.sp?window.sp("trackUnstructEvent",{schema:"iglu:com.trello/debug-event/jsonschema/1-0-1",data:e}):void 0}},{}],40:[function(e,t,r){var n,o,i,s;n=e("underscore"),s=e(39),i=e(228),o=e(88),t.exports=function(e,t,r){var a,u,c;return u=i(t),a=/^\/1\/([^\/]*)/.exec(u.pathname)[1],c=u.query.slice(1),s(n.extend({debug_event_type:e,debug_action:a,string_key_1:"query 1",string_val_1:c.slice(0,255),string_key_2:"query 2",string_val_2:c.slice(255,510),string_key_3:"md5 query",string_val_3:o(c)},r))}},{}],41:[function(e,t,r){var n;n=e("promise-queue"),n.configure(e("bluebird"))},{}],42:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w={}.hasOwnProperty;n=e("jquery"),o=e(451),i=e(190),s=e(25),a=e(65),u=e(5),c=e(454),l=e(80),d=e(16),p=e(456),h=e(458),m=e(240),f=e(109),g=e("underscore"),v=e(419),b=e(38),y=function(){var e,t,r,n;t={},n=null,e=0,r=function(){var e,r;for(r in t)w.call(t,r)&&(e=t[r])();n=null,t={}},window.requestAnimationFrame=function(o){var i;return i=e++,null==n&&(n=setTimeout(r)),t[i]=o,i},window.cancelAnimationFrame=function(e){delete t[e]}},n(document).ready(function(){var e,t;return n("meta[name=apple-itunes-app]").attr("content","app-id=461504587, app-argument="+location.href),"requestAnimationFrame"in window||y(),window.orientationchange=function(){return c.calcPos()},a.detectCustomWebkitScrollbars(),n.event.props.push("dataTransfer"),n.event.props.push("detail"),t=function(e,t,r,o){return n(document).on("click",e,function(e){var n,i;return n=function(){var n,s,a,u;for(a=[t,r,o],u=[],n=0,s=a.length;s>n;n++)i=a[n],null!=i&&(g.isFunction(i)?u.push(i.call(this,e)):u.push(i));return u}.call(this),b.apply(null,n)})},t(".js-home-via-logo","Header","Logo","Home"),t(".header-signup","Header","Sign Up"),n(document).on("click",".js-resend-confirmation-email",g.throttle(function(e){return function(){return i({type:"POST",url:"/resendValidate",data:{email:s.me().get("email")},success:function(){return o.flash("email sent","confirm")}})}}(this),6e4)),e=n(".window-overlay"),e.click(function(t){var r;if(!(t.button>0)){if(r=n(t.target).closest("a"),r.length>0&&"#"===r.attr("href"))return void f.stopPropagation(t);if(!n(t.target).is("a.focus-dummy")&&!n(t.target).hasClass("checkbox"))return h.isVisible?void h.hide():p.isEditing()?void p.cancelEdits():void(t.target===e[0]&&c.hide())}}),n(document).click(function(e){return n(e.target).closest(".js-react-root").length?void 0:v(e)}),n(document).keyup(function(e){var t,r;return r=l.getKey(e),r===d.Escape?(e.preventDefault(),t=u.getCurrentBoard(),m.hideUnpinnedSidebar(),p.isEditing()?p.cancelEdits():n(".new-comment").hasClass("focus")?n(".new-comment").removeClass("focus").find("textarea").blur():(n("input").blur(),n("textarea").blur())):void 0}),n(document).bind("dragstart",function(e){return n(e.target).closest(".ui-draggable, .js-draggable").length>0}),null!=window.fluid?b("FluidApp"):void 0})},{}],43:[function(e,t,r){var n,o,i,s,a,u,c;n=e(191),u=e(34),i=e(68),o=e("underscore"),s=e(209),a=function(e){return e instanceof n.Other||!(e instanceof n)},c=[],i.subscribe(o.debounce(function(e){var t,r,n,i,l;return 10===c.length?!1:(r=e.error,l=e.url,i=e.line,t=e.col,a(r)&&RegExp("https?://("+location.host+"|[a-z0-9]+\\.cloudfront\\.net|a.trellocdn.com)/").test(l)?(n=[r.message,l,i,t],o.any(c,s(o.isEqual,n))?!1:(u(r,l,i,t),c.push(n),!1)):!1)},1e3,!0))},{}],44:[function(e,t,r){window.testThatErrorReportingStillWorks=function(){return setTimeout(function(){throw new Error("Error reporting still works!")},1e3)}},{}],45:[function(e,t,r){var n;n=e(25),"function"==typeof window.sp&&window.sp("newTracker","cf",window.snowplowCloudfrontServer,{appId:"web",cookieDomain:".trello.com",respectDoNotTrack:!0}),n.isLoggedIn()&&"function"==typeof window.sp&&window.sp("setUserId",n.myId())},{}],46:[function(e,t,r){var n;n=e("intl"),n.__addLocaleData(e("intl-locale-data"))},{}],47:[function(e,t,r){var n,o,i,s,a,u,c,l=[].slice;n=e(29),u=e(201),i=e(62),o=e("underscore"),s=function(e,t,r){var n,a,u;return i(t.length>=1),n=t[0],u=2<=t.length?l.call(t,1):[],a=null!=e?o.clone(e):{},a[n]=0===u.length?r:s(a[n],u,r),a},c=function(e){var t,r,i;return null!=e.display?e:null==(t=n.get("Action",e.id))?e:"commentCard"!==t.get("type")?e:(r=null!=(i=e.data)?i.text:void 0,null==r?e:(e=o.clone(e),e.display=s(t.get("display"),["entities","comment","text"],r),e))},a=function(e){return null==e._id?e:(e=o.clone(e),null==e.id&&(e.id=e._id),delete e._id,e)},u.on("updateModels",function(e){var t,r,o,i,s;for(s=e.typeName,r=e.deltas,r=r.map(a),"Action"===s&&(r=r.map(c)),o=0,i=r.length;i>o;o++)t=r[o],n.enqueueDelta(s,t)}),u.on("deleteModels",function(e){var t,r,o,i,s,u;for(u=e.typeName,t=e.deltas,s=t.map(a),r=0,i=s.length;i>r;r++)o=s[r].id,n.enqueueDelta(u,{id:o,deleted:!0})})},{}],48:[function(e,t,r){var n,o;n=e("jquery"),o=e(78),n.getScript("https://apis.google.com/js/api.js",function(){return o.loadedAuth()})},{}],49:[function(e,t,r){window.knowsHowToLoadChannels=!0},{}],50:[function(e,t,r){var n,o,i,s,a,u;n=e("jquery"),o=e(65),i=e(80),s=e(16),a=e(109),"safari"===(u=o.browserStr)&&n(document).on("keydown",function(e){var t,r,o,u,c,l,d,p,h;h=i.getKey(e),h!==s.Tab||e.metaKey||e.shiftKey||e.ctrlKey||(c=n(e.target),c.attr("tabindex")&&(p=parseInt(c.attr("tabindex"),10),u=c.closest("body,.js-tab-parent"),o=u.find("[tabindex]"),t=null,r=null,l=1/0,d=1/0,o.each(function(){var e,o;return o=parseInt(n(this).attr("tabindex"),10),o>p&&l>o&&(l=o,t=n(this),e=!0),null==t&&d>o?(d=o,r=n(this)):void 0}),null==t&&(t=r),null!=t&&(a.stop(e),t.focus())))})},{}],51:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y;n=e(25),o=e(205),i=e(137),a=e(5),u=e(69),c=e(182),f=e(89),g=e(201),d=e("underscore"),v=function(e,t){var r;return e.length===(r=t.length)&&r===d.union(e,t).length},s=function(){function e(e){this.maxLength=e,this.contents=[]}return e.prototype.pushift=function(e){return this.contents=d.without(this.contents,e),this.contents.push(e),this.contents.length>this.maxLength?this.contents.shift():null},e.prototype.map=function(e){return this.contents.map(e)},e}(),h=function(){return n.isLoggedIn()?[{modelType:"Member",idModel:n.myId(),tags:["messages","updates"]}]:[]},m=function(e){return[{modelType:"Organization",idModel:e.id,tags:["allActions","updates"]}]},p=function(e){var t;return[{modelType:"Board",idModel:e.id,tags:["clientActions","updates"]}].concat(null!=(t=e.getOrganization())?m(t):[])},f(u,l=function(){function e(){this.boards=new s(5),this.orgs=new s(1)}return d.extend(e.prototype,o.Events),e.prototype.addModel=function(e){this.waitForId(e,function(t){return function(){return e instanceof i&&t.syncBoard(e),e instanceof c&&t.syncOrg(e),t.ensureSubscriptions()}}(this))},e.prototype.syncBoard=function(e){var t;null!=(t=this.boards.pushift(e))&&this.stopListening(t),this.listenTo(e,"change:idOrganization",this.ensureSubscriptions)},e.prototype.syncOrg=function(e){this.orgs.pushift(e)},e.prototype.ensureSubscriptions=function(){var e,t,r,n,o,i,s,a,u,c,l,f,y,b,w;for(e=d.flatten([h(),this.boards.map(p),this.orgs.map(m)]),b={},r=0,o=e.length;o>r;r++)s=e[r],i=s.modelType,n=s.idModel,w=s.tags,null==b[n]&&(b[n]={tags:[],modelType:i}),(a=b[n].tags).push.apply(a,w);u=g.currentSubscriptions;for(n in u)i=u[n].modelType,null==b[n]&&g.unsubscribe(i,n);c=g.currentSubscriptions;for(n in c)l=c[n],y=l.tags,i=l.modelType,null!=b[n]&&(t=b[n].tags,v(y,t)||g.unsubscribe(i,n));for(n in b)f=b[n],w=f.tags,i=f.modelType,null==g.currentSubscriptions[n]&&g.subscribe(i,n,w)},e}()),y=new l,a.currentModel.subscribe(function(e){null!=e?y.addModel(e):y.ensureSubscriptions()})},{}],52:[function(e,t,r){var n,o,i,s,a;o=e(25),n=e(191),s=e(68),s.subscribe(function(e){var t;t=e.error,t instanceof n.Unauthenticated&&o.logoutPost()}),a=o.updateToken(),i=setInterval(function(){var e;return e=o.updateToken(),e!==a&&window.location.reload(),a=e},3e3),window.addEventListener("beforeunload",function(){clearInterval(i)})},{}],53:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g;n=e("jquery"),o=e(205),i=e(31),s=e(5),a=e(66),c=e(517),u=e(90),d=e(203),l=e(458),g=e(40),p=e(109),h=e(127),f=e(438),m=e(34),e(79),n(function(){return"Production"===i.server.environment&&"trello.com"!==location.hostname&&m(Error("Site proxied as "+location.hostname)),setInterval(function(){a.update("body"),a.trigger("renderInterval")},1e4),d.start(),u.init(),s.start(),o.history.start({pushState:!0}),h.ensureRun(),QuickLoad.onRemove(function(e){return e.used?void 0:g("quickload unused",e.url)})})},{}],54:[function(e,t,r){var n,o,i,s;n=e("jquery"),o=e(131),i=e(109),s=e("underscore"),s.defer(function(){var e,t,r,s;return r=i.getMs({minutes:10+5*Math.random()}),s=null,t=("function"==typeof document.hasFocus?document.hasFocus():void 0)||!0,e=function(){return t&&(null==s||Date.now()-s>r)?(o.fetch(),s=Date.now()):void 0},n(window).on("focus",function(r){return t=!0,e()}),n(window).on("blur",function(e){return t=!1}),setInterval(e,r/4),e()})},{}],55:[function(e,t,r){var n;n=e("underscore"),n.mixin({mapObj:n.compose(n.object,n.map),count:function(e,t){var r,n,o,i;for(null==t&&(t=function(){return!0}),r=0,n=0,o=e.length;o>n;n++)i=e[n],t(i)&&r++;return r}})},{}],56:[function(e,t,r){var n,o;n=e("jquery"),o=e(127),n(function(){var e;return o.calc(),e=null,n(window).resize(function(){clearTimeout(e),e=setTimeout(function(){return o.calc()},200)})})},{}],57:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e("underscore"),d={none:-1,new:0,processing:1,denied:2,good:3,overdue:4,disabled:5,cancelled:6,"change processing":7,"change denied":8,"change finished":9,authorizing:10,"product specific processing":11,"free trial":12,"pending product specific processing":13,"pending authorizing":14,deleted:15},l=o.invert(d),i=[3,4,7,8,9,11,12,13,14],c=[1,7,10,11,13,14],u=[4],a=[2,5],s=[6],t.exports=n={hasAccount:function(e){return null!=e&&e!==d.none},isActive:function(e){var t;return null!=e&&(t=Number(e.standing),p.call(i,t)>=0)&&!o.isEmpty(e.products)},isProcessing:function(e){var t;return n.hasAccount(e)&&(t=Number(e),p.call(c,t)>=0)},isProblem:function(e){return e===d.overdue},isCancelled:function(e){var t;return null==e?!1:(t=Number(e.standing),n.hasAccount(e.standing)&&(p.call(s,t)>=0||p.call(i,t)>=0&&p.call(c,t)<0&&o.isEmpty(e.products)))},willExpire:function(e){var t,r;return(null!=(t=e.products)?t[0]:void 0)in(null!=(r=e.expirationDates)?r:{})},needsCC:function(e){var t;return t=Number(e),p.call(a,t)>=0},isInactive:function(e){return n.hasAccount(e)&&!n.isActive(e)},standingName:function(e){return l[e]}}},{}],58:[function(e,t,r){var n,o,i,s,a,u;u=e(227),a=null,s=null,n=function(e){return"function"==typeof e?e():e},o=function(e,t){var r,n,o,i,s;if("."===e)return{val:t};if("object"!=typeof t||null===t)return{};for(s=t,i=e.split("."),r=0,o=i.length;o>r;r++){if(n=i[r],!(n in s))return{};s=s[n]}return{val:s}},i={mustacheRender:function(e,t,r){if(null==r&&(r={}),null!=a)throw new Error("Cannot nest calls to mustacheRender");return u.render(function(){s=r,a=[t];try{e()}finally{a=null,s=null}})},mustacheVar:function(e){var t,r,i;if(null==a)throw new Error("Attempt to render a mustache template outside of a mustacheRender");for(t=a.length-1;t>=0;t+=-1)if(i=a[t],r=o(e,i),r.hasOwnProperty("val"))return n(r.val);return""},mustachePartial:function(e){if(null==s)throw new Error("Attempt to render a mustache template outside of a mustacheRender");
if(!(e in s))throw new Error("Unregistered partial "+e);return s[e]()},mustacheBlock:function(e,t){var r,n,o,i,s;if(s=this.mustacheVar(e),!s)return"";if(i=void 0,Array.isArray(s))for(r=0,n=s.length;n>r;r++)o=s[r],a.push(o),t(),a.pop();else"object"==typeof s?(a.push(s),i=t(),a.pop()):i=t();return i},mustacheBlockInverted:function(e,t){var r;return r=this.mustacheVar(e),r?"":t()}},t.exports=e(226)(u,i)},{}],59:[function(e,t,r){var n;t.exports=n=function(){function e(){}return e.prototype.isOpen=function(){return this.get("closed")===!1},e}()},{}],60:[function(e,t,r){var n,o=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},i={}.hasOwnProperty;t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t}(Error)},{}],61:[function(e,t,r){t.exports=function(e){return function(t,r){if(null==r&&(r="assertion failed"),!t)throw new e(r)}}},{}],62:[function(e,t,r){t.exports=e(61)(e(60))},{}],63:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v=[].slice;a=e(209),s=e(62),f=e(221),i=e("underscore"),c=function(e,t){var r,n,o,i;for(r=e,n=0,i=t.length;i>n;n++){if(o=t[n],!r.hasOwnProperty(o))return void 0;r=r[o]}return r},l=function(e,t){var r;return r=c(e,t),null==r?void 0:(s("string"==typeof r,"key "+t.join(".")+" did not resolve to a string"),r)},n=function(){function e(e){this.key=e}return e}(),o=function(){function e(e){this.value=e}return e}(),m=function(e){return e.split(/(\{[^{}]+\})/).map(function(e){return 0===e.length?null:"{"===e[0]?new n(e.substr(1,e.length-2)):new o(e)}).filter(a.id)},h=f(function(e){return e([String],a.method("split",".")),e([Array],a.id)}),u=function(e,t,r){var n;return t=h(t),n=l(e,t),null==n?void 0:m(n)},p=function(e,t){return e.map(a.choke(1,t))},d=function(e,t){return function(){var r,i;return i=arguments[0],r=2<=arguments.length?v.call(arguments,1):[],p(i,f(function(i){return i([n],function(e){var n;return n=e.key,t.apply(null,[n].concat(v.call(r)))}),i([o],function(t){var n;return n=t.value,e.apply(null,[n].concat(v.call(r)))})}))}},g=function(){var e,t,r,n,o;return n=arguments[0],r=arguments[1],o=arguments[2],e=4<=arguments.length?v.call(arguments,3):[],t=u(n,r),null==t?void 0:o.apply(null,[t].concat(v.call(e)))},t.exports={normalizeKeyPath:h,lookup:u,makeVisitor:d,visit:g}},{}],64:[function(e,t,r){var n;n=function(){function e(){this.browser=this.searchString(this.dataBrowser)||"unknown-browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknown-browser-version",this.OS=this.searchString(this.dataOS)||"unknown-os"}return e.prototype.searchString=function(e){var t,r,n;for(r=0,n=e.length;n>r;r++)if(t=e[r],this.versionSearchString=t.versionSearch||t.identity,t.string&&-1!==t.string.indexOf(t.subString)||t.prop)return t.identity},e.prototype.searchVersion=function(e){var t;return t=e.indexOf(this.versionSearchString),-1!==t?parseFloat(e.substring(t+this.versionSearchString.length+1)):void 0},e.prototype.dataBrowser=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Trident/7",identity:"Explorer",versionSearch:"rv"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],e.prototype.dataOS=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.userAgent,subString:"iPod",identity:"iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],e}(),t.exports=new n},{}],65:[function(e,t,r){var n,o;n=e("jquery"),o=e(64),t.exports=new(function(){function e(){this.browserStr=o.browser.toLowerCase(),this.browserVersionStr=(o.browser+"-"+o.version).toLowerCase(),this.osStr=o.OS.toLowerCase(),this.asString=this.browserStr+" "+this.browserVersionStr+" "+this.osStr,n(function(e){return function(){return n("body").addClass(e.asString)}}(this))}return e.prototype.isTouch=function(){var e;return"ipad"===(e=this.osStr)||"iphone"===e||"android"===e},e.prototype.isHighDPI=function(){return window.devicePixelRatio>1},e.prototype.allowsDynamicFavicon=function(){var e;return"chrome"===(e=this.browserStr)||"firefox"===e},e.prototype.respectsCrossDomainDownloadAttribute=function(){var e;return"chrome"===(e=this.browserStr)||"opera"===e},e.prototype.detectCustomWebkitScrollbars=function(){var e;try{return n("::-webkit-scrollbar"),e="body-webkit-scrollbars"}catch(t){return e="body-no-webkit-scrollbars"}finally{n("body").addClass(e)}},e}())},{}],66:[function(e,t,r){var n,o,i,s,a,u,c,l,d;n=e("jquery"),o=e(205),s=e(81),a=e(98),u=e(109),c=e("underscore"),d=e("moment"),l=e(84),t.exports=i={objToDate:function(e,t,r){var n;return c.isObject(e)&&(n=e,e=n.year,t=n.month,r=n.day),new Date(e,t-1,r)},dateToObj:function(e){return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}},getStartOfWeek:function(e){return d(e).startOf("week").toDate()},getEndOfWeek:function(e){return d(e).endOf("week").toDate()},getDaysOfWeek:function(e){var t;return t=d(e).startOf("week"),[0,1,2,3,4,5,6].map(function(e){return t.clone().add(e,"days").toDate()})},getMidnightInt:function(e){return d(e).startOf("day").valueOf()},getFirstOfMonth:function(e){return d(e).startOf("month").toDate()},getLastOfMonth:function(e){return d(e).endOf("month").toDate()},isFirstOfMonth:function(e){return d(e).isSame(d(e).startOf("month"),"day")},isLastOfMonth:function(e){return d(e).isSame(d(e).endOf("month"),"day")},getDateDeltaString:function(e,t){return e=d(e),t=d(t),e.isSame(t,"day")?Math.abs(t.diff(e,"seconds"))<10?l("just now"):e.from(t):e.calendar(t)},getDateWithSpecificTime:function(e,t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())},update:function(e){var t,r;t=new Date,r=function(r,o){return n(e).find(r).each(function(){var e,r,s;return e=n(this),r=e.data("date"),null==r&&(r=i.parse(e.attr("dt")),r=a.serverToClient(r),e.data("date",r)),s=i.getDateDeltaString(r,t),o(e,r,s)})},r(".js-date-title[dt]",function(e,t,r){e.attr("title",r)}),r(".date[dt], .date[data-date]",function(e,r,n){e.text(i.getDateDeltaString(r,t)),e.is("[title]")||e.attr("title",d(r).format("LLL"))})},parse:function(e){return null==e&&(e=""),d(e).toDate()},toDateString:function(e){var t,r,n;return e=d(e),n=d(),r=Math.abs(n.diff(e,"months"))>9,t=e.isSame(n,"year")&&!r,e.format(t?"llll":"ll")},validDate:function(e){return c.isDate(e)&&!isNaN(e.getTime())}},c.extend(i,o.Events)},{}],67:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=[].slice;i=e("underscore"),n=e(66),u=e(63),l=e(209),a=e(62),h=e(34),g={action:e("locale").actions,notification:e("locale").notifications},p=e(122),d=e(123),m=function(e,t,r){return null==r&&(r=!1),{type:"text",text:e,hideIfContext:r,idContext:t}},c=u.makeVisitor(m,function(e,t){return t.entities[e]}),f=u.makeVisitor(l.id,function(e,t){return t.hasOwnProperty(e)?t[e]:(h(new Error("substitution key "+e+" not found!")),"")}),v=function(e){var t,r,n,o;switch(t=i.clone(e),t.type){case"card":t.url=siteDomain+"/c/"+(null!=(r=t.shortLink)?r:t.id);break;case"board":t.url=siteDomain+"/b/"+(null!=(n=t.shortLink)?n:t.id);break;case"organization":t.url=siteDomain+"/"+(null!=(o=t.name)?o:t.id);break;case"attachment":null!=t.url&&(t.isTrelloAttachment=p(t.url),t.isTrello=d(t.url))}return t},s=function(e,t){return function(r){return r.type===e?t(r):r}},t.exports=o=function(){function e(e){this.visit=l(u.visit,g[e])}var t;return t=function(e,t){var r,n,o;return o=[e.translationKey],null==t?o:(r=i.find(i.pairs(e.entities),function(e){var r,n;return n=e[0],r=e[1],r.id===t}),null!=r?(n=r[0],[[e.translationKey,n].join("@")].concat(y.call(o))):o)},e.prototype.getEntities=function(e,r){var n;return"unknown"===e.translationKey?[]:(n=i.chain(t(e,r)).map(function(t){return function(r){return t.visit(r,c,e)}}(this)).compact().first().value(),null==n?(h(new Error("display key '"+e.translationKey+"' not found!")),[]):n.map(s("translatable",this._textFromTranslatable.bind(this))).map(s("relDate",this._localizedRelDate.bind(this))).map(v))},e.prototype._format=function(e,t){return null==t&&(t={}),this.visit(e,f,t).join("")},e.prototype._textFromTranslatable=function(e){var t;return t=this._format(e.translationKey),m(t,e.idContext,e.hideIfContext)},e.prototype._localizedRelDate=function(e){return i.defaults({current:this.relDateText(e.date)},e)},e.prototype.relDateText=function(e,t){var r,o,i;return null==t&&(t=new Date),r=new Date(e),o=n.getDateDeltaString(r,t),i=r>t?"notification_is_due":"notification_was_due",this._format(i,{period:o})},e}()},{}],68:[function(e,t,r){var n,o,i,s,a;o=e("hearsay"),i=e("bluebird"),s=e(62),a=new o.Emitter,a.use(),n=function(){function e(e,t,r,n){this.error=e,this.url=null!=t?t:document.location.href,this.line=null!=r?r:0,this.col=null!=n?n:0,s(null!=this.error)}return e}(),window.onerror=function(e,t,r,o,i){return null==i&&(i=new Error(e)),a.send(new n(i,t,r,o))},i.onPossiblyUnhandledRejection(function(e){return a.send(new n(e))}),t.exports=a},{}],69:[function(e,t,r){var n,o,i,s;o=e("bluebird"),i=e("underscore"),s=e(62),t.exports=n=function(){function e(){}return e.prototype.listenToOnce=function(e,t,r){var n,o;return o=null,n=function(){return r.apply(this,arguments),o()},o=function(r){return function(){return r.stopListening(e,t,n)}}(this),this.listenTo(e,t,n)},e.prototype.waitForId=function(e,t){return this.waitForAttr(e,"id",t)},e.prototype.waitForAttr=function(e,t,r){var n;if(3!==arguments.length)throw new Error("Wrong number of arguments to waitForAttr");null!=(n=e.get(t))?r(n):this.listenToOnce(e,"change:"+t,function(n){return function(){return n.waitForAttr(e,t,r)}}(this))},e.prototype.waitForAttrs=function(e,t,r){var n;if(3!==arguments.length)throw new Error("Wrong number of arguments to waitForAttrs");return n=t.map(function(t){return function(r){return new o(function(n){return t.waitForAttr(e,r,n)})}}(this)),o.all(n).then(function(e){return i.object(i.zip(t,e))}).tap(r).done()},e}()},{}],70:[function(e,t,r){var n,o,i,s,a,u,c;n=e("jquery"),o=e(13),i=e(65),a=e(109),u=e("underscore"),c=e(88),s=e("bluebird"),t.exports=new(function(){function e(){this.settings={},this._update=u.debounce(this._update,100).bind(this),this._hasher=u.memoize(c)}var t,r;return r=function(e,t,r,n,o,i,s,a){return null==a&&(a=!0),null==i&&(i=5),e.beginPath(),e.moveTo(t+i,r),e.lineTo(t+n-i,r),e.quadraticCurveTo(t+n,r,t+n,r+i),e.lineTo(t+n,r+o-i),e.quadraticCurveTo(t+n,r+o,t+n-i,r+o),e.lineTo(t+i,r+o),e.quadraticCurveTo(t,r+o,t,r+o-i),e.lineTo(t,r+i),e.quadraticCurveTo(t,r,t+i,r),e.closePath(),a&&e.stroke(),s?e.fill():void 0},e.prototype.drawFavicon=function(){var e,t,n,i,s;if(e=document.createElement("canvas"),e.width=e.height=64,null==(t="function"==typeof e.getContext?e.getContext("2d"):void 0))throw Error("Can't render to the canvas!");return t.save(),this.settings.useDefault?(n=t.createLinearGradient(0,0,0,32),n.addColorStop(0,"#298FCA"),n.addColorStop(1,"#0079BF"),t.fillStyle=n):t.fillStyle=null!=(s=this.settings.color)?s:o.blue.color,r(t,0,0,64,64,12,!0),t.fillStyle="#fff",r(t,9,9,19,44,6,!0),r(t,36,9,19,29,6,!0),t.restore(),this.settings.hasNotifications&&(i=15,t.beginPath(),t.arc(64-i,i,i,0,2*Math.PI,!1),t.fillStyle="#EB5A46",t.fill(),t.lineWidth=4,t.strokeStyle="#FFFFFF",t.stroke(),t.closePath()),e.toDataURL("image/png")},t=function(e){return new s(function(t,r){a.waitForImageLoad(e,function(){return t(e)},r)})},e.prototype._update=function(){var e,r,o;if(i.allowsDynamicFavicon())return o=null!=this.settings.url?(r=this._hasher(this.settings.hasNotifications+"-"+this.settings.tiled+"-"+this.settings.url),e=window.backgroundDomain+"/favicon/"+r+".png",t(e)):s.reject(),o.catch(function(e){return function(){return null!=e.settings.url?"/dynamic-favicon?background="+e.settings.url+"&tiled="+(e.settings.tiled?"1":"0")+"&unread="+(e.settings.hasNotifications?"1":"0"):e.drawFavicon()}}(this)).then(function(e){return function(e){return n("#favicon").remove(),n("<link>").attr({id:"favicon",rel:"icon",type:"image/png",sizes:"64x64",href:e}).appendTo("head")}}(this)).catch(function(){}).done()},e.prototype.setNotifications=function(e){return this.settings.hasNotifications=e,this._update()},e.prototype.setBackground=function(e){var t,r,n,o;return n=e.url,r=e.tiled,t=e.color,o=e.useDefault,this.settings.url=n,this.settings.tiled=r,this.settings.color=t,this.settings.useDefault=o,this._update()},e}())},{}],71:[function(e,t,r){var n,o,i,s,a=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e("underscore"),i=e(62),s=e(209),t.exports=n=function(){function e(e,t){var r,n,s,a;null==t&&(t={}),this.products={},this.prices={},this.intervals={},this.productShortNames={},this.prebilledProducts={},this.productFeatures={},this.perUserProducts={},this.perActiveUserProducts={},this.globalFeatures=null!=(s=t.globalFeatures)?s:[],i(t.currentProducts),this.currentProducts=t.currentProducts,o.extend(this,t.extras);for(r in e)a=e[r],n=parseInt(r,10),a=o.extend({interval:"monthly",hidden:!1,prebill:!0,perUser:!1,features:[]},a),this.products[n]=a.name,a.hidden||(this.productShortNames[a.shortName]=n),this.prebilledProducts[n]=a.prebill,this.perUserProducts[n]=a.perUser,this.perActiveUserProducts[n]=a.perActiveUser,this.productFeatures[n]=a.features,this.prices[n]=a.price,this.intervals[n]=a.interval}return e.prototype._convertToId=function(e){return o.isString(e)?/^\d+$/.test(e)?parseInt(e,10):this.productShortNames[e]:e},e.prototype.getProductNumber=function(e){return this._convertToId(e)},e.prototype.getPrice=function(e){return this.prices[this._convertToId(e)]},e.prototype.getInterval=function(e){return this.intervals[this._convertToId(e)]},e.prototype.isMonthly=function(e){return"monthly"===this.getInterval(e)},e.prototype.isYearly=function(e){return"yearly"===this.getInterval(e)},e.prototype.isPerActiveUser=function(e){return this.perActiveUserProducts[this._convertToId(e)]},e.prototype.isPerUser=function(e){return this.perUserProducts[this._convertToId(e)]},e.prototype.isPrebilled=function(e){return this.prebilledProducts[this._convertToId(e)]},e.prototype.getYearlyDiscountPercent=function(e,t){var r,n;return n=this.getPrice(e),r=12*this.getPrice(t),Math.round(100*(r-n)/r)},e.prototype.features=function(e){return null==e&&(e=[]),o.chain(e).map(s.lookup(this.productFeatures)).tap(function(t){return i(o.all(t,s.id),"FeatureSet::features called on an unrecognized product: "+e)}).flatten().unique().value()},e.prototype.hasProduct=function(e){return null==e&&(e=[]),o.any(e,function(e){return function(t){return t in e.products}}(this))},e.prototype.isFeatureEnabled=function(e,t){return a.call(this.globalFeatures,e)>=0||a.call(this.features(t),e)>=0},e}()},{}],72:[function(e,t,r){var n,o,i;n=e("underscore"),i=e(100),o=e(24),t.exports=n.filter(o,function(e){return i(["templates","tips",e.id])?e.langs?n.contains(e.langs,window.locale):!0:!1})},{}],73:[function(e,t,r){t.exports={number:e(75),taxRate:e(77),percentage:e(76),money:e(74)}},{}],74:[function(e,t,r){var n,o,i;n=e("intl"),i=e(28).locales,o=null,t.exports=function(e){return null==o&&(o=new n.NumberFormat(i[0],{minimumFractionDigits:2,maximumFractionDigits:2})),o.format(e)}},{}],75:[function(e,t,r){var n,o,i;n=e("intl"),i=e(28).locales,o=null,t.exports=function(e){return null==o&&(o=new n.NumberFormat(i[0])),o.format(e)}},{}],76:[function(e,t,r){var n,o,i;n=e("intl"),i=e(28).locales,o=null,t.exports=function(e){return null==o&&(o=new n.NumberFormat(i[0],{style:"percent"})),o.format(e)}},{}],77:[function(e,t,r){var n,o,i;n=e("intl"),i=e(28).locales,o=null,t.exports=function(e){return null==o&&(o=new n.NumberFormat(i[0],{style:"percent",minimumFractionDigits:4,maximumFractionDigits:4})),o.format(e)}},{}],78:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=e("jquery"),o=e(205),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.loadedAuth=function(){var e;return null!=(e=window.gapi)?e.load("auth",function(e){return function(){return e.loaded=!0,e.trigger("loaded"),e.authorize(!0)}}(this)):void 0},t.authorize=function(e,t){return this.validToken()?"function"==typeof t?t(null,this.oauthToken.access_token):void 0:gapi.auth.authorize({client_id:window.googleDriveClientId,scope:"https://www.googleapis.com/auth/drive.readonly",immediate:e},function(e){return function(r){var n;return!r||r.error?(e.oauthToken=null,"function"==typeof t?t(null!=(n=null!=r?r.error:void 0)?n:Error("Failed to request token")):void 0):(e.oauthToken=r,"function"==typeof t?t(null,e.oauthToken.access_token):void 0)}}(this))},t.validToken=function(){var e;return(null!=(e=this.oauthToken)?e.access_token:void 0)&&Date.now()/1e3<parseInt(this.oauthToken.expires_at)},t}(o.Events)},{}],79:[function(e,t,r){var n,o;n=e("jquery"),o=e(84),n.fn.format=function(e,t){return this.text(o(e,t,{raw:!0})),this},n.fn.formatHtml=function(e,t){return this.html(o(e,t)),this}},{}],80:[function(e,t,r){var n,o,i,s;i=e(16),n=e(14),o=e(15),s=e(19),t.exports={getKey:function(e){var t,r,a;switch(e.type){case"keydown":case"keyup":return null!=(r=o[e.which])?i[r]:i.Unknown;case"keypress":return null!=(t=null!=(a=n[e.which])?a:s[e.which])?i[t]:i.Unknown;default:throw Error("Can't getKey for this event")}},isArrow:function(e){return e===i.ArrowLeft||e===i.ArrowRight||e===i.ArrowUp||e===i.ArrowDown},isSubmitEvent:function(e){var t;if("keydown"!==e.type)throw Error("Checking for submit only works on keydown");return(t=this.getKey(e))===i.Enter||t===i.LineFeed},isForceSubmitEvent:function(e){return this.isSubmitEvent(e)&&(e.ctrlKey||e.metaKey)&&!e.shiftKey}}},{}],81:[function(e,t,r){var n,o,i,s,a,u,c,l,d=[].slice;n=e("jquery"),o=e("underscore"),i=e(209),s=function(e){return e.toLowerCase().split("-")},a=function(e,t){var r,n;return r=s(e),n=s(t),o.all(n,function(e,t){return r[t]===e})},u=function(e){var t,r,n,o;return e=e.split("@")[0],e=e.split(".")[0],t=e.split(/[-_]/),1===t.length?t[0]:(r=t[0],n=t[1],o=3<=t.length?d.call(t,2):[],[r,n.toUpperCase()].concat(d.call(o)).join("-"))},c=o.chain([n.cookie("lang"),navigator.language].concat(d.call(null!=(l=navigator.languages)?l:[]),[navigator.userLanguage],[navigator.browserLanguage],["en-GB"])).compact().map(function(e){return u(e)}).unique().value(),t.exports={preferred:c,matches:a,normalizeLocale:u,is:function(e){return a(c[0],e)},mostPreferred:function(e,t){return o.chain(e).map(function(e){return o.find(t,i(a,e))}).compact().first().value()}}},{}],82:[function(e,t,r){var n,o,i,s;s=e(100),i=e(84),n=e("underscore"),o=e("locale").counting,t.exports=function(e,t,r){var i;return null==r&&(r={}),i=n.extend({count:String(t)},r),s(["counts",e,o(t)],i)}},{}],83:[function(e,t,r){var n,o;n=e("underscore"),o=e(100),t.exports=function(e){var t,r;return t=n.isString(e)?e:null!=(null!=(r=e.responseJSON)?r.error:void 0)?e.responseJSON.message:e.responseText,o(["server error",t])||t}},{}],84:[function(e,t,r){var n,o;o=e(100),n=e(62),t.exports=function(e,t,r){var i;return i=o(e,t,r),n("string"==typeof i,"babble: key "+e+" not found"),i}},{}],85:[function(e,t,r){var n,o,i,s;i=e(217),n=e("underscore"),o=e(62),s="Error",t.exports=function(e,t){var r,n,a,u;for(r=i([e,s].join("::")),n=0,a=t.length;a>n;n++)u=t[n],o(u!==s,u+" is the reserved base name!"),o(!(u in r),"You can't use "+u+" as the name of a custom error"),r[u]=i([e,u].join("::"),{},r);return r}},{}],86:[function(e,t,r){var n;n=e(87),t.exports=new(function(){function e(){}return e.prototype.markdownAsHtml=function(e,t){return null==t&&(t={}),null==e&&(e=""),""===e?e:n.description.format(e,t).output},e.prototype.bytes=function(e){var t,r,n,o,i,s,a;if(null==e)return"Unknown Size";for(a=["B","KB","MB","GB"],t=e,n=r=0,o=a.length;o>r;n=++r){if(s=a[n],1024>t||n===a.length-1)return i=Math.round(100*t)/100,i+" "+s;t/=1024}return"unknown"},e}())},{}],87:[function(e,t,r){var n,o,i,s,a,u,c,l;n=e(25),o=e(138),i=e(5),s=e(29),u=e("trello-markdown"),c=e(109),l=e("underscore"),a=e("emoji-map"),t.exports=window.TFM=new(function(){function e(){var e;e={lookupEmoji:this.lookupEmoji,lookupCardInfo:this.lookupCardInfo,lookupMember:this.lookupMember},e.shouldOpenLinkInNewTab=c.isExternalURL,this.description=new u(e),this.comments=new u(l.extend({restrict:{block:["blockquote","code","fencedCode","hr","list","newline","paragraph"],inline:["atMention","autolink","break","code","em","email","emailLink","emoji","link","strong","strikethrough","url"]}},e)),this.checkItems=new u(l.extend({inlineOnly:!0,restrict:{inline:["atMention","autolink","code","em","email","emailLink","emoji","link","strong","strikethrough","url"]}},e))}return e.prototype.lookupEmoji=function(e,t){var r,n,o;return e=e.toLowerCase(),null!=(r=null!=(n=t.textData)&&null!=(o=n.emoji)?o[e]:void 0)?r:a[e]},e.prototype.lookupMember=function(e,t){var r,o,i,a;return e=e.toLowerCase(),"card"===e||"board"===e?[e,!0]:(o=function(){return s.findOne("Member","username",e)},r=function(){return s.findOne("Member",function(t){var r;return r=t.get("fullName"),r?l.chain(r.toLowerCase().split(/\s+/)).filter(function(e){return e.length>=2}).contains(e).value():!1})},i=null!=(a=o())?a:r(),null!=i?[i.get("fullName"),n.isMe(i)]:/^[a-z0-9_]{3,}/.test(e)?[e,!1]:[null,!1])},e.prototype.lookupCardInfo=function(e,t){var r,n,o,a,u;return e=parseInt(e,10),a=null!=t&&null!=(u=t.board)?u.id:void 0,null==a&&null!=(o=i.getCurrentBoard())&&(a=o.id),r=s.findOne("Card",function(t){return t.get("idBoard")===a&&t.get("idShort")===e}),null!=r?{title:r.get("name"),url:i.getCardUrl(r)}:(n="Card "+e,{title:n,url:i.getCardUrlWithoutModels(a,e,n)})},e}())},{}],88:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v;a=0,s=function(e){return m(f(v(e)))},f=function(e){return n(o(h(e),8*e.length))},m=function(e){var t,r,n,o,i;try{}catch(e){t=e,a=0}for(r=a?"0123456789ABCDEF":"0123456789abcdef",o="",i=void 0,n=0;n<e.length;)i=e.charCodeAt(n),o+=r.charAt(i>>>4&15)+r.charAt(15&i),n++;return o},v=function(e){var t,r,n,o;for(r="",t=-1,n=void 0,o=void 0;++t<e.length;)n=e.charCodeAt(t),o=t+1<e.length?e.charCodeAt(t+1):0,n>=55296&&56319>=n&&o>=56320&&57343>=o&&(n=65536+((1023&n)<<10)+(1023&o),t++),127>=n?r+=String.fromCharCode(n):2047>=n?r+=String.fromCharCode(192|n>>>6&31,128|63&n):65535>=n?r+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|63&n):2097151>=n&&(r+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|63&n));return r},h=function(e){var t,r;for(r=Array(e.length>>2),t=0;t<r.length;)r[t]=0,t++;for(t=0;t<8*e.length;)r[t>>5]|=(255&e.charCodeAt(t/8))<<t%32,t+=8;return r},n=function(e){var t,r;for(r="",t=0;t<32*e.length;)r+=String.fromCharCode(e[t>>5]>>>t%32&255),t+=8;return r},o=function(e,t){var r,n,o,i,s,a,u,h,m;for(e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t,r=1732584193,n=-271733879,o=-1732584194,i=271733878,s=0;s<e.length;)a=r,u=n,h=o,m=i,r=c(r,n,o,i,e[s+0],7,-680876936),i=c(i,r,n,o,e[s+1],12,-389564586),o=c(o,i,r,n,e[s+2],17,606105819),n=c(n,o,i,r,e[s+3],22,-1044525330),r=c(r,n,o,i,e[s+4],7,-176418897),i=c(i,r,n,o,e[s+5],12,1200080426),o=c(o,i,r,n,e[s+6],17,-1473231341),n=c(n,o,i,r,e[s+7],22,-45705983),r=c(r,n,o,i,e[s+8],7,1770035416),i=c(i,r,n,o,e[s+9],12,-1958414417),o=c(o,i,r,n,e[s+10],17,-42063),n=c(n,o,i,r,e[s+11],22,-1990404162),r=c(r,n,o,i,e[s+12],7,1804603682),i=c(i,r,n,o,e[s+13],12,-40341101),o=c(o,i,r,n,e[s+14],17,-1502002290),n=c(n,o,i,r,e[s+15],22,1236535329),r=l(r,n,o,i,e[s+1],5,-165796510),i=l(i,r,n,o,e[s+6],9,-1069501632),o=l(o,i,r,n,e[s+11],14,643717713),n=l(n,o,i,r,e[s+0],20,-373897302),r=l(r,n,o,i,e[s+5],5,-701558691),i=l(i,r,n,o,e[s+10],9,38016083),o=l(o,i,r,n,e[s+15],14,-660478335),n=l(n,o,i,r,e[s+4],20,-405537848),r=l(r,n,o,i,e[s+9],5,568446438),i=l(i,r,n,o,e[s+14],9,-1019803690),o=l(o,i,r,n,e[s+3],14,-187363961),n=l(n,o,i,r,e[s+8],20,1163531501),r=l(r,n,o,i,e[s+13],5,-1444681467),i=l(i,r,n,o,e[s+2],9,-51403784),o=l(o,i,r,n,e[s+7],14,1735328473),n=l(n,o,i,r,e[s+12],20,-1926607734),r=d(r,n,o,i,e[s+5],4,-378558),i=d(i,r,n,o,e[s+8],11,-2022574463),o=d(o,i,r,n,e[s+11],16,1839030562),n=d(n,o,i,r,e[s+14],23,-35309556),r=d(r,n,o,i,e[s+1],4,-1530992060),i=d(i,r,n,o,e[s+4],11,1272893353),o=d(o,i,r,n,e[s+7],16,-155497632),n=d(n,o,i,r,e[s+10],23,-1094730640),r=d(r,n,o,i,e[s+13],4,681279174),i=d(i,r,n,o,e[s+0],11,-358537222),o=d(o,i,r,n,e[s+3],16,-722521979),n=d(n,o,i,r,e[s+6],23,76029189),r=d(r,n,o,i,e[s+9],4,-640364487),i=d(i,r,n,o,e[s+12],11,-421815835),o=d(o,i,r,n,e[s+15],16,530742520),n=d(n,o,i,r,e[s+2],23,-995338651),r=p(r,n,o,i,e[s+0],6,-198630844),i=p(i,r,n,o,e[s+7],10,1126891415),o=p(o,i,r,n,e[s+14],15,-1416354905),n=p(n,o,i,r,e[s+5],21,-57434055),r=p(r,n,o,i,e[s+12],6,1700485571),i=p(i,r,n,o,e[s+3],10,-1894986606),o=p(o,i,r,n,e[s+10],15,-1051523),n=p(n,o,i,r,e[s+1],21,-2054922799),r=p(r,n,o,i,e[s+8],6,1873313359),i=p(i,r,n,o,e[s+15],10,-30611744),o=p(o,i,r,n,e[s+6],15,-1560198380),n=p(n,o,i,r,e[s+13],21,1309151649),r=p(r,n,o,i,e[s+4],6,-145523070),i=p(i,r,n,o,e[s+11],10,-1120210379),o=p(o,i,r,n,e[s+2],15,718787259),n=p(n,o,i,r,e[s+9],21,-343485551),r=g(r,a),n=g(n,u),o=g(o,h),i=g(i,m),s+=16;return Array(r,n,o,i)},u=function(e,t,r,n,o,s){return g(i(g(g(t,e),g(n,s)),o),r)},c=function(e,t,r,n,o,i,s){return u(t&r|~t&n,e,t,o,i,s)},l=function(e,t,r,n,o,i,s){return u(t&n|r&~n,e,t,o,i,s)},d=function(e,t,r,n,o,i,s){return u(t^r^n,e,t,o,i,s)},p=function(e,t,r,n,o,i,s){return u(r^(t|~n),e,t,o,i,s)},g=function(e,t){var r,n;return r=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(r>>16),n<<16|65535&r},i=function(e,t){return e<<t|e>>>32-t},t.exports=s},{}],89:[function(e,t,r){var n=[].slice;t.exports=function(){var e,t,r,o,i,s,a,u,c;for(a=2<=arguments.length?n.call(arguments,0,t=arguments.length-1):(t=0,[]),e=arguments[t++],r=0,i=a.length;i>r;r++){s=a[r],u=s.prototype;for(o in u)c=u[o],e.prototype[o]=c}return e}},{}],90:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h;n=e("jquery"),o=e(205),s=e(97),a=e("underscore"),c=0,d=window.sessionStorage,p=null!=(l=null!=d?d.status:void 0)?l:"active",u=null,h=null,"undefined"!=typeof document.hidden?(u="hidden",h="visibilitychange"):"undefined"!=typeof document.mozHidden?(u="mozHidden",h="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(u="msHidden",h="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(u="webkitHidden",h="webkitvisibilitychange"),t.exports=i={init:function(){setInterval(i.check,1e4),n(window).focus(function(){return i.addActivity()}),n(document).bind("keydown mousedown",function(){i.addActivity()}),i.getHidden=null!=u?function(){return document[u]}:function(){return!1},null!=h&&n(document).bind(h,function(e){return function(){return i.trigger("visibilitychange")}}(this))},addActivity:function(){var e;e=(new Date).getTime(),c=e,s.set("lastActivity",c),i.setStatus("active")},check:function(){var e;e=(new Date).getTime()-Math.max(c,s.enabled()?parseInt(s.get("lastActivity")):0),e>3e5&&i.setStatus("idle")},setStatus:function(e){e!==p&&(p=e,d&&(d.status=p),i.trigger("setStatus",p))},getStatus:function(){return p}},a.extend(i,o.Events)},{}],91:[function(e,t,r){var n,o,i,s;n=e("jquery"),o=e("react"),i=e("react-dom"),s=e(439),t.exports=o.createClass({displayName:"Wrapper",componentWillMount:function(){var e;return"function"==typeof(e=this.props.view).getData?e.getData():void 0},componentDidMount:function(){var e,t;return t=i.findDOMNode(this),e=this.props.view.render().el,n(t).append(e),s.addHandler(this.props.view,{scope:"popover_view"})},componentWillUnmount:function(){return s.removeHandler(this.props.view)},render:function(){return o.createElement("div",this.props)}})},{}],92:[function(e,t,r){var n,o,i;n=e("hearsay"),i=e("xtend"),o=e(209),t.exports=i(n.mixin,{componentWillUnmount:function(){return this.unsubscribe()},syncState:function(e){return this.subscribe(e,o(this,"setState"))}})},{}],93:[function(e,t,r){var n,o;n=e("react"),o=e("xtend"),t.exports=function(e,t){return null==t&&(t={}),function(r){return n.createElement(e,o(t,r))}}},{}],94:[function(e,t,r){var n,o;o=e("underscore"),t.exports=n=function(){function e(){}return e.prototype.setTimeout=function(e,t){var r;return null==this._scheduled_timeouts&&(this._scheduled_timeouts=[]),this._scheduled_timeouts.push(r=setTimeout(e,t)),r},e.prototype.setInterval=function(e,t){var r;return null==this._scheduled_intervals&&(this._scheduled_intervals=[]),this._scheduled_intervals.push(r=setInterval(e,t)),r},e.prototype.requestAnimationFrame=function(e){var t;return null==this._scheduled_frameRequests&&(this._scheduled_frameRequests=[]),this._scheduled_frameRequests.push(t=requestAnimationFrame(e)),t},e.prototype.cancelScheduled=function(){var e,t,r,n,o,i,s,a,u,c,l,d,p;if(null!=this._scheduled_intervals)for(u=this._scheduled_intervals,t=0,i=u.length;i>t;t++)r=u[t],clearInterval(r);if(null!=this._scheduled_timeouts)for(c=this._scheduled_timeouts,n=0,s=c.length;s>n;n++)p=c[n],clearTimeout(p);if(null!=this._scheduled_frameRequests)for(d=null!=(l=this._scheduled_frameRequests)?l:[],o=0,a=d.length;a>o;o++)e=d[o],cancelAnimationFrame(e)},e.prototype.defer=function(e){return this.setTimeout(e,1)},e.prototype.debounce=function(e,t){return null==t&&(t=1),this.dynamicDebounce(e,function(){return t})},e.prototype.dynamicDebounce=function(e,t){var r,n;return r=this.setTimeout.bind(this),n=null,function(){var o,i;o=arguments,i=function(t){return function(){n=null,e.apply(t,o)}}(this),clearTimeout(n),n=r(i,t.apply(this,o))}},e.prototype.throttle=function(e,t,r){var n,i,s,a,u,c,l,d,p,h,m;return null==r&&(r={}),i=n=d=h=null,a=null!=(c=r.leading)?c:!0,m=null!=(l=r.trailing)?l:!0,p=this.setTimeout.bind(this),u=null,s=function(){return u=a?o.now():0,h=null,d=e.apply(i,n),i=n=null},function(){var r,c;return r=o.now(),null!=u||a||(u=r),c=t-(r-u),i=this,n=arguments,0>=c?(clearTimeout(h),h=null,u=r,d=e.apply(i,n),i=n=null):!h&&m&&(h=p(s,c)),d}},e}()},{}],95:[function(e,t,r){t.exports=e(96)(window.sessionStorage)},{}],96:[function(e,t,r){t.exports=function(e){return{enabled:function(){return null!=e},set:function(t,r){try{return null!=e?e[t]=JSON.stringify(r):void 0}catch(e){}},get:function(e){var t,r;if(r=this.getRaw(e),!r)return null;try{return JSON.parse(r)}catch(e){return t=e,null}},getRaw:function(t){return null!=e?e[t]:void 0},unset:function(t){return null!=this.getRaw(t)&&null!=e?delete e[t]:void 0}}}},{}],97:[function(e,t,r){t.exports=e(96)(window.localStorage)},{}],98:[function(e,t,r){var n,o;n=e(97),o=e(35),t.exports=new(function(){function e(){}return e.prototype.delta=n.get("serverTimeDelta"),e.prototype.updateServerTime=function(e){return this.delta=new Date(e)-new Date,n.set("serverTimeDelta",this.delta),o("time","delta",this.delta)},e.prototype.serverToClient=function(e){return new Date(new Date(e)-this.delta)},e}())},{}],99:[function(e,t,r){var n,o,i,s,a,u,c,l,d;n=e("jquery"),u=e("underscore"),o=e(205),c=e(121),l=e(413).getTypes,d=e(115),i=e(80),s=e(16),a=function(){function e(){this.value="",
n(document).keydown(function(e){return function(t){var r,o,a;if(r=i.getKey(t),e.value&&(t.ctrlKey||t.metaKey)){if(n(t.target).is("#clipboard"))return void(r===s.C&&e.clearCut());if(!n(t.target).is("input:visible,textarea:visible")&&!(("function"==typeof window.getSelection&&null!=(o=window.getSelection())?o.toString():0)||(null!=(a=document.selection)?a.createRange().text:0)))return u.defer(function(){var t;return t=n("#clipboard-container"),t.empty().show(),n('<div id="clipboard" contenteditable="true"></div>').text(e.value).appendTo(t).focus().select(),d(document.getElementById("clipboard"))})}}}(this)),n(document).keyup(function(e){return function(t){var r;return e.isClipboard(t.target)&&(r=n("#clipboard").text(),""===r&&e.setCut(e.value)),e.checkForPastedImage()}}(this)),n(document).on("paste",function(e){return function(t){return u.isEmpty(l(t))||e.cancelPasteImage(),setTimeout(e.clearCut.bind(e),1)}}(this))}return e.prototype.set=function(e){this.value=e},e.prototype.setCut=function(e){try{localStorage.cut=e}catch(e){}},e.prototype.getCut=function(){try{return localStorage.cut}catch(e){}return null},e.prototype.clearCut=function(){try{delete localStorage.cut}catch(e){}},e.prototype.isCut=function(e){return e===this.getCut()},e.prototype.isClipboard=function(e){return"clipboard"===e.id},e.prototype.clear=function(){return n("#clipboard-container").empty().hide()},e.prototype.checkForPastedImage=function(){return clearTimeout(this.pasteImageTimeout),this.pasteImageTimeout=setTimeout(function(e){return function(){var t,r;t=n("#clipboard-container").find("img"),e.clear(),t.length>0&&(r=t.attr("src"),/^data:/.test(r)&&e.trigger("pasteImage",c(r)))}}(this),1)},e.prototype.cancelPasteImage=function(){return clearTimeout(this.pasteImageTimeout),this.clear()},e}(),u.extend(a.prototype,o.Events),t.exports=new a},{}],100:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m;u=e(28).locales,i=e(63),c=e(221),s=e(209),o=e(62),n=e("underscore"),d=n.clone(e("locale").strings),l=n.pick(e("locale"),"axis","exports","labels","templates","billing");for(a in l)p=l[a],o(!(a in d)),d[a]=p;m=i.makeVisitor(s.id,function(e,t,r){return null==r&&(r={}),o(t.hasOwnProperty(e),"'"+e+"' not found in "+JSON.stringify(t)),p=t[e],o("string"==typeof p,"I don't know how to convert values into strings. Please use a localized conversion function and pass me the string result."),r.raw?p:n.escape(p)}),h=s(i.visit,d),t.exports=function(e,t,r){var n;return null==t&&(t={}),null!=(n=h(e,m,t,r))?n.join(""):void 0}},{}],101:[function(e,t,r){var n,o,i;n=e(25),o=e("underscore"),i=e("moment"),t.exports=function(){var e,t,r,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C;if(n.isLoggedIn()){for(c=n.me(),k=function(e){var t,r,n,o,i;if(r=e+"",t=r.match(/\(([^\)]+)\)$/)||r.match(/([A-Z]+|UTC[+-]\d{4}) [\d]{4}$/))for(t=t[1],/\s/.test(t)&&(t=t.replace(/(\S)\S*/g,function(e,t){return t})),n=null!=(i=t.toUpperCase().match(/[A-Z]/g))?i:[],t=n.join("");t.length<2;)t+="?";else o=e.getTimezoneOffset(),t="UTC"+(0>o?"+":"-")+("00"+Math.floor(Math.abs(o)/60)).substr(-2)+":"+("00"+Math.abs(o)%60).substr(-2);return t},g=v=r=null,t=new Date,g=t.getTimezoneOffset(),w=k(t),h=6e4,s=a=0;12>=a;s=++a)if(t=i(t).add(30,"days").toDate(),t.getTimezoneOffset()!==g){r=t;break}if(null!=r){for(v=r.getTimezoneOffset(),d=(new Date).getTime(),l=r.getTime(),e=0;l>d+h/2&&30>e;)if(e++,p=Math.floor((d+l)/2),f=new Date(p).getTimezoneOffset(),f===g)d=p;else{if(f!==v)break;l=p}_=k(r),r=new Date(h*Math.floor(l/h)).toISOString()}m={},b={offsetCurrent:g,timezoneCurrent:w,offsetNext:v,timezoneNext:_,dateNext:r};for(u in b)C=b[u],null!=C&&(m[u]=C);return y=c.getPref("timezoneInfo"),o.isEqual(m,y)?void 0:c.run("timezoneInfo",m)}}},{}],102:[function(e,t,r){var n;n=e("underscore"),t.exports=function(e){var t;return t=n.reduce(e.split(","),function(e,t){var r,n,o;return o=t.split(":"),r=o[0],n=o[1],null!=n?(null==e[r]&&(e[r]=[]),e[r].push(n)):e[r]=!0,e},{}),function(e){var r,o;return r=t[e.get("type")],null==r?!1:r===!0?!0:(o=e.get("data").old,null!=o&&n.any(r,function(e){return null!=o[e]}))}}},{}],103:[function(e,t,r){var n=[].slice;t.exports=function(){var e,t,r,o,i,s,a,u,c,l,d,p;if(e=2<=arguments.length?n.call(arguments,0,r=arguments.length-1):(r=0,[]),l=arguments[r++],t=e[0],d=2<=e.length?n.call(e,1):[],null==t)return 0;if(d.length>0)for(o=i=0,a=t.length;a>i;o=++i)for(p=t[o],s=0,u=d.length;u>s;s++)if(c=d[s],c.length<=o||!l(p,c[o]))return o;return t.length}},{}],104:[function(e,t,r){var n;n=e("hearsay"),t.exports=function(e,t){return new n.ContinuousSignal(function(r){var n,o,i,s,a;return o=e.get(),n=Date.now(),r(o),i=null,s=function(e){return o=e,n=Date.now(),r(e)},t>0?(a=e.subscribe(function(e){var r;return clearTimeout(i),o!==e?(r=t-(Date.now()-n),0>=r?s(e):i=setTimeout(function(){return s(e)},r)):void 0}),function(){return a(),clearTimeout(i)}):(a=e.subscribe(function(e){return cancelAnimationFrame(i),i=requestAnimationFrame(function(){return r(e)})}),function(){return a(),cancelAnimationFrame(i)})})}},{}],105:[function(e,t,r){var n,o;n=e("underscore"),o=e(110),t.exports=function(e,t,r){var i;return null==r&&(r=function(e,t,r){return r}),(i=function(e,s){var a;return(a=t(e,s))?r(e,s,a):n.isArray(e)?e.map(i):o(e)?n.mapObject(e,i):e})(e)}},{}],106:[function(e,t,r){var n;t.exports=function(){try{return new window.CustomEvent("testEvent"),window.CustomEvent}catch(e){return n=function(e,t){var r;return null==t&&(t={bubbles:!1,cancelable:!1,detail:void 0}),r=document.createEvent("CustomEvent"),r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r},n.prototype=window.Event.prototype,n}}()},{}],107:[function(e,t,r){var n;n=e(106),t.exports=function(e,t,r){var o,i,s,a,u,c;for(o=new n(t,{bubbles:!1,cancelable:!1,detail:null!=(a=r.detail)?a:void 0}),u=!1,o.stopPropagation=function(){return u=!0,n.prototype.stopPropagation.apply(this,arguments)},i=0,s=e.length;s>i;i++)c=e[i],u||c.dispatchEvent(o)}},{}],108:[function(e,t,r){var n;n=e(106),t.exports=function(e,t,r){var o,i,s,a;return null==r&&(r={}),o=new n(t,{bubbles:null!=(i=r.bubbles)?i:!0,cancelable:null!=(s=r.cancelable)?s:!1,detail:null!=(a=r.detail)?a:void 0}),e.dispatchEvent(o)}},{}],109:[function(e,t,r){var n,o,i,s,a,u,c=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1},l={}.hasOwnProperty;n=e("jquery"),o=e(16),s=e("underscore"),a=e(35),u=e(228),t.exports=i={spacing:16384,checkId:function(e){return"ObjectID"===(null!=e?e.constructor.name:void 0)||24===(null!=e?e.length:void 0)&&/^[a-f0-9]*$/.test(e)},capitalize:function(e){return s.isString(e)&&!s.isEmpty(e)?e[0].toUpperCase()+e.substr(1):e},pluralize:function(e){return e+"s"},imageFileExtensions:["png","gif","jpg","jpeg","bmp","ico"],extensionIsImage:function(e){var t,r;return t=null!=(r=i.fileExt(e))?r.toLowerCase():void 0,c.call(i.imageFileExtensions,t)>=0},fileExt:function(e){var t,r,n;return null!=(t=null!=(r=/\.([a-z0-9]+)$/i.exec(e))&&null!=(n=r[1])?n.toLowerCase():void 0)?t:null},traverse:function(e,t){var r,n,o;if(s.isEmpty(t)||!e)return e;if(s.isArray(t)){for(r=0,o=t.length;o>r&&(n=t[r],e=e[n],e);r++);return e}return e[t]},escapeForRegex:function(e){return null!=e?e.replace(/[-[\]{}()*+?.,\\\/^$|#\s]/g,"\\$&"):void 0},makeSlug:function(e,t){var r;return null==t&&(t="-"),e&&(r=i.removeAccents(e.toLowerCase()).replace(/[^a-z0-9]+/gi,t).replace(RegExp("^"+t+"|"+t+"$","g"),""),r.length>128&&(r=r.substr(0,128))),r||t},removeAccents:function(e){return e.replace(/[àáâãäåāăą]/g,"a").replace(/æ/g,"ae").replace(/[çćĉċč]/g,"c").replace(/[ďđ]/g,"d").replace(/[èéêëēĕėęě]/g,"e").replace(/[ĝğġģ]/g,"g").replace(/[ĥħ]/g,"h").replace(/[ìíîïĩīĭįı]/g,"i").replace(/[ñńņňŉŋ]/g,"n").replace(/[òóôõöōŏő]/g,"o").replace(/œ/g,"oe").replace(/ř/g,"r").replace(/[śŝşš]/g,"s").replace(/ß/g,"ss").replace(/[ùúûüũūŭůűų]/g,"u").replace(/[ýÿ]/g,"y")},isShortId:function(e){return/^[0-9]{1,8}$/.test(e)},isShortLink:function(e){return s.isString(e)&&/^[a-zA-Z0-9]{8}$/.test(e)},getMs:function(e){var t,r,n,o,i,s,a,u;return t=e.days,r=e.hours,n=e.minutes,s=e.seconds,i=e.ms,u=e.years,o=e.months,a=e.weeks,null==t&&(t=0),null==r&&(r=0),null==n&&(n=0),null==s&&(s=0),null==i&&(i=0),u&&(t+=365*u),o&&(t+=30*o),a&&(t+=7*a),r+=24*t,n+=60*r,s+=60*n,i+=1e3*s},getSeconds:function(e){return this.getMs(e)/1e3},dateAfter:function(e){var t,r;return t=null!=(r=null!=e?e.date:void 0)?r:new Date,new Date(t.getTime()+this.getMs(e))},dateBefore:function(e){var t,r;return t=null!=(r=null!=e?e.date:void 0)?r:new Date,new Date(t.getTime()-this.getMs(e))},compareMemberType:function(e,t,r,n){var o,i,s,a,u;switch(null==n&&(n={}),u=n.mode,null==u&&(u="standard"),u){case"members":i=[["normal","admin"]];break;case"commentDelete":i=[["normal","org"],["admin"]];break;default:i=[["org"],["normal"],["admin"]]}return o=function(t){var r,n,o,s,a;for(a=e.getMemberType(t),o=n=0,s=i.length;s>n;o=++n)if(r=i[o],c.call(r,a)>=0)return o;return-1},s=o(t),a=o(r),s>a?1:a>s?-1:0},idToDate:function(e){return new Date(1e3*parseInt(null!=e?e.substr(0,8):void 0,16))},tryToExcludeEXIFRotated:function(e){var t,r;return t=s.reduce(e,function(e,t){var r,n,o;return n=t.scaled,o=t.width,r=t.height,n&&o!==r?r>o?e+1:e-1:e},0),r=t>0,s.filter(e,function(e){var t,n;return n=e.width,t=e.height,r?t>=n:n>=t})},preferScaledPreviews:function(e){var t;return t=this.tryToExcludeEXIFRotated(s.filter(e,function(e){return e.scaled})),s.isEmpty(t)?e:t},smallestPreviewBiggerThan:function(e,t,r){var n,o,i,a;for(null==e&&(e=[]),null==t&&(t=0),null==r&&(r=0),a=[this.preferScaledPreviews(e),e],o=0,i=a.length;i>o;o++)e=a[o],s.isEmpty(n)&&(n=s.filter(e,function(e){return e.width>=t&&e.height>=r}));return this.smallestPreview(n)},previewBetween:function(e,t,r,n,o){var i;return null==e&&(e=[]),i=s.filter(this.preferScaledPreviews(e),function(e){var i,s;return t<=(i=e.width)&&n>=i&&r<=(s=e.height)&&o>=s}),this.biggestPreview(i)},biggestPreview:function(e){return 0===e.length?null:s.max(this.preferScaledPreviews(e),function(e){return Math.min(e.width,e.height)})},smallestPreview:function(e){return 0===e.length?null:s.min(this.preferScaledPreviews(e),function(e){return Math.max(e.width,e.height)})},rotateArr:function(e,t){return s.flatten([e.slice(-t),e.slice(0,-t)],!0)},stopPropagation:function(e){return null!=e?e.stopPropagation():void 0},preventDefault:function(e){return null!=e?e.preventDefault():void 0},stop:function(e){return i.stopPropagation(e),i.preventDefault(e)},checkEmail:function(e,t){return null==t&&(t=""),RegExp('^[^"@\\s\\[\\]\\(\\),:;<>\\\\]+@[-a-z0-9\\.'+t+"]+\\.[a-z"+t+"]+$","i").test(e)},removeDomainFromEmailAddress:function(e,t){return null==t&&(t=""),e.replace(RegExp("@[-a-z0-9\\."+t+"]+\\.[a-z"+t+"]+$"),"")},validName:function(e){return e.length>=1},spaces:function(e){for(this.longStr||(this.longStr=" ");this.longStr.length<e;)this.longStr=this.longStr+this.longStr;return this.longStr.substr(0,e)},_pad:function(e,t,r,n){var o,i;return null==r&&(r=" "),e=e.toString(),e.length>t?e.substr(0,t):(o=t-e.length,i=" "===r?this.spaces(o):this.times(r,o),n?i+e:e+i)},rpad:function(e,t,r){return this._pad(e,t,r,!1)},lpad:function(e,t,r){return this._pad(e,t,r,!0)},times:function(e,t){var r;return s.map(function(){r=[];for(var e=0;t>=0?t>e:e>t;t>=0?e++:e--)r.push(e);return r}.apply(this),function(){return e}).join("")},truncate:function(e,t){var r;return!(null!=e?e.length:void 0)||e.length<t?e:(r=e.substr(0,e.lastIndexOf(" ",t)),r?r:e.substr(0,t))},scrollToTop:function(){return n(window).scrollTop(0)},getProtocol:function(e){var t,r;return e&&null!=(t=null!=(r=/^([a-z]+):/i.exec(e))?r[1]:void 0)?t:""},makeHttp:function(e){return e?(e=e.replace(/^[a-z]*:\/*/i,""),"http://"+e):""},sanitizeWebAddress:function(e){var t;return"http"!==(t=i.getProtocol(e))&&"https"!==t?i.makeHttp(e):e},isInPosition:function(e,t,r){var n;return null==(null!=r?r.id:void 0)?!1:(n=t[e],(null!=n?n.id:void 0)===r.id)},calcPos:function(e,t,r,n,o){var s,a,u,c,l,d,p,h,m;return a=65536,l=t.select(function(e){return(!(null!=r&&r.id===e.id)||o)&&(!n||n(e))}),i.isInPosition(e,l,r)?null!=(m=r.pos)?m:r.get("pos"):(s=Math.min(Math.max(e,0),l.length),c=l[s-1],u=l[s],d=(null!=r?r.get("pos"):void 0)||-1,h=null!=c?c.get("pos"):-1,p=null!=u?u.get("pos"):-1,-1===p?r&&d>h?d:h+a:r&&d>h&&p>d?d:h>=0?(p+h)/2:p/2)},randomWait:function(e,t){return Math.floor(e+Math.random()*t)},toTitleCase:function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},calcBoardLayout:function(){return n(window).trigger("resize")},navMenuList:function(e,t,r){var n,i,a,u,c,l,d,p;return a=e.find(t),p=a.filter(".selected").first()[0],d=s.indexOf(a,p),i=a[0],u=a[a.length-1],l=0>d-1?u:a[d-1],c=d+1>a.length?i:a[d+1],r===o.ArrowDown&&(n=c),r===o.ArrowUp&&(n=l),this.selectMenuItem(e,t,n)},selectMenuItem:function(e,t,r){return e.find(t).removeClass("selected"),n(r).addClass("selected")},insertSelection:function(e,t,r,o){var s,a,u,c,l;return e=i.getElem(e),s=n(e),l=s.val(),null!=r||null!=o?(u=l.substring(0,r),a=l.substring(o),this.setCaretPosition(e,r+(""+t).length)):(u=l,a=""),c=/\S$/.test(u)?" ":"",s.val(u+c+t+a),this.setCaretPosition(e,u.length+c.length+t.length),s.focus(),s.trigger("mutated")},_nextWhitespace:function(e,t){var r,n;return r=e.indexOf("\n",t),-1===r&&(r=1/0),n=e.indexOf(" ",t),-1===n&&(n=1/0),Math.min(r,n,e.length)},getWordFromIndex:function(e,t){var r,n,o,i;for(o=Math.max(e.lastIndexOf("\n",t-1),e.lastIndexOf(" ",t-1)),o+=1;/[()\[\]\/\\;"'&]|:@/.test(e[o]);)o++;return r=t,n=r-o,i=e.slice(o,r),{start:o,end:r,length:n,str:i}},getWordFromCaret:function(e){var t,r;return e=i.getElem(e),r=n(e).val(),t=this.getCaretPosition(e),this.getWordFromIndex(r,t)},getLineFromIndex:function(e,t){var r,n,o,i;return o=e.lastIndexOf("\n",t-1),o+=1,r=this._nextWhitespace(e,t),n=r-o,i=e.slice(o,r),{start:o,end:r,length:n,str:i}},getLineFromCaret:function(e){var t,r;return e=i.getElem(e),r=n(e).val(),t=this.getCaretPosition(e),this.getLineFromIndex(r,t)},getCaretPosition:function(e){var t,r,n;return e=i.getElem(e),null!=e.selectionStart?t=e.selectionStart:c.call(document,"selection")>=0&&(e.focus(),r=document.selection.createRange(),n=document.selection.createRange().text.length,r.moveStart("character",-e.value.length),t=r.text.length-n),t},setCaretPosition:function(e,t){var r;return e=i.getElem(e),e.setSelectionRange?(e.focus(),e.setSelectionRange(t,t)):e.createTextRange?(r=e.createTextRange(),r.collapse(!0),r.moveEnd("character",t),r.moveStart("character",t),r.select()):void 0},setCaretAtEnd:function(e){var t;return e?(t=n(e).val().length,this.setCaretPosition(e,t)):void 0},getLastWord:function(e){var t;return t=n(e).val().split(" "),s.last(t)},removeWordAtIndex:function(e,t){var r,n,o;return o=i.getWordFromIndex(e,t),r=e.slice(0,o.start),n=e.slice(o.end),r+n},stripExtraSpaces:function(e){return null!=e?e.replace(/\s+/g," ").trim():void 0},getMemNameArray:function(e){return s.chain(["username","fullName","initials"]).map(function(t){var r;return null!=(r=e.get(t))?r.toLowerCase().split(/\s+/):void 0}).compact().flatten().value()},getMemNameArrayFromId:function(e,t){var r;return null!=(r=e.get("Member",t))?this.getMemNameArray(r):[]},filterMembers:function(e,t,r){var n,o,a,u,c,l;for(l=RegExp("^"+i.escapeForRegex(t),"i"),o=[],n=0,a=r.length;a>n;n++)u=r[n],c=i.getMemNameArrayFromId(e,u),s.find(c,function(e){return l.test(e)})&&o.push(u);return o},getQueryParameter:function(e,t){var r,n,o,i;return null==t&&(t=""),n=RegExp("[?&]"+e+"=([^?&]*)"),r=null!=(o=n.exec(location.search))?o:n.exec(location.hash),i=null!=r?r[1]:void 0,null!=i?decodeURIComponent(i.replace(/\+/g," ")):t},validFileSize:function(e,t){return null==t&&(t=10485760),(null!=e?e.size:void 0)<t},uploadFile:function(e,t,r){var o,i;return i=s.uniqueId("iframe"),o=n("<iframe>").attr("name",i).css("display","none").appendTo("body").load(function(e){var t,n;s.defer(function(){return o.remove()});try{n=o.contents().text()}catch(e){return t=e,r("File too large")}return/File too large/i.test(n)?r(n):r()}),t.closest("form").attr("target",i).find("input[name=token]").val(e).end().submit(),s.defer(function(){return t.val("")})},hasValidInviteTokenFor:function(e){var t,r;return r=this.inviteTokenFor(e.id),null==r?!1:(t=e.modelCache.get("Member",r.split("-")[0]),null==t?!1:"virtual"===e.getMemberType(t)?!0:e.isMember(t)&&"ghost"===e.get("memberType"))},inviteTokenFor:function(e){return n.cookie("invite-token-"+e)},invitationTokens:function(){var e,t,r,o;for(t=/invite-token-[-a-f0-9]*/g,o=[];null!=(e=null!=(r=t.exec(document.cookie))?r[0]:void 0);)o.push(n.cookie(e));return o},getElem:function(e){return e instanceof n?e[0]:e},getElemTransformMatrix:function(e){var t;return t=e.css("-webkit-transform")||e.css("-moz-transform")||e.css("-ms-transform")||e.css("-o-transform")||e.css("transform"),"none"!==t?t:null},getMatrixDegrees:function(e){var t,r,n,o,i;return i=e.split("(")[1].split(")")[0].split(","),t=i[0],r=i[1],n=i[2],o=i[3],Math.round(Math.atan2(r,t)*(180/Math.PI))},getMatrixScale:function(e){var t,r,n,o,i;return i=e.split("(")[1].split(")")[0].split(","),t=i[0],r=i[1],n=i[2],o=i[3],Math.sqrt(t*t+r*r)},getDegrees:function(e,t){return Math.round(Math.atan2(e,t)*(180/Math.PI))},calcDistanceFromCenter:function(e,t,r){var n;return n=Math.pow(t-(e.offset().left+e.width()/2),2)+Math.pow(r-(e.offset().top+e.height()/2),2),Math.floor(Math.sqrt(n))},_runShredders:function(){var e,t,r,n,o,s;for(s=i._shredders,o=new Date,i._shredders=[],e=0,r=0,n=s.length;n>r;r++)t=s[r],o>t.time?(t.fn(),e++):i._shredders.push(t);return a("shred","Shred "+e+" objects, "+i._shredders.length+" left"),i._shredTimeout=null,i._startShredTimer()},_startShredTimer:function(){return!i._shredTimeout&&i._shredders.length>0?null!=i._shredTimeout?i._shredTimeout:i._shredTimeout=setTimeout(i._runShredders,i.getMs({seconds:3})):void 0},shred:function(e){return null==i._shredders&&(i._shredders=[]),i._shredders.push({time:i.dateAfter({seconds:20}),fn:function(t){return function(){var t,r;r=[];for(t in e)l.call(e,t)&&r.push(delete e[t]);return r}}(this)}),i._startShredTimer()},extendEvents:function(e){return function(){return s.defaults(e,s.result(this.constructor.__super__,"events"))}},relativeUrl:function(e){return e.replace(RegExp("^"+siteDomain),"")},isTextElement:function(e){var t,r;if(e instanceof HTMLTextAreaElement)return!0;if(!(e instanceof HTMLInputElement))return!1;if("text"===(t=e.type)||"email"===t||"password"===t||"search"===t)return!0;if("submit"===(r=e.type)||"reset"===r||"button"===r||"checkbox"===r)return!1;try{return e.selectionStart,!0}catch(e){return!1}},withoutAlteringSelection:function(e){var t,r,o,s,a,u,c;r=document.activeElement,t=n(r),a=t.is(":focus"),null!=r&&i.isTextElement(r)?(r.selectionStart?(u=r.selectionStart,s=r.selectionEnd,o=r.selectionDirection):c=this.getCaretPosition(r),e(),u?r.setSelectionRange(u,s,o):c&&this.setCaretPosition(r,c),a&&t.focus()):e()},extendParentClassName:function(e){return function(){return s.result(this.constructor.__super__,"className")+(" "+e)}},waitForImageLoad:function(e,t,r){var n;return n=new Image,n.onload=function(){return t(n)},n.onerror=function(){return"function"==typeof r?r(n):void 0},n.src=e},bugzscout:function(e,t){var r,o,i,s,a,u;return u=e.project,r=e.area,o=e.description,i=e.extra,a=e.me,s=e.forceNew,null==s&&(s=0),n.ajax({url:"//trello.fogbugz.com/ScoutSubmit.asp",type:"POST",data:{ScoutUserName:"Bugzscout",ScoutProject:u,ScoutArea:r,Description:o,Extra:i,Email:'"'+a.fullName+'" <'+a.email+">",ForceNewBug:s,FriendlyResponse:0},success:function(){return"function"==typeof t?t():void 0},error:function(e,r){return"function"==typeof t?t(r):void 0}})},sortMembers:function(e,t){var r;return r=function(e){return e===t||e.id===t.get("id")},e.sort(function(e,t){var n,o;return n=r(e),o=r(t),n&&!o?-1:!n&&o?1:e.fullName<t.fullName?-1:e.fullName>t.fullName?1:0}),e},firstLessThan:function(e,t){var r,n,o,i,a;for(o=0,i=t.length;i>o;o++){if(n=t[o],!s.isArray(n))return s.isFunction(n)?n.call(this,e):n;if(r=n[0],a=n[1],r>=e)return s.isFunction(a)?a.call(this,e):a}},hoursLeft:function(e){return(new Date(e)-new Date)/i.getMs({hours:1})},escapedReturnUrl:function(){return encodeURIComponent(location.href.replace(/^https?:\/\/[^\/]+/,""))},isExternalURL:function(e){var t;return t=u(e),t.host!==document.location.host||/^[\\\/.]{2,}/.test(t.pathname)},reverse:function(e){return e.slice(0).reverse()},buildFuzzyMatcher:function(e){var t;return t=s.map(e.split(/\s+/),function(e){return RegExp(""+i.escapeForRegex(e),"i")}),function(e){return s.every(t,function(t){return t.test(e)})}},getPadding:function(e){var t;return t=n(e).css(["padding-left","padding-top","padding-bottom","padding-right"]),{left:parseInt(t["padding-left"],10),top:parseInt(t["padding-top"],10),bottom:parseInt(t["padding-bottom"],10),right:parseInt(t["padding-right"],10)}},frameInCoordinateSpace:function(e,t){var r,n;return n=i.getPadding(t),r={top:e.offsetTop-(t.offsetTop+n.top),left:e.offsetLeft-(t.offsetLeft+n.left)},r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r},getBounds:function(e){var t,r;return t=n(e),r={left:t.scrollLeft(),top:t.scrollTop(),width:t.innerWidth(),height:t.innerHeight()},r.bottom=r.top+r.height,r.right=r.left+r.width,r},scrollElementIntoView:function(e,t,r){var o,s,a,u,c,l,d,p,h,m,f,g;p=null!=r?r:{},c=p.horizontal,g=p.vertical,s=p.animated,l=i.getBounds(e),d=i.getPadding(e),a=i.frameInCoordinateSpace(t,e),u={top:a.top-d.top,bottom:a.bottom+d.bottom,left:a.left-d.left,right:a.right+d.right},f=s?(o=n(e),function(e,t){var r;return r={},r[e]=t,o.animate(r,{duration:150,queue:!1})}):function(t,r){return e[t]=r},g&&(m=function(e){return f("scrollTop",e+d.top)},u.bottom>l.bottom?m(u.bottom-l.height):u.top<l.top&&m(u.top)),c&&(h=function(e){return f("scrollLeft",e+d.left)},u.right>l.right?h(u.right-l.width):u.left<l.left&&h(u.left))}}},{}],110:[function(e,t,r){t.exports=function(e){var t;return null==e?!1:"object"!=typeof e?!1:null===(t=Object.getPrototypeOf(e))||t===Object.prototype}},{}],111:[function(e,t,r){var n,o,i,s;o=e("underscore"),s=e(110),n=e("react"),t.exports=function(e,t){return!(i(e,this.props)&&i(t,this.state))},i=function(e,t){var r,a,u,c,l,d;if(s(e)&&s(t)){if(o.keys(e).length!==o.keys(t).length)return!1;for(c in e)if(d=e[c],!i(e[c],t[c]))return!1}else if(n.isValidElement(e)&&n.isValidElement(t)){if(!i([e.props,e.state],[t.props,t.state]))return!1}else if(o.isArray(e)&&o.isArray(t)){if(e.length!==t.length)return!1;for(r=u=0,l=e.length;l>u;r=++u)if(a=e[r],!i(e[r],t[r]))return!1}else{if(o.isFunction(e)&&o.isFunction(t))return!0;if(e!==t)return!1}return!0}},{}],112:[function(e,t,r){var n,o=[].slice;n=e("bluebird"),t.exports=function(){var e,t,r;return r=arguments[0],t=arguments[1],e=3<=arguments.length?o.call(arguments,2):[],n.fromNode(function(n){return r[t].apply(r,o.call(e).concat([n]))})}},{}],113:[function(e,t,r){t.exports=function(){if(window.getSelection){if(window.getSelection().empty)return window.getSelection().empty();if(window.getSelection().removeAllRanges)return window.getSelection().removeAllRanges()}else if(document.selection)return document.selection.empty()}},{}],114:[function(e,t,r){t.exports=function(){var e,t;return("function"==typeof window.getSelection&&null!=(e=window.getSelection())?e.toString():void 0)||(null!=(t=document.selection)?t.createRange().text:void 0)}},{}],115:[function(e,t,r){t.exports=function(e){var t,r;document.body.createTextRange?(t=document.body.createTextRange(),t.moveToElementText(e),t.select()):(r=window.getSelection(),t=document.createRange(),t.selectNodeContents(e),r.removeAllRanges(),r.addRange(t))}},{}],116:[function(e,t,r){t.exports=function(e){return e.ctrlKey||e.metaKey||e.shiftKey||null!=e.button&&0!==e.button?!1:!0}},{}],117:[function(e,t,r){var n,o,i;i=e(20),o=-i,n=100-i,t.exports=function(e){return o>e?o:e>n?n:e}},{}],118:[function(e,t,r){var n,o=[].slice;n=e("underscore"),t.exports=function(e,t){var r,i,s,a,u,c;for(c=[],a=t.blockLex(e,{}),i=0,s=a.length;s>i;i++)r=a[i],null!=r.children&&(c=o.call(c).concat(o.call(t.inlineLex(r.children.text))));return u=n.chain(c).filter(function(e){return"link"===e.type}).map(function(r){var n,o;return e=null!=(n=r.children)?n.text:void 0,null!=e?{url:r.url,text:t.textInline(null!=(o=r.children)?o.text:void 0)}:{url:r.url}}).value()}},{}],119:[function(e,t,r){t.exports=function(e,t,r){return null==r&&(r="…"),e.length>t?e.substr(0,t-r.length+1).replace(/\s+\S*$/,"")+r:e}},{}],120:[function(e,t,r){t.exports=function(e){return/\bhttps?:\/\//.test(e)}},{}],121:[function(e,t,r){t.exports=function(e){var t,r,n,o,i,s,a,u,c,l,d;if(d=e.split(","),a=d[0],n=d[1],l=/data:([^;]+)(?:;charset=([^;]*))?(;base64)?/.exec(a),null!=l){if(t=l[0],c=l[1],s=l[2],u=l[3],!u)throw Error("Unable to handle non-base64 URIs");if(null!=s)throw Error("Unable to handle encodings");return o=atob(n),r=function(){var e,t,r;for(r=[],e=0,t=o.length;t>e;e++)i=o[e],r.push(i.charCodeAt(0));return r}(),new Blob([new Uint8Array(r)],{type:c})}throw Error("Invalid data URI")}},{}],122:[function(e,t,r){t.exports=function(e){return 0===e.indexOf(window.attachmentsDomain)}},{}],123:[function(e,t,r){var n;n=e(228),t.exports=function(e){return n(e).host===location.host}},{}],124:[function(e,t,r){t.exports=function(e){return/^https?:\/\/\S+$/.test(e)}},{}],125:[function(e,t,r){var n,o=[].slice,i={}.hasOwnProperty;n=e("underscore"),t.exports=function(){var e,t,r,s,a;return r=arguments[0],t=2<=arguments.length?o.call(arguments,1):[],e={},n.flatten(t).forEach(function(t){return e[r(t)]=t}),function(){var t;t=[];for(s in e)i.call(e,s)&&(a=e[s],t.push(a));return t}()}},{}],126:[function(e,t,r){var n,o;o=e("underscore"),n={},n.Server=function(){function e(e){var t,r;return e?(t=e.split("."),void(t.length>0?this.parts=function(){var e,n,o;for(o=[],e=0,n=t.length;n>e;e++)r=t[e],o.push(parseInt(r,10)||0);return o}():this.parts=[0])):null}return e.prototype.toString=function(){return this.parts.join(".")},e.prototype.toJSON=function(){return this.toString()},e.prototype.lessThan=function(e){var t;return t=this.compareTo(e),t&&0>t},e.prototype.greaterThan=function(e){var t;return t=this.compareTo(e),t&&t>0},e.prototype.equalTo=function(e){var t;return t=this.compareTo(e),t&&0===t},e.prototype.compareTo=function(e){var t,r,i,s,a,u,c;if(o.isString(e))e=new n.Server(e);else if(!(e instanceof n.Server))return null;for(r=Math.max(this.parts.length,e.parts.length),u=o.zip(this.parts,e.parts),t=0,i=u.length;i>t;t++){if(c=u[t],s=c[0],a=c[1],null==s&&(s=0),null==a&&(a=0),s>a)return r;if(a>s)return-r;r--}return 0},e.compareStringVersions=function(e,t){return new n.Server(e).compareTo(t)},e.prototype.supports=function(e){var t,r;return r=e.minServerVersion,t=e.maxServerVersion,(!r||this.greaterThan(r))&&(!t||this.lessThan(t))},e}(),n.Client=function(){function e(e){var t,r;t=e.split("-"),this.head=t[0],r=t[1],this.version=parseInt(r,10),this.patch=0}return e.prototype.toString=function(){return this.head+"-"+this.fullVersion()},e.prototype.toJSON=function(){return this.toString()},e.prototype.fullVersion=function(){return o.compact([this.version,this.patch]).join(".")||0},e}(),t.exports=n},{}],127:[function(e,t,r){var n,o,i,s,a;n=e("jquery"),a={width:0},s={width:750},i={width:900},o={width:1280},t.exports={calc:function(){var e;return this.ranCalc=!0,e=n(window).width(),this.fExtraLarge=this.fLarge=this.fMedium=this.fSmall=!1,e>o.width?this.fExtraLarge=!0:e>i.width?this.fLarge=!0:e>s.width?this.fMedium=!0:this.fSmall=!0,n(this).triggerHandler("windowClassChange")},ensureRun:function(){return this.ranCalc?void 0:this.calc()}}},{}],128:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e(25),i=e(66),s=e(173),a=e("underscore"),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var r;return u(t,e),t.prototype.typeName="Action",t.prototype.urlRoot="/1/actions",r=64,t.prototype.getModel=function(){return this.collection.options.model},t.prototype.triggerCacheEvents=function(e,t){var r,n,o,i;for(i=this.idModels(),r=0,o=i.length;o>r;r++)n=i[r],e.trigger(t+":"+this.typeName+":"+n)},t.prototype.isCommentLike=function(){var e;return"commentCard"===(e=this.get("type"))||"copyCommentCard"===e},t.prototype.isAddAttachment=function(){return"addAttachmentToCard"===this.get("type")},t.prototype.isMember=function(e){return this.get("idMemberCreator")===e.id},t.prototype.getDate=function(){return i.parse(this.get("date"))},t.prototype.getBoard=function(){var e,t;return this.modelCache.get("Board",null!=(e=this.get("data"))&&null!=(t=e.board)?t.id:void 0)},t.prototype.getCard=function(){var e,t;return this.modelCache.get("Card",null!=(e=this.get("data"))&&null!=(t=e.card)?t.id:void 0)},t.prototype.getChecklist=function(){var e,t;return this.modelCache.get("Checklist",null!=(e=this.get("data"))&&null!=(t=e.checklist)?t.id:void 0)},t.prototype.editable=function(){var e,t;return e=this.get("idMemberCreator"),"commentCard"===(t=this.get("type"))&&o.isMe(e)},t.prototype.deletable=function(){var e,t,r,n;return t=this.get("idMemberCreator"),"commentCard"===(r=this.get("type"))&&("observer"!==(null!=(n=this.getBoard())?n.getExplicitMemberType(o.me()):void 0)&&o.isMe(t)||null!=(e=this.getBoard())&&e.compareMemberType(o.me(),this.modelCache.get("Member",t),{mode:"commentDelete"})>0&&!(!e.isPremOrgAdmin(o.me())&&e.isPremOrgAdmin(t)))},t.prototype.isPlaceholder=function(){return null==this.get("date")},t.prototype.includesModel=function(e){var t,r,n,o;return n=e.typeName.toLowerCase(),r=e.id,"member"===n&&this.get("idMemberCreator")===r?!0:(t=this.get("data"),"convertToCardFromCheckItem"===this.get("type")&&t.cardSource.id===r?!0:(null!=(o=t[n])?o.id:void 0)===r)},t.prototype.idModels=function(){var e,t,r,n;return t=function(){var e,t,o;t=null!=(e=this.get("data"))?e:{},o=[];for(r in t)n=t[r],null!=(null!=n?n.id:void 0)&&o.push(n.id);return o}.call(this),e=this.get("idMemberCreator"),null!=e&&t.push(e),t},t.prototype.takingTooLong=function(){return this.isTakingTooLong=!0,this.trigger("takingTooLong")},t}(s)},{}],129:[function(e,t,r){var n;n=e(142),t.exports=new n([],{requiresLogin:!1,dataUrl:"/announcements/all"})},{}],130:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;n=e("jquery"),s=e(97),a=e(173),i=e(81),t.exports=o=function(e){function t(e){t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.typeName="Announcement",t.prototype._key=function(){return"announcement-"+this.id+"-read"},t.prototype.isUnread=function(){return!s.get(this._key())},t.prototype.markRead=function(){return n.post("/announcements/dismiss",{id:this.id}),s.set(this._key(),!0),this.trigger("change:unread")},t.prototype.getLocale=function(){return i.normalizeLocale(this.get("locale")||"en")},t.prototype.matchesLocale=function(e){return i.matches(e,this.getLocale())},t}(a)},{}],131:[function(e,t,r){var n,o,i,s,a;n=e("jquery"),i=e(142),s=e(109),a=e("underscore"),t.exports=o=new i([],{requiresLogin:!0,dataUrl:"/announcements"})},{}],132:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty,c=[].slice;o=e(173),i=e(109),s=e(228),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.typeName="Attachment",t.prototype.urlRoot=function(){return this.getCard().url()+"/attachments"},t.prototype.getCard=function(){return this.collection.sourceModel},t.prototype.editable=function(){return this.getCard().editable()},t.prototype.smallestPreviewBiggerThan=function(e,t){return i.smallestPreviewBiggerThan(this.get("previews"),e,t)},t.prototype.previewBetween=function(e,t,r,n){
return i.previewBetween.apply(i,[this.get("previews")].concat(c.call(arguments)))},t.prototype.biggestPreview=function(){return i.biggestPreview(this.get("previews"))},t.prototype.smallestPreview=function(){return i.smallestPreview(this.get("previews"))},t.prototype.getType=function(){var e;return null!=(e=i.fileExt(this.get("name")))?e:this.get("mimeType")},t.prototype.getServiceKey=function(){var e,t,r;return this.get("isUpload")?"trello":(e=s(this.get("url")).host,r={"docs.google.com":"gdrive","drive.google.com":"gdrive","www.dropbox.com":"dropbox","onedrive.live.com":"onedrive","app.box.com":"box"},null!=(t=r[e])?t:"other")},t}(o)},{}],133:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(173),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="CustomBoardBackground",t}(o)},{}],134:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(174),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="BoardInvitation",t}(o)},{}],135:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(173),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="BoardPlugin",t}(o)},{}],136:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(173),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="BoardStar",t.prototype.getBoard=function(){return this.modelCache.get("Board",this.get("idBoard"))},t}(o)},{}],137:[function(e,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M,B,T,O,L,P,A,E=function(e,t){function r(){this.constructor=e}for(var n in t)D.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},D={}.hasOwnProperty,I=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1},V=[].slice;o=e(190),i=e(59),s=e(25),a=e(13),c=void 0,t(function(){return c=e(145)}),l=e(147),d=e(232),p=e(234),h=e(235),m=void 0,t(function(){return m=e(151)}),f=e(5),g=e("hearsay"),v=e(26),y=e(175),b=e(156),w=e(237),_=void 0,t(function(){return _=e(157)}),k=void 0,t(function(){return k=e(159)}),C=e(170),x=e(171),j=e(197),S=e(163),M=e("bluebird"),B=e(109),O=e(102),A=e("xtend"),T=e("underscore"),L=e(89),P=e("moment"),r.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return E(t,e),L(C,i,t),t.prototype.typeName="Board",t.prototype.urlRoot="/1/boards",t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.destruct([this.boardPluginList=new l([],{board:this}).syncCache(this.modelCache,["idBoard"],function(e){return function(t){return t.get("idBoard")===e.id}}(this)),this.listList=new _(null,{board:this}).owner(this).syncCache(this.modelCache,["idBoard","closed"],function(e){return function(t){return t.get("idBoard")===e.id&&t.isOpen()}}(this)),this.invitationList=new c([],{modelCache:this.modelCache,board:this}),this.checklistList=new m([],{modelCache:this.modelCache,board:this}),this.labelList=(new b).syncCache(this.modelCache,["idBoard"],function(e){return function(t){return t.get("idBoard")===e.id}}(this)),this.memberList=(new k).syncModel(this,"memberships",{fxGetIds:function(e){return T.pluck(e,"idMember")}}),this.adminList=(new k).syncModel(this,"memberships",{fxGetIds:function(e){return function(t){var r;return r=T.filter(t,function(t){var r,n;return r=e.modelCache.get("Member",t.idMember),"admin"===t.memberType||null!=r&&(null!=(n=e.getOrganization())?n.isPremOrgAdmin(r):void 0)}),T.pluck(r,"idMember")}}(this)}),this.pluginDataList=new S([],{scopeModel:this}).syncCache(this.modelCache,[],function(e){return function(t){return t.get("idModel")===e.id&&"board"===t.get("scope")}}(this)),this.filter=new h(this,{modelCache:this.modelCache}),this.composer=new p(null,{board:this,modelCache:this.modelCache}),this.listComposer=new w(this,{modelCache:this.modelCache}),this.viewState=new d(null,{modelCache:this.modelCache,board:this})]),this.listenForPermChange(),this.cacheShortLink()},t.prototype.isVisibleAction=function(e){return null==this._actionFilter&&(this._actionFilter=O(j.boardActions)),this._actionFilter(e)},t.prototype.cacheShortLink=function(){return this.waitForAttrs(this,["id","shortLink"],function(e){var t,r;return t=e.id,r=e.shortLink,v.setBoardId(r,t)})},t.prototype.close=function(){this.update({closed:!0})},t.prototype.reopen=function(){this.update({closed:!1})},t.prototype.markAsViewed=function(){return s.isLoggedIn()?(this.set("dateLastView",(new Date).toISOString()),o({url:this.urlRoot+"/"+this.id+"/markAsViewed",type:"post",background:!0})):void 0},t.prototype.subscribe=function(e){e!==this.get("subscribed")&&this.update({subscribed:e})},t.prototype.isStarred=function(){return null!=s.me().boardStarList.getBoardStar(this.id)},t.prototype.hasUnseenActivity=function(){var e,t;return t=this.get("dateLastView"),e=this.get("dateLastActivity"),null!=t&&null!=e&&e>t},t.prototype.isLessActive=function(){var e,t,r;return e=null!=(t=this.get("dateLastActivity"))?t:new Date(B.idToDate(this.id)),r=P().subtract(6,"months"),r.isAfter(e)},t.prototype.getAvailableRoles=function(){return this.hasObservers()?["admin","normal","observer"]:["admin","normal"]},t.prototype.hasObservers=function(){var e;return null!=(e=this.getOrganization())?e.isFeatureEnabled("observers"):void 0},t.prototype.getPermLevel=function(){return this.getPref("permissionLevel")},t.prototype._normalizePref=function(e){return"none"===e?"disabled":e},t.prototype.getCommentPerm=function(){return this._normalizePref(this.get("prefs").comments)},t.prototype.getInvitePerm=function(){return this._normalizePref(this.get("prefs").invitations)},t.prototype.toJSON=function(e){var r,n;return null==e&&(e={}),r=t.__super__.toJSON.apply(this,arguments),e.org&&(n=this.getOrganization(),null!=n&&(r.hasOrg=!0,r.org=n.toJSON({url:!0}))),e.url&&null==r.url&&(r.url=f.getBoardUrl(this)),e.shortUrl&&null==r.shortUrl&&(r.shortUrl=f.getBoardShortUrl(this)),r},t.prototype.calcPos=function(e,t){return B.calcPos(e,this.listList,t,function(e){return e.isOpen()})},t.prototype.getCard=function(e){return B.isShortId(e)?this.modelCache.findOne("Card","idShort",Number(e)):this.modelCache.get("Card",e)},t.prototype.getList=function(e){return this.listList.get(e)},t.prototype.getUrl=function(){return f.getBoardUrl(this)},t.prototype.getChecklist=function(e){return this.modelCache.get("Checklist",e)},t.prototype.getBoardInvitation=function(e){return this.invitationList.get(e)},t.prototype.getCheckItem=function(e){var t,r,n,o,i,s;for(i=this.checklistList.models,n=0,o=i.length;o>n;n++)if(r=i[n],t=null!=r&&null!=(s=r.checkItemList)?s.get(e):void 0)return t},t.prototype.editable=function(){var e;return e=s.me(),e&&this.editableByMember(e)},t.prototype.editableByMember=function(e){return this.isMember(e)},t.prototype.isMember=function(e){var t;return"virtual"===(t=this.getMemberType(e))||"normal"===t||"admin"===t},t.prototype.getMembershipCount=function(){var e,t,r,n;return null!=(e=null!=(t=null!=(r=this.get("membershipCounts"))?r.active:void 0)?t:null!=(n=this.get("memberships"))?n.length:void 0)?e:1},t.prototype.getStarCount=function(e){var t,r;return null!=(t=null!=(r=this.get("starCounts"))?r[e]:void 0)?t:0},t.prototype.getIdTags=function(){var e;return null!=(e=this.get("idTags"))?e:[]},t.prototype.owned=function(){var e;return e=s.me(),e&&this.ownedByMember(e)},t.prototype.ownedByMember=function(e){return"admin"===this.getMemberType(e)},t.prototype.allowsSelfJoin=function(){var e;return null!=(e=this.getPref("selfJoin"))?e:!1},t.prototype.canJoin=function(){var e,t,r;return r=this.getOrganization(),null==r?!1:(t=s.me(),null!=this.getMembershipFor(t)||this.isObserver(t)?!1:(e=r.isMember(t),this.isPremOrgAdmin(t)||this.allowsSelfJoin()&&e))},t.prototype.canInviteMembers=function(){var e,t,r;return null!=this.getOrganization()||this.getPref("canInvite")?("admins"===(null!=(e=this.get("prefs"))?e.invitations:void 0)?r="admin":"members"===(null!=(t=this.get("prefs"))?t.invitations:void 0)&&(r="normal"),"admin"===this.getMemberType(s.me())||r===this.getMemberType(s.me())):!1},t.prototype.compareMemberType=function(e,t,r){return B.compareMemberType(this,e,t,r)},t.prototype.isMemberPublic=function(e){return"public"===this.getMemberType(e)},t.prototype.isMemberOrg=function(e){return"org"===this.getMemberType(e)},t.prototype.isMemberObserver=function(e){return"observer"===this.getMemberType(e)},t.prototype.memberMatchesSetting=function(e,t){switch(this.getPref(t)){case"public":return s.isLoggedIn();case"org":return this.isMember(e)||this.isMemberOrg(e)||this.isMemberObserver(e);case"observers":return this.isMember(e)||this.isMemberObserver(e);case"members":return this.isMember(e);case"admins":return this.ownedByMember(e);default:return!1}},t.prototype.isPowerUpEnabled=function(e){var t;return t=this.get("powerUps"),null!=t&&I.call(t,e)>=0},t.prototype.isPluginEnabled=function(e){return this.boardPluginList.any(function(t){return t.get("idPlugin")===e})},t.prototype.enablePlugin=function(e){return this.boardPluginList.create({idPlugin:e})},t.prototype.disablePlugin=function(e){var t;return t=this.boardPluginList.find(function(t){return t.get("idPlugin")===e}),t.destroy()},t.prototype.canVote=function(e){return this.memberMatchesSetting(e,"voting")},t.prototype.canComment=function(e){return this.memberMatchesSetting(e,"comments")},t.prototype.canInvite=function(e){return this.memberMatchesSetting(e,"invitations")},t.prototype.prefNames=["permissionLevel","voting","comments","invitations","selfJoin","background","cardAging","calendarFeedEnabled"],t.prototype.myPrefNames=["showSidebar","showSidebarMembers","showSidebarBoardActions","showSidebarActivity","emailKey","idEmailList","emailPosition","calendarKey","fullEmail"],t.prototype.isPublic=function(){return"public"===this.getPref("permissionLevel")},t.prototype.isPrivate=function(){return"private"===this.getPref("permissionLevel")},t.prototype.getIdBoardMems=function(){return T.map(this.memberList.models,function(e){return function(e){return e.id}}(this))},t.prototype.getOrganization=function(){return this.modelCache.get("Organization",this.get("idOrganization"))},t.prototype.snoopOrganization=function(){return this.snoop("idOrganization").map(function(e){return function(){return e.getOrganization()}}(this))},t.prototype.orgMembersAvailable=function(){var e;return e=this.getOrganization(),T.chain(e.memberList.filter(function(t){return function(t){return!e.isDeactivated(t)}}(this))).difference(this.memberList.models).value()},t.prototype.joinBoard=function(e){var t,r,n,o;return r=s.me(),t=this.isPremOrgAdmin(r),n=t?"admin":"normal",r.set("idBoards",r.get("idBoards").concat(this.id)),t&&r.set("idPremOrgsAdmin",(null!=(o=r.get("idPremOrgsAdmin"))?o:[]).concat(this.id)),this.addMember(r,n,e)},t.prototype.addMember=function(){var e,t,r,n,o;return r=arguments[0],e=3<=arguments.length?V.call(arguments,1,t=arguments.length-1):(t=1,[]),o=arguments[t++],n=e[0],null==n&&(n="normal"),this.memberList.add(r),this.api({type:"put",method:"members/"+r.id,data:{type:n}},o),this.set("memberships",this.get("memberships").concat({idMember:r.id,memberType:"normal"}))},t.prototype.removeMember=function(e){return this.memberList.remove(e),this.set("memberships",T.reject(this.get("memberships"),function(t){return t.idMember===e.id}))},t.prototype.getObserverList=function(){var e,t,r,n,o;for(n=this.memberList.models,o=[],e=0,t=n.length;t>e;e++)r=n[e],this.isObserver(r)&&o.push(r);return o},t.prototype.filterLabels=function(e){var t,r;return r=RegExp("^"+B.escapeForRegex(e)),t=[],T.chain(this.getLabels()).filter(function(t){var r,n;return(null!=(r=t.get("name"))?r.toLowerCase().indexOf(e):void 0)>-1||0===(null!=(n=t.get("color"))?n.toLowerCase().indexOf(e):void 0)||t.get("color")===y.colors[parseInt(e)-1]}).value()},t.prototype.labelForColor=function(e){return T.chain(this.getLabels()).filter(function(t){return t.get("color")===e}).first().value()},t.prototype.labelsForColors=function(){return T.chain(this.getLabels()).groupBy(function(e){return e.get("color")}).value()},t.prototype.createLabel=function(e,t){var r;r=T.find(this.getLabels(),function(r){return r.get("name")===e&&r.get("color")===t}),r||this.labelList.create({name:e,color:null!=t?t:"",uses:1},{url:"/1/board/"+this.id+"/labels/"})},t.prototype.labelColors=function(){return y.colors},t.prototype.getLabels=function(){return this.labelList.models.sort(y.compare)},t.prototype._generateKey=function(e){return this.api({type:"post",method:e+"Key/generate"})},t.prototype.generateEmailKey=function(){return this._generateKey("email")},t.prototype.generateCalendarKey=function(){return this._generateKey("calendar")},t.prototype.openCards=function(){var e;return T.flatten(function(){var t,r,n,o;for(n=this.listList.models,o=[],t=0,r=n.length;r>t;t++)e=n[t],o.push(e.openCards().models);return o}.call(this))},t.prototype.listenForPermChange=function(){var e,t,r;if(s.isLoggedIn())return r=this.getViewPermState(s.me()),t=this.owned(),e=this.debounce(function(e){return function(){var n,o;o=e.getViewPermState(s.me()),o!==r&&(r=o,e.trigger("permChange",o)),n=e.owned(),n!==t&&(t=n,e.trigger("ownedChange",n))}}(this)),this.listenTo(s.me().boardList,"add remove reset",e),this.listenTo(s.me().organizationList,"add remove reset",e),this.listenTo(this.memberList,"add remove reset",e),this.listenTo(this,"change:memberships change:prefs.permissionLevel",e)},t.prototype.getViewPermState=function(e){var t,r;return this.isObserver(e)?"observer":"normal"===(t=this.getMemberType(e))||"admin"===t?"member":B.hasValidInviteTokenFor(this)?"inviteToken":(null!=(r=this.getOrganization())?r.isMember(e):void 0)&&"org"===this.getPref("permissionLevel")?"org":"public"===this.getPref("permissionLevel")?"public":"none"},t.prototype.getClientBackgroundColor=function(e){var t,r;return null!=(t=null!=(r=a[e])?r.color:void 0)?t:a.blue.color},t.prototype.dataForLabel=function(e){return e.toJSON()},t.prototype.isViewableBy=function(e){return"none"!==this.getViewPermState(e)},t.prototype.toggleTag=function(e){return this.toggle("idTags",e,I.call(this.getIdTags(),e)<0)},t.prototype.setPluginData=function(e,t,r){return this.pluginDataList.upsert(e,t,r)},t.prototype.getPluginData=function(e){var t;return A(null!=(t=this.getOrganization())?t.getPluginData(e):void 0,this.pluginDataList.dataForPlugin(e))},t.prototype.snoopPluginData=function(e){var t,r;return r=this.snoopOrganization().map(function(t){return null!=t?t.snoopPluginData(e):g.const(null)}).latest(),t=this.pluginDataList.snoopDataForPlugin(e),g.combine(r,t).map(function(e){return A.apply(null,e)})},t.prototype.clearPluginData=function(e){var t,r,n;return t=this.pluginDataList.for(e,"private"),null!=t&&t.destroy(),r=null!=(n=this.getOrganization())?n.pluginDataList.for(e,"private"):void 0,null!=r?r.destroy():void 0},t.prototype.pluginsEnabled=function(){var e;return null!=(e=this.getOrganization())?e.isFeatureEnabled("plugins"):void 0},t.prototype.snoopPluginsEnabled=function(){return this.snoopOrganization().map(function(e){return function(e){return null!=e?e.snoopIsFeatureEnabled("plugins"):g.const(!1)}}(this)).latest().distinct()},t.prototype.idPluginsEnabled=function(){return this.pluginsEnabled()?this.boardPluginList.pluck("idPlugin"):[]},t.prototype.snoopIdPluginsEnabled=function(){return g.combine(this.snoopPluginsEnabled(),this.boardPluginList.snoop()).map(function(e){var t,r;return r=e[0],t=e[1],r?t.pluck("idPlugin"):[]})},t.prototype.invitationUrl=function(e){return f.getBoardInvitionLinkUrl(e)},t}(x)},{}],138:[function(e,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M,B,T,O,L,P,A=function(e,t){function r(){this.constructor=e}for(var n in t)E.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},E={}.hasOwnProperty,D=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1},I=[].slice;o=e("jquery"),B=e(102),i=e(128),s=void 0,t(function(){return s=e(141)}),a=e(190),c=e(143),u=e(59),l=e(25),p=void 0,t(function(){return p=e(151)}),h=e(5),m=e(66),f=e(26),g=e(156),v=e(169),y=e(176),b=void 0,t(function(){return b=e(159)}),w=e(238),_=e(197),k=e(163),C=e("bluebird"),x=e(165),j=e(173),S=e(109),M=e("underscore"),T=e(89),O=e("moment"),L=e(112),P=e("xtend"),r.exports=d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var r;return A(t,e),T(v,u,t),r=1e4,t.prototype.typeName="Card",t.prototype.urlRoot="/1/cards",t.prototype.initialize=function(){return this.destruct([this.memberList=(new b).syncModel(this,"idMembers"),this.labelList=(new g).syncModel(this,"idLabels").syncCache(this.modelCache,[],function(e){return function(t){var r,n;return r=t.id,D.call(null!=(n=e.get("idLabels"))?n:[],r)>=0}}(this)),this.memberVotedList=(new b).syncModel(this,"idMembersVoted"),this.checklistList=(new p).syncCache(this.modelCache,["idCard"],function(e){return function(t){return t.get("idCard")===e.id}}(this)),this.attachmentList=(new c).syncSubModels(this,"attachments"),this.actionList=(new s).syncCache(this.modelCache,[],function(e){return function(t){var r,n,o,i;return r="commentCard"===(o=t.get("type"))||"copyCommentCard"===o,n=(null!=(i=t.get("data").board)?i.id:void 0)===e.get("idBoard"),t.includesModel(e)&&(r||n)}}(this)),this.stickerList=new x(this.get("stickers"),{card:this,modelCache:this.modelCache}).syncSubModels(this,"stickers"),this.pluginDataList=new k([],{scopeModel:this}).syncCache(this.modelCache,[],function(e){return function(t){return t.get("idModel")===e.id&&"card"===t.get("scope")}}(this)),this.memberEditingList=new b]),this.listenTo(this,"change:id change:idBoard",function(e){return function(){return e.actionList.sync()}}(this)),this._initSubEventsOn("badges"),this.cacheShortLink()},t.prototype.isVisibleAction=function(e){return null==this._actionFilter&&(this._actionFilter=B(_.cardActions)),this._actionFilter(e)},t.prototype.cacheShortLink=function(){return this.waitForAttrs(this,["id","shortLink"],function(e){var t,r;return t=e.id,r=e.shortLink,f.setCardId(r,t)})},t.prototype.updateEditing=function(e){return null==this._editingTimeout&&(this._editingTimeout={}),this.memberEditingList.add(e),null!=this._editingTimeout[e.id]&&(clearTimeout(this._editingTimeout[e.id]),delete this._editingTimeout[e.id]),this._editingTimeout[e.id]=this.setTimeout(function(t){return function(){return t.memberEditingList.remove(e)}}(this),r)},t.prototype.sync=function(e,r,n){return"create"!==e||null!=this.get("idBoard")&&null!=this.get("idList")?t.__super__.sync.apply(this,arguments):(this.waitForAttrs(this,["idBoard","idList"],function(o){return function(i){return o.set(i),t.__super__.sync.call(o,e,r,n)}}(this)),this.waitForId(this.getBoard(),function(e){return function(t){return e.set("idBoard",t)}}(this)),this.waitForId(this.getList(),function(e){return function(t){return e.set("idList",t)}}(this)))},t.prototype.set=function(e,r){var n;return(null!=e?e.labels:void 0)&&(e.labels=function(){var t,r,o,i,s;for(o=e.labels,s=[],t=0,r=o.length;r>t;t++)n=o[t],s.push(null!=(i=n.color)?i:n);return s}()),(null!=e?e.badges:void 0)&&(e.badges=P(this.get("badges"),e.badges)),t.__super__.set.apply(this,arguments)},t.prototype.moveToList=function(e,t){var r;return r=this,this.waitForId(e,function(n){return function(n){var o,i,s,a,u,c,l,d,p;if(u=e.calcPos(t,r),o=e.getBoard().composer,u===r.get("pos")&&r.get("idList")===n&&r.isOpen())return i=o.get("index"),void(i===t?o.set("index",i+1):i===t+1&&o.set("index",i-1));l=r.get("idList"),d=r.getIndexInList(),s={pos:u,idList:n,idBoard:e.getBoard().id,closed:!1};for(a in s)p=s[a],r.get(a)===p&&delete s[a];return r.update(s),(null!=o?o.get("vis"):void 0)?(i=c=o.get("index"),o.get("list").id===n&&o.get("index")>=t&&i++,o.get("list").id===l&&o.get("index")>d&&i--,o.set("index",i)):void 0}}(this))},t.prototype.moveToNextList=function(){var e,t;t=this.getBoard().listList.models,e=M.indexOf(t,this.getList()),e<t.length-1&&this.moveToList(t[e+1],1e9)},t.prototype.moveToPrevList=function(){var e,t;t=this.getBoard().listList.models,e=M.indexOf(t,this.getList()),e>0&&this.moveToList(t[e-1],1e9)},t.prototype.toggleMember=function(){var e,t,r,n,o;return t=arguments[0],e=3<=arguments.length?I.call(arguments,1,n=arguments.length-1):(n=1,[]),o=arguments[n++],r=e[0],null==r&&(r=!this.hasMember(t)),r&&l.isMe(t)&&this.set("subscribed",!0),this.toggle("idMembers",t,r,o)},t.prototype.addMember=function(e,t){return this.toggleMember(e,!0,t)},t.prototype.removeMember=function(e,t){return this.toggleMember(e,!1,t)},t.prototype.hasMember=function(e){return this.memberList.get(e)},t.prototype.getIdCardMems=function(){return M.map(this.memberList.models,function(e){return function(e){return e.id}}(this))},t.prototype.getIdCommenters=function(){var e,t;return t=[],e=M.each(this.getActions(),function(e){return function(e){var r;return"commentCard"===e.get("type")?(r=e.get("idMemberCreator"),t.push(r)):void 0}}(this)),this.idCommenters=M.uniq(t),this.idCommenters},t.prototype.hasChecklist=function(e){return this.checklistList.get(e)},t.prototype.close=function(e){this.update({closed:!0},e)},t.prototype.reopen=function(){var e;e=this.getList(),null!=e&&this.update({closed:!1,pos:e.calcPos(e.cardList.length,this)})},t.prototype.getBoard=function(){var e,t;return null!=(e=this.modelCache.get("Board",this.get("idBoard")))?e:null!=(t=this.getList())?t.getBoard():void 0},t.prototype.getIndexInList=function(){var e;return e=this.getList(),null!=e?M.indexOf(e.cardList.models,this):-1},t.prototype.getList=function(){var e,t;return null!=(e=this.modelCache.get("List",this.get("idList")))?e:null!=(t=this.collection)?t.owner:void 0},t.prototype.getUrl=function(){return h.getCardUrl(this)},t.prototype.getFullUrl=function(){return""+siteDomain+this.getUrl()},t.prototype.getDueDate=function(){var e;return(null!=(e=this.get("badges"))?e.due:void 0)?new Date(this.get("badges").due):null},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.dateForNewComment=function(){var e,t;return 0===this.actionList.length?new Date:(t=this.actionList.sort().first(),e=O(t.getDate()).add(1,"seconds").toDate(),M.max([new Date,e]))},t.prototype.addComment=function(e){var t;t=this,""!==e&&this.waitForId(t,function(r){return function(n){var o,s,u;return s=t.getBoard(),o=new i({type:"commentCard",date:r.dateForNewComment(),data:{text:e,card:{id:t.id,name:t.get("name")},board:{id:s.id,name:s.get("name")},textData:{emoji:l.me().allCustomEmoji()}},idMemberCreator:l.myId(),display:{translationKey:"action_comment_on_card",entities:{card:{hideIfContext:!0,id:t.id,isContext:!1,shortLink:t.shortLink,text:e,type:"card"},comment:{text:e,type:"comment"},contextOn:{hideIfContext:!0,idContext:t.id,translationKey:"action_on",type:"translatable"},memberCreator:{id:l.myId(),isContext:!1,text:l.me().get("fullName"),type:"member",username:{text:l.me().get("fullName")}}}}},{modelCache:r.modelCache}),u=r.setTimeout(function(){return o.takingTooLong()},2e3),a({url:"/1/cards/"+t.id+"/actions/comments",type:"post",data:{text:e},dataType:"json",success:function(e){return clearTimeout(u),o.isTakingTooLong=!1,r.modelCache.enqueueDelta(o,e)}})}}(this))},t.prototype.changeDueDateMaintainTime=function(e){var t,r,n;return r=null!=(n=new Date(this.get("due")))?n:(new Date).setHours(12,0,0,0),t=m.getDateWithSpecificTime(r,e),this.update({due:t})},t.prototype.vote=function(e){return this.getBoard().canVote(l.me())?this.waitForLock("vote",function(t){return function(r){var n,o;return e===t.voted()?r():(n=null!=(o=M.clone(t.get("badges")))?o:{},e?(n.votes++,n.viewingMemberVoted=!0):(n.votes--,n.viewingMemberVoted=!1),t.set("badges",n),void t.toggle("idMembersVoted",l.myId(),e,{collectionName:"membersVoted"},r))}}(this)):void 0},t.prototype.voted=function(){var e,t;return null!=(e=null!=(t=this.get("badges"))?t.viewingMemberVoted:void 0)?e:!1},t.prototype.hasStickers=function(){return this.stickerList.length>0},t.prototype.hasCover=function(){return null!=this.attachmentList.get(this.get("idAttachmentCover"))},t.prototype.getAllAgingClasses=function(){return"aging-level-0 aging-level-1 aging-level-2 aging-level-3 aging-pirate aging-regular"},t.prototype.getAgingData=function(){var e,t,r;return e=this.getBoard(),r=Date.now()-new Date(this.get("dateLastActivity")),t={level:function(){switch(!1){case!(r<S.getMs({days:7})):return 0;case!(r<S.getMs({days:14})):return 1;case!(r<S.getMs({days:28})):return 2;default:return 3}}(),mode:e.get("prefs").cardAging},t.agingClassesToAdd="aging-level-"+t.level+" aging-"+t.mode,/64$/.test(this.id)&&(t.agingClassesToAdd+=" aging-treasure"),t},t.prototype.toggleVote=function(){this.vote(!this.voted())},t.prototype.subscribe=function(e){var t;e!==this.get("subscribed")&&(t=this.get("badges"),t.subscribed=e,this.update({subscribed:e}))},t.prototype.getCheckItem=function(e){var t,r,n,o,i,s;for(n=o=0,i=this.checklistList.length-1;i>=0?i>=o:o>=i;n=i>=0?++o:--o)if(r=this.checklistList.at(n),t=null!=r&&null!=(s=r.checkItemList)?s.get(e):void 0)return t;return null},t.prototype.toJSON=function(e){var r;return null==e&&(e={}),r=t.__super__.toJSON.apply(this,arguments),e.url&&(r.url=h.getCardUrl(this)),r},t.prototype.upload=function(e,t,r){var n;return n=new FormData,n.append("token",l.myToken()),null!=t?n.append("file",e,t):n.append("file",e),a({url:"/1/cards/"+this.id+"/attachments",data:n,type:"post",processData:!1,contentType:!1,error:function(n){return function(n,o,i,s){var a,u,c;return c=n.status,u=n.responseText,413===c?r("Error uploading "+(null!=(a=e.name)?a:t)):s()}}(this),success:function(e){return r()},timeout:S.getMs({hours:6})})},t.prototype.uploadUrl=function(e,t){return null==t&&(t=function(){}),M.isString(e)&&(e={url:e}),a({url:"/1/cards/"+this.id+"/attachments",type:"post",data:e,error:function(e){return function(e,r,n,o){var i,s;return s=e.status,i=e.responseText,t(r)}}(this),success:function(e){return t()}})},t.prototype.removeCover=function(){return this.update({idAttachmentCover:""})},t.prototype.makeCover=function(e){return this.update({idAttachmentCover:e.id})},t.prototype.calcChecklistPos=function(e,t){return S.calcPos(e,this.checklistList,t)},t.prototype._neighbor=function(e){var t,r,n;if(r=this.getList().openCards(),n=this.getBoard().filter,t=r.indexOf(this),t>=0){for(t+=e;null!=r.at(t)&&!n.satisfiesFilter(r.at(t));)t+=e;return r.at(t)}return null},t.prototype.prevCard=function(){return this._neighbor(-1)},t.prototype.nextCard=function(){return this._neighbor(1)},t.prototype.labelCreateUrl=function(){return"/1/card/"+this.id+"/labels/"},t.prototype.copyTo=function(e){var t,r,n,o;return n=e.name,t=e.idList,o=e.pos,r=e.keepFromSource,null==n&&(n=this.get("name")),y.load(t,_.listMinimal,this.modelCache).then(function(e){return function(t){return L(t.cardList,"create",{name:n,pos:o},{createData:{idCardSource:e.id,keepFromSource:r}})}}(this))},t.prototype.setPluginData=function(e,t,r){return this.pluginDataList.upsert(e,t,r)},t.prototype.getPluginData=function(e){return this.pluginDataList.dataForPlugin(e)},t.prototype.snoopPluginData=function(e){var t;return t=this.pluginDataList.snoopDataForPlugin(e)},t}(j)},{}],139:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(173),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="CheckItem",t.prototype.urlRoot=function(){var e;return e=this.getChecklist(),e.getCard().url()+"/checklist/"+e.id+"/checkItem"},t.prototype.sync=function(e,r,n){return null!=this.getChecklist()?this.waitForId(this.getChecklist(),function(o){return function(){return t.__super__.sync.call(o,e,r,n)}}(this)):void 0},t.prototype.getChecklist=function(){return this.collection.sourceModel},t.prototype.getCard=function(){return this.getChecklist().getCard()},t.prototype.getBoard=function(){return this.getCard().getBoard()},t.prototype.editable=function(){return this.getChecklist().editable()},t.prototype.getContext=function(){return this.getChecklist()},t.prototype.move=function(e){this.update("pos",this.getChecklist().calcPos(e,this)),this.collection.sort({silent:!0})},t}(o)},{}],140:[function(e,r,n){var o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=void 0,t(function(){return o=e(150)}),s=e(173),a=e(109),r.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.typeName="Checklist",t.prototype.urlRoot=function(){return"/1/checklists"},t.prototype.initialize=function(){return this.destruct([this.checkItemList=(new o).syncSubModels(this,"checkItems")])},t.prototype.sync=function(e,r,n){return"create"!==e||null!=this.get("idBoard")&&null!=this.get("idCard")?t.__super__.sync.apply(this,arguments):(this.waitForAttrs(this,["idBoard","idCard"],function(o){return function(i){return o.set(i),t.__super__.sync.call(o,e,r,n)}}(this)),this.waitForId(this.getBoard(),function(e){return function(t){return e.set("idBoard",t)}}(this)),this.waitForId(this.getCard(),function(e){return function(t){return e.set("idCard",t)}}(this)))},t.prototype.getCard=function(){var e;return null!=(e=this.modelCache.get("Card",this.get("idCard")))?e:this.collection.sourceModel},t.prototype.getBoard=function(){var e;return null!=(e=this.getCard())?e.getBoard():void 0},t.prototype.getCompletedCount=function(e){var t;return t=0,this.checkItemList.each(function(e){return null!=e.get("state")&&"complete"===e.get("state")?t++:void 0}),t},t.prototype.getCheckItem=function(e){return this.checkItemList.get(e)},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.calcPos=function(e,t){return a.calcPos(e,this.checkItemList,t)},t}(s)},{}],141:[function(e,r,n){var o,i,s,a,u,c,l,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p={}.hasOwnProperty;o=e(128),a=e(154),u=void 0,t(function(){return u=e(30)}),c=e("bluebird"),l=e("underscore"),s=e(191),r.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.model=o,t.prototype.initialize=function(e,t){this.options=t},t.prototype.comparator=function(e){return-e.getDate()||0},t.prototype._getRelatedBoards=function(){var e,t,r;return t=function(){var t,n,o,i,s,a,u;for(o=this.models,u=[],t=0,n=o.length;n>t;t++)r=o[t],("moveCardToBoard"===(i=r.get("type"))||"moveCardFromBoard"===i)&&(e=r.get("data"),u.push((null!=(s=e.boardTarget)?s.id:void 0)||(null!=(a=e.boardSource)?a.id:void 0)));return u}.call(this),t=l.compact(l.uniq(t)),t=l.reject(t,function(e){return function(t){return null!=e.modelCache.get("Board",t)}}(this)),c.resolve(t).map(function(e){return function(e){return u.loadBoardName(e).catch(s.Unauthorized,s.NotFound,function(){})}}(this))},t}(a)},{}],142:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){
function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n=e("jquery"),o=e(130),s=e(25),a=e(154),u=e(209),t.exports=i=function(e){function t(e,r){this.requiresLogin=r.requiresLogin,this.dataUrl=r.dataUrl,t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.model=o,t.prototype.sync=function(e,t,r){(!this.requiresLogin||s.isLoggedIn())&&n.ajax({url:this.dataUrl,success:function(e){return"function"==typeof r.success?r.success(t,e,r):void 0}})},t.prototype.forLocale=function(e){return this.filter(u.method("matchesLocale",e))},t}(a)},{}],143:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;n=e(132),i=e(154),s=e(66),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=n,t.prototype.comparator=function(e){return-s.parse(e.get("date"))||0},t.prototype.initialize=function(e,t){this.options=t},t}(i)},{}],144:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=e(133),i=e(154),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=n,t.prototype.url=function(){return"/1/member/"+this.member.id+"/boardBackgrounds"},t.prototype.initialize=function(e,t){this.member=t.member},t}(i)},{}],145:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=e(134),i=e(155),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=n,t}(i)},{}],146:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;n=e(137),i=e(154),s=e(109),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=n,t.prototype.initialize=function(){this.listenTo(this,"change:name",this.sort)},t.prototype.comparator=function(e){var t,r,n;return r=e.getOrganization(),n=(null!=r?r.get("displayName"):void 0)||"",t=e.get("name")||"",s.rpad(n,64).toUpperCase()+t.toUpperCase()},t}(i)},{}],147:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e(154),n=e(135),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=n,t.prototype.initialize=function(e,t){var r;return r=t.board,this.board=r},t.prototype.url=function(){return"/1/boards/"+this.board.id+"/boardPlugins"},t}(i)},{}],148:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n=e(136),i=e(154),a=e(109),u=e("underscore"),s=e("bluebird"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var r;return c(t,e),t.prototype.model=n,t.prototype.url=function(){return"/1/member/"+this.member.id+"/boardStars"},t.prototype.initialize=function(e,t){return this.member=t.member,this.listenTo(this,"change:pos",this.sort)},t.prototype.comparator=function(e){return e.get("pos")||0},t.prototype.getBoardStar=function(e){return u.find(this.models,function(t){return t.get("idBoard")===e})},t.prototype.starBoard=function(e){var t;return this.getBoardStar(e)?s.reject(new Error("already starred")):(t=this.length?this.at(this.length-1).get("pos")+a.spacing:a.spacing,new s(function(r){return function(n){return r.create({idBoard:e,pos:t},{modelCache:r.modelCache},n)}}(this)))},t.prototype.unstarBoard=function(e){var t;return t=this.getBoardStar(e),null!=t?new s(function(e,r){return t.waitForId(t,function(){return t.destroy({success:e,error:function(e,t){return r(t)}})})}):s.reject(new Error("not starred"))},t.prototype.updateStarBoard=function(e,t){var r,n;return r=this.getBoardStar(e),n=this.getNewPos(r,t),null!=r?r.update({pos:n}):void 0},t.prototype.getBoards=function(){var e;return e=this.getBoardIds(),u.compact(this.modelCache.get("Board",e))},t.prototype.getBoardIds=function(){var e,t,r,n,o;for(n=u.sortBy(this.models,function(e){return e.get("pos")}),o=[],e=0,t=n.length;t>e;e++)r=n[e],o.push(r.get("idBoard"));return o},t.prototype.getBoardIndex=function(e){return this.models.filter(r).indexOf(this.getBoardStar(e))},t.prototype.getNewPos=function(e,t){var n;return n=a.calcPos(t,this,e,r)},r=function(e){var t;return t=e.getBoard(),t&&t.isOpen()},t}(i)},{}],149:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=e(138),i=e(154),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=n,t.prototype.initialize=function(e,t){this.listenTo(this,"change:pos",this.sort),this.list=t.list},t.prototype.url="/1/cards",t.prototype.comparator=function(e){return e.get("pos")||0},t}(i)},{}],150:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=e(139),i=e(154),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=n,t.prototype.initialize=function(){return this.listenTo(this,"change:pos",this.sort)},t.prototype.comparator=function(e){return e.get("pos")},t}(i)},{}],151:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=e(140),i=e(154),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=n,t.prototype.initialize=function(){return this.listenTo(this,"change:pos",this.sort)},t.prototype.comparator=function(e){return e.get("pos")},t.prototype.idList=function(){return this.pluck("id")},t}(i)},{}],152:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=e(154),o=e(167),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=o,t.prototype.url=function(){return"/1/member/"+this.member.id+"/customEmoji"},t.prototype.initialize=function(e,t){this.member=t.member},t}(n)},{}],153:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;n=e(25),o=e(154),i=e(168),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=i,t.prototype.url=function(){return"/1/member/"+n.me().id+"/customStickers"},t.prototype.initialize=function(e,t){this.member=t.member},t}(o)},{}],154:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty,d=[].slice,p=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};n=e(205),i=e("hearsay"),s=e(109),a=e("underscore"),u=e(209),t.exports=o=function(e){function t(e,r){this.modelCache=null!=r?r.modelCache:void 0,t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.destructor=function(){return this.stopListening(),s.shred(this)},t.prototype.create=function(){var e,r,n,o,i,s,c,l,p;return o=arguments[0],e=3<=arguments.length?d.call(arguments,1,r=arguments.length-1):(r=1,[]),s=arguments[r++],c=e[0],c||a.isFunction(s)||(c=s,s=function(){}),i=this.model,null==c&&(c={}),n=this.modelCache.lock("Collection Create"),c.success=u.concat(null!=(l=c.success)?l:function(){},function(e){return function(e){return s(null,e)}}(this)),c.error=u.concat(null!=(p=c.error)?p:function(){},function(e){return function(e,t){return s(t)}}(this)),c.complete=u.choke(0,this.modelCache,"unlock",n),null==c.modelCache&&(c.modelCache=this.modelCache),t.__super__.create.call(this,o,c)},t.prototype._update=function(e){var t,r;return t=a.sortBy(e,function(e){return e.cid}),r=a.sortBy(this.models,function(e){return e.cid}),a.isEqual(t,r)?void 0:this.reset(e)},t.prototype.owner=function(e){return this.owner=e,this},t.prototype.syncModel=function(e,t,r){var n,o,i;return this.sourceModel=e,n=(null!=r?r:{}).fxGetIds,this.modelCache=this.sourceModel.modelCache,o=function(e){return function(){var r,o,i;return r=e.sourceModel.get(t),null!=(o=null!=(i="function"==typeof n?n(r):void 0)?i:r)?o:[]}}(this),i=function(e){return function(t){var r;return r=a.chain(t).map(function(t){return e.modelCache.get(e.model,t)}).compact().value(),e._update(r)}}(this),this.sync=function(e){return function(){return i(o())}}(this),this.listenTo(this.sourceModel,"change:"+t,this.sync),this.listenTo(this.modelCache,"add:"+this.model.prototype.typeName,function(e){var t;t=e.id,p.call(o(),t)>=0&&this.add(e)}),this.listenTo(this.modelCache,"remove:"+this.model.prototype.typeName,function(e){var t;t=e.id,p.call(o(),t)>=0&&this.remove(e)}),this.sync(),this},t.prototype.syncCache=function(e,t,r){var n,o,i,s;for(this.modelCache=e,this.sync=function(e){return function(){return e._update(e.modelCache.all(e.model).filter(r))}}(this),s=this.model.prototype.typeName,this.listenTo(this.modelCache,"add:"+s,function(e){return function(t){return r(t)?e.add(t):void 0}}(this)),this.listenTo(this.modelCache,"remove:"+s,function(e){return function(t){return r(t)?e.remove(t):void 0}}(this)),this.listenTo(this.modelCache,"reset:"+s,this.sync),o=0,i=t.length;i>o;o++)n=t[o],this.listenTo(this.modelCache,"change:"+s+":"+n,this.sync);return this.sync(),this},t.prototype.syncSubModels=function(e,t){return this.sourceModel=e,null==this.modelCache&&(this.modelCache=this.sourceModel.modelCache),this.sync=function(e){return function(){var r,n,o,i,s,u,c,l,d,p;for(r=e.models,p=null!=(c=e.sourceModel.get(t))?c:[],u=function(){var e,t,r;for(r=[],e=0,t=p.length;t>e;e++)o=p[e],d=a.find(this.models,function(e){return e.id===o.id}),null!=d?this.modelCache.enqueueDelta(d,o):d=new this.model(o,{modelCache:this.modelCache,collection:this}),r.push(d);return r}.call(e),l=e.models,n=0,i=l.length;i>n;n++)s=l[n],null==s.id&&u.push(s);return e._update(u)}}(this),this.listenTo(this.sourceModel,"change:"+t,this.sync),this.sync(),this},t.prototype.snoop=function(){var e,t;return e=1<=arguments.length?d.call(arguments,0):[],t=["add","remove","reset"].concat(e.map(function(e){return["change",e].join(":")})).join(" "),new i.ContinuousSignal(function(e){return function(r){var n;return r(e),n=function(){return r(e)},e.listenTo(e,t,n),function(){return e.stopListening(e,t,n)}}}(this))},t}(n.Collection)},{}],155:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;n=e(154),o=e(66),i=e(174),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=i,t.prototype.initialize=function(e,t){this.options=t},t.prototype.comparator=function(e){return e.get("dateExpires")?-o.parse(e.get("dateExpires")):-(1/0)},t}(n)},{}],156:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=e(154),o=e(175),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=o,t}(n)},{}],157:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;n=e(154),o=e(176),s=e(109),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=o,t.prototype.initialize=function(e,t){this.listenTo(this,"change:pos",this.sort),this.board=t.board},t.prototype.comparator=function(e){return e.get("pos")||0},t.prototype.calcPos=function(e,t,r){return s.calcPos(e,this,t,null,r)},t.prototype.url=function(){return"/1/boards/"+this.board.id+"/lists"},t}(n)},{}],158:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;n=e(154),o=e(177),s=e("underscore"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=o,t.prototype.initialize=function(){return this.listenTo(this,"change:primary",this.resetPrimary)},t.prototype.resetPrimary=function(e){var t,r,n;if(e.get("primary")){for(n=this.without(e),t=0,r=n.length;r>t;t++)e=n[t],e.set("primary",!1);return this.sort()}},t.prototype.comparator=function(e){return Number(!e.get("primary"))+e.id},t.prototype.types=function(){return s.countBy(s.flatten(this.pluck("types")))},t}(n)},{}],159:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;n=e(190),o=e(25),i=e(154),s=e(178),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.model=s,t.prototype.sortField="fullName",t.prototype.idList=function(){return this.pluck("id")},t.prototype.remove=function(e,r){var o;return null==this.sourceModel?t.__super__.remove.apply(this,arguments):(t.__super__.remove.call(this,e),o=(null!=r?r.invite:void 0)?"/1/"+this.sourceModel.typeName+"/"+this.sourceModel.id+"/ghost/"+e.id:"/1/"+this.sourceModel.typeName+"/"+this.sourceModel.id+"/members/"+e.id,(null!=r?r.mass:void 0)&&(o+="/all"),n({url:o,type:"delete",success:function(e){return(null!=e?e.unreadable:0)?void 0:null!=r&&"function"==typeof r.success?r.success():void 0}}))},t.prototype.filterDeactivated=function(e){var r,n,i,s;return s=null!=e?e:{},i=s.model,r=s.force,null==i&&(i=this.sourceModel),null==r&&(r=!1),n=o.me(),new t(this.filter(function(e){return i.hasActiveMembership(e)||!r&&i.isDeactivated(e)&&i.canSeeDeactivated(n)},this.options))},t.prototype.comparator=function(e){return e.get(this.sortField)},t}(i)},{}],160:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=e(154),o=e(179),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=o,t.prototype.initialize=function(){return this.memberIndex={},this.listenTo(this,"add",function(e){return function(t){return e.memberIndex[t.get("idMember")]=t}}(this)),this.listenTo(this,"remove",function(e){return function(t){return delete e.memberIndex[t.get("idMember")]}}(this)),this.listenTo(this,"reset",function(e){return function(){var t,r,n,o,i;for(e.memberIndex={},o=e.models,i=[],t=0,r=o.length;r>t;t++)n=o[t],i.push(e.memberIndex[n.get("idMember")]=n);return i}}(this))},t.prototype.getMember=function(e){var t,r;return t=null!=(r=null!=e?e.id:void 0)?r:e,this.memberIndex[t]},t}(n)},{}],161:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=e(155),o=e(181),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=o,t}(n)},{}],162:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=e(154),o=e(182),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=o,t.prototype.initialize=function(){this.listenTo(this,"change:name",this.sort)},t.prototype.comparator=function(e){var t;return(null!=(t=e.get("name"))?t.toUpperCase():void 0)||""},t}(n)},{}],163:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n=e(154),o=e(183),s=e("bluebird"),a=e("underscore"),u=e("xtend"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.model=o,t.prototype.initialize=function(e,t){return this.scopeModel=t.scopeModel},t.prototype.scope=function(){return this.scopeModel.typeName.toLowerCase()},t.prototype.for=function(e,t){return a.find(this.models,function(r){return function(n){return n.get("idPlugin")===e&&n.get("access")===t&&n.get("scope")===r.scope()&&n.get("idModel")===r.scopeModel.id}}(this))},t.prototype.create=function(e,r){return e=u(e,{scope:this.scope(),idModel:this.scopeModel.id,access:e.visibility}),t.__super__.create.call(this,e,r)},t.prototype.dataForPlugin=function(e){return a.chain(this.models).filter(function(t){return t.get("idPlugin")===e}).groupBy(function(e){return e.get("scope")}).mapObject(function(e){return a.chain(e).groupBy(function(e){return e.get("access")}).mapObject(function(e){return e[0].get("value")}).value()}).value()},t.prototype.snoopDataForPlugin=function(e){return null==this.signalCache&&(this.signalCache={}),null==this.signalCache[e]&&(this.signalCache[e]=this.snoop("value").map(function(t){return function(){return t.dataForPlugin(e)}}(this)),this.signalCache[e].addDisposer(function(t){return function(){return delete t.signalCache[e]}}(this))),this.signalCache[e]},t.prototype.upsert=function(e,t,r){var n;n=this.for(e,t),null!=n?n.update("value",r):this.create({idPlugin:e,visibility:t,value:r})},t}(n)},{}],164:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;n=e(154),o=e(185),s=e(109),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=o,t.prototype.url=function(){return"/1/member/"+this.member.id+"/savedSearches"},t.prototype.initialize=function(e,t){return this.member=t.member,this.listenTo(this,"change:pos",this.sort)},t.prototype.comparator=function(e){return e.get("pos")||0},t.prototype.saveSearch=function(e,t){var r;return r=this.length?this.at(this.length-1).get("pos")+s.spacing:s.spacing,this.create({name:e,query:t,pos:r},{modelCache:this.modelCache})},t}(n)},{}],165:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;n=e(154),o=e(186),s=e("underscore"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=o,t.prototype.url=function(){return"/1/cards/"+this.card.get("id")+"/stickers"},t.prototype.initialize=function(e,t){this.card=t.card,this.listenTo(this,"change:zIndex",this.sort)},t.prototype.comparator=function(e){return e.get("zIndex")||0},t.prototype.nextZIndex=function(e){var t;return this.length>0?(t=s.max(this.pluck("zIndex")),(null!=e?e.get("zIndex"):void 0)===t&&1===this.filter(function(e){return e.get("zIndex")===t}).length?t:t+1):1},t}(n)},{}],166:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=e(154),o=e(187),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=o,t.prototype.comparator=function(e,t){return e.get("name").localeCompare(t.get("name"))},t}(n)},{}],167:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(173),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="CustomEmoji",t}(o)},{}],168:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(173),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="CustomSticker",t}(o)},{}],169:[function(e,t,r){var n,o;o=e("underscore"),t.exports=n=function(){function e(){}return e.prototype.getLabels=function(){return this.labelList.models},e.prototype.dataForLabel=function(e){return o.extend(e.toJSON(),{isActive:this.hasLabel(e)})},e.prototype.toggleLabelColor=function(e){var t;return t=this.getBoard().labelForColor(e),null!=t?this.toggleLabel(t):void 0},e.prototype.hasLabel=function(e){return this.labelList.contains(e)},e.prototype.toggleLabel=function(e){var t,r;return t=!this.hasLabel(e),r=e.get("uses")+(t?1:-1),this.toggle("idLabels",e.id,t),e.set("uses",r)},e.prototype.createLabel=function(e,t){var r;return(r=o.find(this.getBoard().getLabels(),function(r){return r.get("name")===e&&r.get("color")===t}))?void(this.hasLabel(r)||this.toggleLabel(r)):void this.labelList.create({name:e,color:null!=t?t:"",idBoard:this.get("idBoard"),uses:1},{url:this.labelCreateUrl()})},e}()},{}],170:[function(e,r,n){var o,i,s,a,u,c,l,d=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(192),i=e(25),s=void 0,t(function(){return s=e(160)}),u=e("underscore"),c=e(38),l=e("xtend"),r.exports=a=function(){function e(){}return e.prototype.orderedVisibleMembers=function(){return this.memberList.sortBy(function(e){return function(t){var r;return r=i.isMe(t)?"0":e.isDeactivated(t)?"3":e.isVirtual(t)?"2":"1",r+t.get("fullName")}}(this)).filter(function(e){return function(t){return!e.isDeactivated(t)||e.canSeeDeactivated(i.me())}}(this))},e.prototype.getMemberType=function(e){var t,r;return t=("function"==typeof this.getOrganization&&null!=(r=this.getOrganization())?r.isPremOrgAdmin(e):void 0)?"admin":this.getExplicitMemberType(e),"public"!==t&&("function"==typeof this.isVirtual?this.isVirtual(e):void 0)&&(t="virtual"),t},e.prototype._refreshMemberships=function(){return this._memberships.update(this.get("memberships"))},e.prototype._getMembershipFor=function(e){return this._memberships||(this._memberships=new s,this._refreshMemberships(),this.listenTo(this,"change:memberships",this._refreshMemberships)),this._memberships.getMember(e)},e.prototype.getMembershipFor=function(e){var t;return null!=(t=this._getMembershipFor(e))?t.toJSON():void 0},e.prototype.hasActiveMembership=function(e){return null!=this._getMembershipFor(e)&&!this.isDeactivated(e)},e.prototype.isMember=function(e){return null!=this._getMembershipFor(e)},e.prototype.isVirtual=function(e){return"ghost"===(null!=e?e.get("memberType"):void 0)},e.prototype.isDeactivated=function(e){var t;return(null!=(t=this._getMembershipFor(e))?t.get("deactivated"):void 0)===!0},e.prototype.isUnconfirmed=function(e){var t;return(null!=(t=this._getMembershipFor(e))?t.get("unconfirmed"):void 0)===!0},e.prototype.isObserver=function(e){return"observer"===this.getExplicitMemberType(e)},e.prototype.isPremOrgAdmin=function(e){var t,r,n,o;return u.isString(e)&&(e=this.modelCache.get("Member",e)),r=null!=(n=null!=e&&"function"==typeof e.get?e.get("idPremOrgsAdmin"):void 0)?n:[],t=this.getOrganization?null!=(o=this.getOrganization())?o.id:void 0:this.id,d.call(r,t)>=0},e.prototype.getExplicitMemberType=function(e){var t,r;return this.isDeactivated(e)?"deactivated":this.isUnconfirmed(e)?"unconfirmed":(t=this._getMembershipFor(e))?t.get("memberType"):("function"==typeof this.getOrganization&&null!=(r=this.getOrganization())?r.isMember(e):void 0)?"org":"public"},e.prototype.canSeeDeactivated=function(e){var t,r;return this.isMember(e)||(null!=(t=e.organizationList)?t.get(null!=(r=this.getOrganization())?r.id:void 0):void 0)},e.prototype.setOnMembership=function(e,t){return this.set({memberships:this.get("memberships").map(function(r){return r.idMember===e.id?l(r,t):r})})},e.prototype.toggleMemberHidden=function(e,t){return o({url:"/1/"+this.typeName.toLowerCase()+"/"+this.id+"/hiddenGoogleAppsMembers",type:t.type,data:{gMail:e.get("gMail")}})},e.prototype.changeMemberRole=function(e,t){return null!=t.type&&this.setOnMembership(e,{memberType:t.type}),o({type:"PUT",url:"/1/"+this.typeName.toLowerCase()+"/"+this.id+"/members/"+e.id,data:t}).then(function(){return c("Member","Change Role",t.type)})},e.prototype.addMemberRole=function(e){return o({type:"PUT",url:"/1/"+this.typeName.toLowerCase()+"/"+this.id+"/members",data:e}).then(function(){return c("Member","Change Role",e.type)})},e}()},{}],171:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty,u=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(172),i=e("underscore"),t.exports=n=function(e){function t(){t.__super__.constructor.apply(this,arguments),this._initSubEventsOn("myPrefs")}return s(t,e),t.prototype.myPrefNames=[],t.prototype.myPrefDefaults={},t.prototype.toJSON=function(e){var r,n,o,i,s,a;if(null==e&&(e={}),r=t.__super__.toJSON.apply(this,arguments),e.prefs)for(s=this.myPrefNames,n=0,o=s.length;o>n;n++)i=s[n],a=this.getPref(i),r[i]=a,r[i+"_"+a]=!0;return r},t.prototype.getPref=function(e){var r,n;return u.call(this.myPrefNames,e)>=0?null!=(r=null!=(n=this.get("myPrefs"))?n[e]:void 0)?r:this.myPrefDefaults[e]:t.__super__.getPref.apply(this,arguments)},t.prototype.setPref=function(e,r,n){return u.call(this.myPrefNames,e)>=0?this.setMyPref(e,r,n):t.__super__.setPref.apply(this,arguments)},t.prototype.setMyPref=function(e,t,r){var n;return this.api({type:"put",method:"myPrefs/"+e,data:{value:t}},r),n=i.clone(this.get("myPrefs")),n[e]=t,this.set({myPrefs:n})},t}(o)},{}],172:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(173),i=e("underscore"),t.exports=n=function(e){function t(){t.__super__.constructor.apply(this,arguments),this._initSubEventsOn("prefs")}return s(t,e),t.prototype.prefNames=[],t.prototype.toJSON=function(e){var r,n;return null==e&&(e={}),r=t.__super__.toJSON.apply(this,arguments),n=function(e){return function(t,o,s){var a,u,c,l,d,p,h;for(p=[],a=0,c=t.length;c>a;a++)l=t[a],u=s?s+"_"+l:l,h=null!=(d=null!=o?o[l]:void 0)?d:e.getPref(l),i.isObject(h)&&!i.isArray(h)?p.push(n(i.keys(h),h,u)):(r[u]=h,p.push(r[u+"_"+h]=!0));return p}}(this),e.prefs&&n(this.prefNames),r},t.prototype.getPref=function(e){var t;return null!=(t=this.get("prefs"))?t[e]:void 0},t.prototype.setPref=function(e,t,r){return this.update("prefs/"+e,t,r)},t.prototype.set=function(e,r){var n,o,s;if(e=i.clone(e),null!=e.prefs){o=e.prefs;for(n in o)s=o[n],"none"===s&&(s="disabled"),"owners"===s&&(s="admins"),o[n]=s}return t.__super__.set.apply(this,arguments)},t}(o)},{}],173:[function(e,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function r(){this.constructor=e}for(var n in t)y.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},y={}.hasOwnProperty,b=[].slice,w=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(190),i=e(191),s=e(205),a=e(69),u=e("hearsay"),c=void 0,t(function(){return c=e(30)}),l=e("bluebird"),d=e("promise-queue"),p=e(94),m=e(109),f=e("underscore"),g=e(89),r.exports=g(a,p,h=function(e){function t(e,r){var n;this._marked={},this._lockQueue={},this.modelCache=null!=r?r.modelCache:void 0,this._apiQueue=new d(1),t.__super__.constructor.apply(this,arguments),null!=(n=this.modelCache)&&n.add(this)}return v(t,e),t.prototype._initSubEventsOn=function(e){return this.listenTo(this,"change:"+e,function(t){return function(r,n){var o,i,s,a,u;i=null!=(s=r.previousAttributes())?s[e]:void 0,a=[];for(o in n)u=n[o],(null==i||u!==i[o])&&a.push(t.trigger("change:"+e+"."+o));return a}}(this))},t.prototype.waitForLock=function(e,t){var r;return r=function(t){return function(){var n;return f.isEmpty(t._lockQueue[e])?delete t._lockQueue[e]:(n=t._lockQueue[e].shift())(r)}}(this),null!=this._lockQueue[e]?this._lockQueue[e].push(t):(this._lockQueue[e]=[],t(r))},t.prototype.set=function(e,r){var n,o,i,s,a,u,c,l,d,p,h,m,g,v;f.isArray(e)&&(e=f.find(e,function(e){return e.id===this.id||e._id===this.id})),null!=(null!=e?e._id:void 0)&&(null==e.id&&(e.id=e._id),delete e._id),e=f.clone(e);for(c in e)if(v=e[c],c.indexOf("/")>=0){for(h=c.split("/"),p=h[0],o=3<=h.length?b.call(h,1,a=h.length-1):(a=1,[]),l=h[a++],null==e[p]&&(e[p]=null!=(m=f.clone(this.get(p)))?m:{}),i=e[p],s=u=0,d=o.length;d>u;s=++u)n=o[s],i=i[n]=null!=(g=f.clone(i[n]))?g:{};i[l]=v,delete e[c]}return t.__super__.set.apply(this,arguments)},t.prototype.destructor=function(){var e,t,r,n;if(this.stopListening(),this.cancelScheduled(),null!=this._using)for(n=this._using,e=0,t=n.length;t>e;e++)r=n[e],"function"==typeof r.destructor&&r.destructor();return m.shred(this)},t.prototype.destroy=function(){return t.__super__.destroy.apply(this,arguments),this.destructor()},t.prototype.destruct=function(e){var t,r,n,o;if(f.isArray(e)){for(null==this._using&&(this._using=[]),o=[],t=0,r=e.length;r>t;t++)n=e[t],o.push(this._using.push(n));return o}return this.destruct([e])},t.load=function(e,t,r){return l.try(function(n){return function(){var o,i,s;return null==r||null==e?null:(s=function(e,t){var r;return r=f.keys(e),!f.any(r,function(e){return w.call(t,e)<0})},s(t,["query"])&&s(t.query,["fields"])&&null!=(o=r.get(n,e))&&(i=t.query.fields?t.query.fields.split(","):[],f.all(i,function(e){return o.attributes.hasOwnProperty(e)}))?o:null)}}(this)).then(function(r){return function(n){return null!=n?n:c.loadModel(r,e,t)}}(this))},t.prototype.ready=function(e){e&&(this.isReady?e():(this.waitingForReady||(this.waitingForReady=[]),this.waitingForReady.push(e)))},t.prototype.setReady=function(){var e,t,r,n;if(this.isReady=!0,this.waitingForReady)for(n=this.waitingForReady,this.waitingForReady=null,t=0,r=n.length;r>t;t++)e=n[t],"function"==typeof e&&e()},t.prototype.update=function(){var e,t,r,n,o,i,s,a,u,c;return f.isString(arguments[0])?(r=arguments[0],u=arguments[1],s=4<=arguments.length?b.call(arguments,2,e=arguments.length-1):(e=2,
[]),o=s[0],n=arguments[e++],i={},i[r]=u):(i=arguments[0],a=3<=arguments.length?b.call(arguments,1,t=arguments.length-1):(t=1,[]),o=a[0],n=arguments[t++]),null!=o||f.isFunction(n)||(o=n,n=null),c=(null!=o?o:{}).waitForServer,c||this.set(i),this._persistUpdate(i,n)},t.prototype._persistUpdate=function(e,t){return this.api({type:"put",data:e},t)},t.prototype.addToSet=function(){var e,t,r,n,o,i,s,a,u,c,l;return t=arguments[0],c=arguments[1],e=4<=arguments.length?b.call(arguments,2,n=arguments.length-1):(n=2,[]),i=arguments[n++],s=e[0],null!=s||f.isFunction(i)||(s=i,i=function(){}),a=null!=s?s:{},l=a.waitForServer,r=a.collectionName,o=this,null==r&&(r=t),l||this.set(t,f.uniq((null!=(u=o.get(t))?u:[]).concat(c))),this.api({method:r,data:{value:c},success:function(e){return function(r,n){var i;return i={},i[t]=f.uniq(o.get(t).concat(c)),e.modelCache.enqueueDelta(o,i),"function"==typeof n?n(null,r):void 0}}(this)},i)},t.prototype.pull=function(){var e,t,r,n,o,i,s,a,u,c,l;return t=arguments[0],c=arguments[1],e=4<=arguments.length?b.call(arguments,2,n=arguments.length-1):(n=2,[]),i=arguments[n++],s=e[0],null!=s||f.isFunction(i)||(s=i,i=function(){}),a=null!=s?s:{},l=a.waitForServer,r=a.collectionName,o=this,null==r&&(r=t),l||this.set(t,f.without(null!=(u=o.get(t))?u:[],c)),this.api({method:r+"/"+c,type:"delete",success:function(e){return function(r,n){var i;return i={},i[t]=f.without(o.get(t),c),e.modelCache.enqueueDelta(o,i),"function"==typeof n?n(null,r):void 0}}(this)},i)},t.prototype.run=function(e,t,r){return this.api({method:e,data:t},r)},t.prototype.api=function(e,t){var r,n,s,a,u,c;return s=e.method,c=e.type,r=e.data,u=e.success,n=e.datatype,a=this,null==n&&(n=""),null==s&&(s=""),null==c&&(c="post"),null==r&&(r={}),null==u&&(u=function(e){return function(t,r){var n;t.id===a.id?e.modelCache.enqueueDelta(a,t):f.isArray(t)&&(n=f.find(t,function(e){return e.id===a.id}),null!=n&&e.modelCache.enqueueDelta(a,n)),r(null,t)}}(this)),null==t&&(t=function(){}),this.waitForId(this,function(e){return function(){var a;return a=e.url(),null!=s&&""!==s&&(a+="/"+s),l.using(e.modelCache.getLock(),function(){return e._apiQueue.add(function(){return new l(function(e,t){return o({url:a,type:c,data:r,datatype:n,success:function(t){e(l.fromNode(function(e){return u(t,e)}))},error:function(e,r,n,o){var s,a;a=e.status,s=e.responseText,n=i.fromResponse(a,s),(n instanceof i.Server||n instanceof i.NoResponse)&&o(),t(n)}})})})}).nodeify(t).catch(function(){}).done()}}(this)),this},t.prototype.toggle=function(){var e,t,r,n,o,i,s;return r=arguments[0],s=arguments[1],e=arguments[2],t=5<=arguments.length?b.call(arguments,3,n=arguments.length-1):(n=3,[]),o=arguments[n++],i=t[0],this[e?"addToSet":"pull"](r,s,i,o)},t.prototype.snoop=function(e){return null!=e?new u.ContinuousSignal(function(t){return function(r){var n;return r(t.get("attr")),n=function(){return r(t.get("attr"))},t.listenTo(t,"change:"+e,n),function(){return t.stopListening(t,"change:"+e,n)}}}(this)):new u.ContinuousSignal(function(e){return function(t){var r;return t(e),r=function(){return t(e)},e.listenTo(e,"change",r),function(){return e.stopListening(e,"change",r)}}}(this))},t.prototype.isVisibleAction=function(e){return!0},t.prototype.getActions=function(){var e;return e=1<=arguments.length?b.call(arguments,0):[],this.modelCache.all("Action").filter(function(t){return function(r){return r.includesModel(t)&&f.all(e,function(e){return r.includesModel(e)})&&t.isVisibleAction(r)}}(this))},t}(s.Model))},{}],174:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty,c=[].slice;n=e(190),i=e(173),s=e(35),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.typeName="Invitation",t.prototype.initialize=function(e,t){s("invitation",t),this.invitationList=t.collection,this.setReady()},t.prototype.create=function(e){var t,r,o,i;return o=e.model,t=e.data,i=e.success,r=e.error,n({url:"/1/"+o.typeName+"/"+o.id+"/invitations",type:"post",data:t,dataType:"json",error:function(e){return function(){var t,n,o,i,s;return t=2<=arguments.length?c.call(arguments,0,i=arguments.length-1):(i=0,[]),o=arguments[i++],n=t[0],"Member email restricted by organization administrators"===n.responseText.trim()?void e.$(".error").show():("Member already invited"!==(s=n.responseText.trim())&&"Member already a member"!==s&&"Member email restricted by organization administrators"!==s&&o(),"function"==typeof r?r(n):void 0)}}(this),success:function(e){return function(e){return"function"==typeof i?i(e):void 0}}(this)})},t.prototype.delete=function(e){var t,r,o,i;return o=e.model,r=e.idInvitation,i=e.success,t=e.error,n({url:"/1/"+o.typeName+"/"+o.id+"/invitations/"+r,type:"delete",dataType:"json",error:function(e){return function(){var e,r,n,o;return e=2<=arguments.length?c.call(arguments,0,o=arguments.length-1):(o=0,[]),n=arguments[o++],r=e[0],"Invitation not found"!==r.responseText.trim()&&n(),"function"==typeof t?t(r):void 0}}(this),success:function(e){return function(e){return"function"==typeof i?i(e):void 0}}(this)})},t.prototype.respond=function(e){var t,r,o,i,s;return o=e.model,i=e.response,t=e.data,s=e.success,r=e.error,n({url:"/1/"+o.typeName+"/"+o.id+"/invitations/"+i,type:"post",dataType:"json",data:t,error:function(e){return function(){var e,t,n,o;return e=2<=arguments.length?c.call(arguments,0,o=arguments.length-1):(o=0,[]),n=arguments[o++],t=e[0],"already a member"!==t.responseText.trim()&&n(),"function"==typeof r?r(t):void 0}}(this),success:function(e){return function(e){return"function"==typeof s?s(e):void 0}}(this)})},t}(i)},{}],175:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(173),i=e("underscore"),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.typeName="Label",t.prototype.urlRoot="/1/labels",t.prototype.getBoard=function(){return this.modelCache.get("Board",this.get("idBoard"))},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.colorSortVal=function(){var e;return e=i.indexOf(t.colors,this.get("color")),e>=0?e:1/0},t.prototype.nameSortVal=function(){var e;return(null!=(e=this.get("name"))?e:"").toLowerCase()},t.compare=function(e,t){var r;return r=e.colorSortVal()-t.colorSortVal(),0===r||isNaN(r)?e.nameSortVal().localeCompare(t.nameSortVal()):r},t.colors=["green","yellow","orange","red","purple","blue","sky","lime","pink","black"],t}(o)},{}],176:[function(e,r,n){var o,i,s,a,u,c,l,d,p,h,m,f=function(e,t){function r(){this.constructor=e}for(var n in t)g.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},g={}.hasOwnProperty;o=e(59),i=void 0,t(function(){return i=e(149)}),a=e(173),u=e(109),l=e(120),p=e(89),h=e(119),d=e(195),m=e("xtend"),c=e("underscore"),r.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),p(o,t),t.prototype.typeName="List",t.prototype.urlRoot="/1/lists",t.prototype.initialize=function(){return this.destruct([this.cardList=new i(null,{list:this}).owner(this).syncCache(this.modelCache,["idList","closed"],function(e){return function(t){return e.id&&t.get("idList")===e.id&&t.isOpen()}}(this))])},t.prototype.sync=function(e,r,n){return"create"===e&&null==this.get("idBoard")?(this.waitForAttrs(this,["idBoard"],function(o){return function(i){return o.set(i),t.__super__.sync.call(o,e,r,n)}}(this)),this.waitForId(this.getBoard(),function(e){return function(t){return e.set("idBoard",t)}}(this))):t.__super__.sync.apply(this,arguments)},t.prototype.subscribe=function(e){e!==this.get("subscribed")&&this.update({subscribed:e})},t.prototype.move=function(e){this.update({pos:this.getBoard().calcPos(e,this)}),this.collection.sort({silent:!0})},t.prototype.close=function(){this.update({closed:!0})},t.prototype.reopen=function(){this.update({closed:!1,pos:this.getBoard().calcPos(this.collection.length,this)})},t.prototype.onChange=function(){},t.prototype.calcPos=function(e,t,r){return u.calcPos(e,this.cardList,t,null,r)},t.prototype.bottomCardPos=function(){var e;return null!=(e=this.cardList.last())?e.get("pos")+u.spacing:u.spacing},t.prototype.getBoard=function(){var e,t;return null!=(e=this.modelCache.get("Board",this.get("idBoard")))?e:null!=(t=this.collection)?t.owner:void 0},t.prototype.selectCardInList=function(e){var t;t=this.openCards().at(e),null!=t&&this.getBoard().viewState.selectCard(t)},t.prototype.selectFirstCardInList=function(){return this.selectCardInList(0)},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.getIndexInList=function(){return c.indexOf(this.getBoard().listList.models,this)},t.prototype.openCards=function(){return this.cardList},t.prototype.uploadUrl=function(e,t,r,n){return null==n&&(n=function(){}),this.cardList.create(m({name:r,pos:this.bottomCardPos()},t),{createData:{urlSource:e,name:null!=t?t.name:void 0}},n)},t.prototype._processText=function(e){var t,r,n,o,i;return/[\r\n]/.test(e)?(i=/^\s*([^\r\n]+)/.exec(e),t=i[0],n=i[1],o=h(n,256),r=e):(o=h(e,256),r=o!==e||l(e)?e:""),{name:o,desc:r}},t.prototype.uploadText=function(e,t){var r,n,o;return null==t&&(t=function(){}),e?(o=this._processText(e),n=o.name,r=o.desc,this.cardList.create({name:n,desc:r,pos:this.bottomCardPos()},t)):t()},t.prototype.upload=function(e,t,r){var n,o;return null==r&&(r=function(){}),n={name:t,idList:this.id,pos:this.bottomCardPos()},o=d(c.extend({},n,{fileSource:[e,t]})),this.cardList.create(n,o)},t}(a)},{}],177:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(173),i=e("underscore"),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.typeName="Login",t.prototype.hasConflict=function(){var e;return e=this.collection.types(),!i.any([function(e){return function(){return i.isEmpty(e.get("types"))}}(this),function(t){return function(){return"password"in e}}(this),function(t){return function(){return e.google>=2}}(this)],function(e){return e()})},t}(o)},{}],178:[function(e,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M=function(e,t){function r(){this.constructor=e}for(var n in t)B.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},B={}.hasOwnProperty,T=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e("jquery"),j=e(102),s=e(190),i=e(57),a=e(25),u=e(144),c=void 0,t(function(){return c=e(146)}),l=e(148),d=e(5),p=e(152),h=e(153),m=e(81),f=e(158),v=e(17),y=void 0,t(function(){return y=e(30)}),b=e(172),w=void 0,t(function(){return w=e(162)}),_=e(197),k=e(164),C=e(109),x=e("underscore"),S=e(84),r.exports=g=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var r;return M(t,e),r=1e4,t.prototype.typeName="Member",t.prototype.nameAttr="fullName",t.prototype.urlRoot="/1/members",t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.destruct([this.boardList=(new c).syncModel(this,"idBoards"),this.organizationList=(new w).syncModel(this,"idOrganizations")]),a.isMe(this)&&(this.destruct([this.boardStarList=new l([],{member:this}).syncSubModels(this,"boardStars"),this.savedSearchList=new k([],{member:this}).syncSubModels(this,"savedSearches"),this.customStickerList=new h([],{member:this}).syncSubModels(this,"customStickers"),this.boardBackgroundList=new u([],{member:this}).syncSubModels(this,"boardBackgrounds"),this.customEmojiList=new p([],{member:this}).syncSubModels(this,"customEmoji"),this.loginList=new f([],{member:this}).syncSubModels(this,"logins")]),this.isFeatureEnabled("customEmoji")&&y.loadMemberCustomEmoji(this.id).done()),this.listenTo(this,"change:editing",function(e){return function(t){var r,n;return null!=(r=e.modelCache.get("Card",null!=(n=t.get("editing"))?n.idCard:void 0))?r.updateEditing(t):void 0}}(this))},t.prototype.isVisibleAction=function(e){return null==this._actionFilter&&(this._actionFilter=j(_.memberActions)),this._actionFilter(e)},t.prototype.isLoggedIn=function(){return!this.get("notLoggedIn")},t.prototype.getMembershipData=function(e){var t,r,n,o,i,s,u,c,l,d,p,h,m,f,g,v,y,b,w;return t=e.adminList.models,l=a.isMe(this),m=a.me(),h=x.some(t,function(e){return function(t){return t.id!==e.id}}(this)),d=t.length>1,p=e.memberList.length>1,b=e.getMembershipFor(this),f="admin"===e.getExplicitMemberType(this)||"admin"===(null!=b?b.memberType:void 0),v="observer"===e.getExplicitMemberType(this)||"observer"===(null!=b?b.memberType:void 0),g=!(f||v),y=e.isVirtual(this),c=e.owned(),w="org"!==e.getExplicitMemberType(this),r=c,i=!g&&h&&c,s=!v&&h&&c,o=!f&&c,u=p&&(h&&(c||l)||!l&&w&&("function"==typeof e.canInviteMembers?e.canInviteMembers():void 0)&&("function"==typeof e.compareMemberType?e.compareMemberType(m,this):void 0)>=0),n=u&&"Organization"===e.typeName&&c&&!e.isDeactivated(this)&&!y,{isMe:l,canRemove:u,canDeactivate:n,canChangeRole:r,memberIsAdmin:f,memberIsObserver:v,memberIsNormal:g,memberIsVirtual:y,canMakeMember:i,canMakeObserver:s,canMakeAdmin:o,isMoreThanOneAdmin:d,isMoreThanOneMember:p}},t.prototype.canAddBoardsTo=function(e){return null!=e.getMembershipFor(this)},t.prototype.isDismissed=function(e){var t;return T.call(null!=(t=this.get("oneTimeMessagesDismissed"))?t:[],e)>=0},t.prototype.dismiss=function(e,t){return this.addToSet("oneTimeMessagesDismissed",e,t)},t.prototype.dismissLanguageBannerFor=function(e,t){return this.dismiss("new-lang-"+e,t)},t.prototype.shouldShowNewLanguageBannerFor=function(e){return e=m.normalizeLocale(e),!this.isDismissed("new-lang-"+e)&&this.getLocale()!==e&&m.normalizeLocale(window.locale)!==e&&m.mostPreferred(m.preferred,[this.getLocale(),e])===e},t.prototype.owned=function(){return a.isMe(this)},t.prototype.prefNames=["minutesBetweenSummaries"],t.prototype.getLocale=function(){return this.getPref("locale")?m.normalizeLocale(this.getPref("locale")):"en"},t.prototype.getLocales=function(){return this.isLoggedIn()?[this.getLocale(),"en"]:m.preferred.map(m.normalizeLocale)},t.prototype.getMemberViewTitle=function(){var e,t,r;return t=this.get("username"),e=this.get("fullName"),r=e+" ("+t+")"},t.prototype.toggleColorBlindMode=function(){null!=this.get("prefs")&&(this.get("prefs").colorBlind?this.setPref("colorBlind",!1).save():this.setPref("colorBlind",!0).save(),o("body").toggleClass("body-color-blind-mode-enabled",this.get("prefs").colorBlind))},t.prototype.getOpenBoardsByOrg=function(e){var t,r,n,o,i,s,a,u,c,l,d,p,h;for(c={},l=this.boardList.models,n=0,a=l.length;a>n;n++)t=l[n],t.isOpen()&&(e&&"observer"===t.get("myPermLevel")||(r=t.toJSON(),o=null!=(d=r.idOrganization)?d:"",null==c[o]&&(c[o]={boards:[],displayName:""===o?S("member boards.boards"):null!=(p=this.modelCache.get("Organization",o))?p.get("displayName"):void 0}),c[o].boards.push(r)));for(i=x.sortBy(x.keys(c),function(e){return""===e?"":c[e].displayName}),h=[],s=0,u=i.length;u>s;s++)o=i[s],h.push(c[o]);return h},t.prototype.getSortedOrgs=function(){return x.clone(this.organizationList.models).sort(function(e,t){return e.get("displayName").localeCompare(t.get("displayName"))})},t.prototype.checkColorBlindMode=function(){var e;return o("body").toggleClass("body-color-blind-mode-enabled",(null!=(e=this.get("prefs"))?e.colorBlind:void 0)===!0)},t.prototype.isFeatureEnabled=function(e){return v.isFeatureEnabled(e,this.get("products"))},t.prototype.isGold=function(){return v.hasProduct(this.get("products"))},t.prototype.getBillingStrategy=function(e){return{flatRate:!0}},t.prototype.hasMemberAccount=function(){var e;return i.hasAccount(null!=(e=this.get("paidAccount"))?e.standing:void 0)},t.prototype.hasMemberOrOrgAccount=function(){return this.hasMemberAccount()||this.organizationList.any(function(e){return e.hasAccount()})},t.prototype.allCustomEmoji=function(){var e,t,r,n,o;if(e={},this.isFeatureEnabled("customEmoji"))for(o=this.customEmojiList.models,r=0,n=o.length;n>r;r++)t=o[r],e[t.get("name")]=t.get("url");return e},t.prototype.toJSON=function(e){var r,n;return null==e&&(e={}),r=t.__super__.toJSON.apply(this,arguments),e.hasPassword&&(r.hasPassword=T.call(r.loginTypes,"password")>=0),r.accountStanding=i.standingName(null!=(n=this.get("paidAccount"))?n.standing:void 0),r},t.prototype.editing=function(e){return null==e&&(e={}),x.isEqual(e,this.lastMessage)?void 0:(this.lastMessage=e,clearTimeout(this.clearLastTimeout),this.clearLastTimeout=this.setTimeout(function(e){return function(){return e.lastMessage=null}}(this),r/2),a.isLoggedIn()?s({url:this.urlRoot+"/"+this.id+"/editing",type:"post",background:!0,data:x.clone(e)}):void 0)},t.prototype.removeMembershipConfirmationKey=function(e){var t;return t="Organization"===e.typeName,a.isMe(this)?t?"leave org":"leave board":t?"remove member from org":e.isDeactivated(this)?"remove deactivated member from board":"remove member from board"},t.prototype.clearAllNotifications=function(){s({url:"/1/notifications/all/read",type:"post"})},t.prototype.getMobileTempPassword=function(e){s({url:"/1/members/me/loginToken",type:"post",data:{mode:"password"},success:function(t){return e(t.password)}})},t.prototype.maxFileSize=function(){return this.isFeatureEnabled("largeAttachments")?262144e3:10485760},t.prototype.canUploadAttachment=function(e){return e.size<this.maxFileSize()},t}(b)},{}],179:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(173),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t}(o)},{}],180:[function(e,t,r){var n,o,i,s,a,u,c,l=function(e,t){function r(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d={}.hasOwnProperty;n=e(25),o=e(5),s=e(173),a=e(109),u=e("underscore"),c=e("xtend"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.typeName="Notification",t.prototype.urlRoot="/1/notifications",t.sortedByDateDescending=function(e){return u.sortBy(e.all("Notification"),function(e){return-new Date(e.get("date")).getTime()})},t.unreadCount=function(e){return e.all("Notification").filter(function(e){return e.get("unread")}).length},t.prototype.getModel=function(){return this.collection.options.model},t.prototype.getBoard=function(){var e,t,r;return null!=(e=null!=(t=this.get("data"))&&null!=(r=t.board)?r.id:void 0)?this.modelCache.get("Board",e):null},t.prototype.getMember=function(){var e;return null!=(e=this.modelCache.get("Member",this.get("idMemberCreator")))?e.toJSON():void 0},t.prototype.triggerCacheEvents=function(e,t){var r,n,o,i;for(i=this.idModels(),r=0,o=i.length;o>r;r++)n=i[r],e.trigger(t+":"+this.typeName+":"+n)},t.prototype.idModels=function(){var e,t,r,n,o;r=null!=(t=this.get("data"))?t:{},n=[];for(e in r)o=r[e],null!=(null!=o?o.id:void 0)&&n.push(o.id);return n},t.prototype.isCommentLike=function(){var e;return"commentCard"===(e=this.get("type"))||"copyCommentCard"===e},t.prototype.isAddAttachment=function(){return"addAttachmentToCard"===this.get("type")},t.prototype.getExpandedData=function(){var e,t,r,n,o;return r=c(null!=(o=this.toJSON().data)?o:{},{date:this.get("date"),unread:this.get("unread")}),r[this.get("type")]=!0,e=r.board,t=r.card,n=r.organization,r},t.prototype.markRead=function(){return this.update({unread:!1})},t.prototype.navigateToView=function(){var e;return e=this.get("data"),null!=e&&null!=e.card&&null!=e.board?(o.displayBoard({idBoard:e.board.id,idCard:e.card.id}).done(),!0):"memberJoinedTrello"===this.get("type")?(document.location="/recommend",!0):!1},t.prototype.getUrlOfTarget=function(){var e;return e=this.get("data"),null!=e.card?o.getCardUrlWithoutModels(e.board.id,e.card.id,e.card.name):null!=e.board?o.getBoardUrl(e.board):null!=e.organization?o.getOrganizationUrl(e.organization.id):o.getMemberNotificationsUrl()},t}(s)},{}],181:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;n=e(174),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="OrganizationInvitation",t}(n)},{}],182:[function(e,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C=function(e,t){function r(){this.constructor=e}for(var n in t)x.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},x={}.hasOwnProperty;o=e(57),i=e(190),s=e(192),a=e(25),u=void 0,t(function(){return u=e(146)}),c=e(5),l=void 0,t(function(){return l=e(159)}),d=e(170),p=e(172),h=e(18),f=void 0,t(function(){return f=e(161)}),v=e(166),g=e(163),y=e(109),b=e("underscore"),w=e(89),_=e(38),k=e("xtend"),r.exports=m=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return C(t,e),w(d,t),t.prototype.typeName="Organization",t.prototype.nameAttr="displayName",t.prototype.urlRoot="/1/organizations",t.prototype.initialize=function(){return t.__super__.initialize.call(this),this.destruct([this.invitationList=new f([]),this.boardList=(new u).syncModel(this,"idBoards"),this.memberList=(new l).syncModel(this,"memberships",{fxGetIds:function(e){return b.pluck(e,"idMember")}}),this.adminList=(new l).syncModel(this,"memberships",{fxGetIds:function(e){return function(e){var t;return t=function(e){var t,r;return r=e.memberType,t=e.deactivated,"admin"===r&&!t},b.pluck(b.filter(e,t),"idMember")}}(this)}),this.tagList=(new v).syncSubModels(this,"tags"),this.pluginDataList=new g([],{scopeModel:this}).syncCache(this.modelCache,[],function(e){return function(t){return t.get("idModel")===e.id&&"organization"===t.get("scope")}}(this))])},t.prototype.prefNames=["permissionLevel","orgInviteRestrict","boardVisibilityRestrict","externalMembersDisabled"],t.prototype.editable=function(){var e,t;return e=a.me(),t=this.getMembershipFor(e),e&&"admin"===(null!=t?t.memberType:void 0)},t.prototype.isPremium=function(){return h.hasProduct(this.get("products"))},t.prototype.hasAccount=function(){var e;return o.hasAccount(null!=(e=this.get("paidAccount"))?e.standing:void 0)},t.prototype.isPremiumMonthly=function(){return this.isPremium()&&h.isMonthly(this.get("products"))},t.prototype.isPremiumYearly=function(){return this.isPremium()&&h.isYearly(this.get("products"))},t.prototype.isEnterprise=function(){return null!=this.get("idEnterprise")},t.prototype.paysWithPurchaseOrder=function(){var e;return"purchase-order@trello.com"===(null!=(e=this.get("paidAccount"))?e.contactEmail:void 0)},t.prototype.getBillingStrategy=function(e){return h.isPerUser(e)?{perUser:h.isPerActiveUser(e)?this.get("activeBillableMemberCount"):this.get("billableMemberCount")}:{flatRate:!0}},t.prototype.totalPerUserPrice=function(e){var t;return t=this.getBillingStrategy(e),null!=t.perUser?t.perUser*h.getPrice(e):void 0},t.prototype.needsBCUpgrade=function(){return 0===b.intersection([h.getProductNumber(h.currentProducts.monthly),h.getProductNumber(h.currentProducts.yearly)],this.get("products")).length},t.prototype.isMember=function(e){var t;return"virtual"===(t=this.getMemberType(e))||"normal"===t||"admin"===t},t.prototype.ownedByMember=function(e){return"admin"===this.getMemberType(e)},t.prototype.canAddBoard=function(e){var t;return this.isFeatureEnabled("restrictVis")?(t=e.get("prefs").permissionLevel,this.canSetVisibility(t)):!0},t.prototype.canSetVisibility=function(e){var t;return this.isFeatureEnabled("restrictVis")?(t=this.get("prefs").boardVisibilityRestrict[e],!t||"org"===t||"admin"===t&&this.owned()):!0},t.prototype.owned=function(){return"admin"===this.getMemberType(a.me())},t.prototype.isLinkedToGoogleApps=function(){return this.isFeatureEnabled("googleApps")&&this.get("prefs").associatedDomain},t.prototype.isFeatureEnabled=function(e){return h.isFeatureEnabled(e,this.get("products"))},t.prototype.snoopIsFeatureEnabled=function(e){return this.snoop("products").map(function(t){return function(){return t.isFeatureEnabled(e)}}(this)).distinct()},t.prototype.toJSON=function(e){var r,n;return null==e&&(e={}),r=t.__super__.toJSON.apply(this,arguments),e.url&&(r.url=c.getOrganizationUrl(this.get("name"))),r.accountStanding=o.standingName(null!=(n=this.get("paidAccount"))?n.standing:void 0),r},t.prototype.getPermLevel=function(){return this.get("prefs").permissionLevel},t.prototype.getAvailableRoles=function(){return this.isFeatureEnabled("superAdmins")?["superadmin","normal"]:["admin","normal"]},t.prototype.hasObservers=function(){return!1},t.prototype.setPluginData=function(e,t,r){return this.pluginDataList.upsert(e,t,r)},t.prototype.getPluginData=function(e){return this.pluginDataList.dataForPlugin(e)},t.prototype.snoopPluginData=function(e){return this.pluginDataList.snoopDataForPlugin(e)},t.prototype.invitationUrl=function(e){return c.getOrganizationInvitionLinkUrl(e)},t.prototype.externalMembersDisabled=function(){return this.isFeatureEnabled("disableExternalMembers")&&this.getPref("externalMembersDisabled")},t.prototype.reactivateMember=function(e){i({url:"/1/organizations/"+this.id+"/members/"+e.id+"/deactivated",type:"PUT",data:{value:!1}}),this.setOnMembership(e,{deactivated:!1})},t.prototype.deactivateMember=function(e){i({url:"/1/organizations/"+this.id+"/members/"+e.id+"/deactivated",type:"PUT",data:{value:!0},success:function(){return _("Organization","Deactivate Member From Organization")}}),this.setOnMembership(e,{deactivated:!0})},t.prototype.getGoogleAppsMappings=function(){return s({url:"/1/organizations/"+this.id+"/googleApps/mappings"})},t}(p)},{}],183:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(173),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="PluginData",t.prototype.urlRoot=function(){return"/1/"+this.get("scope")+"/"+this.get("idModel")+"/pluginData"},t}(o)},{}],184:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(173),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="Plugin",t}(o)},{}],185:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(173),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="SavedSearch",t}(o)},{}],186:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(173),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="Sticker",t}(o)},{}],187:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(173),i=e("underscore"),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.typeName="Tag",t.prototype.urlRoot=function(){return this.getOrganization().url()+"/tags"},t.prototype.getOrganization=function(){return this.collection.sourceModel},t}(o)},{}],188:[function(e,t,r){var n,o,i,s,a;i=e("bluebird"),s=e(62),o=e(193),n=e("jquery"),a=e("xtend"),t.exports=function(e){return s(!("success"in e||"error"in e),"This is promise country!"),new i(function(t,r){return n.ajax(a(e,{success:function(e){return t(e)},error:function(e){return r(o.fromResponse(e.status,e.responseText))}}))})}},{}],189:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h=[].slice;n=e("jquery"),i=e(451),s=e(25),a=e(31),u=e(109),c=e("underscore"),d=e(35),p=e(438),l=e(84),t.exports=o=new(function(){function e(){this._msBackoff=100,this._msBackoffMin=100,this._nTriesLeft=12,this._nTriesMax=12,this._retrying=!1,this._stopped=!1,this._maxLength=10,this._queue=[],this._queueIdSeq=0}return e.prototype.uniqueReqId=function(){var e;return(null!=(e=s.me())?e.id:void 0)+"-"+Math.random()},e.prototype.hasQueue=function(){return this._queue.length>0},e.prototype.inQueue=function(e){return c.find(this._queue,function(t){return t.queueId===e.queueId})},e.prototype.removeFromQueue=function(e){return this._queue=c.filter(this._queue,function(t){return t.queueId!==e.queueId})},e.prototype.addToQueue=function(e){return d("AjaxQueue","addToQueue",e),this._queue.length+1>this._maxLength?void d("AjaxQueue","maxLength exceeded"):(this._queue.push(e),this.showRetrying())},e.prototype.success=function(e){return d("AjaxQueue","success",e),this.inQueue(e)?(this.removeFromQueue(e),this._retrying=!1,this._msBackoff=this._msBackoffMin,this._nTriesLeft=this._nTriesMax,this.retryNext()):void 0},e.prototype.retryableError=function(e){return d("AjaxQueue","retryableError",e),o.inQueue(e)?this._retrying=!1:o.addToQueue(e),this.retryNext()},e.prototype.serverAlreadySaw=function(e){return this.inQueue(e)?(this.removeFromQueue(e),this.retryNext()):void 0},e.prototype.retryNext=function(){var e;if(!this._stopped){if(!this.hasQueue())return void this.hideRetrying();if(this.showRetrying(),!this._retrying)return this._retrying=!0,e=this._queue[0],this._nTriesLeft>0?(d("AjaxQueue","retrying in "+this._msBackoff+"ms",e),setTimeout(function(){return n.ajax(e)},this._msBackoff),this._msBackoff*=2,--this._nTriesLeft):(this._stopped=!0,this.showOutOfRetries())}},e.prototype.showRealError=function(e,t,r){var n;return d("AjaxQueue","showRealError",r),this.hideRetrying(),n=l("alerts.changes not saved"),i.showHtml(p.fill("connect_failed",{msg:n}),"error","AjaxQueueFail")},e.prototype.showOutOfRetries=function(){var e;return d("AjaxQueue","showOutOfRetries"),this.hideRetrying(),e=l("alerts.timed out"),i.showHtml(p.fill("connect_failed",{msg:e}),"error","AjaxQueueFail")},e.prototype.showRetrying=function(){var e;return e=this._queue.length,i.show("retrying","error","AjaxQueueRetry")},e.prototype.hideRetrying=function(){return i.hide("AjaxQueueRetry")},e.prototype.showSending=function(){return i.show("sending","warning","AjaxQueueSending")},e.prototype.hideSending=function(){return i.hide("AjaxQueueSending")},e.prototype.showUploading=function(e){return i.show(e,"info","AjaxQueueUpload")},e.prototype.hideUploading=function(){return i.hide("AjaxQueueUpload")},e.prototype.ajax=function(e){var t,r,n,i,s,a;a=c.clone(e),this._stopped||(null==a.timeout&&(a.timeout=2e4),null==a.showSendingAfter&&(a.showSendingAfter=3e3),a.queueId=this._queueIdSeq++,a.headers={"X-Trello-ReqId":this.uniqueReqId()},a.oldSuccess=a.success,a.oldError=a.error,a.ourComplete=a.complete,delete a.complete,s=a.modelCache,delete a.modelCache,t=!1,n=!1,i=null!=s?s.lock("AjaxQueue.ajax"):void 0,a.success=function(){var e;return e=1<=arguments.length?h.call(arguments,0):[],o.hideSending(),o.hideUploading(),t=!0,o.success(this),"function"==typeof this.oldSuccess&&this.oldSuccess.apply(this,e),"function"==typeof this.ourComplete&&this.ourComplete(),
null!=s?s.unlock(i):void 0},a.error=function(){var e,r,n,a,u,l;return e=1<=arguments.length?h.call(arguments,0):[],o.hideSending(),o.hideUploading(),t=!0,l=e[0],u=e[1],n=e[2],0===(a=l.status)||408===a||500===a?o.retryableError(this):(r=function(){return o._stopped=!0,o.showRealError.apply(o,e)},c.isFunction(this.oldError)?this.oldError.apply(this,h.call(e).concat([r])):r(),"function"==typeof this.ourComplete&&this.ourComplete(),null!=s?s.unlock(i):void 0)},/^post$/i.test(a.type)&&(r=function(e){return e.lengthComputable&&e.total>65536},a.xhr=function(e){return function(){var t,o;return o=new XMLHttpRequest,t=o.upload,null!=t&&(t.addEventListener("progress",function(t){var o;if(r(t))return n=!0,o=Math.round(100*t.loaded/t.total).toString()+"%",e.showUploading(["uploading",{percentString:o}])}),t.addEventListener("load",function(t){return n?e.showUploading("processing upload"):void 0})),o}}(this)),this.hasQueue()?o.addToQueue(a):(a.showSendingAfter>=0&&setTimeout(function(e){return function(){return t||n?void 0:o.showSending()}}(this),a.showSendingAfter),this.send(a)))},e.prototype.send=function(e){return n.ajax(e)},e}())},{}],190:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m=[].slice;n=e(189),o=e(25),i=e(5),u=e(109),s=e("bluebird"),a=e("promise-queue"),c=e(209),h=e("xtend"),p=new a(3),l=function(e){var t,r;return(null!=(t=null!=(r=e.type)?r:e.method)?t:"GET").toUpperCase()},d=function(e){var t;return null==e.data&&(e.data={}),"GET"!==l(e)&&(e.data.token=o.myToken()),null==(t=e.data).invitationTokens&&(t.invitationTokens=u.invitationTokens().join(",")),e.background?void n.send(e):(null==e.modelCache&&(e.modelCache=i.getCurrentModelCache()),void n.ajax(e))},t.exports=function(e,t){return p.add(function(){var t,r,n,o;return o=null!=(r=e.success)?r:function(){},t=null!=(n=e.error)?n:function(){},new s(function(r,n){e=h(e,{success:function(){var e;e=1<=arguments.length?m.call(arguments,0):[],o.apply(null,e),r(e)},error:function(){var e;e=1<=arguments.length?m.call(arguments,0):[],t.apply(null,e),n(e)}}),d(e)})}).nodeify(t).catch(function(){}).done()}},{}],191:[function(e,t,r){var n,o,i,s;i=e(85),o=e(62),s=e("xtend"),n=i("API",["Unauthorized","Unauthenticated","Unconfirmed","Timeout","NoResponse","NotFound","Server","BadRequest","Conflict","Other"]),n.fromResponse=function(e,t){var r;switch(null!=t?r=t.toLowerCase().trim():o(0===e,"Received a response without any content!"),e){case 0:return n.NoResponse();case 400:switch(r){case"invalid token":return n.Unauthenticated();default:return n.BadRequest(t)}break;case 401:switch(r){case"invalid token":return n.Unauthenticated();case"unauthorized permission requested":case"unauthorized organization.":case"unauthorized card permission requested":return n.Unauthorized(t);case"confirm to view":return n.Unconfirmed()}break;case 403:switch(r){case"user not logged in or invalid token.":return n.Unauthenticated();default:return n.Unauthorized(t)}break;case 404:return n.NotFound(t);case 408:return n.Timeout(t);case 409:return n.Conflict(t)}return e>=500&&600>e?n.Server(t):n.Other(e+": "+t)},t.exports=n},{}],192:[function(e,t,r){var n,o,i,s,a,u;n=e(190),i=e("bluebird"),u=e(209),s=e("underscore"),a=e(62),o=e(191),t.exports=function(e){return a(!("success"in e||"error"in e),"This is promise country!"),i.fromNode(u(n,e)).catch(function(e){var t;return t=e[0],i.reject(o.fromResponse(t.status,t.responseText))}).get(0)}},{}],193:[function(e,t,r){var n,o,i,s;i=e(85),o=e(62),s=e("xtend"),n=i("Http",["NoResponse","BadRequest","Unauthorized","Forbidden","NotFound","Timeout","Conflict","Precondition","Server","Other"]),n.fromResponse=function(e,t){switch(o(t||0===e,"Received a response without any content!"),e>=500&&600>e&&n.Server(t),e){case 0:return n.NoResponse();case 400:return n.BadRequest(t);case 401:return n.Unauthorized(t);case 403:return n.Forbidden(t);case 404:return n.NotFound(t);case 408:return n.Timeout(t);case 409:return n.Conflict(t);case 412:return n.Precondition(t);default:return n.Other(e+": "+t)}},t.exports=n},{}],194:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h;u=e("underscore"),d=e(85),p=e(228),s=e(224),a=e("bluebird"),h=e("xtend"),i=1e4,o=d("IFrameIO",["NotHandled","Timeout"]),l=null,c=function(){var e,t;if(null==l){if(t="iframe-io-host",l=document.createElement("div"),l.id=t,e=document.getElementsByTagName("body")[0],!e)throw Error("no body to host iframes");e.appendChild(l)}return l},t.exports=n=function(){function e(e,t){this.url=e,this.handlers=t}return e.Error=o,e.prototype._getIO=function(){return null!=this._io?this._io:this._io=new a(function(e){return function(t){var r,n,o;return r=document.createElement("iframe"),r.src=e.url,c().appendChild(r),o=s.randomId(64),n=new s({local:window,remote:r.contentWindow,targetOrigin:p(e.url).set("pathname","").href,secret:o,handlers:h(e.handlers,{initialize:function(){return{secret:o}},ready:function(){return t(n)}})})}}(this)).timeout(i).catch(a.TimeoutError,function(){throw o.Timeout("unable to initialize iframe-io in "+i+"ms")})},e.prototype.request=function(e,t,r){return this._getIO().then(function(n){return n.request(e,t).timeout(r).catch(a.TimeoutError,function(){throw o.Timeout(e+" did not complete in "+r+"ms")})}).catch(s.NotHandled,s.UnsupportedCommand,function(t){throw o.NotHandled("Request to run '"+e+"' failed due to error: '"+t.message+"'")})},e}()},{}],195:[function(e,t,r){var n,o,i=[].slice;n=e(25),o=e("underscore"),t.exports=function(e){var t,r,s;t=new FormData,t.append("token",n.myToken());for(r in e)s=e[r],o.isArray(s)?t.append.apply(t,[r].concat(i.call(s))):t.append(r,s);return{data:t,contentType:!1,processData:!1,timeout:216e5}}},{}],196:[function(e,t,r){var n,o,i,s,a,u,c,l,d=[].slice;n=e(192),o=e(17),s=e(182),i=e(18),u=e("bluebird"),c=function(e,t){return e instanceof s?i.getProductNumber(t):o.getProductNumber(t)},l=function(){var e,t;return e=arguments[0],t=2<=arguments.length?d.call(arguments,1):[],[e.urlRoot,e.id,"paidAccount"].concat(d.call(t)).join("/")},a=t.exports={changeProduct:function(e,t){var r;return r=c(e,t),n({url:l(e,"products"),type:"POST",data:{products:[r]}})},cancel:function(e){return n({url:l(e,"cancel"),type:"POST"})},renew:function(e){return a.changeProduct(e,e.get("paidAccount").products[0])},reactivate:function(e,t){var r;return r=c(e,t),n({url:l(e,"reactivate"),type:"POST",data:{products:[r]}})},createAccount:function(e,t){return n({url:l(e),data:t,type:"POST"})},changeCreditCard:function(e,t){return n({url:l(e,"creditCard"),data:t,type:"POST"})}}},{}],197:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p;a=e(209),p=e(125),i=e("underscore"),o=e(198),t.exports=n={};for(u in o)if(d=o[u],i.isObject(d))n[u]={query:d};else{if(!i.isString(d))throw new Error("Implicit coupling fell over");n[u]=d}l=function(e,t){var r;return r=i.pluck(e,"id"),t.set("idBoards",r)},n.organizationBoardsPage.mappingRules={boards:l},s=function(e,t){var r,n,o;return r=null!=(o=t.get("attachments"))?o:[],n=p(a.get("id"),r,e),t.set("attachments",n)},n.currentBoardMinimal.mappingRules={attachments:s},n.memberActions=[n.boardActions,"updateMember"].join(","),n.boardFieldsUnread=["dateLastActivity","dateLastView"],n.boardFieldsMinimalMemberships=["name","closed","memberships"].join(","),n.organizationFieldsMinimalMemberships=[n.organizationFieldsMinimal,"memberships"],n.organizationFieldsMembersPage=[n.organizationBoardsFields,"memberships"].join(","),c=function(e,t){var r,n,o;return r=null!=(o=t.get("memberships"))?o:[],n=p(a.get("id"),r,e),t.set("memberships",n)},n.boardMinimal={query:{fields:n.boardFieldsMinimal,organization:!0,organization_fields:n.organizationFieldsMinimal,myPermLevel:!0,memberships:"me"},mappingRules:{memberships:c}},n.boardsMenuMinimal={query:{boards:"open,starred",board_fields:n.boardFieldsMinimal,boardStars:!0,organizations:"all",organization_fields:n.organizationFieldsMinimal,board_organization:!0,board_organization_fields:n.organizationFieldsMinimal,board_myPermLevel:!0,board_memberships:"me"},mappingRules:{memberships:c}},n.boardsMenu={query:{fields:"",board_fields:n.boardFieldsMinimal,organizations:"all",organization_fields:n.organizationFieldsMinimal,board_organization:!0,board_organization_fields:n.organizationFieldsMinimal,paid_account:!0}},n.memberUnreadBoards={query:{fields:"",boards:"open,starred",board_fields:n.boardFieldsUnread}},n.boardUnread={query:{fields:n.boardFieldsUnread}},n.cardDetails={query:{actions:n.cardActions,actions_display:!0,action_memberCreator_fields:n.memberFieldsAndPremOrgsAdmin,members:!0,member_fields:n.memberFieldsStatus,attachments:!0,fields:"email",checklists:"all",list:!0}},n.cardMinimal={query:{fields:n.cardFieldsBulk}},n.cardVoters={query:{fields:"idMembersVoted",membersVoted:!0}},n.cardCopy={query:{members:!0,member_fields:n.memberFieldsStatus,attachments:!0,stickers:!0,fields:"name",checklists:"all"}},n.cardList={query:{fields:"all"}},n.memberAccount={query:{tokens:"all",sessions:"all",credentials:"all",paid_account:!0,credits:"invitation,promoCode",organizations:"all",organization_paid_account:!0,logins:!0}},n.memberPaidAccount={query:{paid_account:!0}},n.orgMemberCards={query:{board:!0,list:!0,fields:"badges,closed,due,idAttachmentCover,idList,idBoard,idMembers,idShort,labels,name,url",attachments:"true",members:"true",stickers:"all",member_fields:n.memberFields}},n.memberCards={query:{boards:"open",board_fields:"name,closed,idOrganization,prefs",board_lists:"open",board_memberships:"me",cards:"visible",card_fields:[n.cardFieldsBulk,"labels"].join(","),card_attachments:"true",card_stickers:!0,card_members:"true",card_member_fields:n.memberFields,organizations:"all",organization_fields:"displayName,name,prefs,products",organization_memberships:"me",organization_paid_account:!0,paid_account:!0},mappingRules:{memberships:c}},n.memberMinimal={query:{fields:n.memberFields}},n.memberProfile={query:{actions:"all",actions_limit:10,actions_display:!0,organizations:"all",organization_fields:n.organizationFieldsMinimal,organization_paid_account:!0,boards:"open",board_fields:"name,prefs,idOrganization",paid_account:!0}},n.memberProfile_daysBack=30,n.organization={query:{boards:"open",board_fields:n.boardFieldsMinimal,fields:"all",members:"all",member_fields:n.memberFieldsStatus,membersInvited:"all",membersInvited_fields:n.memberFields,paid_account:!0},mappingRules:{boards:l}},n.organizationExports={query:{exports:!0,fields:"all",paid_account:!0}},n.organizationPaidAccount={query:{paid_account:!0}},n.organizationMembers={query:{fields:n.organizationFieldsMembersPage,members:"all",member_fields:n.memberFieldsStatus,membersInvited:"all",membersInvited_fields:n.memberFields,paid_account:!0}},n.organizationMembersExtra={query:{members:"all",member_activity:!0,boards:"open",board_fields:n.boardFieldsMinimalMemberships},mappingRules:{boards:l}},n.organizationMembersMinimal={query:{members:"all",fields:n.organizationFieldsMinimalMemberships}},n.organizationMinimal={query:{fields:"all"}},n.memberNotifications={query:{notifications:"all",notifications_limit:10,notifications_display:!0}},n.organizations={query:{organizations:"all",organization_paid_account:!0}},n.idCard={query:{fields:"",checkItemStates:!1}},n.cardsAndListsMinimal={query:{lists:"open",list_fields:"name,pos,idBoard,closed",cards:"visible",card_fields:"idList,idBoard,pos,closed"}},n.listsMinimal={query:{lists:"open",list_fields:"name,pos,idBoard,closed"}},n.listMinimal={query:{fields:"name,pos,idBoard,closed"}},n.archivedLists={query:{lists:"closed",list_fields:"name,pos,idBoard,closed"}},n.action={query:{display:!0,memberCreator:!0}}},{}],198:[function(e,t,r){var n;t.exports=n={},n.boardFieldsMinimal=["name","closed","dateLastActivity","dateLastView","idOrganization","prefs","shortLink","shortUrl","url"].join(","),n.boardFieldsFull=[n.boardFieldsMinimal,"desc","descData","invitations","invited","labelNames","memberships","pinned","powerUps","subscribed"].join(","),n.boardFieldsMinimalSubscribed=[n.boardFieldsMinimal,"subscribed"].join(","),n.memberFields=["fullName","initials","memberType","username","avatarHash","bio","bioData","confirmed","products","url"].join(","),n.memberFieldsStatus=[n.memberFields,"status"].join(","),n.memberFieldsAndPremOrgsAdmin=[n.memberFields,"idPremOrgsAdmin"].join(","),n.organizationFieldsMinimal=["name","displayName","products","prefs","logoHash","idEnterprise"].join(","),n.cardFieldsBulk=["badges","closed","dateLastActivity","desc","descData","due","idAttachmentCover","idList","idBoard","idMembers","idShort","idLabels","name","pos","shortUrl","shortLink","subscribed","url"].join(","),n.boardFieldsInOrganization=[n.boardFieldsMinimal,"idTags"].join(","),n.organizationBoardsFields=[n.organizationFieldsMinimal,"desc","descData","website"].join(","),n.cardActions=["addAttachmentToCard","addChecklistToCard","addMemberToCard","commentCard","copyCommentCard","convertToCardFromCheckItem","createCard","copyCard","deleteAttachmentFromCard","emailCard","moveCardFromBoard","moveCardToBoard","removeChecklistFromCard","removeMemberFromCard","updateCard:idList","updateCard:closed","updateCard:due","updateCheckItemStateOnCard"].join(","),n.boardActions=[n.cardActions,"addMemberToBoard","addToOrganizationBoard","copyBoard","createBoard","createList","deleteCard","disablePlugin","disablePowerUp","enablePlugin","enablePowerUp","makeAdminOfBoard","makeNormalMemberOfBoard","makeObserverOfBoard","moveListFromBoard","moveListToBoard","removeFromOrganizationBoard","unconfirmedBoardInvitation","unconfirmedOrganizationInvitation","updateBoard","updateList:closed"].join(","),n.card={fields:"all",stickers:!0,attachments:!0},n.currentBoardMinimal={lists:"open",cards:"visible",card_attachments:"cover",card_stickers:!0,card_fields:[n.cardFieldsBulk,"labels"].join(","),card_checklists:"none",members:"all",member_fields:n.memberFieldsStatus,membersInvited:"all",membersInvited_fields:n.memberFields,memberships_orgMemberType:!0,checklists:"none",organization:!0,organization_fields:"name,displayName,desc,descData,url,website,prefs,memberships,logoHash,products",myPrefs:!0,fields:n.boardFieldsFull},n.currentBoardSecondary={fields:"",actions:n.boardActions,actions_display:!0,actions_limit:50,action_memberCreator_fields:n.memberFieldsAndPremOrgsAdmin,checklists:"none",cards:"visible",card_fields:"",card_checklists:"all",card_checklist_checkItems:"none",labels:"all",labels_limit:1e3},n.currentBoardPluginData={fields:"",boardPlugins:!0,cards:"visible",card_fields:"",card_attachments:!0,pluginData:!0,card_pluginData:!0,organization:!0,organization_fields:"",organization_pluginData:!0},n.memberBoards={boards:"open,starred",board_fields:n.boardFieldsMinimalSubscribed,boardStars:!0,boardsInvited:"all",boardsInvited_fields:n.boardFieldsMinimalSubscribed,board_organization:!0,board_organization_fields:n.organizationFieldsMinimal,credits:"invitation,promoCode",organizations:"all",organization_fields:n.organizationFieldsMinimal,organizationsInvited:"all",organizationsInvited_fields:n.organizationFieldsMinimal,paid_account:!0},n.memberHeader={channels:!0,notifications:"all",notifications_limit:10,notifications_display:!0,notification_memberCreator_fields:n.memberFields,organizations:"all",organization_paid_account:!0,organization_fields:"name,displayName",paid_account:!0,savedSearches:!0},n.organizationBoardsPage={boards:"open",board_fields:n.boardFieldsInOrganization,board_starCounts:"organization",board_membershipCounts:"active",fields:n.organizationBoardsFields,paid_account:!0,memberships:"active",members:"all",tags:!0},n.memberQuickBoards={fields:"idOrganizations",boards:"open,starred",board_fields:n.boardFieldsMinimal,boardStars:!0,organizations:"all",organization_fields:"idBoards"},n.quickBoardsSearch=function(e){return{query:e,modelTypes:"boards",board_fields:n.boardFieldsMinimal,partial:!0}}},{}],199:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=[].slice;o=e(191),i=e(25),s=e(205),a=e(200),u=e(31),c=e(5),l=e(90),d=e("bluebird"),h=e("underscore"),f=e(35),m=e(209),g=e(85),p=g("RPC",["SyncError","BatchError"]),v=function(e){try{return JSON.parse(e)}catch(e){return null}},t.exports=n=function(){function e(e){for(this.delegate=e,this.idBoardToPoll=null,this.modelIxUpdate={},this.msPoll=2e3,this.msPollIdle=1e4,this.ajaxSessionId=Math.random().toString().substring(2);this.ajaxSessionId.length<16;)this.ajaxSessionId+="0";this.failures=0,this.failuresAllowed=1e3}return h.extend(e.prototype,s.Events),e.prototype.subscribe=function(e,t,r,n){return"function"==typeof n?n():void 0},e.prototype.unsubscribe=function(e,t,r){return"function"==typeof r?r():void 0},e.prototype.resync=function(){},e.prototype._getPollLength=function(){return i.isLoggedIn()&&"active"===l.getStatus()?this.msPoll:this.msPollIdle},e.prototype.stopPolling=function(){return null!=this._pollingTimeout?(clearTimeout(this._pollingTimeout),delete this._pollingTimeout):void 0},e.prototype.poll=function(){return this._pollingTimeout=setTimeout(function(e){return function(){return e.failures>=e.failuresAllowed?void e.trigger("connect_failed"):e.doPoll(function(t){if(null!=t){if("syncError"===t)return;e.trigger("connecting"),++e.failures}else e.failures>0&&e.trigger("reconnect"),e.failures=0;return e.poll()})}}(this),this._getPollLength())},e.prototype.doPoll=function(){var e,t,r,n,o,i,s,a,u,c,l;if(e=2<=arguments.length?y.call(arguments,0,t=arguments.length-1):(t=0,[]),a=arguments[t++],n=e[0],s=e[1],l=[],null==s&&(s=this),h.isArray(n))for(o=0,i=n.length;i>o;o++)r=n[o],l.push(this.delegate.currentSubscriptions[r]);else{if(null!=n)return void f("rpc","Bad argument to doPoll: "+n);u=this.delegate.currentSubscriptions;for(r in u)c=u[r],l.push(c)}return h.isEmpty(l)?(f("rpc","No models to poll for "+n),"function"==typeof a?a():void 0):this._doPoll(l,s,a)},e.prototype._doPoll=function(e,t,r){var n,i;return i=new a,n=e.map(function(e){return function(r){var n,s,a,u,c;return a=r.modelType,n=r.idModel,s=r.ixLastUpdate,u=r.tags,c="/"+a+"/"+n+"/deltas?ixLastUpdate="+encodeURIComponent(s.toString())+"&tags="+encodeURIComponent(u.join(",")),i.request(c).tap(function(r){var o;return null!=r.syncError?d.reject(p.SyncError()):(e.delegate.setIxLastUpdate(n,r.modelIxUpdate[n]),void h.chain(null!=(o=r.messages)?o:[]).map(v).compact().forEach(function(e){var r,n;n=e.notify,r=e.idModelChannel,t.trigger(n.event,h.extend({idModelChannel:r},n))}))}).catch(o,function(){})}}(this)),d.all(n).catch(p.SyncError,function(e){return function(){return c.syncError(),e.stopPolling()}}(this)).catch(a.BatchFailure,function(){}).done(),i.send().tap(function(e){var t;return t=e.jqxhr,u.setServerVersionFromResponse(t)}).catch(a.BatchFailure,function(e){var t,r;return r=e.message,t=e.error,d.reject(p.BatchError(r,{error:t}))}).nodeify(r).done()},e}()},{}],200:[function(e,t,r){var n,o,i,s,a,u,c,l;n=e("jquery"),o=e(191),c=e(217),l=e(209),u=e(62),s=e("bluebird"),a=e("underscore"),t.exports=i=function(){function e(){this._requests=[]}return e.BatchFailure=c("Batcher::BatchFailure"),e.prototype._sent=!1,e.prototype.request=function(e){return u(!this._sent,"Cannot add requests to a batcher after sending!"),new s(function(t){return function(r,n){return t._requests.push({url:e,resolve:r,reject:n})}}(this))},e.prototype.send=function(){var t;return u(!this._sent,"Cannot send more than once!"),this._sent=!0,t=this._requests.map(l.get("url")).join(","),new s(function(r){return function(i,s){return n.ajax({data:{urls:t},url:"/1/batch",success:function(e,t,n){var s,u,c,l,d,p,h,m;for(c=a.zip(e,r._requests),s=0,u=c.length;u>s;s++)l=c[s],m=l[0],d=l[1],h=d.resolve,p=d.reject,"200"in m?h(m[200]):p(o.fromResponse(m.statusCode,m.message));return i({jqxhr:n})},error:function(t){var n,i,a,u,c,l,d;for(d=t.status,l=t.responseText,n=o.fromResponse(d,l),u=r._requests,i=0,a=u.length;a>i;i++)(c=u[i].reject)(e.BatchFailure("",{error:n}));return s(n)}})}}(this))},e}()},{}],201:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h=[].slice;n=e(199),o=e(25),i=e(205),a=e(204),u=e(202),c=e(97),l=e("underscore"),d=e(35),p=e(38),window.dropTheHammer=function(){return c.set("useWebsockets","yes"),"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log("Websockets engaged! Reload the page, please. Use pitStop() to turn sockets off."):void 0},window.pitStop=function(){return c.set("useWebsockets","no"),"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log("Shutting Websockets down! Reload the page, please. Use dropTheHammer() to turn sockets back on."):void 0},s=function(){function e(){this.rpcSocket=this.rpcAJAX=this.rpcCurrent=null,this.currentSubscriptions={},this.fReadyToSubscribe=!1,this.deferredQueue=[],this.handleLogin()}return l.extend(e.prototype,i.Events),e.prototype.rpcReady=function(){var e,t,r,n;for(this.fReadyToSubscribe=!0,this.isUsingSocket()||this.rpcCurrent.poll(),this.trigger("ready"),n=this.deferredQueue,t=0,r=n.length;r>t;t++)(e=n[t])();return this.listenTo(this,"reconnect",function(e){return function(){return e.resubscribe()}}(this))},e.prototype.resubscribe=function(){var e,t,r,n;this.rpcCurrent.resync(),t=this.currentSubscriptions,r=[];for(e in t)n=t[e],r.push(this.subscribe(n.modelType,e,n.tags));return r},e.prototype.setActiveRPC=function(e){this.stopListening(this.rpcCurrent),this.rpcCurrent=e,this.listenTo(this.rpcCurrent,"all",function(e){return function(){var t;return t=1<=arguments.length?h.call(arguments,0):[],e.trigger.apply(e,t)}}(this))},e.prototype.lazyCreateRPC=function(){var e,t,r;if(!this.rpcCurrent){if(this.rpcSocket=new u(this),this.rpcAJAX=new n(this),this.setActiveRPC(this.rpcAJAX),e=function(){return null!=("undefined"!=typeof performance&&null!==performance?performance.now:void 0)?performance.now():+new Date},this.rpcSocket.hasSocketTransport()){if(this.rpcSocket.connectedOnce)return;return r=e(),t=8e3,setTimeout(function(e){return function(){return e.fReadyToSubscribe?void 0:(d("rpc","Socket not responsive. Using AJAX."),e.rpcSocket.disconnect(),e.rpcReady())}}(this),t),this.rpcSocket.ping(function(t){return function(n,o){t.fReadyToSubscribe?(t.rpcSocket.disconnect(),p("RPC","No Sockets","Slow ping",e()-r)):(d("rpc","Socket responded to ping in a timely fashion. Using sockets."),t.setActiveRPC(t.rpcSocket),t.rpcReady())}}(this))}return d("rpc","No socket connect. Using AJAX."),this.rpcReady()}},e.prototype.handleLogin=function(){return o.isLoggedIn()?this.lazyCreateRPC():void 0},e.prototype.unsubscribe=function(e,t){return this.lazyCreateRPC(),this.rpcCurrent.unsubscribe(e,t),delete this.currentSubscriptions[t]},e.prototype.subscribe=function(e,t,r){var n;return this.lazyCreateRPC(),null!=(n=this.currentSubscriptions[t])?n[r]=l.union(n[r],r):this.currentSubscriptions[t]={tags:r,ixLastUpdate:-1,modelType:e,idModel:t},this.fReadyToSubscribe?this.rpcCurrent.subscribe(e,t,r):(d("rpc","deferring subscribe to "+e+" "+t),void this.deferredQueue.push(function(n){return function(){return n.rpcCurrent.subscribe(e,t,r)}}(this)))},e.prototype.getIxLastUpdate=function(e){var t;return null!=(t=this.currentSubscriptions[e])?t.ixLastUpdate:void 0},e.prototype.setIxLastUpdate=function(e,t){var r;return null!=(r=this.currentSubscriptions[e])?r.ixLastUpdate=t:void 0},e.prototype.resync=function(){var e,t;return t=1<=arguments.length?h.call(arguments,0):[],this.lazyCreateRPC(),"function"==typeof(e=this.rpcCurrent).resync?e.resync.apply(e,t):void 0},e.prototype.isUsingSocket=function(){return null!=this.rpcCurrent&&this.rpcCurrent===this.rpcSocket},e}(),t.exports=window.rpc=new s},{}],202:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m=[].slice;n=e(25),o=e(205),i=e(31),s=e(90),a=e(204),c=e(97),l=e(109),d=e("underscore"),p=e(35),h=e(38),t.exports=u=function(){function e(e){var t,r,o,i,u,d,m,f,g,v;if(this.delegate=e,this.reqid=0,this.dictCallback={},this.dictTime={},this.connectedOnce=!1,this.modelIxUpdate={},this.hasSockets="WebSocket"in window&&"no"!==c.get("useWebsockets"),"WebSocket"in window?"no"===c.get("useWebsockets")&&h("RPC","No Sockets","pitStop"):h("RPC","No Sockets","No WebSocket"),this.hasSockets){for(p("rpc","opening newSocket"),m="http:"===document.location.protocol?"ws:":"wss:",this.socket=new a(m+"//"+document.location.host+"/1/Session/socket?token="+n.myToken(),{maxReconnectDelay:64e3,maxReconnectAttempts:50,fxReconnectDelay:function(e){var t,r,n,o;if(o=s.getStatus(),n="active"===o?l.randomWait(l.getMs({seconds:10}),l.getMs({seconds:30})):l.randomWait(l.getMs({seconds:30}),l.getMs({minutes:2})),t="active"===o?l.randomWait(100,l.getMs({seconds:1})):l.randomWait(l.getMs({seconds:2}),l.getMs({seconds:10})),null==e||1006===e.code)return n;if(4e3===e.code){try{r=parseInt(e.reason,0)}catch(e){}return"active"===o?l.randomWait(l.getMs({seconds:r}),4*l.getMs({seconds:r})):l.randomWait(4*l.getMs({seconds:r}),4*l.getMs({seconds:r})*4)}return t}}),f=["connect","reconnect","connecting","reconnecting","disconnect","connect_failed","reconnect_failed","error"],t=function(e){return function(t){return e.socket.on(t,function(e){return p("rpc","socket event",t,e)})}}(this),o=0,u=f.length;u>o;o++)v=f[o],t(v);for(g=["connecting","reconnecting"],r=function(e){return function(t){return e.socket.on(t,function(){return p("rpc","connecting"),e.trigger("connecting")})}}(this),i=0,d=g.length;d>i;i++)v=g[i],r(v);this.socket.on("connect_failed",function(e){return function(){return p("rpc","connect_failed"),e.trigger("connect_failed")}}(this)),this.socket.on("reconnect_failed",function(e){return function(){return p("rpc","reconnect_failed"),e.trigger("reconnect_failed")}}(this)),this.socket.on("connect",function(e){return function(){return p("rpc","connect"),e.trigger("connect"),e.connectedOnce=!0}}(this)),this.socket.on("reconnect",function(e){return function(){return p("rpc","reconnect"),clearTimeout(e.timeoutInvokeResponse),delete e.timeoutInvokeResponse,e.trigger("reconnect")}}(this)),this.socket.on("disconnect",function(e){return function(t){return p("rpc","disconnect",t),clearTimeout(e.timeoutInvokeResponse),delete e.timeoutInvokeResponse}}(this)),this.socket.on("error",function(e){return function(){var t,r;return e.connectedOnce&&!(null!=(t=e.socket)&&null!=(r=t.socket)?r.connected:void 0)?e.trigger("disconnect"):void 0}}(this)),this.socket.on("data",function(e){return function(t){return e._messageHandler(t)}}(this))}}return d.extend(e.prototype,o.Events),e.prototype._messageHandler=function(e){var t,r,n;return p("rpc","message",e),clearTimeout(this.timeoutInvokeResponse),delete this.timeoutInvokeResponse,(null!=e?e.version:void 0)?void i.setServerVersion(e):(null!=e.reqid&&(r=this.dictCallback["fx"+e.reqid]),null!=e.result?"function"==typeof r&&r(null,e.result):(null!=(n=e.notify)?n.event:void 0)?(null!=e.idModelChannel&&this.delegate.setIxLastUpdate(e.idModelChannel,e.ixLastUpdateChannel),this.trigger(e.notify.event,d.extend({idModelChannel:e.idModelChannel},e.notify))):e.error?"function"==typeof r&&r(e.error):p("rpc","unrecognized message",e),void(e.reqid&&(t=new Date-this.dictTime[e.reqid],p("timing","message",e.reqid,"time",t),delete this.dictCallback["fx"+e.reqid],delete this.dictTime[e.reqid])))},e.prototype.subscribe=function(e,t,r,n){return this.send({type:"subscribe",modelType:e,idModel:t,tags:r,invitationTokens:l.invitationTokens()},function(e){return function(r,o){return null!=r?p("rpc",r):e.delegate.setIxLastUpdate(t,o),"function"==typeof n?n(r,o):void 0}}(this))},e.prototype.unsubscribe=function(e,t,r){return this.send({type:"unsubscribe",modelType:e,idModel:t},function(e){return function(e,t){return null!=e&&p("rpc",e),"function"==typeof r?r(e,t):void 0}}(this))},e.prototype.ping=function(e){return this.send({type:"ping"},function(t){return function(t,r){return null!=t&&p("rpc",t),"function"==typeof e?e(t,r):void 0}}(this))},e.prototype._getSubscriptions=function(){return this.send({type:"getSubscriptions"},function(e){return function(e,t){return null!=t?p("rpc",t):void 0}}(this))},e.prototype.send=function(e,t){var r;this.dictCallback["fx"+this.reqid]=t,this.dictTime[this.reqid]=new Date,e.reqid=this.reqid++,r=JSON.stringify(e),p("rpc","invoke: "+r),this.socket.send(r),null==this.timeoutInvokeResponse&&(this.timeoutInvokeResponse=setTimeout(function(e){return function(){var t;if(e.socket.state===a.CONNECTED)return p("rpc","No response from the socket.io server in 10 seconds. Disconnecting."),clearTimeout(e.timeoutInvokeResponse),delete e.timeoutInvokeResponse,null!=(t=e.socket)?t.disconnect():void 0}}(this),1e4))},e.prototype.resync=function(){var e;return e=1<=arguments.length?m.call(arguments,0):[],d.isEmpty(e)&&(e=null),this.delegate.rpcAJAX.doPoll(e,this,function(){})},e.prototype.disconnect=function(){p("rpc","disconnecting"),this.socket.disconnect()},e.prototype.hasSocketTransport=function(){return this.hasSockets},e}()},{}],203:[function(e,t,r){var n,o,i,s,a,u;n=e("jquery"),o=e(25),i=e(5),a=e(109),u=e(201),t.exports=s={start:function(){return u.on("ready",function(e){return function(){return n(window).on("beforeunload",function(){e.markCurrentBoardAsViewed()})}}(this)),u.on("updateModels deleteModels",function(e){return function(t){var r,n;r=t.idModelChannel,null!=r&&r===(null!=(n=i.getCurrentBoard())?n.id:void 0)&&e.scheduleMarkCurrentBoardAsViewed()}}(this))},markCurrentBoardAsViewed:function(){var e;return clearTimeout(this._markAsViewedTimeout),null!=(e=i.getCurrentBoard())?e.markAsViewed():void 0},scheduleMarkCurrentBoardAsViewed:function(){return clearTimeout(this._markAsViewedTimeout),this._markAsViewedTimeout=setTimeout(function(e){return function(){return e.markCurrentBoardAsViewed()}}(this),a.getMs({minutes:5}))}}},{}],204:[function(e,t,r){var n,o,i,s,a,u,c=[].slice;n=e(205),i=e(109),s=e("underscore"),a=e(35),u=["close","error","message","open"],t.exports=o=function(){function e(e,t){var r,o,a,c;for(this.url=e,c=null!=t?t:{},this.fxReconnectDelay=c.fxReconnectDelay,this.maxReconnectDelay=c.maxReconnectDelay,this.maxReconnectAttempts=c.maxReconnectAttempts,s.extend(this,n.Events),this.ws=null,this.resetRetries(),o=0,a=u.length;a>o;o++)r=u[o],this.listenTo(this,r,this["on"+i.capitalize(r)]);return"WebSocket"in window?(this.connect(),this.buffer=[],this.connectedOnce=!1,void this.trigger("connecting")):void this.trigger("connect_failed")}return e.CONNECTING="connecting",e.CONNECTED="connected",e.WAITING_TO_RECONNECT="waiting to reconnect",e.RECONNECTING="reconnecting",e.CLOSED="closed",e.PING_TIMEOUT=3e4,e.prototype.resetRetries=function(){return this.attempts=0},e.prototype._clearPingTimeout=function(){return null!=this._pingTimeout&&clearTimeout(this._pingTimeout),this._pingTimeout=null},e.prototype._resetPingTimeout=function(){return this._clearPingTimeout(),this._pingTimeout=setTimeout(this._noPing.bind(this),e.PING_TIMEOUT)},e.prototype._noPing=function(){return!this.state!==e.CONNECTED?this.disconnect():void 0},e.prototype.connect=function(){var t,r,n,o,i,s;if(null!=this.ws)for(n=0,i=u.length;i>n;n++)t=u[n],this.ws["on"+t]=null;for(this.ws=new WebSocket(this.url),r=function(e){return function(t){return e.ws["on"+t]=function(){return e.trigger.apply(e,[t].concat(c.call(arguments)))}}}(this),o=0,s=u.length;s>o;o++)t=u[o],r(t);return this.state=e.CONNECTING},e.prototype.onOpen=function(t){return this.connectedOnce?this.trigger("reconnect"):this.trigger("connect"),this.connectedOnce=!0,this.state=e.CONNECTED,this.flushBuffer(),this.resetRetries()},e.prototype._triggerFailures=function(){return this.state===e.CONNECTING?this.trigger("connect_failed"):void 0},e.prototype.onClose=function(t){var r,n;return this.trigger("disconnect",null!=(n=null!=t?t.reason:void 0)?n:""),r="booted"===(null!=t?t.reason:void 0)||1006===(null!=t?t.code:void 0)&&this.state===e.CONNECTED,this._triggerFailures(),this._clearPingTimeout(),this.reconnect(t)},e.prototype.onError=function(e){return this._triggerFailures(),this.disconnect(),this.reconnect()},e.prototype.onMessage=function(e){var t;if(this._resetPingTimeout(),""===e.data)return a("socket","responding to ping"),void this.ws.send("");try{t=JSON.parse(e.data)}catch(e){}return this.trigger("data",t);
},e.prototype.reconnect=function(t){switch(this.state){case e.CONNECTED:this.ws.close();break;case e.RECONNECTING:case e.WAITING_TO_RECONNECT:return}return this.attempts>=this.maxReconnectAttempts?(this.trigger("reconnect_failed"),void(this.state=e.CLOSED)):(this.state=e.WAITING_TO_RECONNECT,0===this.attempts&&(this.currentReconnectDelay=this.fxReconnectDelay(t)),a("socket","attempting reconnect in "+this.currentReconnectDelay+"ms"),this._reconnectTimer=setTimeout(function(t){return function(){return t._reconnectTimer=null,t.connect(),t.state=e.RECONNECTING,t.trigger("reconnecting")}}(this),this.currentReconnectDelay),this.attempts++,this.currentReconnectDelay=Math.min(2*this.currentReconnectDelay,this.maxReconnectDelay))},e.prototype.disconnect=function(){var t;switch(this._clearPingTimeout(),t=this.state,this.state=e.CLOSED,t){case e.CONNECTED:case e.CONNECTING:case e.RECONNECTING:return this.ws.close(),this.onClose();case e.WAITING_TO_RECONNECT:return clearTimeout(this._reconnectTimer)}},e.prototype.send=function(t){if(this.state!==e.CONNECTED)return this.buffer.push(t);try{return this.ws.send(t)}catch(e){return this.buffer.push(t),this.onError()}},e.prototype.flushBuffer=function(){var e,t,r,n,o;for(e=this.buffer,this.buffer=[],o=[],r=0,n=e.length;n>r;r++)t=e[r],o.push(this.send(t));return o},e}()},{}],205:[function(e,t,r){var n,o,i,s;i=e(825),o=e(25),s=e("underscore"),n=e("jquery"),i.$=n,i.$=e("jquery"),i.prepareData=function(e,t,r){var i,a,u;return null==r&&(r={}),u={token:o.myToken()},a=function(){switch(e){case"create":case"update":return i=null!=r.requestData?s.clone(r.requestData):null!=r.createData?s.extend({},t.toJSON(),r.createData):s.clone(t.toJSON()),s.extend(i,u);case"delete":return u;default:return{}}}(),"read"===e&&s.isArray(r.fields)&&(a.fields=r.fields.join(",")),"read"===e?n.param(a):JSON.stringify(a)},i.syncOriginal=i.sync,i.sync=function(e,t,r){var n,o,a;switch(e){case"update":return null!=r&&"function"==typeof r.success?r.success(t,{},r):void 0;case"create":r.wait||(n=t.modelCache.lock("Backbone.sync create"),o=s.once(function(){return t.modelCache.unlock(n)}),a=function(e){return function(){return"function"==typeof e&&e.apply(null,arguments),o()}},setTimeout(a(),1e4),r.success=a(r.success),r.error=a(r.error));break;case"delete":if(/^placeholder/.test(t.id))return}return i.syncOriginal.apply(i,arguments)},t.exports=i},{}],206:[function(e,t,r){var n,o={}.hasOwnProperty;n=function(e){return function(t){switch(arguments.length){case 0:throw new Error("Operators can't be invoked with no arguments");case 1:return function(r){if(0===arguments.length)throw new Error("Partially applied binary operator can't be invoked with no arguments");return e.call(this,r,t)};default:return e.apply(null,arguments)}}},t.exports=function(e){var t,r,i;r={};for(t in e)o.call(e,t)&&(i=e[t],r[t]=n(i));return r}},{}],207:[function(e,t,r){var n,o,i=[].slice;o=e(216),n=function(e,t){return"function"==typeof e&&(t=e,e=t.length),function(){return arguments.length<e?n(e-arguments.length,o.apply(null,[t].concat(i.call(arguments)))):t.apply(this,arguments)}},t.exports=n},{}],208:[function(e,t,r){var n,o,i=[].slice;n=e(216),o=e(214),t.exports={noop:n(),id:function(e){return e},choke:function(){var e,t,r;return r=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],e=n.apply(null,t),function(){var t;return t=1<=arguments.length?i.call(arguments,0):[],e.apply(this,t.slice(0,r))}},concat:function(){var e;return e=1<=arguments.length?i.call(arguments,0):[],function(){var t,r,n,o;for(r=void 0,n=0,o=e.length;o>n;n++)t=e[n],r=t.apply(this,arguments);return r}},compose:function(e,t){return function(){return e.call(this,t.apply(this,arguments))}},unpack:function(e){return function(t){return e.apply(this,t)}},invoke:function(){var e,t;return t=arguments[0],e=2<=arguments.length?i.call(arguments,1):[],t.apply(this,e)},guard:function(e,t,r){return function(){return t.apply(this,arguments)?e.apply(this,arguments):r}},const:function(e){return function(){return e}},once:function(e,t){return null==t&&(t="Function called more than once!"),o({first:e,after:function(){throw new Error(t)}})}}},{}],209:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h={}.hasOwnProperty;for(o=e(216),u=[e(211),e(210),e(212),e(215),e(208)],d=0,p=u.length;p>d;d++){a=u[d];for(i in a)h.call(a,i)&&(l=a[i],o[i]=l)}o.overloaded=e(213),o.curried=e(207),o.prime=e(214),n={sub:"subtract",mult:"multiply",div:"divide",idiv:"intDivide",mod:"modulo",neg:"negate",rem:"remainder",comp:"compose",dot:"get"};for(s in n)h.call(n,s)&&(c=n[s],o[s]=o[c]);t.exports=o},{}],210:[function(e,t,r){var n;n=e(206),t.exports=n({and:function(e,t){return e&&t},or:function(e,t){return e||t}}),t.exports.not=function(e){return!e}},{}],211:[function(e,t,r){var n;n=e(206),t.exports=n({add:function(e,t){return e+t},subtract:function(e,t){return e-t},multiply:function(e,t){return e*t},divide:function(e,t){return e/t},intDivide:function(e,t){return Math.floor(e/t)},modulo:function(e,t){return(e%t+t)%t},remainder:function(e,t){return e%t}}),t.exports.negate=function(e){return-e}},{}],212:[function(e,t,r){var n,o=[].slice;n=e(207),t.exports={get:n(function(e,t){return t[e]}),lookup:n(function(e,t){return e[t]}),set:n(function(e,t,r){return t[e]=r}),method:function(){var e,t;return t=arguments[0],e=2<=arguments.length?o.call(arguments,1):[],function(){var r,n;return n=arguments[0],r=2<=arguments.length?o.call(arguments,1):[],0===r.length?n[t].apply(n,e):n[t].apply(n,o.call(e).concat(o.call(r)))}}}},{}],213:[function(e,t,r){var n,o={}.hasOwnProperty;n=function(e,t){var r;return r=e.filter(function(e){return t>=e}),0===r.length?null:Math.max.apply(null,r)},t.exports=function(e){var t,r,i,s,a;if(1!==arguments.length)throw new Error("overloaded is not overloaded!");if(r={},s=function(){var n;n=[];for(t in e)if(o.call(e,t)){if(a=e[t],i=Number(t),""===t||isNaN(i))throw new Error("non-numeric key "+t);r[i]=a,n.push(i)}return n}(),0===s.length)throw new Error("you must pass at least one overload!");return function(){var e,t,o;return t=arguments.length,e=null!=(o=r[t])?o:function(){if(t=n(s,t),null===t)throw new Error("function not overloaded to accept "+arguments.length+" arguments");return r[t]}(),e.apply(this,arguments)}}},{}],214:[function(e,t,r){var n,o,i=[].slice;n=e(216),o=function(){var e,t,r,n,o,s,a;for(t=arguments[0],e=arguments[1],n=3<=arguments.length?i.call(arguments,2):[],o=void 0,s=0,a=n.length;a>s;s++)r=n[s],null!=r&&(o=r.apply(t,e));return o},t.exports=function(e){var t,r,n,i,s,a;return s=e.first,t=e.after,n=e.beforeBoth,r=e.afterBoth,i=e.both,r=null!=r?r:i,a=!0,function(){return o(this,arguments,n,a?(a=!1,s):t,r)}}},{}],215:[function(e,t,r){var n;n=e(206),t.exports=n({gt:function(e,t){return e>t},gte:function(e,t){return e>=t},lt:function(e,t){return t>e},lte:function(e,t){return t>=e},eq:function(e,t){return e===t},neq:function(e,t){return e!==t}})},{}],216:[function(e,t,r){var n,o,i,s,a,u,c=[].slice;s=function(){},n=null!=(u=Array.isArray)?u:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=function(e){return"function"==typeof e},i=function(e){return"string"==typeof e},a=function(){var e,t,r,n,a;return r=1<=arguments.length?c.call(arguments,0):[],0===r.length?s:null==r[0]?s:"function"==typeof r[0]?(t=r[0],e=2<=r.length?c.call(r,1):[],0===e.length?t:function(){return t.call.apply(t,[this].concat(c.call(e),c.call(arguments)))}):(a=r[0],n=r[1],e=3<=r.length?c.call(r,2):[],t=function(){if(i(n))return a[n];if(o(n))return n;throw new Error("The [target, method, args...] functionoid requires a string or a function as the method")}(),function(){return t.call.apply(t,[a].concat(c.call(e),c.call(arguments)))})},t.exports=a},{}],217:[function(e,t,r){var n=Object.prototype.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype},i=function(e){return function(t){for(var r=Array.prototype.slice.call(arguments,1),o=0;o<r.length;o++){var i=r[o];for(var s in i)n.call(i,s)&&e(t,s,i)&&(t[s]=i[s])}return t}},s=i(function(){return!0}),a=i(function(e,t){return"undefined"==typeof e[t]});t.exports=function(e,t,r){function i(e,r){if(!(this instanceof i)){var n=new i(e,r);return null!=Error.captureStackTrace&&Error.captureStackTrace(n,arguments.callee),n}Error.call(this),null!=Error.captureStackTrace&&Error.captureStackTrace(this,arguments.callee),this.message=e,a(this,r,t);var o=this.message||e;delete this.message,Object.defineProperty(this,"message",{get:function(){return this.getMessage(o)},set:function(e){o=e}})}return null==r&&(r=Error),o(i,r),i.prototype.name=e,i.prototype.getMessage=function(e){return e},i.prototype.toObject=function(){var e={};for(var t in this)n.call(this,t)&&(e[t]=this[t]);return e},i.prototype.toJSON=function(){return s({message:this.message},this.toObject())},i}},{}],218:[function(e,t,r){"use strict";t.exports=function(e,t){for(var r=t,n=Array.isArray(r),o=0,r=n?r:r[Symbol.iterator]();;){var i;if(n){if(o>=r.length)break;i=r[o++]}else{if(o=r.next(),o.done)break;i=o.value}var s=i;if(!e(s))return!1}return!0}},{}],219:[function(e,t,r){"use strict";var n=e(223);t.exports=new n(function(){return!0})},{}],220:[function(e,t,r){"use strict";var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var r,n=[],o=e[Symbol.iterator]();!(r=o.next()).done&&(n.push(r.value),!t||n.length!==t););return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=e(218),i=e(223),s=function(e,t){for(var r=[],n=0;n<e.length;n++)r.push([e[n],t[n]]);return r},a=function(e){var t=n(e,2),r=t[0],o=t[1];return r(o)},u=function(e){return"string"==typeof e},c=function(e){return"boolean"==typeof e},l=function(e){return"number"==typeof e},d=function(e){return"function"==typeof e},p=void 0,h=function(e){var t=e.map(p);return function(r){return Array.isArray(r)&&e.length===r.length&&o(a,s(t,r))}},m=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push([r,p(e[r])]);return function(e){if("object"!=typeof e)return!1;for(var r=t,o=Array.isArray(r),i=0,r=o?r:r[Symbol.iterator]();;){var s;if(o){if(i>=r.length)break;s=r[i++]}else{if(i=r.next(),i.done)break;s=i.value}var a=n(s,2),u=a[0],c=a[1];if(!(u in e&&c(e[u])))return!1}return!0}};p=function(e){return e instanceof i?e.matches:e===String?u:e===Boolean?c:e===Number?l:e===Function?d:e===Array?Array.isArray:Array.isArray(e)?h(e):"object"==typeof e?m(e):"function"==typeof e?function(t){return t instanceof e}:function(t){return t===e}},t.exports=p},{}],221:[function(e,t,r){"use strict";var n=e(223),o=e(222),i=e(220),s=e(218);o.Any=e(219),o.If=function(e){return new n(e)},o.Or=function(e,t){return e=i(e),t=i(t),new n(function(r){return e(r)||t(r)})},o.And=function(e,t){return e=i(e),t=i(t),new n(function(r){return e(r)&&t(r)})};var a=function(e){return Array.isArray(e)||"undefined"!=typeof Symbol&&e[Symbol.iterator]};o.List=function(e){return new n(function(t){return a(t)&&s(i(e),t)})},o.compile=i,o.overload=o,t.exports=o},{}],222:[function(e,t,r){"use strict";var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var r,n=[],o=e[Symbol.iterator]();!(r=o.next()).done&&(n.push(r.value),!t||n.length!==t););return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=e(220),i=e(219);t.exports=function(e){if("function"!=typeof e)throw new Error("Pass a function to pattern.");var t=[],r=function(e,r){if(0===arguments.length)throw new Error("Cannot call match without arguments.");if(1===arguments.length&&(r=e,e=i),"function"!=typeof r)throw new Error("Final argument to match must be a function implementation.");t.push([o(e),r])};return e(function(){r.apply(this,arguments)}),r=function(){throw new Error("Cannot call match outside of a pattern invocation.")},function(){for(var e=arguments.length,r=Array(e),o=0;e>o;o++)r[o]=arguments[o];for(var i=t,s=Array.isArray(i),a=0,i=s?i:i[Symbol.iterator]();;){var u;if(s){if(a>=i.length)break;u=i[a++]}else{if(a=i.next(),a.done)break;u=a.value}var c=n(u,2),l=c[0],d=c[1];if(l(r))return d.apply(this,r)}throw new Error("No matching pattern")}}},{}],223:[function(e,t,r){"use strict";var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};t.exports=function e(t){n(this,e),this.matches=t,Object.freeze(this)}},{}],224:[function(e,t,r){var n=e("bluebird"),o=e(225),i=function(e){this.local=e.local,this.remote=e.remote,this.targetOrigin=e.targetOrigin,this.secret=e.secret,this.handlers=e.handlers,this.defaultHandler=e.defaultHandler,this.hostHandlers=e.hostHandlers,this._pendingRequests={},this._messageQueue=[],this.listen()},s="not handled",a="unsupported command";i.NotHandled=o("PostMessageIO:NotHandled",{code:s}),i.UnsupportedCommand=o("PostMessageIO:UnsupportedCommand",{code:a});var u=function(e,t){return Array.prototype.slice.call(e,t)},c=function(){var e={};return u(arguments,0).forEach(function(t){if(t)for(key in t)e[key]=t[key]}),e},l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";i.randomId=function(e){e=e||16;for(var t=[];t.length<e;)t.push(l[Math.floor(Math.random()*l.length)]);return t.join("")},i.prototype.listen=function(){var e=this;e.stop(),e.listener=function(t){var r=t.data,n=t.source;if(n==e.remote||r.secret==e.secret){var o=function(t){var r=t.data;switch(t.type){case"request":e._handleRequest(r.id,r.command,r.args,n);break;case"response":e._handleResponse(r.to,r.success,r.response);break;case"bulk":r.forEach(o)}};o(r)}},this.local.addEventListener("message",e.listener)},i.prototype.stop=function(){this.local.removeEventListener("message",self.listener)},i.prototype._handleRequest=function(e,t,r,o){var s=this,a=c(s.hostHandlers,{NotHandled:i.NotHandled,command:t,args:r,source:o,request:function(){return s.request.apply(s,u(arguments,0).concat([o]))},secret:s.secret});n.try(function(){if(!s.handlers.hasOwnProperty(t)){if(s.defaultHandler)return s.defaultHandler.apply(s,[a,t].concat(r));throw new i.UnsupportedCommand("unsupported command: "+t)}return s.handlers[t].apply(s,[a].concat(r))}).then(function(t){s.respond(e,!0,t,o)}).catch(i.NotHandled,i.UnsupportedCommand,function(t){s.respond(e,!1,{code:t.code,message:t.message},o)}).done()},i.prototype._handleResponse=function(e,t,r){var n=this;if(n._pendingRequests.hasOwnProperty(e))if(t)n._pendingRequests[e].resolve(r);else{var o=null;switch(r.code){case s:o=new i.NotHandled(r.message);break;case a:o=new i.UnsupportedCommand(r.message);break;default:o=new Error(r.message)}n._pendingRequests[e].reject(o)}},i.prototype.raw=function(e,t,r){var n=this;if("bulk"==e){var o={secret:n.secret,type:e,data:t};r?r.postMessage(o,"*"):n.remote.postMessage(o,n.targetOrigin)}else 0==n._messageQueue.length&&setTimeout(n.emptyQueue.bind(n),0),n._messageQueue.push({type:e,data:t,target:r})},i.prototype.emptyQueue=function(){var e=this,t=e._messageQueue;e._messageQueue=[];for(var r=0;r<t.length;r++){var n=t[r];if(!n.sent){for(var o=n.target,i=[],s=r;s<t.length;s++)t[s].target==o&&(i.push({type:t[s].type,data:t[s].data}),t[s].sent=!0);e.raw("bulk",i,o)}}},i.prototype.request=function(e){var t=this,r=u(arguments,1),o=i.randomId(),s=void 0,a=r[r.length-1];return a&&"function"==typeof a.postMessage&&(s=r.pop()),t.raw("request",{id:o,command:e,args:r},s),new n(function(n,i){t._pendingRequests[o]={id:o,command:e,args:r,resolve:n,reject:i}})},i.prototype.respond=function(e,t,r,n){var o=this;o.raw("response",{to:e,success:t,response:r},n)},t.exports=i},{}],225:[function(e,t,r){arguments[4][217][0].apply(r,arguments)},{}],226:[function(e,t,r){var n=Object.prototype.hasOwnProperty,o=function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return"object"!=typeof e&&(e=null),t.reduce(function(e,t){return"object"!=typeof t||null===t?e:Object.create(e,i(t))},e)},i=function(e){var t=Object.getOwnPropertyNames(e);return t.reduce(function(t,r){return t[r]=Object.getOwnPropertyDescriptor(e,r),t},Object.create(null))},s=function(e,t){return"undefined"==typeof t&&(t=Object.prototype),a(e,t,{})},a=function(e,t,r){u(r,i(e));var n=Object.getPrototypeOf(e);return n===t||null===n?Object.create(n,r):a(n,t,r)},u=function(e,t){Object.keys(t).forEach(function(r){n.call(e,r)||(e[r]=t[r])})};t.exports=o,t.exports.getOwnPropertyDescriptorMap=i,t.exports.flatten=s},{}],227:[function(e,t,r){(function(){var e,r,n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k=[].slice,C=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};r={default:"<!DOCTYPE html>",5:"<!DOCTYPE html>",xml:'<?xml version="1.0" encoding="utf-8" ?>',transitional:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',strict:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">',frameset:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">',1.1:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">',basic:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.1//EN" "http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd">',mobile:'<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.2//EN" "http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd">',ce:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "ce-html-1.0-transitional.dtd">'},n={regular:"a abbr address article aside audio b bdi bdo blockquote body button canvas caption cite code colgroup datalist dd del details dfn div dl dt em fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup html i iframe ins kbd label legend li map mark menu meter nav noscript object ol optgroup option output p pre progress q rp rt ruby s samp section select small span strong sub summary sup table tbody td textarea tfoot th thead time title tr u ul video",raw:"style",script:"script",void:"area base br col command embed hr img input keygen link meta param source track wbr",obsolete:"applet acronym bgsound dir frameset noframes isindex listing nextid noembed plaintext rb strike xmp big blink center font marquee multicol nobr spacer tt",obsolete_void:"basefont frame"},g=function(){var e,t,r,o,i,s,a,u,c;for(t=1<=arguments.length?k.call(arguments,0):[],c=[],o=0,s=t.length;s>o;o++)for(e=t[o],u=n[e].split(" "),i=0,a=u.length;a>i;i++)r=u[i],C.call(c,r)<0&&c.push(r);return c},e=function(){function e(){this.htmlOut=null}return e.prototype.resetBuffer=function(e){var t;return null==e&&(e=null),t=this.htmlOut,this.htmlOut=e,t},e.prototype.render=function(){var e,t,r,n;n=arguments[0],e=2<=arguments.length?k.call(arguments,1):[],t=this.resetBuffer("");try{n.apply(null,e)}finally{r=this.resetBuffer(t)}return r},e.prototype.cede=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],this.render.apply(this,e)},e.prototype.renderable=function(e){var t;return t=this,function(){var r,n;if(r=1<=arguments.length?k.call(arguments,0):[],null===t.htmlOut){t.htmlOut="";try{e.apply(this,r)}finally{n=t.resetBuffer()}return n}return e.apply(this,r)}},e.prototype.renderAttr=function(e,t){var r,n;return null==t?" "+e:t===!1?"":"data"===e&&"object"==typeof t?function(){var e;e=[];for(r in t)n=t[r],e.push(this.renderAttr("data-"+r,n));return e}.call(this).join(""):(t===!0&&(t=e)," "+e+"="+this.quote(this.escape(t.toString())))},e.prototype.attrOrder=["id","class"],e.prototype.renderAttrs=function(e){var t,r,n,o,i,s;for(i="",o=this.attrOrder,t=0,r=o.length;r>t;t++)n=o[t],n in e&&(i+=this.renderAttr(n,e[n]));for(n in e)s=e[n],C.call(this.attrOrder,n)>=0||(i+=this.renderAttr(n,s));return i},e.prototype.renderContents=function(){var e,t,r;if(e=arguments[0],t=2<=arguments.length?k.call(arguments,1):[],null==e);else{if("function"!=typeof e)return this.text(e);if(r=e.apply(this,t),"string"==typeof r)return this.text(r)}},e.prototype.isSelector=function(e){var t;return e.length>1&&("#"===(t=e.charAt(0))||"."===t)},e.prototype.parseSelector=function(e){var t,r,n,o,i,s,a,u;for(n=null,t=[],s=e.split("."),r=0,i=s.length;i>r;r++)u=s[r],u=u.trim(),n?t.push(u):(a=u.split("#"),o=a[0],n=a[1],""!==o&&t.push(u));return{id:n,classes:t}},e.prototype.normalizeArgs=function(e){var t,r,n,o,i,s,a,u,c,l;for(r={},l=null,o=null,a=i=0,u=e.length;u>i;a=++i)if(t=e[a],null!=t)switch(typeof t){case"string":0===a&&this.isSelector(t)?(l=t,c=this.parseSelector(t)):o=t;break;case"function":case"number":case"boolean":o=t;break;case"object":t.constructor===Object?r=t:o=t;break;default:o=t}return null!=c&&(s=c.id,n=c.classes,null!=s&&(r.id=s),(null!=n?n.length:void 0)&&(r.class&&n.push(r.class),r.class=n.join(" "))),{attrs:r,contents:o,selector:l}},e.prototype.tag=function(){var e,t,r,n,o;return o=arguments[0],e=2<=arguments.length?k.call(arguments,1):[],n=this.normalizeArgs(e),t=n.attrs,r=n.contents,this.raw("<"+o+this.renderAttrs(t)+">"),this.renderContents(r),this.raw("</"+o+">")},e.prototype.rawTag=function(){var e,t,r,n,o;return o=arguments[0],e=2<=arguments.length?k.call(arguments,1):[],n=this.normalizeArgs(e),t=n.attrs,r=n.contents,this.raw("<"+o+this.renderAttrs(t)+">"),this.raw(r),this.raw("</"+o+">")},e.prototype.scriptTag=function(){var e,t,r,n,o;return o=arguments[0],e=2<=arguments.length?k.call(arguments,1):[],n=this.normalizeArgs(e),t=n.attrs,r=n.contents,this.raw("<"+o+this.renderAttrs(t)+">"),this.renderContents(r),this.raw("</"+o+">")},e.prototype.selfClosingTag=function(){var e,t,r,n,o;if(o=arguments[0],e=2<=arguments.length?k.call(arguments,1):[],n=this.normalizeArgs(e),t=n.attrs,r=n.contents,r)throw new Error("Teacup: <"+o+"/> must not have content.  Attempted to nest "+r);return this.raw("<"+o+this.renderAttrs(t)+" />")},e.prototype.coffeescript=function(e){return this.raw('<script type="text/javascript">(function() {\n  var __slice = [].slice,\n      __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },\n      __hasProp = {}.hasOwnProperty,\n      __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n  ('+this.escape(e.toString())+")();\n})();</script>")},e.prototype.comment=function(e){return this.raw("<!--"+this.escape(e)+"-->")},e.prototype.doctype=function(e){return null==e&&(e=5),this.raw(r[e])},e.prototype.ie=function(e,t){return this.raw("<!--[if "+this.escape(e)+"]>"),this.renderContents(t),this.raw("<![endif]-->")},e.prototype.text=function(e){if(null==this.htmlOut)throw new Error("Teacup: can't call a tag function outside a rendering context");return this.htmlOut+=null!=e&&this.escape(e.toString())||"",null},e.prototype.raw=function(e){return null!=e?(this.htmlOut+=e,null):void 0},e.prototype.escape=function(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},e.prototype.quote=function(e){return'"'+e+'"'},e.prototype.use=function(e){return e(this)},e.prototype.tags=function(){var e,t,r,n,o,i;for(e={},t=[].concat("cede coffeescript comment component doctype escape ie normalizeArgs raw render renderable script tag text use".split(" "),g("regular","obsolete","raw","void","obsolete_void")),r=function(t){return function(r){return e[r]=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],t[r].apply(t,e)}}}(this),n=0,o=t.length;o>n;n++)i=t[n],r(i);return e},e.prototype.component=function(e){return function(t){return function(){var r,n,o,i,s,a;return r=1<=arguments.length?k.call(arguments,0):[],i=t.normalizeArgs(r),a=i.selector,n=i.attrs,o=i.contents,s=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],e.unshift(o),t.renderContents.apply(t,e)},e.apply(t,[a,n,s])}}(this)},e}(),v=g("regular","obsolete"),o=function(t){return e.prototype[t]=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],this.tag.apply(this,[t].concat(k.call(e)))}};for(u=0,d=v.length;d>u;u++)_=v[u],o(_);for(y=g("raw"),i=function(t){return e.prototype[t]=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],this.rawTag.apply(this,[t].concat(k.call(e)))}},c=0,p=y.length;p>c;c++)_=y[c],i(_);for(b=g("script"),s=function(t){return e.prototype[t]=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],this.scriptTag.apply(this,[t].concat(k.call(e)))}},l=0,h=b.length;h>l;l++)_=b[l],s(_);for(w=g("void","obsolete_void"),a=function(t){return e.prototype[t]=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],this.selfClosingTag.apply(this,[t].concat(k.call(e)))}},f=0,m=w.length;m>f;f++)_=w[f],a(_);("undefined"!=typeof t&&null!==t?t.exports:void 0)?(t.exports=(new e).tags(),t.exports.Teacup=e):"function"==typeof define&&define.amd?define("teacup",[],function(){return(new e).tags()}):(window.teacup=(new e).tags(),window.teacup.Teacup=e)}).call(this)},{}],228:[function(e,t,r){"use strict";function n(e,t,r){if(!(this instanceof n))return new n(e,t,r);var c,l,d,p,h=a.test(e),m=typeof t,f=this,g=0;for("object"!==m&&"string"!==m&&(r=t,t=null),r&&"function"!=typeof r&&(r=s.parse),t=i(t);g<u.length;g++)l=u[g],c=l[0],p=l[1],c!==c?f[p]=e:"string"==typeof c?~(d=e.indexOf(c))&&("number"==typeof l[2]?(f[p]=e.slice(0,d),e=e.slice(d+l[2])):(f[p]=e.slice(d),e=e.slice(0,d))):(d=c.exec(e))&&(f[p]=d[1],e=e.slice(0,e.length-d[0].length)),f[p]=f[p]||(l[3]||"port"===p&&h?t[p]||"":""),l[4]&&(f[p]=f[p].toLowerCase());r&&(f.query=r(f.query)),o(f.port,f.protocol)||(f.host=f.hostname,f.port=""),f.username=f.password="",f.auth&&(l=f.auth.split(":"),f.username=l[0]||"",f.password=l[1]||""),f.href=f.toString()}var o=e(231),i=e(229),s=e(230),a=/^\/(?!\/)/,u=[["#","hash"],["?","query"],["//","protocol",2,1,1],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/\:(\d+)$/,"port"],[NaN,"hostname",void 0,1,1]];n.prototype.set=function(e,t,r){var n=this;return"query"===e?("string"==typeof t&&t.length&&(t=(r||s.parse)(t)),n[e]=t):"port"===e?(n[e]=t,o(t,n.protocol)?t&&(n.host=n.hostname+":"+t):(n.host=n.hostname,n[e]="")):"hostname"===e?(n[e]=t,n.port&&(t+=":"+n.port),n.host=t):"host"===e?(n[e]=t,/\:\d+/.test(t)&&(t=t.split(":"),n.hostname=t[0],n.port=t[1])):n[e]=t,n.href=n.toString(),n},n.prototype.toString=function(e){e&&"function"==typeof e||(e=s.stringify);var t,r=this,n=r.protocol+"//";return r.username&&(n+=r.username,r.password&&(n+=":"+r.password),n+="@"),n+=r.hostname,r.port&&(n+=":"+r.port),n+=r.pathname,r.query&&(t="object"==typeof r.query?e(r.query):r.query,n+=("?"===t.charAt(0)?"":"?")+t),r.hash&&(n+=r.hash),n},n.qs=s,n.location=i,t.exports=n},{}],229:[function(e,t,n){"use strict";var o,i={hash:1,query:1};t.exports=function(t){t=t||r.location||{},o=o||e(228);var n,s={},a=typeof t;if("blob:"===t.protocol)s=new o(unescape(t.pathname),{});else if("string"===a){s=new o(t,{});for(n in i)delete s[n]}else if("object"===a)for(n in t)n in i||(s[n]=t[n]);return s}},{}],230:[function(e,t,r){"use strict";function n(e){for(var t,r=/([^=?&]+)=([^&]*)/g,n={};t=r.exec(e);n[decodeURIComponent(t[1])]=decodeURIComponent(t[2]));return n}function o(e,t){t=t||"";var r=[];"string"!=typeof t&&(t="?");for(var n in e)i.call(e,n)&&r.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return r.length?t+r.join("&"):""}var i=Object.prototype.hasOwnProperty;r.stringify=o,r.parse=n},{}],231:[function(e,t,r){"use strict";t.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 22!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}],232:[function(e,t,r){var n,o,i,s,a,u,c,l=function(e,t){function r(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d={}.hasOwnProperty;n=e(25),i=e(99),s=e(173),a=e(127),u=e("underscore"),c=e(38),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.sync=function(e,t,r){throw new Error("BoardState is a special weird non-persistent thing")},t.prototype.initialize=function(e,r){return t.__super__.initialize.apply(this,arguments),this.board=r.board,this.useSidebarPref()?(this.setShowSidebarFromPref(),this.listenTo(this.board,"change:myPrefs",this.setShowSidebarFromPref)):this.set("showSidebar",!a.fSmall),this.set("listComposerOpen",!1)},t.prototype.setSidebarDisplayType=function(e){return this.set("sidebarDisplayType",null!=e?e:"")},t.prototype.getSidebarDisplayType=function(){return this.get("sidebarDisplayType")},t.prototype.selectCard=function(e){e!==this._selectedCard&&(this._selectedCard&&this.stopListening(this._selectedCard,"change:closed"),this._selectedCard=e,null!=this._selectedCard&&(this.listenTo(this._selectedCard,"change:closed",function(e){return function(){return e.selectCardAfter(e._selectedCard)}}(this)),this.waitForId(this._selectedCard,function(t){return function(){return t._selectedCard===e?i.set(e.getFullUrl()):void 0}}(this))),this.trigger("active-card-changed"))},t.prototype.isCardSelected=function(e){return null!=e&&e===this._selectedCard},t.prototype.clearSelectedCard=function(){return this.selectCard(null)},t.prototype.getCard=function(){return this._selectedCard},t.prototype.getList=function(){var e;return null!=(e=this.getCard())?e.getList():void 0},t.prototype.selectCardAfter=function(e){var t,r,n,o;return r=e.getList(),o=null!=r?r.cardList.filter(function(e){return function(t){return e.board.filter.satisfiesFilter(t)}}(this)):void 0,n=null==r||0===o.length?null:(t=function(e){return function(e){return function(t){return t!==e&&t.get("pos")>=e.get("pos")}}}(this),u.find(o,t(e))),this.selectCard(null!=n?n:u.last(o))},t.prototype.openListComposer=function(){return this.set("listComposerOpen",!0)},t.prototype.closeListComposer=function(){return this.set("listComposerOpen",!1)},t.prototype.useSidebarPref=function(){return n.isLoggedIn()&&(a.fExtraLarge||a.fLarge||a.fMedium)},t.prototype.setShowSidebar=function(e){var t;return e!==this.get("showSidebar")&&(t=e?"Open":"Close",c("Board Menu",t+" Board Menu"),this.set("showSidebar",e),this.useSidebarPref())?this.board.setPref("showSidebar",e):void 0},t.prototype.setShowSidebarFromPref=function(){return this.waitForAttr(this.board,"myPrefs",function(e){return function(){return e.set("showSidebar",e.board.getPref("showSidebar"))}}(this))},t}(s)},{}],233:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(236),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.default=function(){return{mode:"month"}},t.prototype.getMode=function(){return this.get("mode")},t.prototype.setMode=function(e){return this.update("mode",e)},t}(o)},{}],234:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(156),i=e(169),s=e(236),a=e(89),t.exports=a(i,n=function(e){function t(e,r){this.board=r.board,t.__super__.constructor.apply(this,arguments),this.waitForId(this.board,function(e){return function(t){return e.set({id:"boardCardComposerSettings-"+t}),e.fetch()}}(this)),this.destruct([this.labelList=(new o).syncModel(this,"idLabels").syncCache(this.modelCache,[],function(e){return function(t){var r,n;return r=t.id,l.call(null!=(n=e.get("idLabels"))?n:[],r)>=0}}(this))])}return u(t,e),t.prototype.typeName="CardComposer",t.prototype.syncedKeys=["title"],
t.prototype.default=function(){return{list:null,index:null,idMembers:[],idLabels:[],pos:"bottom",title:"",vis:!1}},t.prototype.clear=function(){return this.save(this.default())},t.prototype.clearItems=function(){this.labelList.reset(),this.save({idMembers:[],idLabels:[],title:""})},t.prototype.moveToNext=function(){var e;this.save({index:(null!=(e=this.get("index"))?e:0)+1})},t.prototype.getBoard=function(){return this.board},t.prototype.getList=function(){return this.get("list")},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.addMember=function(e){return this.addToSet("idMembers",e)},t.prototype.removeMember=function(e){return this.pull("idMembers",e)},t.prototype.labelCreateUrl=function(){return"/1/board/"+this.getBoard().id+"/labels/"},t}(s))},{}],235:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h=function(e,t){function r(){this.constructor=e}for(var n in t)m.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},m={}.hasOwnProperty,f=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1},g=[].slice;n=e(25),i=e(66),a=e(175),u=e(236),c=e(109),l=e("underscore"),p=e("moment"),d=e(84),s="000000000000000000000000",t.exports=o=function(e){function t(e,r){this.board=e,t.__super__.constructor.call(this,null,r),this.waitForId(this.board,function(e){return function(t){return e.set({id:"boardCardFilterSettings-"+t}),e.fetch(),e._resetNewCards()}}(this)),this.dueMap={day:1,week:7,month:28,overdue:0,notdue:0},this.newCardsWithoutIds=[],this.listenTo(this,"change:title change:idLabels change:idMembers change:due",this.debounce(this._resetNewCards))}return h(t,e),t.prototype.default=function(){return{idMembers:[],idLabels:[],title:null,due:null,limitMembers:!0,limitLabels:!0,newCards:[]}},t.prototype.clear=function(){return this.save(this.default())},t.prototype.getBoard=function(){return this.board},t.prototype._resetNewCards=function(){return this.newCardsWithoutIds=[],this.save("newCards",[])},t.prototype.toggleQuietMode=function(){var e,t,r,o,i;if(e=n.myId(),null!=e){o=this.default(),o.idMembers=[e],t=!0;for(r in o)i=o[r],t&&(t=l.isEqual(this.get(r),i));return t?this.clear():this.save(o)}},t.prototype.toggleIdLabel=function(e){return this.toggle("idLabels",e)},t.prototype.toggleMember=function(e){return this.toggle("idMembers",e)},t.prototype.isFiltering=function(){var e;return l.some([!l.isEmpty(this.get("idMembers")),!l.isEmpty(this.get("idLabels")),null!=(e=this.get("title"))?e.trim():void 0,null!=this.get("due")])},t.prototype.satisfiesFilter=function(e){var t,r,n,o,i,a,u,c,d,h,m,v,y,b,w,_,k,C,x,j,S;if(null==e)return!1;if(e.get("closed"))return!0;if(w=e.id,f.call(null!=(_=this.get("newCards"))?_:[],w)>=0||f.call(this.newCardsWithoutIds,e)>=0)return!0;for(k=["idLabels","idMembers"],c=0,m=k.length;m>c;c++)if(u=k[c],!l.isEmpty(this.get(u))&&(t=e.get(u),l.isEmpty(t)&&(t=[s]),l.isEmpty(l.intersection(this.get(u),t))))return!1;if(null!=this.get("due")){if(o=e.get("due"),i=this.get("due"),null==o)return"notdue"===i;switch(y=new Date,i){case"overdue":if(p(o).isAfter(y))return!1;break;default:if(v=p().add(this.dueMap[i],"day"),!p(o).isBetween(p(),v))return!1}}return x=this.get("title"),null==x||(a=function(e){return l.compact(e.toLowerCase().split(/[\s\x21\x22\x24-\x26\x28-\x2C\x2F\x3A-\x3F\x5B-\x60\x7B-\x7F]+/))},j=a(x),l.isEmpty(j)||(d=null!=e.get("idShort")?a(e.get("idShort").toString()):[],r=l.flatten([a(null!=(C=e.get("name"))?C:""),d]),n=2<=j.length?g.call(j,0,h=j.length-1):(h=0,[]),b=j[h++],!l.isEmpty(n)&&!l.isEmpty(l.intersection(n,r))||(S=function(e){return e.substring(0,b.length)===b},l.any(r,S))))?!0:!1},t.prototype.addNewCard=function(e){return this.newCardsWithoutIds.push(e),this.waitForId(e,function(t){return function(r){return t.newCardsWithoutIds=l.without(t.newCardsWithoutIds,e),t.addToSet("newCards",r)}}(this))},t.prototype.toJSON=function(e){var r,o,i,u,p,h,m;return p=null!=e?e:{},r=p.board,o=p.expanded,i=t.__super__.toJSON.apply(this,arguments),r&&(i.board=this.board.toJSON()),o&&(m=null!=(h=this.get("title"))?h:"",u=RegExp("^"+c.escapeForRegex(m),"i"),i.labels=l.chain(this.board.getLabels()).filter(function(e){return u.test(e.get("color"))||u.test(e.get("name"))}).sort(a.compare).map(function(e){return function(t){var r;return l.extend(t.toJSON(),{isActive:(r=t.id,f.call(e.get("idLabels"),r)>=0)})}}(this)).unshift({id:s,name:d(["filtering","no labels"]),isActive:f.call(this.get("idLabels"),s)>=0}).value(),i.members=this.board.memberList.chain().filter(function(e){return"me"===m&&n.isMe(e)||l.any(c.getMemNameArray(e),function(e){return u.test(e)})}).map(function(e){return function(t){var r;return l.extend(t.toJSON(),{isActive:(r=t.id,f.call(e.get("idMembers"),r)>=0)})}}(this)).value(),i.members=c.sortMembers(i.members,n.me()),i.members.unshift({id:s,fullName:d(["filtering","unassigned"]),initials:"?",isActive:f.call(this.get("idMembers"),s)>=0}),i.dueOptions=l.keys(this.dueMap).map(function(e){return function(t){return{time:t,desc:d(["due date filter",t]),isActive:t===e.get("due")}}}(this))),i},t}(u)},{}],236:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};n=e("jquery"),i=e(97),s=e(173),a=e("underscore"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.default=function(){return{}},t.prototype.sync=function(e,t,r){var n,o,s,u,c;switch(u=r.success,e){case"create":throw Error("not implemented");case"read":return o=t.syncedKeysFromLocalStorage(),a.defaults(o,this.default()),"function"==typeof u?u(t,o,r):void 0;case"update":o=t.toJSON(),n=this.default(),delete o.id;for(s in o)c=o[s],a.isEqual(c,n[s])&&delete o[s];return a.isEmpty(o)?i.unset(t.id):i.set(t.id,o),"function"==typeof u?u(t,t.toJSON(),r):void 0;case"delete":return i.unset(t.id),"function"==typeof u?u(t,null,r):void 0}},t.prototype.syncedKeysFromLocalStorage=function(){var e,t;return e=null!=(t=i.get(this.id))?t:{},a.pick(e,this.syncedKeys)},t.prototype.syncedKeys=function(){return!0},t.prototype.toJSON=function(){return a.pick(this.attributes,this.syncedKeys)},t.prototype._persistUpdate=function(e,t){var r;return i.set(this.id,a.extend(null!=(r=i.get(this.id))?r:this.default(),e)),"function"==typeof t?t(null,this.toJSON()):void 0},t.prototype.toggle=function(e,t){return this.inSet(e,t)?(this.pull(e,t),!1):(this.addToSet(e,t),!0)},t.prototype.inSet=function(e,t){var r;return l.call(null!=(r=this.get(e))?r:[],t)>=0},t.prototype.addToSet=function(e,t){var r;return this.save(e,(null!=(r=this.get(e))?r:[]).concat(t))},t.prototype.pull=function(e,t){var r;return this.save(e,a.without(null!=(r=this.get(e))?r:[],t))},t}(s)},{}],237:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(236),t.exports=n=function(e){function t(e,r){this.board=e,t.__super__.constructor.call(this,null,r),this.waitForId(this.board,function(e){return function(t){return e.set({id:"boardListComposerSettings-"+t}),e.fetch()}}(this))}return i(t,e),t.prototype.default=function(){return{title:null,vis:!1}},t.prototype.clear=function(){return this.save(this.default())},t.prototype.clearItems=function(){this.save({title:""})},t.prototype.getBoard=function(){return this.board},t.prototype.toJSON=function(e){var r,n,o,i;return i=null!=e?e:{},r=i.board,o=i.list,n=t.__super__.toJSON.apply(this,arguments),r&&(n.board=this.getBoard().toJSON()),n},t}(o)},{}],238:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=e(25),o=e(236),i=e("underscore"),t.exports=new(function(e){function t(){t.__super__.constructor.call(this),this.set({id:"memberState-"+n.myId()}),this.fetch()}return s(t,e),t.prototype.default=function(){return{cardsPageSortType:"board",processingAttachmentsLength:0,idCollapsedChecklists:[]}},t.prototype.getCardsPageSortType=function(){return this.get("cardsPageSortType")},t.prototype.sortCardsPageByBoard=function(){return this.save("cardsPageSortType","board")},t.prototype.sortCardsPageByDate=function(){return this.save("cardsPageSortType","date")},t.prototype.getCollapsedChecklists=function(){return this.get("idCollapsedChecklists")},t.prototype.pullCollapsedChecklist=function(e){return this.pull("idCollapsedChecklists",e)},t.prototype.pushCollapsedChecklist=function(e){var t,r;return this.pull("idCollapsedChecklists",e),this.addToSet("idCollapsedChecklists",e),t=this.getCollapsedChecklists(),r=i.rest(t,Math.max(0,t.length-256)),this.save("idCollapsedChecklists",r)},t}(o))},{}],239:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;n=e(173),o=e(109),t.exports=new(function(e){function t(){t.__super__.constructor.call(this),this.set({query:"",suggestions:[],suggestionSearchTerm:"",suggestSearchModelTypes:""})}return i(t,e),t.prototype.getQuery=function(){return this.get("query")},t.prototype.setQuery=function(e){return e!==this.getQuery()&&this.set("query",e),""===e?(this.clearSuggestions(),this.clearSuggestionSearchTerm(),this.clearSuggestionSearchModelTypes()):void 0},t.prototype.removeStringFromQuery=function(e){var t,r,n;return t=this.getQuery(),r=RegExp(""+o.escapeForRegex(e)),r.test(t)?(n=t.replace(e,""),n=o.stripExtraSpaces(n),""!==n&&(n+=" "),this.setQuery(n)):void 0},t.prototype.addStringToQuery=function(e){var t,r,n;return t=this.getQuery(),r=RegExp(""+o.escapeForRegex(e)),r.test(t)?void 0:(n=t+" "+e,n=o.stripExtraSpaces(n)+" ",this.setQuery(n))},t.prototype.getSuggestions=function(){return this.get("suggestions")},t.prototype.setSuggestions=function(e){return this.set("suggestions",e)},t.prototype.clearSuggestions=function(){return this.set("suggestions",[])},t.prototype.getSuggestionSearchTerm=function(){return this.get("suggestionSearchTerm")},t.prototype.setSuggestionSearchTerm=function(e){return this.set("suggestionSearchTerm",e)},t.prototype.clearSuggestionSearchTerm=function(){return this.set("suggestionSearchTerm","")},t.prototype.getSuggestionSearchModelTypes=function(){return this.get("suggestSearchModelTypes")},t.prototype.setSuggestionSearchModelTypes=function(e){return this.set("suggestSearchModelTypes",e)},t.prototype.clearSuggestionSearchModelTypes=function(){return this.set("suggestSearchModelTypes","")},t}(n))},{}],240:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=e(25),o=e(236),i=e("underscore"),t.exports=new(function(e){function t(){t.__super__.constructor.call(this),this.set({id:"sidebarState-"+n.myId()}),this.fetch()}return s(t,e),t.prototype.default=function(){return{pinBoardsListSidebar:!1,showBoardsListSidebar:!1,idRecentBoards:[],collapsedDrawerSections:[]}},t.prototype.syncedKeys=["idRecentBoards","collapsedDrawerSections","pinBoardsListSidebar"],t.prototype.getPinSidebar=function(){return this.get("pinBoardsListSidebar")},t.prototype.showPinSidebar=function(){return this.save("pinBoardsListSidebar",!0)},t.prototype.hidePinSidebar=function(){return this.save("pinBoardsListSidebar",!1)},t.prototype.getShowSidebar=function(){return this.get("showBoardsListSidebar")},t.prototype.showSidebar=function(){return this.save("showBoardsListSidebar",!0)},t.prototype.hideSidebar=function(){return this.save("showBoardsListSidebar",!1)},t.prototype.hideUnpinnedSidebar=function(){return this.getShowSidebar()&&!this.getPinSidebar()?this.hideSidebar():void 0},t.prototype.getRecentBoards=function(){return this.get("idRecentBoards")},t.prototype.pullBoard=function(e){var t,r;for(r=i.clone(this.getRecentBoards());(t=i.indexOf(r,e))>-1;)r.splice(t,1);return this.save("idRecentBoards",r)},t.prototype.pushBoard=function(e){var t;return t=i.clone(this.getRecentBoards()),i.contains(t,e)&&(t=i.without(t,e)),t.unshift(e),t=t.slice(0,16),this.save("idRecentBoards",t)},t.prototype.getCollapsedSections=function(){var e;return null!=(e=this.get("collapsedDrawerSections"))?e:this.default().collapsedDrawerSections},t.prototype.isCollapsed=function(e){return i.contains(this.getCollapsedSections(),e)},t.prototype.collapseSection=function(e){return this.addToSet("collapsedDrawerSections",e)},t.prototype.expandSection=function(e){return this.pull("collapsedDrawerSections",e)},t}(o))},{}],241:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k=function(e,t){function r(){this.constructor=e}for(var n in t)C.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},C={}.hasOwnProperty,x=[].slice;n=e("jquery"),i=e(242),s=e(243),a=e(66),u=e(109),c=e(441),l=e("underscore"),g=e("moment"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return k(t,e),t.prototype.initialize=function(e){return this.renderOpts=e.renderOpts,this.highlight=e.highlight,this.makeDebouncedMethods("render"),this.listenTo(this.collection,"add remove reset",this.renderDebounced),this.actionViews=[]},t.prototype.render=function(){return this.collection._getRelatedBoards().then(function(e){return function(){var t;t=""===e.$el.html(),e.rerender(t,!0)}}(this)).then(function(e){return function(){e.trigger("render")}}(this)).done()},t.prototype.rerender=function(e,t){var r,n,o,i,s,u,c,d,p,h;for(p=this.saveEdits(),s=p[0],i=p[1],o=this.collection.models,o=l.sortBy(o,function(e){return-a.parse(e.get("date"))}),n=v(o).slice(0,this.renderOpts.limit),e&&t&&this.removeActionViews(),this.$(".js-board-member-profile-no-activity").toggleClass("hide",n.length>0),c=u=0,d=n.length;d>u;c=++u)r=n[c],(e||this.actionNeedsRerender(r,c))&&(h=this.rerenderAction(r,c,n,{rerenderAll:e}),this.restoreEdits(s,i,h))},t.prototype.saveEdits=function(){var e,t;return t=[],e=0,this.$(".editing textarea").each(function(){var r;r=n(this),t.push(r.val()),r.is(":focus")&&(r.parents(".editing").addClass("focused"),e=u.getCaretPosition(r))}),null!=t&&t.reverse(),[t,e]},t.prototype.restoreEdits=function(e,t,r){var n;return r.$el.hasClass("editing")?(r.$("textarea").val(e.pop()),n=u.getElem(r.$("textarea")),r.$el.hasClass("focused")&&u.setCaretPosition(n,t),r.openEditView()):void 0},t.prototype._viewForAction=function(e){return/^comment/.test(e.get("type"))?this.subview(s,e,this.renderOpts):this.subview(i,e,this.renderOpts)},t.prototype.rerenderAction=function(e,t,r,n){var o,i,s,a;return a=this._viewForAction(e),o=this.highlight&&this.highlight===e.id,a.setHighlighted(o),n.rerenderAll?(this.appendSubview(a),this.actionViews.push(a)):(this.insertActionView(a,t),1===this.actionViews.length&&1===r.length?(this.actionViews[t].remove(),this.actionViews.splice(t,1,a)):null==this.actionViews[t+1]?this.actionViews.splice(t,1,a):r.length<=this.actionViews.length?this.actionViews[t+1].model.id===(null!=(i=l.first(r[t+1]))?i.id:void 0)?(this.actionViews[t].remove(),this.actionViews.splice(t,1,a)):(this.actionViews.splice(t,0,a),null!=(s=this.actionViews[this.actionViews.length-1])&&s.remove(),this.actionViews=this.actionViews.splice(0,this.actionViews.length-1)):this.actionViews.splice(t,0,a)),a},t.prototype.actionNeedsRerender=function(e,t){var r,n,o;return(null!=(n=this.actionViews[t+1])&&null!=(o=n.model)?o.id:void 0)===e.id&&(this.actionViews[t].remove(),this.actionViews.splice(t,1)),r=this.actionViews[t],!r||e.id!==r.model.id},t.prototype.insertActionView=function(e,t){return this.actionViews[t]?(e.delegateEvents(),e.render().$el.insertBefore(this.actionViews[t].el)):this.appendSubview(e)},t.prototype.removeActionViews=function(){var e,t,r,n;for(n=this.actionViews,t=0,r=n.length;r>t;t++)e=n[t],e.remove();this.actionViews=[]},t.prototype.delegateEvents=function(){var e,r,n,o;for(t.__super__.delegateEvents.apply(this,arguments),o=this.actionViews,r=0,n=o.length;n>r;r++)e=o[r],e.delegateEvents()},t.prototype.undelegateEvents=function(){var e,r,n,o;for(t.__super__.undelegateEvents.apply(this,arguments),o=this.actionViews,r=0,n=o.length;n>r;r++)e=o[r],e.undelegateEvents()},t.prototype.remove=function(){return this.removeActionViews(),t.__super__.remove.apply(this,arguments)},t.prototype.setHighlight=function(e){var t,r,n;e!==this.highlight&&(this.highlight&&null!=(r=this.collection.get(this.highlight))&&(n=this._viewForAction(r),n.setHighlighted(!1)),this.highlight=e,this.highlight&&(t=this.collection.get(this.highlight))&&(n=this._viewForAction(t),n.setHighlighted(!0)))},t}(c),y=function(e){return function(t){return function(r,n){var o;return o=e in r&&e in n&&r[e].id===n[e].id,o?t(r,n):[!1,!1]}}},w=y("card"),b=y("board"),h=function(e){return[e,e]},p=function(e,t){var r,n,o,i;return r=e[0],n=e[1],o=t[0],i=t[1],[r||o,n||i]},m=function(e,t){var r,n;return null==t?!1:0===e.length?!0:(r=e[0],n=2<=e.length?x.call(e,1):[],m(n,t[r]))},f=function(){var e,t;return e=arguments[0],t=2<=arguments.length?x.call(arguments,1):[],l.all(t,function(t){return m(e,t)})},d=[{a:"removeMemberFromCard",b:"addMemberToCard",cancel:w(function(e,t){return h(e.idMember===t.idMember)})},{a:"deleteAttachmentFromCard",b:"addAttachmentToCard",cancel:w(function(e,t){return h(e.attachment.id===t.attachment.id)})},{a:"updateCheckItemStateOnCard",b:"updateCheckItemStateOnCard",cancel:w(function(e,t){return h(e.checkItem.id===t.checkItem.id)})},{a:"updateCard",b:"updateCard",cancel:w(function(e,t){return h("listAfter"in e&&"listBefore"in t&&e.listAfter.id===t.listBefore.id)})},{a:"addChecklistToCard",b:"removeChecklistFromCard",cancel:w(function(e,t){return h(e.checklist.id===t.checklist.id)})},{a:"updateBoard",b:"updateBoard",cancel:b(function(e,t){return[f(["board","prefs","background"],e,t),!1]})}],_=function(e,t){return d.reduce(function(r,n){return e.type!==n.a||t.type!==n.b?r:p(r,n.cancel(e,t))},[!1,!1])},v=function(e){var t,r,n,o,i,s,a,u,c,d,p;if(1===e.length)return e;for(o={},d=e.slice(0,-1),u=a=0,c=d.length;c>a;u=++a)t=d[u],i=t.toJSON(),s=e[u+1].toJSON(),l.extend(i,i.data),l.extend(s,s.data),i.idMemberCreator===s.idMemberCreator&&g(i.date).diff(s.date,"minutes")<5&&!o[i.id]&&!o[s.id]&&(p=_(i,s),r=p[0],n=p[1],r&&(o[i.id]=!0),n&&(o[s.id]=!0));return l.reject(e,function(e){return o[e.id]})}},{}],242:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M,B,T,O=function(e,t){function r(){this.constructor=e}for(var n in t)L.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},L={}.hasOwnProperty;n=e("jquery"),i=e(470),s=e(402),a=e(25),u=e(137),c=e(410),l=e(65),d=e(138),p=e(5),h=e(66),m=e(67),x=e(114),f=e(27),g=e(29),v=e(458),y=e(87),b=e(109),w=e(441),_=e("underscore"),C=e(418),S=e(35),M=e("moment"),B=e(438),T=e(38),j=e(84),k=e(589),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return O(t,e),t.prototype.className="phenom",t.prototype.initialize=function(e){var t,r,n,o;return this.context=e.context,this.highlighted=e.highlighted,this.listenTo(this.model,"takingTooLong change",this.render),n=this.model.get("data"),null!=(null!=(o=n.card)?o.id:void 0)&&n.board&&(this.listenTo(this.modelCache,"remove:Action:"+this.model.get("id"),function(e){return function(){return e.remove()}}(this)),null!=(t=this.model.getCard())&&t.id!==this.context.id&&this.listenTo(t,"change:name",this.render)),null!=(r=this.model.getChecklist())?this.listenTo(r,"change:name",this.render):void 0},t.prototype.events={"click .js-show-mem-menu":"viewMemberActionMenu","click .js-open-attachment-viewer":"openAttachmentViewer","click .js-open-card":"openCard","click .js-reply-to-action":"reply","click .js-expand-comment":"expandComment"},t.prototype.getData=function(){var e;return e=new m("action").getEntities(this.model.get("display"),this.context.id),{saved:null!=this.model.id,entities:_.map(e,this._withEntityInfo.bind(this)),date:this.model.get("date"),dateLastEdited:this.model.get("data").dateLastEdited,textData:this.model.get("data").textData,url:null!=this.model.getCard()?p.getActionUrl(this.model):null}},t.prototype.getContext=function(){var e,t,r,n,o,i,s,u,l;return t={},e=this.modelCache.get("Board",null!=(o=this.model.get("data"))&&null!=(i=o.board)?i.id:void 0),this.options.showBoard&&null!=e&&(t.board=e.toJSON({prefs:!0,url:!0}),t.boardPLevelIconClass=c.getPermLevelIconClassForBoard(e),t.boardPLevelAltText=c.getPermLevelAltTextForBoard(e)),this.options.showOrganization&&(n=this.modelCache.get("Organization",null!=(s=this.model.get("data"))&&null!=(u=s.organization)?u.id:void 0),null!=n&&(t.organization=n.toJSON({prefs:!0,url:!0}),t.orgPLevelIconClass=n.getPermLevel(),t.orgPLevelAltText=j(["org perms",n.getPermLevel(),"text"]))),r=this.modelCache.get("Member",this.model.get("idMemberCreator")),t.canReply=(null!=e?e.canComment(a.me()):void 0)&&(this.model.isCommentLike()||this.model.isAddAttachment())&&null!=r&&!a.isMe(r),t.canDelete=this.model.deletable(),t.canEdit=this.model.editable(),t.member=null!=r?r.toJSON():void 0,null!=(l=t.member)&&(l.url=p.getMemberProfileUrl(t.member.id)),t},t.prototype.getOptions=function(){var e,t;return{showCompactAttachmentPreview:this.options.compact,truncateComment:null!=(t="function"==typeof(e=this.options).truncateComments?e.truncateComments(this.model):void 0)?t:!1,showOptions:!this.model.isPlaceholder()&&!this.options.compact&&!this.options.readOnly,useEmbedly:!this.options.compact&&this.model.isCommentLike(),usePreviews:!this.options.compact&&this.model.isAddAttachment()}},t.prototype.render=function(){var e,t,r,o,i,s,a,u,c,l,d,p,m,g;if(s=this.getData(),l=this.getOptions(),i=this.getContext(),S("actions",s),this.$el.addClass(this.model.isCommentLike()?"mod-comment-type":this.model.isAddAttachment()?"mod-attachment-type":"mod-other-type"),this.$el.html(k(s,i,l)),null!=(o=this.model.getBoard())&&this.$(".js-friendly-links").each(function(){return C(this,o)}),l.useEmbedly)for(e=this.$(".js-embedly"),d=s.entities,u=0,c=d.length;c>u;u++)if(a=d[u],"comment"===a.type&&null!=a.embedly)try{p=JSON.parse(a.embedly);for(m in p)g=p[m],/wistia/i.test(m)||(g["type_"+g.type]=!0,g.requireHttps=!0,e.show().append(B.fill("embedly",g)))}catch(e){}return l.usePreviews&&(r=_.filter(s.entities,function(e){return"attachment"===e.type}),_.isEmpty(r)||(t=this.$(".js-previews"),f.previewHtml(r[0].url,function(e,r){if(t.empty(),null!=e){if(null!=e.login)return n("<div>").addClass("attachment-extra-info-login").html(e.login).appendTo(t),t.removeClass("hide")}else if(null!=r)return n("<div>").addClass("attachment-extra-info").html(r).appendTo(t),t.removeClass("hide")}))),h.update(this.el),this.$el.toggleClass("unsent",!!this.model.isTakingTooLong),this.renderHighlighted(),this},t.prototype.renderHighlighted=function(){return this.$el.toggleClass("mod-highlighted",!!this.highlighted),this},t.prototype._tfmFormatOpts=function(){return{card:this.model.get("data").card,board:this.model.get("data").board},siteDomain,{textData:this.model.get("data").textData}},t.prototype._withEntityInfo=function(e){var t,r,n;return n=_.clone(e),"attachment"===n.type&&(n.url=this.model.get("data").attachment.url),"attachmentPreview"===n.type&&(n.previewUrlForRes=l.isHighDPI()&&null!=n.previewUrl2x?n.previewUrl2x:n.previewUrl),"comment"===n.type&&(n.textHtml=y.comments.format(n.text,this._tfmFormatOpts()).output),"checkItem"===n.type&&(n.nameHtml=y.checkItems.format(n.text,this._tfmFormatOpts()).output),"date"===n.type&&(n.text=M(n.date).calendar()),"card"===n.type&&null!=(t=g.get("Card",n.id))&&(n.text=t.get("name")),"checklist"===n.type&&null!=(r=g.get("Checklist",n.id))&&(n.text=r.get("name")),n},t.prototype.viewMemberActionMenu=function(e){var t,r;b.stop(e),t=this.modelCache.get("Member",null!=(r=n(e.target).closest("[idmember]").attr("idmember"))?r:this.model.get("idMemberCreator")),v.toggle({elem:this.$(e.target).closest(".js-show-mem-menu"),view:i,options:{model:t,modelCache:this.modelCache}})},t.prototype.expandComment=function(e){return b.stop(e),this.$(".js-comment").removeClass("is-truncated")},t.prototype.openCard=function(e){"Card"===this.context.typeName||n(e.target).is("a,textarea")||x()||(b.stop(e),p.navigate(p.getActionUrl(this.model),{trigger:!0}))},t.prototype.openAttachmentViewer=function(e){var t,r;e.metaKey||e.ctrlKey||(t=n(e.target),t.closest(".window-main-col").length>0&&(b.stop(e),s.isActive()||(r=t.closest(".js-open-attachment-viewer").attr("data-idattachment"),s.show({model:this.model.getCard(),idAttachment:r}))))},t.prototype.reply=function(e){return b.stop(e),this.$el.trigger("replyToAction",this.model),T("Card","Reply to Comment")},t.prototype.setHighlighted=function(e){e!==this.highlighted&&(this.highlighted=e,this.renderHighlighted())},t}(w)},{}],243:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x=function(e,t){function r(){this.constructor=e}for(var n in t)j.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},j={}.hasOwnProperty;n=e("jquery"),o=e(242),i=e(403),s=e(363),u=e(406),c=e(452),l=e(5),d=e(80),p=e(16),h=e(456),f=e(458),g=e(87),v=e(109),y=e("underscore"),w=e(118),_=e(89),k=e(438),C=e(38),b=e(84),m=e(414),t.exports=_(i,u,m,a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.events=v.extendEvents({"click .js-confirm-delete-action":"confirmDeleteAction","click .js-edit-action":"editAction","click .js-discard-comment-edits":"cancelEdit","click .js-save-edit":"saveEdit","keyup .js-text":"keyAutoMention","keydown .js-text":"keydownJsText","input .js-text":"checkLength","mutated .js-text":"checkLength","click .js-comment-add-attachment":"commentAddAttachment","click .js-comment-mention-member":"commentMentionMember","click .js-comment-add-emoji":"commentAddEmoji","click .js-comment-add-card":"commentAddCard","click .js-attach-link":"attachLink"}),t.prototype.potentialAttachments=function(){return w(this.model.get("data").text,g.comments)},t.prototype.addContextData=function(e){var r;t.__super__.addContextData.apply(this,arguments),r=this.model.getCard(),e.canAttachLink=null!=r&&r.editable()&&this.potentialAttachments().length>0},t.prototype.confirmDeleteAction=function(e){v.stop(e),c.toggle("delete comment",{elem:n(e.target).closest(".js-confirm-delete-action")[0],model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return C("Card","Delete Comment"),e.model.destroy()}}(this)})},t.prototype.getTextInput=function(){return this.$(".js-text")},t.prototype.getMentionTarget=function(){return this.$(".js-comment-mention-member:visible")[0]},t.prototype.getEmojiTarget=function(){return this.$(".js-comment-add-emoji:visible")[0]},t.prototype.getCardTarget=function(){return this.$(".js-comment-add-card:visible")[0]},t.prototype.editAction=function(e){return v.stop(e),this.$el.hasClass("is-editing")?void 0:(this.$el.addClass("is-editing"),this.$("textarea").focus().select(),this.openEditView())},t.prototype.openEditView=function(){this.$el.append(k.fill("comment_edit_controls")),this.$(".js-text").attr("placeholder","").autosize()},t.prototype.keydownJsText=function(e){return d.isForceSubmitEvent(e)?this.saveEdit(e):d.getKey(e)===p.Escape?(v.stop(e),this.cancelEdit()):this.checkInsert(e)},t.prototype.saveEdit=function(e){var t;("keypress"!==e.type||d.isForceSubmitEvent(e)||d.getKey(e)===p.Enter&&(!n(e.target).is("textarea")||n(e.currentTarget).hasClass("single-line")))&&(v.stop(e),t=this.$(".js-text").val(),this.$(".js-spinner").show(),this.$(".js-hide-on-sending").hide(),this.$(".current-comment").text(t),h.cancelEdits(),this.model.get("display").entities.comment.text=t,this.model.update("text",t),this.$(".js-text").trigger("autosize.destroy"),f.hide(),C("Card","Edit Comment"))},t.prototype.showError=function(e){},t.prototype.cancelEdit=function(){var e;e=this.model.get("data").text,this.$(".js-text").val(e),h.cancelEdits(),this.$(".js-text").trigger("autosize.destroy")},t.prototype.getCard=function(){return this.model.getCard()},t.prototype.attachLink=function(e){var t;return v.stop(e),t=this.potentialAttachments(),f.toggle({elem:n(e.currentTarget),view:new s({model:this.getCard(),modelCache:this.modelCache,links:t})})},t}(o))},{}],244:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e(25),i=e(109),s=e(441),a=e(38),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.events=function(){return{click:this.click,"click .js-close-ad":this.close}},t.isEligible=function(e){return!1},t.prototype.getAdId=function(){return this.constructor.adId},t.prototype.click=function(){return a("Ad",this.getAdId(),"Click")},t.prototype.close=function(e){var t;return i.stop(e),null!=(t=this.getAdId())&&(a("Ad",this.getAdId(),"Dismiss"),o.me().dismiss(t)),this.$el.slideUp(100)},t}(s)},{}],245:[function(e,t,r){var n,o,i,s=[].slice;n=e(246),o=e(247),i=e("underscore"),t.exports=new(function(){function e(){}return e.prototype._findAd=function(){var e,t,r;return e=arguments[0],r=arguments[1],t=3<=arguments.length?s.call(arguments,2):[],i.find(e,function(e){return!r.isDismissed(e.adId)&&e.isEligible.apply(e,[r].concat(s.call(t)))})},e.prototype.addMemberToOrganizationAd=function(e,t){return this._findAd.apply(this,[[o]].concat(s.call(arguments)))},e.prototype.boardsListAd=function(e,t){return this._findAd.apply(this,[[n]].concat(s.call(arguments)))},e}())},{}],246:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(249),i=e(109),s=e(438),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.adId="BoardsListBC",t.isEligible=function(e){var t,r,n,o;return(o=function(e,t){return i.idToDate(e.id)<i.dateBefore(t)})(e,{months:1})?(n=e.organizationList,t=n.any(function(e){return e.isPremium()}),r=n.any(function(e){return o(e,{weeks:1})}),!t&&r):void 0},t.prototype.className="member-boards-list-ad business-class-ad window-title-extra--bc-pitch",t.prototype.copyHtml=function(){return s.fill("ad_business_class")},t.prototype.click=function(){return t.__super__.click.apply(this,arguments),window.open("/business-class","_blank")},t}(o)},{}],247:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(248),i=e(438),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.adId="AddOrganizationMemberBC",t.isEligible=function(e,t){return null!=t&&!t.isPremium()},t.prototype.copyHtml=function(){return i.fill("ad_business_class_google_apps")},t}(o)},{}],248:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(251),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.className="pop-over-ad business-class-ad",t.prototype.iconClass=function(){return"business-class-mark"},t.prototype.click=function(){return t.__super__.click.apply(this,arguments),window.open("/business-class","_blank");
},t}(o)},{}],249:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=e(244),i=e(438),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.tagName="span",t.prototype.className="member-boards-list-ad",t.prototype.render=function(){return this.$el.html(i.fill("member_boards_list_ad",{copyHtml:this.copyHtml()})),this},t.prototype.copy=function(){return""},t}(n)},{}],250:[function(e,t,r){var n,o;n=e("react"),o=e(433)("paid_product_info"),t.exports=n.createClass({displayName:"PaidProductBannerComponent",render:o.renderable(function(){var e,t,r,n,i,s;return n=this.props,i=n.stringsKey,s=n.subtitleCount,r=n.infoUrl,e=n.epilogueCount,t=n.icon,o.div(".business-class-new-intro.u-gutter.u-clearfix",function(){return o.div(".business-class-new-intro-header",{style:{marginBottom:"25px"}},function(){var e,t,r;for(o.h1(".business-class-new-intro-header-title",function(){return o.format([i,"title"])}),t=e=0,r=s;r>=0?r>e:e>r;t=r>=0?++e:--e)o.p(".business-class-new-intro-header-text",function(){return o.format([i,"subtitles",t])})}),o.ul(".business-class-new-intro-list",function(){var e,r;for(r=e=0;3>e;r=++e)o.icon(t,{class:"business-class-new-intro-list-icon"}),o.li(".business-class-new-intro-list-item",function(){return o.h3(function(){return o.format([i,"featureHeaders",r])}),o.p(function(){return o.format([i,"featureBodies",r])})})}),e&&o.div(".business-class-new-intro-header",function(){var t,r,n;for(r=t=0,n=e;n>=0?n>t:t>n;r=n>=0?++t:--t)o.p(function(){return o.format([i,"epilogue",r])})}),o.div(".business-class-new-intro-more",function(){return o.a(".business-class-new-intro-more-link.quiet-button",{href:r,target:"_blank"},function(){return o.format([i,"link"])})})})})})},{}],251:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=e(244),i=e(438),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.className="pop-over-list-ad",t.prototype.render=function(){return this.$el.html(i.fill("pop_over_ad",{copyHtml:this.copyHtml(),iconClass:this.iconClass()})),this},t.prototype.copyHtml=function(){return""},t}(n)},{}],252:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h=function(e,t){function r(){this.constructor=e}for(var n in t)m.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},m={}.hasOwnProperty;n=e("jquery"),i=e(454),s=e(456),a=e(458),u=e(240),c=e(441),l=e(127),d=e("underscore"),p=e(38),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.initialize=function(){var e,t;this.updatePinnedDrawer(),l.ensureRun(),this.listenTo(u,"change:pinBoardsListSidebar",function(){return this.updatePinnedDrawer()}),t=function(e){l.calc(),a.onWindowResize(),i.isVisible&&i.calcPos()},e=this.debounce(t,300),n(window).on("resize.windowEvent",e)},t.prototype.updatePinnedDrawer=function(){return n("body").toggleClass("body-pinned-drawer",u.getPinSidebar())},t}(c)},{}],253:[function(e,t,r){var n,o,i,s,a,u,c,l=function(e,t){function r(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d={}.hasOwnProperty;o=e(255),i=e(256),s=e(109),a=e(441),c=e(438),u=e(84),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="archive",t.prototype.className="board-menu-content-frame",t.prototype.events={"click .js-switch-section":"didClickSwitchSections","input .js-search":"searchChanged"},t.prototype.initialize=function(){return this.searchText=this.slot(""),this.cardsView=this.subview(o,this.model,{searchText:this.searchText}).render(),this.listsView=this.subview(i,this.model,{searchText:this.searchText}).render(),this.activeSubview=this.slot(this.cardsView)},t.prototype.searchChanged=function(){return this.searchText.set(this.$searchInput.val().trim())},t.prototype.didClickSwitchSections=function(e){var t;return t=function(e,t,r){return e===t?r:t},this.activeSubview.set(t(this.activeSubview.get(),this.cardsView,this.listsView)),this.$searchInput.focus(),s.stop(e)},t.prototype.injectSubview=function(e){return this.$(".js-archive-content").append(e.el),e.didBecomeActive()},t.prototype.renderOnce=function(){return this.$el.html(c.fill("board_archive")),this.$searchInput=this.$(".js-search"),this.subscribeChanges(this.activeSubview,{in:this.injectSubview,out:function(e){return e.$el.detach()}}),this.watch("activeSubview",function(e){return function(t){var r;return r=t===e.cardsView?"switch to archived lists":"switch to archived cards",e.$(".js-switch-section").text(u(r))}}(this)),this.watch("activeSubview.isLoading",function(e){return function(t){return e.$(".js-loading-spinner").toggleClass("hide",!t),e.$(".js-archive-content").toggleClass("hide",t)}}(this)),this},t}(a)},{}],254:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h=function(e,t){function r(){this.constructor=e}for(var n in t)m.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},m={}.hasOwnProperty;n=e("jquery"),i=e(373),s=e(452),a=e(5),u=e(454),c=e(109),l=e(441),d=e(438),p=e(38),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.tagName="div",t.prototype.className="archived-list-card",t.prototype.events={"click .list-card":"openCard","click .js-delete":"deleteModel","click .js-reopen":"reopen"},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t,r;return t={reOpenText:this.options.reOpenText,canDelete:null!=(r=this.options.canDelete)?r:!1},e=this.subview(i,this.model,{dontFilter:!0}),e.render(),this.$el.append(e.el),this.$el.append(d.fill("archived_card_options",t,{editable:this.model.editable()})),this},t.prototype.openCard=function(e){c.stop(e),a.showCardDetail(this.model),u.calcPos()},t.prototype.deleteModel=function(e){var t;c.stop(e),s.toggle("delete card",{elem:null!=(t=n(e.target).closest(".js-delete"))?t[0]:void 0,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.destroy(),p("Card","Delete","Via Archive")}}(this)})},t.prototype.reopen=function(e){return c.preventDefault(e),this.model.update({closed:!1},function(e){return function(){return p("Card","Reopen","Via Archive")}}(this)),!1},t}(l)},{}],255:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h=function(e,t){function r(){this.constructor=e}for(var n in t)m.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},m={}.hasOwnProperty,f=[].slice;n=e(254),i=e(66),s=e("hearsay"),a=e(30),u=e(441),c=e("underscore"),p=e(438),d=e(84),l=e(209),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var r,o,s;return h(t,e),t.prototype.CARDS_PER_PAGE=30,o={},s=function(e){var t;return t=o,{lease:function(){var r;return r=function(){(t===o||r===t)&&e.apply(this,arguments)},t=r,r}}},t.prototype.initialize=function(e){var t;return this.searchText=e.searchText,this.isLoadingInitialCards=this.slot(!1),this.isLoadingMoreCards=this.slot(!1),this.isLoadingSearchResults=this.slot(!1),this.isLoading=this.using(this.isLoadingInitialCards.or(this.isLoadingSearchResults)),this.isSearching=this.using(this.searchText.map(function(e){return e.length>0}).distinct()),this.hasMoreCards=this.slot(!1),this.searchResults=this.slot([]),this.sortedContiguousCards=this.slot([]),this.updateSearchCallback=s(function(e){return function(t){var r;return r=t.map(function(t){return e.modelCache.get("Card",t.id)}),e.searchResults.set(r),e.isLoadingSearchResults.set(!1)}}(this)),t=function(e){return function(t){return e.sortedContiguousCards.set(c.without(e.sortedContiguousCards.get(),t)),e.searchResults.set(c.without(e.searchResults.get(),t))}}(this),this.listenTo(this.modelCache,{"remove:Card":t,"change:Card:closed":function(e){return function(r){r.get("idBoard")===e.model.id&&(r.get("closed")?e.sortedContiguousCards.set([r].concat(f.call(e.sortedContiguousCards.get()))):t(r))}}(this)}),this.cards=this.using(this.isSearching.if(this.searchResults,this.sortedContiguousCards))},t.prototype.events={"click .js-more-cards":"getMoreCards"},r=!1,t.prototype.didBecomeActive=function(){var e;if(!this.hasBeenActiveBefore)return this.hasBeenActiveBefore=!0,e={limit:this.CARDS_PER_PAGE},this.isLoadingInitialCards.set(!0),a.loadClosedCards(this.model.id,e).tap(l(this,"didLoadContiguousCards")).finally(function(e){return function(){return e.isLoadingInitialCards.set(!1)}}(this)).done()},t.prototype.didLoadContiguousCards=function(e){var t,r;return this.hasMoreCards.set(e.length===this.CARDS_PER_PAGE),r=c.sortBy(e,function(e){return function(t){return-e.cardSortRank(t)}}(this)),t=f.call(this.sortedContiguousCards.get()).concat(f.call(r)),this.sortedContiguousCards.set(c.uniq(t))},t.prototype.cardSortRank=function(e){var t,r;return null!=(r="function"==typeof(t=i.parse(e.get("dateLastActivity"))).getTime?t.getTime():void 0)?r:null},t.prototype.getMoreCards=function(){var e,t;return e=c.last(this.sortedContiguousCards.get()),t={limit:this.CARDS_PER_PAGE,before:null!=e?this.cardSortRank(e):null},this.isLoadingMoreCards.set(!0),a.loadClosedCards(this.model.id,t).tap(l(this,"didLoadContiguousCards")).finally(function(e){return function(){return e.isLoadingMoreCards.set(!1)}}(this)).done()},t.prototype.vigor=t.VIGOR.SOME,t.prototype.renderOnce=function(){var e,t;return this.$el.html(p.fill("archived_cards")),this.watch("isLoadingMoreCards",function(e){return this.$(".js-more-cards").attr("disabled",e)}),t=this.hasMoreCards.and(this.isSearching.not()),this.subscribe(t,function(e){return this.$(".js-more-cards").toggleClass("hide",!e)}),this.watch("isSearching",function(e){var t;return t=e?"no results":"no archived cards",this.$(".js-empty-message").text(d(t))}),this.watch("cards",function(e){return this.$(".js-empty-message").toggleClass("hide",e.length>0)}),this.watch("isLoadingSearchResults",function(e){return this.$(".js-search-loading").toggleClass("hide",!e)}),e=this.debounce(this.loadSearchResults,400),this.subscribe(this.searchText.filter(function(e){return e.length>0}),function(){return this.isLoadingSearchResults.set(!0),e.call(this)}),this.subscribe(this.cards,this.frameDebounce(this.renderCards))},t.prototype.loadSearchResults=function(){var e;return e={query:"is:archived "+this.searchText.get(),modelTypes:"cards",idBoards:this.model.id,card_stickers:!0,card_attachments:"cover",partial:!0},a.loadSearchData(e).get("cards").then(this.updateSearchCallback.lease()).done()},t.prototype.renderCards=function(){var e,t,r;e=this.$(".js-archive-items"),e.children().detach(),r=function(){var e,r,o,i;for(o=this.cards.get(),i=[],e=0,r=o.length;r>e;e++)t=o[e],i.push(this.subview(n,t,{reOpenText:d("unarchive card"),canDelete:!0}));return i}.call(this),this.appendSubviews(r,e)},t}(u)},{}],256:[function(e,t,r){var n,o,i,s,a,u,c,l,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p={}.hasOwnProperty,h=[].slice;o=e(257),i=e(30),s=e(109),a=e(441),u=e("underscore"),l=e(438),c=e(84),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.initialize=function(e){return this.searchText=e.searchText,this.isLoading=this.slot(!0),this.allArchivedLists=this.slot([]),this.sortedFilteredLists=this.allArchivedLists.combine(this.searchText).map(function(e){var t,r,n;return r=e[0],n=e[1],""===n?r:(t=s.buildFuzzyMatcher(n),u.filter(r,function(e){return t(e.get("name"))}))}).map(function(e){return u.sortBy(e,function(e){return e.get("name")})}),this.using(this.sortedFilteredLists),this.listenTo(this.modelCache,"change:List:closed",function(e){return function(t){return t.get("closed")?e.allArchivedLists.set([t].concat(h.call(e.allArchivedLists.get()))):e.allArchivedLists.set(u.without(e.allArchivedLists.get(),t))}}(this))},t.prototype.hasBeenActiveBefore=!1,t.prototype.didBecomeActive=function(){this.hasBeenActiveBefore||(this.hasBeenActiveBefore=!0,i.loadArchivedLists(this.model.id).then(function(e){return function(t){var r;return r=e.modelCache.find("List",function(t){return t.get("idBoard")===e.model.id&&t.get("closed")}),e.allArchivedLists.set(r),e.isLoading.set(!1)}}(this)))},t.prototype.vigor=t.VIGOR.SOME,t.prototype.renderOnce=function(){return this.$el.html(l.fill("archived_lists")),this.watch("searchText",function(e){var t;return t=0===e.length?"no archived lists":"no results",this.$(".js-empty-message").text(c(t))}),this.watch("sortedFilteredLists",function(e){return this.$(".js-empty-message").toggleClass("hide",e.length>0)}),this.watch("sortedFilteredLists",this.frameDebounce(this.renderLists))},t.prototype.renderLists=function(){var e,t;return this.$(".js-archive-items").children().detach(),e=function(){var e,r,n,i;for(n=this.sortedFilteredLists.get(),i=[],e=0,r=n.length;r>e;e++)t=n[e],i.push(this.subview(o,t,{reOpenText:c("unarchive list"),canDelete:!1}));return i}.call(this),this.appendSubviews(e,this.$(".js-archive-items")),this},t}(a)},{}],257:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e(458),i=e(109),s=e(441),a=e(438),u=e(38),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.tagName="li",t.prototype.className="u-clearfix",t.prototype.events={"click .js-reopen":"reopen"},t.prototype.canReopen=function(){return null!=this.model.owned?this.model.owned():this.model.editable()},t.prototype.render=function(){var e,t;return t=this.model.toJSON(),t.reOpenText=this.options.reOpenText,t.url="function"==typeof(e=this.model).getUrl?e.getUrl():void 0,this.$el.html(a.fill("archive_item",t,{editable:this.canReopen()})),this},t.prototype.reopen=function(e){return i.preventDefault(e),o.hide(),this.model.update({closed:!1},function(e){return function(){var t;return u(e.model.typeName,"Reopen","Via Archive"),"function"==typeof(t=e.options).onReopen?t.onReopen(e.model):void 0}}(this)),!1},t}(s)},{}],258:[function(e,t,r){var n,o,i,s,a,u,c,l=function(e,t){function r(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d={}.hasOwnProperty;n=e(257),i=e(5),s=e(441),c=e(438),u=e(84),a=e(209),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.initialize=function(){return this.listenTo(this.model.boardList,{"change:closed add remove reset":this.frameDebounce(this.render)})},t.prototype.render=function(){var e,t,r,o;return t=this.model.boardList,r={empty:0===t.filter(function(e){return e.get("closed")}).length},this.$el.html(c.fill("closed_boards",r)),e=this.$(".js-archive-items"),o=t.filter(a.method("get","closed")).map(function(e){return function(t){return e.subview(n,t,{onReopen:e.onReopen.bind(e),reOpenText:u("unarchive board")})}}(this)),this.appendSubviews(o,e),this},t.prototype.onReopen=function(e){return i.displayBoard({idBoard:e.id}).done()},t}(s)},{}],259:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x=function(e,t){function r(){this.constructor=e}for(var n in t)j.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},j={}.hasOwnProperty;g=e("underscore"),n=e(261),i=e(402),s=e(65),a=e(452),u=e(66),c=e(27),b=e(430),l=e(426),d=e(429),p=e(574),h=e(458),m=e(109),f=e(441),v=e(84),w=e(436)("plugin_attachment_thumbnail"),_=e(599),k=e(38),C=e("xtend"),y=w.renderable(function(e){var t,r,n,o,i,s,a,u,c,l,d;d=e.url,c=e.openText,t=e.canRemove,o=e.image,l=e.title,r=e.created,n=e.createdBy,a=e.modified,u=e.modifiedBy,i=e.initialize,(null==o||null==o.url)&&(o={url:""}),s={href:d,target:d,title:l},o.logo?w.a(".attachment-thumbnail-preview",g.clone(s),function(){return w.span(".attachment-thumbnail-preview-power-up-logo",function(){return w.img({class:"attachment-thumbnail-preview-power-up-logo-image",src:o.url+"?color=999"})})}):w.a(".attachment-thumbnail-preview",C(s,{style:w.stylify({"background-image":o.url?w.urlify(o.url):void 0,"background-position-y":"top"===o.y?"0px":void 0,"background-position-x":"left"===o.x?"0px":void 0,"background-size":function(){switch(o.size){case"cover":return"cover";case"original":return"inherit";default:return"contain"}}()})})),w.p(".attachment-thumbnail-details",function(){var e,o;return w.a(".attachment-thumbnail-details-title",g.clone(s),function(){return w.text(l),null!=r&&w.span(".u-block.quiet",function(){return null!=n?w.format("created-by",{date:r,user:n}):w.format("created",{date:r})}),null!=a?w.span(".u-block.quiet",function(){return null!=u?w.format("modified-by",{date:a,user:u}):w.format("modified",{date:a})}):void 0}),null!=i&&"iframe"===i.type&&(o=i.url,e=i.height,w.iframe(".plugin-iframe.plugin-thumbnail-initialize",{src:o,style:e?"height:"+e+"px;":void 0})),w.span(".quiet.attachment-thumbnail-details-options",function(){return w.a(".attachment-thumbnail-details-options-item.dark-hover",g.clone(s),function(){return w.icon("external-link"),w.text(" "),w.span(".attachment-thumbnail-details-options-item-text.js-direct-link",function(){return w.text(c)})}),t?w.a(".attachment-thumbnail-details-options-item.attachment-thumbnail-details-options-item-delete.dark-hover.js-confirm-delete",{href:"#"},function(){return w.icon("close"),w.text(" "),w.span(".attachment-thumbnail-details-options-item-text",function(){return w.format("remove")})}):void 0})})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.className="attachment-thumbnail",t.prototype.events={"click .js-open-viewer":"openViewer","click .js-direct-link":"dontOpenViewer","click .js-download":"download","click .js-make-cover":"makeCover","click .js-remove-cover":"removeCover","click .js-confirm-delete":"confirmDelete"},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t;return t=this.model.getCard(),e=t.getBoard(),this.subscribe(b(e,t).combine(t.snoop("idAttachmentCover").combine(this.model.snoop("previews"))),function(e){return function(){return e.renderPluginThumbnail().catch(d.Error.NotHandled,function(){return e.renderNormal()}).done()}}(this)),this},t.prototype.renderPluginThumbnail=function(){var e,t;return t=this.model.getCard(),e=t.getBoard(),d.one({command:"attachment-thumbnail",card:t,board:e,options:l.attachment(this.model)}).then(function(r){return function(n){return r.$el.html(y(C({url:r.model.get("url"),title:r.model.get("name"),openText:v("attachments.trello.open")},n,{canRemove:r.model.editable(),created:n.created?new Date(n.created):void 0,modified:n.modified?new Date(n.modified):void 0}))),u.update(r.el),r.initIFrames(e,t)}}(this)).return()},t.prototype.renderNormal=function(){return n.getAttachmentData(this.model).then(function(e){return function(t){var r,o,i,a,l,d,p;return t.canUseViewer="dropbox"!==e.model.getServiceKey()&&n.isViewerable(t.ext)&&!s.isTouch(),a=e.model.smallestPreviewBiggerThan(110,80),s.isHighDPI()&&(i=e.model.smallestPreviewBiggerThan(220,160),a=null!=i?i:a),null!=a&&(o=e.model.getCard(),p=null!=(l=o.getBoard())&&null!=(d=l.get("prefs"))?d.cardCovers:void 0,t.isCover=p&&o.get("idAttachmentCover")===e.model.id,t.imgSrc=a.url),t.isUpload=e.model.get("isUpload"),t.editable=e.model.editable(),e.$el.html(_(t)),e.renderCoverState(),u.update(e.el),t.isKnownService?(r=e.$(".js-attachment-thumbnail-details"),c.thumbnailHtml(t.url,t,function(e,t){return null==e&&null!=t?(r.html(t),u.update(r)):void 0})):void 0}}(this)).done(),this},t.prototype.openViewer=function(e){e.metaKey||e.ctrlKey||(m.stop(e),i.isActive()||(i.show({model:this.model.getCard(),attachmentModel:this.model}),k("Attachment","Open Attachment Viewer",this.model.getType())))},t.prototype.dontOpenViewer=function(e){return e.stopPropagation()},t.prototype.renderCoverState=function(){var e,t,r,n,o,i,s,a;r=null!=(o=this.model.getCard())&&null!=(i=o.getBoard())?i.getPref("cardCovers"):void 0,e=this.$(".js-make-cover").addClass("hide"),t=this.$(".js-remove-cover").addClass("hide"),(null!=(s=this.model.get("previews"))?s.length:void 0)>0&&r&&(n=(null!=(a=this.model.getCard())?a.get("idAttachmentCover"):void 0)===this.model.id,e.toggleClass("hide",n),t.toggleClass("hide",!n))},t.prototype.download=function(e){m.stopPropagation(e),k("Attachment","Attachment Thumbnail","Download")},t.prototype.makeCover=function(e){m.stop(e),h.hide(),this.model.getCard().makeCover(this.model),k("Attachment","Attachment Thumbnail","Make Cover")},t.prototype.removeCover=function(e){m.stop(e),h.hide(),this.model.getCard().removeCover(null),k("Attachment","Attachment Thumbnail","Remove Cover")},t.prototype.confirmDelete=function(e){var t;m.stop(e),t=this.model.get("isUpload")?"delete attachment":"remove attachment",a.toggle(t,{elem:this.$(".js-confirm-delete"),model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.destroy(),k("Attachment","Delete Attachment",e.model.getType())}}(this)}),k("Attachment","Attachment Thumbnail","Confirm Delete")},t}(p)},{}],260:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g=function(e,t){function r(){this.constructor=e}for(var n in t)v.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},v={}.hasOwnProperty,y=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};n=e("jquery"),o=e(261),s=e(66),a=e(16),u=e(458),c=e(439),l=e(109),d=e(441),p=e("underscore"),m=e(438),f=e(38),h=e(84),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),t.prototype.className="attachment-viewer",t.prototype.initialize=function(){var e,t;return u.hide(),this.allowsCardCovers=null!=(t=this.model.getBoard())?t.getPref("cardCovers"):void 0,this.currentAttachment=this.options.attachmentModel,e=this.options.idAttachment,null!=e?this.currentAttachment=this.model.attachmentList.find(function(t){return t.id===e}):void 0},t.prototype.events={"click .js-show-next-frame":"showNextFrame","click .js-show-prev-frame":"showPrevFrame","mouseenter .js-show-next-frame":"hintNextFrame","mouseenter .js-show-prev-frame":"hintPrevFrame","mouseleave .js-show-next-frame":"clearHint","mouseleave .js-show-prev-frame":"clearHint","click .js-stop":"stop","click .js-close-viewer":"close","click .js-open-delete-confirm":"openDeleteConfirm","click .js-close-delete-confirm":"closeDeleteConfirm","click .js-delete":"delete","click .js-make-cover":"makeCover","click .js-remove-cover":"removeCover",shortcut:"shortcut"},t.prototype.shortcut=function(e){switch(e){case a.Escape:return this.close(),["Esc - Close Attachment Viewer","Attachment Viewer"];case a.ArrowRight:return this.showNextFrame(),["Right Arrow - Next Attachment","Attachment Viewer"];case a.ArrowLeft:return this.showPrevFrame(),["Left Arrow - Previous Attachment","Attachment Viewer"]}},t.prototype.getAttachmentModels=function(){return this.model.attachmentList.models},t.prototype.getAttachmentModelsLength=function(){return this.getAttachmentModels().length},t.prototype.getCurrentAttachmentIndex=function(){return p.indexOf(this.getAttachmentModels(),this.currentAttachment)},t.prototype.getNextAttachmentIndex=function(){var e;return e=this.getCurrentAttachmentIndex()+1,e>=this.getAttachmentModelsLength()?null:e},t.prototype.getNextModel=function(){var e;return e=this.getNextAttachmentIndex(),null!=e?this.getAttachmentModels()[e]:null},t.prototype.getPrevAttachmentIndex=function(){var e;return e=this.getCurrentAttachmentIndex()-1,0>e?null:e},t.prototype.getPrevModel=function(){var e;return e=this.getPrevAttachmentIndex(),null!=e?this.getAttachmentModels()[e]:null},t.prototype.render=function(){var e,t,r;return e=this.model.toJSON(),e.numAttachments=this.getAttachmentModelsLength(),this.$el.html(m.fill("attachment_viewer",e)),this.addNewFrame(this.currentAttachment,"center"),t=this.getNextModel(),null!=t&&this.addNewFrame(t,"right"),r=this.getPrevModel(),null!=r&&this.addNewFrame(r,"left"),this.setDetailsAndControls(),c.addHandler(this,{scope:"attachment_viewer",modal:!0}),this},t.prototype.setDetailsAndControls=function(){o.getAttachmentData(this.currentAttachment).then(function(e){return function(t){var r,n;return t.canMakeCover=e.allowsCardCovers&&(null!=(n=t.previews)?n.length:void 0)>0,t.isCover=e.allowsCardCovers&&e.model.get("idAttachmentCover")===e.currentAttachment.id,r=e.currentAttachment.get("isUpload")?"delete attachment":"remove attachment",p.extend(t,{removeButtonText:h([r,"button"]),removeMessageText:h([r,"message"]),removeConfirmText:h([r,"confirm"]),removeCancelText:h([r,"cancel"])}),e.$(".js-display-frame-details").html(m.fill("attachment_viewer_frame_details",t,{editable:e.model.editable()})),e.$(".js-show-prev-frame").toggleClass("hide",null==e.getPrevAttachmentIndex()),e.$(".js-show-next-frame").toggleClass("hide",null==e.getNextAttachmentIndex()),s.update(e.el)}}(this)).done()},t.prototype.addNewFrame=function(e,t){return o.getAttachmentData(e).then(function(e){return function(r){var i,s,a,u,c,d,p,h,f,g,v,b,w,_;return null!=t&&(r.directionClass="attachment-viewer-frame-"+t),p=r.ext,u=y.call(o.imageExts(),p)>=0||(null!=(h=r.previews)?h.length:void 0)>0,f=r.ext,i=y.call(o.audioExts(),f)>=0,g=r.ext,c=y.call(o.videoExts(),g)>=0,v=r.ext,a=y.call(o.iFrameableExts(),v)>=0,b=r.ext,s=y.call(o.googleViewerableExts(),b)>=0,r.isExternal?r.isPlaceholder=!0:u?(r.isImage=!0,null!=r.previews&&null!=(d=null!=(w=l.biggestPreview(r.previews))?w.url:void 0)&&(r.url=d)):i?r.isAudio=!0:c?r.isVideo=!0:a?r.isIFrameable=!0:s?(r.isIFrameable=!0,_=encodeURIComponent(r.url),r.url="https://docs.google.com/viewer?embedded=true&url="+_):(r.isPlaceholder=!0,r.openText="Download"),e.$(".js-frames").append(m.fill("attachment_viewer_frame",r,{editable:e.model.editable()})),e.defer(function(){return n(".attachment-viewer-frame").addClass("attachment-viewer-frame-loaded")})}}(this)).done(),this},t.prototype.focusFrame=function(e,t){var r,o,i,s;switch(this.currentAttachment=e,r=p.find(this.$(".attachment-viewer-frame"),function(t){return function(t){return n(t).attr("data-idAttachment")===e.id}}(this)),t){case"right":o=this.$(".attachment-viewer-frame-left"),s="attachment-viewer-frame-left",i=this.getNextModel();break;case"left":o=this.$(".attachment-viewer-frame-right"),s="attachment-viewer-frame-right",i=this.getPrevModel()}this.$(".attachment-viewer-frame-center").removeClass("attachment-viewer-frame-center").addClass(s),n(r).removeClass("attachment-viewer-frame-left attachment-viewer-frame-right").addClass("attachment-viewer-frame-center"),o.remove(),null!=i?this.addNewFrame(i,t):this.clearHint(),this.setDetailsAndControls()},t.prototype.showNextFrame=function(e){var t;l.stop(e),t=this.getNextModel(),null!=t&&this.focusFrame(t,"right"),f("Attachment Viewer","Show Next Frame")},t.prototype.showPrevFrame=function(e){var t;l.stop(e),t=this.getPrevModel(),null!=t&&this.focusFrame(t,"left"),f("Attachment Viewer","Show Previous Frame")},t.prototype.hintNextFrame=function(){this.$el.addClass("attachment-viewer-frames-next-hint")},t.prototype.hintPrevFrame=function(){this.$el.addClass("attachment-viewer-frames-prev-hint")},t.prototype.clearHint=function(){this.$el.removeClass("attachment-viewer-frames-next-hint attachment-viewer-frames-prev-hint")},t.prototype.stop=function(e){return l.stopPropagation(e)},t.prototype.openDeleteConfirm=function(e){l.stop(e),this.$(".js-meta").addClass("hide"),this.$(".js-confirm-delete").removeClass("hide"),f("Attachment Viewer","Open Delete Attachment Confirm")},t.prototype.closeDeleteConfirm=function(e){l.stop(e),this.$(".js-meta").removeClass("hide"),this.$(".js-confirm-delete").addClass("hide"),f("Attachment Viewer","Close Delete Attachment Confirm")},t.prototype.delete=function(e){l.stop(e),this.currentAttachment.destroy(),this.close(),f("Attachment Viewer","Delete Attachment")},t.prototype.renderToggleCover=function(){var e,t;e=this.allowsCardCovers&&this.currentAttachment.get("previews").length>0,this.$(".js-cover-options").toggleClass("hide",!e),t=this.allowsCardCovers&&this.model.get("idAttachmentCover")===this.currentAttachment.id,this.$(".js-make-cover-box").toggleClass("hide",t),this.$(".js-remove-cover-box").toggleClass("hide",!t)},t.prototype.makeCover=function(){this.model.makeCover(this.currentAttachment),this.renderToggleCover(),f("Attachment Viewer","Make Cover")},t.prototype.removeCover=function(){this.model.removeCover(null),this.renderToggleCover(),f("Attachment Viewer","Remove Cover")},t.prototype.close=function(){this.remove(),c.removeHandler(this),f("Attachment Viewer","Close Viewer")},t}(d)},{}],261:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};n=e(65),o=e(86),i=e(27),s=e("bluebird"),a=e(109),l=e(100),d=e("xtend"),u=e("underscore"),c=e(84),t.exports=function(){return{getAttachmentData:function(e){var t,r;return t=e.get("url"),r=e.getServiceKey(),i.interpret(t,e.modelCache).then(function(t){return function(t){var i;if(null!=t)return{isKnownService:!0,meta:t.name,previewClass:t.previewClass,name:t.text};switch(r){case"trello":return i=n.respectsCrossDomainDownloadAttribute(),{meta:o.bytes(e.get("bytes")),openText:c(i?"attachments.trello.download":"attachments.trello.open"),doDownload:i,openIconClass:i?"download":"external-link",isExternal:!1};case"gdrive":return{meta:l(["mime",e.get("mimeType")]),previewClass:"attachment-thumbnail-preview-google-drive-logo"};case"dropbox":return{previewClass:"attachment-thumbnail-preview-dropbox-logo"};case"onedrive":return{previewClass:"attachment-thumbnail-preview-one-drive-logo"};case"box":return{previewClass:"attachment-thumbnail-preview-box-logo"};case"other":return{ext:"LINK"}}}}(this)).then(function(n){var o,i;return o=d({doDownload:!1,isKnownService:!1,isExternal:!0,openIconClass:"external-link"},e.toJSON(),n),null==o.meta&&(o.meta=c(["attachments",r,"type"])),null==o.openText&&(o.openText=c(["attachments",r,"open"])),null==o.removeText&&(o.removeText=c(["attachments",r,"remove"])),null==o.ext&&(o.ext=null!=(i=a.fileExt(e.get("name")))?i:a.fileExt(t),null!=o.ext&&o.ext.length>6&&(o.ext=null)),o})},availableExts:function(){var e,t,r,n,o;if(null==this._availableExts){for(e=[],o=navigator.mimeTypes,t=0,r=o.length;r>t;t++)n=o[t],e=e.concat(n.suffixes.split(","));this._availableExts=u.compact(u.uniq(e))}return this._availableExts},imageExts:function(){return["bmp","gif","jpeg","jpg","png","svg","webp"]},getPlayableExts:function(e,t){var r;return r=document.createElement(t),u.chain(e).filter(function(e){var t;return t=e.types,u.any(t,function(e){return""!==r.canPlayType(e)})}).pluck("exts").flatten().value()},audioExts:function(){var e;return this._audioExts?this._audioExts:(e=[{exts:["m4a"],types:["audio/x-m4a;","audio/aac;"]},{exts:["mp3"],types:["audio/mpeg;"]},{exts:["opus"],types:['audio/ogg; codecs="opus"']},{exts:["ogg"],types:['audio/ogg; codecs="vorbis"']},{exts:["wav"],types:['audio/wav; codecs="1"']}],this._audioExts=this.getPlayableExts(e,"audio"))},videoExts:function(){var e;return this._videoExts?this._videoExts:(e=[{exts:["mp4"],types:['video/mp4; codecs="mp4v.20.8"']},{exts:["mov","h264"],types:['video/mp4; codecs="avc1.42E01E"','video/mp4; codecs="avc1.42E01E, mp4a.40.2"']},{exts:["ogv"],types:['video/ogg; codecs="theora"']},{
exts:["webm"],types:['video/webm; codecs="vp8, vorbis"']}],this._videoExts=this.getPlayableExts(e,"video"))},googleViewerableExts:function(){var e;return e=["doc","docx","ppt","pptx","rtf","xls","xlsx"],p.call(this.availableExts(),"pdf")>=0||e.push("pdf"),null!=this._googleViewerableExts?this._googleViewerableExts:this._googleViewerableExts=e},iFrameableExts:function(){var e,t;return e=["css","js","txt"],t=["pdf"],null!=this._iFrameableExts?this._iFrameableExts:this._iFrameableExts=u.intersection(t,this.availableExts()).concat(e)},allViewerableExts:function(){return null!=this._viewerableExts?this._viewerableExts:(this._viewerableExts=this.imageExts().concat(this.audioExts()).concat(this.videoExts()).concat(this.googleViewerableExts()).concat(this.iFrameableExts()),this._viewerableExts)},isViewerable:function(e){return p.call(this.allViewerableExts(),e)>=0}}}()},{}],262:[function(e,t,r){var n,o,i,s;s=e(438),n=e("jquery"),i=e("underscore"),t.exports=o=function(){function e(e,t){var r,o;this.badgesView=e,this.modelCache=t.modelCache,null==this.$el&&(this.$el=n("<div>")),this.dependentBadges.length>0&&(o=function(){var e,t,n,o;for(n=this.dependentBadges,o=[],e=0,t=n.length;t>e;e++)r=n[e],o.push("change:badges."+r);return o}.call(this),this.badgesView.listenTo(this.badgesView.model,o.join(" "),function(e){return function(){return e.render()}}(this)))}return e.prototype.shouldUpdate=!0,e.prototype.dependentBadges=[],e.prototype.additionalClasses=[],e.prototype.rendered=!1,e.prototype.visible=function(){throw new Error("Badge subclasses must specify a `visible` predicate")},e.prototype.update=function(){return this.shouldUpdate&&this.$el.attr("title",i.result(this,"title")).find(".badge-text").html(this.text?i.result(this,"text"):""),this},e.prototype.remove=function(){var e;return null!=(e=this.$el)&&e.detach(),this.rendered=!1},e.prototype.render=function(){var e,t,r;return this.rendered?(this.visible()?this.update():this.remove(),this):this.visible()?(r=this.text?i.result(this,"text"):"",t=i.result(this,"icon"),this.$el.attr("title",i.result(this,"title")).attr("class","").addClass("badge").addClass(i.result(this,"additionalClasses").join(" ")).toggleClass("is-icon-only",!r).html(s.fill("badge",{text:r,icon:t})),e=i.find(this.badgesView.badges,function(e){return function(t){return t.rendered&&t.position>e.position}}(this)),null==e?this.badgesView.$el.append(this.$el):this.$el.insertBefore(e.$el),this.rendered=!0,this):this},e.prototype.badge=function(e){var t;return null!=(t=this.badgesView.model.get("badges"))?t[e]:void 0},e}()},{}],263:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;n=e("jquery"),i=e(558),s=e(441),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.className="badges",t.prototype.initialize=function(e){var t;t=e.badges,this.badges=t.map(function(e){return function(t){return new t(e,{modelCache:e.modelCache})}}(this))},t.prototype.render=function(){var e;return this.$el.append(function(){var t,r,n,o;for(n=this.badges,o=[],t=0,r=n.length;r>t;t++)e=n[t],e.visible()&&o.push(e.render().$el);return o}.call(this)),this.appendSubview(this.subview(i,this.model)),this},t.prototype.remove=function(){var e,r,n,o,i;for(t.__super__.remove.apply(this,arguments),o=this.badges,i=[],r=0,n=o.length;n>r;r++)e=o[r],i.push(e.remove());return i},t}(s)},{}],264:[function(e,t,r){var n,o,i;n=e("react"),i=e(433)(),o=e(111),t.exports=n.createClass({displayName:"BoardListItemBadgeComponent",render:i.renderable(function(){var e,t,r,n,o;return r=this.props,e=r.icon,n=r.text,o=r.title,t=r.iconClass,i.span(".board-tile-badges-item",{title:o},function(){return i.icon(e,{class:["board-tile-badges-item-icon",t].join(" ")}),null!=n?i.span(".board-tile-badges-item-name",function(){return i.text(n)}):void 0})}),shouldComponentUpdate:o})},{}],265:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h=function(e,t){function r(){this.constructor=e}for(var n in t)m.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},m={}.hasOwnProperty;i=e(262),d=e("underscore"),p=e(84),c=function(e){function t(){var e,r;t.__super__.constructor.apply(this,arguments),this._cachedNotificationCount=null,r=function(){var t,r,n,o;for(n=["add","remove","change"],o=[],t=0,r=n.length;r>t;t++)e=n[t],o.push(e+":Notification:"+this.badgesView.model.id);return o}.call(this),this.badgesView.listenTo(this.modelCache,r.join(" "),function(e){return function(){return e._cachedNotificationCount=null,e.render()}}(this))}return h(t,e),t.prototype.icon="notification",t.prototype.position=0,t.prototype.visible=function(){return this.notificationCount()>0},t.prototype.notificationCount=function(){return null==this._cachedNotificationCount&&(this.badgesView.model.id?this._cachedNotificationCount=d.count(this.modelCache.all("Notification"),function(e){return function(t){var r,n;return t.get("unread")&&(null!=(r=t.get("data"))&&null!=(n=r.card)?n.id:void 0)===e.badgesView.model.id}}(this)):this._cachedNotificationCount=0),this._cachedNotificationCount},t.prototype.text=function(){return this.notificationCount().toString()},t.prototype.title=function(){return p("badge.notifications")},t.prototype.additionalClasses=["is-unread-notification"],t}(i),l=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.badgesView.listenTo(this.badgesView.model,"change:subscribed",function(e){return function(){return e.render()}}(this))}return h(t,e),t.prototype.shouldUpdate=!1,t.prototype.position=1,t.prototype.icon="subscribe",t.prototype.visible=function(){return this.badgesView.model.get("subscribed")},t.prototype.title=function(){return p("badge.subscribed")},t}(i),u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.shouldUpdate=!1,t.prototype.position=3,t.prototype.dependentBadges=["description"],t.prototype.icon="description",t.prototype.title=function(){return p("badge.description")},t.prototype.visible=function(){return this.badge("description")},t}(i),a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.position=4,t.prototype.dependentBadges=["comments"],t.prototype.icon="comment",t.prototype.title=function(){return p("badge.comments")},t.prototype.text=function(){return this.commentCount().toString()},t.prototype.visible=function(){return this.commentCount()>0},t.prototype.commentCount=function(){var e;return null!=(e=this.badge("comments"))?e:0},t}(i),o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.position=5,t.prototype.dependentBadges=["attachments"],t.prototype.icon="attachment",t.prototype.attachmentCount=function(){var e;return null!=(e=this.badge("attachments"))?e:0},t.prototype.visible=function(){return this.attachmentCount()>0},t.prototype.text=function(){return this.attachmentCount().toString()},t.prototype.title=function(){return p("badge.attachments")},t}(i),s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.position=6,t.prototype.dependentBadges=["checkItems","checkItemsChecked"],t.prototype.icon="checklist",t.prototype.title=function(){return p("badge.checkitems")},t.prototype.visible=function(){return this.badge("checkItems")},t.prototype.text=function(){return this.badge("checkItemsChecked")+"/"+this.badge("checkItems")},t.prototype.additionalClasses=function(){return this.isCompleted()?["is-complete"]:[]},t.prototype.isCompleted=function(){return this.badge("checkItemsChecked")===this.badge("checkItems")},t.prototype.update=function(){return this.$el.toggleClass("is-complete",this.isCompleted()),t.__super__.update.apply(this,arguments)},t}(i),n=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.badgesView.listenTo(this.badgesView.model,"change:closed",function(e){return function(){return e.render()}}(this))}return h(t,e),t.prototype.shouldUpdate=!1,t.prototype.icon="archive",t.prototype.text=function(){return p("badge.archived.text")},t.prototype.title=function(){return p("badge.archived.title")},t.prototype.visible=function(){return this.badgesView.model.get("closed")},t}(i),t.exports=[c,l,e(267),u,a,o,s,e(266),n]},{}],266:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n=e(262),o=e(66),s=e(415),u=e(84),a=e("underscore"),t.exports=i=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.badgesView.listenTo(this.badgesView.model,"change:due",function(e){return function(){return e.render()}}(this))}return c(t,e),t.prototype.position=7,t.prototype.shouldUpdate=!0,t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.badgesView.stopListening(o,"renderInterval"),this.visible()&&this.badgesView.listenTo(o,"renderInterval",function(e){return function(){return e.render()}}(this)),this},t.prototype.icon="clock",t.prototype.visible=function(){return this.getDueDate()},t.prototype.getDueDate=function(){return this.badgesView.model.get("due")},t.prototype.text=function(){return o.toDateString(this.getDueDate())},t.prototype.additionalClasses=function(){return[s.classForDueDate(this.getDueDate())]},t.prototype.title=function(){return s.titleForDueDate(this.getDueDate())},t.prototype.update=function(){return this.$el.removeClass(),this.$el.addClass(a.result(this,"additionalClasses").join(" ")).addClass("badge"),t.__super__.update.apply(this,arguments)},t}(n)},{}],267:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;n=e(262),i=e(84),s=e(82),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.position=2,t.prototype.dependentBadges=["votes","viewingMemberVoted"],t.prototype.icon="vote",t.prototype.additionalClasses=function(){var e;return e=[],this.badge("viewingMemberVoted")&&e.push("is-voted"),e},t.prototype.title=function(){return i("badge.votes")},t.prototype.text=function(){return s("votes",this.voteCount())},t.prototype.visible=function(){return this.voteCount()>0},t.prototype.voteCount=function(){var e;return null!=(e=this.badge("votes"))?e:0},t.prototype.update=function(){return this.$el.toggleClass("is-voted",this.badge("viewingMemberVoted")),t.__super__.update.apply(this,arguments)},t}(n)},{}],268:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C=[].slice;o=e(57),s=e(269),a=e(270),c=e(272),u=e(274),i=e(273),h=e(279),l=e(18),d=e("bluebird"),p=e("react"),m=e(109),w=e(433)("billing"),g=e(209),y=e(84),_=e(38),f=e("underscore"),k=e("xtend"),n=e("jquery"),b=e(93),v=e(74),t.exports=p.createClass({displayName:"BillingComponent",getInitialState:function(){return{showChangeCCForm:!1,processingReactivation:!1,reactivateDisabled:!1,reactivatingProduct:null}},render:w.renderable(function(){var e,t,r,n,o,i,a,u,c,l,d,p,h,m,f,g;return p=this.props,o=p.id,e=p.activeAccount,c=p.paidAccount,g=p.willExpire,u=p.nextChargeAmount,a=p.nextBillingDate,t=p.canSwitchToYearly,r=p.cancelledAccount,n=p.hasAccount,f=p.statementUrl,d=p.productName,h=this.state,i=h.justCancelled,l=h.processingReactivation,m=h.showChangeCCForm,w.div(function(p){return function(){return p.renderStatusBanner(),e&&w.div(".window-module.u-text-align-center",function(){return w.div(".u-gutter",function(){return g?p.renderExpirationAndRenewButton():c.cardType?(u&&a&&p.renderNextCharge(),t?p.renderUpgradeToYearly():void 0):p.renderCreditExpirationMessage()})}),r&&!l&&p.renderReactivateSection(),c.cardType&&(p.renderBillingContact(),e&&p.renderPaymentMethod()),m&&w.div(".window-module",function(){return p.renderCCChangeForm()}),n&&w.createElement(s,{statementUrl:f,key:o}),e&&!g&&p.renderCancelFlow(),i?w.div(".window-module",function(){return w.div(".u-gutter",function(){return w.p(function(){return w.strong(function(){return w.format("your-productname-subscription-has-been-cancelled",{productName:d})})}),w.p(function(){return w.format("well-keep-your-data-safe-and-your-account-will-remain-usable-if-youd-like-you-can-reinstate-productname-at-any-time-by-re-entering-your-credit-card-information",{productName:d})}),w.p(function(){return w.format("the-trello-team")})})}):void 0}}(this))}),renderNextCharge:function(){var e,t,r,n,o;return o=this.props,e=o.billingStrategy,r=o.nextChargeAmount,n=o.price,t=o.nextBillingDate,w.p(".next-charge",function(){return null!=e.perUser?w.format("you-will-be-billed-nextchargeamount-price-per-billablemembercount-members-on-nextbillingdate",{nextChargeAmount:r,price:v(n),billableMemberCount:e.perUser,nextBillingDate:t}):w.format("you-will-be-billed-nextchargeamount-on-nextbillingdate",{nextChargeAmount:r,nextBillingDate:t})})},renderUpgradeToYearly:function(){var e,t,r,n,o;return n=this.props,t=n.current,e=n.billingStrategy,o=n.yearlyDiscountPercent,r=n.onSwitchToYearly,w.p(function(){return w.b(r,".button-link.mod-inline-block",{style:{paddingLeft:"24px",paddingRight:"24px"}},function(){return w.format("switch-to-yearly-billing")})}),w.p(function(){return null!=e.perUser?w.format("yearly-billing-will-be-totalyearlyprice-yearlyprice-per-billablemembercount-members-per-year",{totalYearlyPrice:v(t.yearly.totalPrice),yearlyPrice:v(t.yearly.price),billableMemberCount:e.perUser}):w.format("yearly-billing-will-be-yearlyprice-per-year",{yearlyPrice:v(t.yearly.price)}),w.br(),w.format("thats-percent-less-than-monthly-billing",{yearlyDiscountPercent:o})})},renderCreditExpirationMessage:function(){var e,t,r;return e=this.props.nextBillingDate,r=this.state.showChangeCCForm,t=g.choke(0,g(this,"setState",{showChangeCCForm:!0})),w.p(".next-charge",function(){return w.format("your-credits-will-expire-on-nextbillingdate",{nextBillingDate:e})}),r?void 0:(w.p(function(){return w.b(t,".button-link.mod-inline-block",{style:{paddingLeft:"24px",paddingRight:"24px"}},function(){return w.format("add-billing-information")})}),w.p(function(){return w.format("keep-using-trello-in-style-even-after-your-credits-expire")}))},renderExpirationAndRenewButton:function(){var e,t,r,n;return n=this.props,r=n.productName,e=n.expirationDate,t=n.onRenewClick,w.p(".quiet",function(){return w.format("youve-cancelled-productname-but-you-can-use-the-premium-features-until-expirationdate",{productName:r,expirationDate:e})}),w.p(function(){return w.b(t,".button-link.mod-inline-block",{style:{paddingLeft:"24px",paddingRight:"24px"}},function(){return w.format("renew-your-subscription")})}),w.p(".quiet",function(){return w.format("when-you-renew-you-wont-be-charged-until-the-date-listed-above")})},renderReactivationForm:function(){var e,t,r,n,o,s,a;return a=this.props,n=a.paidAccount,o=a.paidAccountPoll,e=a.createPaidAccount,r=a.didntGetAuthStatus,t=a.didGetAuthStatus,s=this.state.reactivatingProduct,w.createElement(c,{onSubmit:e,doPoll:o,buttonKey:"continue",contentBuilders:[u,i,h].map(g.choke(1,b)),extraData:{billingContactFullName:n.contactFullName,billingContactEmail:n.contactEmail,billingContactLocale:n.contactLocale,products:[s.toString()]},didntGetAuthStatus:function(e){return function(){return e.setState({reactivatingProduct:null}),r()}}(this),didGetAuthStatus:function(e){return function(){return e.setState({reactivatingProduct:null}),t()}}(this)})},renderReactivationButtons:function(){var e,t,r,n,o,i,s;return s=this.props,e=s.current,r=s.productName,t=s.paidAccount,n=this.state.reactivateDisabled,null!=t.cardType?(o=g(this,"reactivate",e.monthly.productNumber),i=g(this,"reactivate",e.yearly.productNumber)):(o=g.choke(0,this,"setState",{reactivatingProduct:e.monthly.productNumber}),i=g.choke(0,this,"setState",{reactivatingProduct:e.yearly.productNumber})),w.div(".window-module",function(){return w.div(".window-module-title",function(){return w.h3(function(){return w.format("reactivate-productname",{productName:r})})}),w.div(".u-gutter",function(){return w.div(".billing-option-buttons.u-clearfix",function(){return w.b(o,{class:w.classify({disabled:n})},function(){return w.span(".name",function(){return w.format("charge-monthly")}),w.span(".price",function(){null!=e.billingStrategy.perUser?w.format("totalmonthlyprice-monthlyprice-per-billablemembercount-members",{totalMonthlyPrice:v(e.monthly.totalPrice),monthlyPrice:v(e.monthly.price),billableMemberCount:e.billingStrategy.perUser}):w.strong(function(){return w.format("monthlyprice",{monthlyPrice:v(e.monthly.price)})})})}),w.b(i,{class:w.classify({disabled:n})},function(){return w.span(".name",function(){return w.format("charge-yearly-save")}),w.span(".price",function(){null!=e.billingStrategy.perUser?w.format("totalyearlyprice-yearlyprice-per-billablemembercount-members",{totalYearlyPrice:v(e.yearly.totalPrice),yearlyPrice:v(e.yearly.price),billableMemberCount:e.billingStrategy.perUser}):w.strong(function(){return w.format("yearlyprice",{yearlyPrice:v(e.yearly.price)})})})})})})})},renderReactivateSection:function(){var e;return e=this.state.reactivatingProduct,null!=e?this.renderReactivationForm():this.renderReactivationButtons()},renderPaymentMethod:function(){var e,t,r,n,o;return n=this.props,e=n.accountStandingDisplay,r=n.paidAccount,o=this.state.showChangeCCForm,t=g.choke(0,g(this,"setState",{showChangeCCForm:!0})),w.div(".window-module",function(n){return function(){return w.div(".window-module-title",function(){return w.h3(".u-inline",function(){return w.format("payment-method")}),w.p(".u-inline.quiet",{style:{marginLeft:"4px"}},function(){return w.format("account-standing-accountstandingdisplay",{accountStandingDisplay:e})})}),w.div(".u-gutter",function(){return w.p(function(){return w.text(r.cardType),w.br(),w.text(r.cardName),w.br(),w.format("paidaccount-cardlast4",{paidAccount_cardLast4:r.cardLast4}),o?void 0:(w.br(),w.b(t,".quiet",function(){return w.format("change-credit-card")}))})})}}(this))},renderCCChangeForm:function(){var e,t,r,n,o;return o=this.props,e=o.changeCreditCard,n=o.paidAccountPoll,r=o.didntGetAuthStatus,t=o.didGetAuthStatus,w.createElement(c,{onSubmit:e,doPoll:n,buttonKey:"continue",contentBuilders:[u,i,h].map(g.choke(1,b)),didntGetAuthStatus:function(e){return function(){return e.setState({showChangeCCForm:!1}),r()}}(this),didGetAuthStatus:function(e){return function(){return e.setState({showChangeCCForm:!1}),t()}}(this)})},reactivate:function(e){var t,r,n;n=this.props.reactivateProduct,r=this.state.reactivateDisabled,r||(t=l.isMonthly(e)?"Monthly":"Yearly",_("Organization View","Billing Page","Reactivate Business Class - "+t),this.setState({reactivateDisabled:!0}),n(e).then(function(e){return function(r){return _("Organization","Sucessfully Reactivate Business Class - "+t),e.setState({processingReactivation:!0,reactivateDisabled:!1})}}(this)).done())},renderBillingContact:function(){var e,t,r;return r=this.props,t=r.paidAccount,e=r.onChangeBillingContactClick,w.div(".window-module",function(){return w.div(".window-module-title",function(){return w.h3(function(){return w.format("billing-contact")})}),w.div(".u-gutter",function(){return w.p(function(){return w.format("paidaccount-contactfullname-paidaccount-contactemail",{paidAccount_contactFullName:t.contactFullName,paidAccount_contactEmail:t.contactEmail}),w.text(" "),w.b(e,".quiet",function(){return w.format("change")})})})})},renderCancelFlow:function(){var e,t,r;return r=this.props,t=r.productName,e=r.cancelProduct,w.createElement(a,{isModule:!0,productName:t,cancelProduct:function(t){return function(){var r;return r=1<=arguments.length?C.call(arguments,0):[],e.apply(null,r).then(g.choke(0,g(t,"setState",{justCancelled:!0})))}}(this)})},renderStatusBanner:function(){var e,t,r,n,o,i,s,a,u,c,l;return l=this.props,e=l.activeAccount,i=l.problemAccount,s=l.processingAccount,u=l.productIconClass,r=l.detailsUrl,c=l.productName,t=l.cancelledAccount,n=l.needCC,a=this.state.processingReactivation,o=g.choke(0,g(this,"setState",{showChangeCCForm:!0})),w.div(".window-module.u-gutter",function(){return e&&(i?(w.p(".bc-active-status.error",function(){return w.format("theres-an-issue-with-productname",{productIconClass:u,detailsUrl:r,productName:c})}),w.b(o,".emphasis-button",function(){return w.format("you-are-overdue-and-we-are-having-trouble-processing-your-credit-card-enter-a-credit-card-to-resolve-the-issue")})):(w.p({class:w.classify({"bc-active-status":!0,active:!0,warning:s})},function(){return w.span({class:"icon-lg icon-"+u}),s?w.format("productname-is-almost-active",{detailsUrl:r,productName:c}):w.format("productname-is-active",{detailsUrl:r,productName:c})}),s&&w.p(".quiet",{style:{marginLeft:"46px"}},function(){return w.format("your-credit-card-is-being-processed")}))),t&&(a?(w.p(".bc-active-status.warning",function(){return w.format("your-account-is-being-processed-for-reactivation",{productIconClass:u})}),w.p(".quiet.u-text-align-center",function(){return w.format("check-back-soon")})):w.p(".bc-active-status.error",function(){return w.format("productname-is-cancelled",{productIconClass:u,detailsUrl:r,productName:c})})),n?(w.p(".bc-active-status.error",function(){return w.format("productname-is-not-active",{productIconClass:u,detailsUrl:r,productName:c})}),w.b(o,".emphasis-button",function(){return w.format("enter-a-credit-card-to-activate-productname",{productName:c})})):void 0})}})},{}],269:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v;n=e(188),o=e(281),s=e("react"),f=e(433)("billing_statement"),i=e(92),p=e("moment"),u=e(73),d=e(34),v=e(100),a=e(209),m={return:["credited-return","credited-return-receipt"],credit:["paid-credit","paid-credit-receipt"],debit:["billed-debit","billed-debit-invoice"],refund:["refunded-refund","refunded-refund"]},h=function(e){var t,r,n,o;n=m[e.type],r=n[0],o=n[1],t={statementUrl:e.statementUrl},t[e.type]=u.money(e.amount),t.statementUrl?f.format(o,t):f.format(r,t)},g={startDate:function(e){return p(e).format("LL")},endDate:function(e){return p(e).format("LL")},taxRate:u.taxRate,discount:u.percentage},c=function(e){var t,r,n,o,i;o=function(e){return e.toString()},n={};for(t in e)i=e[t],n[t]=(null!=(r=g[t])?r:o)(i);return n},l=function(e){var t,r;return null==e.translationKey?e.fallbackText:(t=c(e.translationArgs),r=v(["billing",e.translationKey],t),null!=r?r:(d(new Error("Unknown statement row key "+e.translationKey)),e.fallbackText))},t.exports=s.createClass({displayName:"BillingHistoryComponent",mixins:[i],render:f.renderable(function(){var e,t,r;return t=this.state,e=t.errorText,r=t.statement,f.div(".window-module",function(){return f.div(".window-module-title",function(){return f.h3(function(){return f.format("billing-history")})}),f.div(".u-gutter",{id:"billing-statement"},function(){var t,n,o,i;if(null!=e)return f.text(e);if(null!=r){for(o=[],t=0,n=r.length;n>t;t++)i=r[t],f.div(function(){return f.p(function(){return f.format("date-item",{date:p(i.date).format("l"),item:l(i)})}),f.p({style:{textAlign:"right"}},function(){return h(i)})}),o.push(f.hr());return o}return f.div(".spinner.loading")})})}),componentWillMount:function(){this.pollster=new o(a(n,{url:this.props.statementUrl}),10,5e3),this.pollster.start(),this.syncState(this.pollster.state)},componentWillUnmount:function(){this.pollster.stop()}})},{}],270:[function(e,t,r){var n,o,i,s;n=e("react"),s=e(433)("billing"),o=e(209),i=[["its-missing-functionality","missing functionality"],["im-not-using-it","not using it"],["its-too-expensive","too expensive"],["other","other"]],t.exports=n.createClass({displayName:"CancelFlowComponent",getInitialState:function(){return{isCancelling:this.props.initialIsCancelling,reason:null,details:""}},render:s.renderable(function(){var e,t,r,n,a,u,c,l,d,p,h,m,f,g;return h=this.props,p=h.productName,r=h.cancelProduct,d=h.isModule,l=h.isDeleting,m=this.state,c=m.isCancelling,t=m.cancelInProgress,a=m.details,g=o.choke(0,o(this,"setState",{isCancelling:!0})),e=o.choke(0,o(this,"setState",{isCancelling:!1})),u=function(e){return function(){var t;return e.setState({cancelInProgress:!0}),t={reason:e.state.reason,details:e.state.details},r(t).then(function(){return l?void 0:e.setState({cancelInProgress:!1,isCancelling:!1})}).done()}}(this),n=o(s,"radio",this),f=function(e){return function(t){return e.setState({details:t})}}(this),s.div({class:s.classify({"window-module":d,".u-gutter":d})},function(r){return function(){return c?s.div(function(){return l?s.p(function(){return s.format("thanks-for-trying-trello-with-productname",{productName:p})}):(s.p(function(){return s.format("thanks-for-trying-productname-were-sorry-to-see-you-go",{productName:p})}),s.p(function(){return s.format("clicking-the-button-below-will-cancel-your-subscription-and-you-will-not-be-billed-again-of-course-well-keep-your-data-safe-and-your-account-will-remain-usable-if-youd-like-you-can-reinstate-productname-at-any-time-by-re-entering-your-credit-card-information",{productName:p})})),s.p(function(){return s.format("were-working-hard-to-make-trello-better-every-day-and-would-really-appreciate-any-feedback-you-have-on-productname",{productName:p})}),s.p(function(){return s.b(function(){return s.format("please-let-us-know-why-you-are-cancelling-ellipsis")})}),s.div(function(){var e,t,r,o,a,u;for(a=[],t=0,r=i.length;r>t;t++)o=i[t],e=o[0],u=o[1],a.push(s.label(function(){return n("reason",u),s.text(" "),s.format(e)}));return a}),s.textarea({placeholder:s.l("tell-us-more-ellipsis"),value:a,onChange:function(e){return f(e.target.value)}}),s.div(function(){return s.button(".button",{onClick:u,disabled:t,class:s.classify({disabled:t})},function(){return l?s.format("cancel-productname-and-delete-team",{productName:p}):s.format("cancel-productname",{productName:p})}),s.b(e,".quiet",{style:{marginLeft:"1em"}},function(){return s.format("never-mind")})})}):s.b(g,".quiet.dark-hover",function(){return s.icon("close"),s.text(" "),s.format("cancel-productname-ellipsis",{productName:p})})}}(this))})})},{}],271:[function(e,t,r){var n,o,i,s,a,u,c,l=function(e,t){function r(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d={}.hasOwnProperty;n=e(190),o=e(25),s=e(458),a=e(109),u=e(441),c=e(606),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="change billing contact",t.prototype.events={"click .js-submit":"changeBillingContact","submit form":"changeBillingContact"},t.prototype.render=function(){var e,t,r;return t=this.model.get("paidAccount"),e=t?{fullName:t.contactFullName,email:t.contactEmail,locale:null!=(r=t.contactLocale)?r:"en"}:{fullName:o.me().get("fullName"),email:o.me().get("email"),locale:o.me().getLocale()},this.$el.html(c(e)),this},t.prototype.changeBillingContact=function(e){var t,r,o,i,u;for(a.stop(e),t={},t.billingContactFullName=this.$("input#billingContactFullName").val(),t.billingContactEmail=this.$("input#billingContactEmail").val(),t.billingContactLocale=this.$("select#billingContactLocale").val(),this.$(".js-submit").attr("disabled","disabled"),u=["billingContactFullName","billingContactEmail","billingContactLocale"],o=0,i=u.length;i>o;o++)r=u[o],this.$("#"+r).removeClass("input-error");return n({url:this.model.urlRoot+"/"+this.model.id+"/paidAccount/billingContact",data:t,type:"POST",success:function(e){return function(t){return e.model.set(t),s.hide()}}(this),error:function(e){return function(t){var r,n;return r=null!=(n=t.responseText)?n:"error",e.$(".js-submit").removeAttr("disabled","disabled"),/billingContactFullName/.test(r)?void e.$("#billingContactFullName").addClass("input-error"):/email/.test(r)?void e.$("#billingContactEmail").addClass("input-error"):/locale/.test(r)?void e.$("#billingContactLocale").addClass("input-error"):e.$(".error").text(r).show()}}(this)})},t}(u)},{}],272:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p;n=e(282),o=e("bluebird"),i=e("react"),l=e(433)("credit_card"),s=e("underscore"),a=e(209),u=e(84),d=e(38),p=e("xtend"),c=e(287),t.exports=i.createClass({displayName:"CreditCardFormComponent",getInitialState:function(){return{errorField:null,unknownError:null,waitingForCCAuth:!1}},getData:function(){return this.props.extraData},render:l.renderable(function(){var e,t,r,n,i,s,c,d,h;return s=this.props,r=s.contentBuilders,e=s.buttonKey,c=this.state,n=c.errorField,d=c.unknownError,h=c.waitingForCCAuth,t=[],i=function(e){return function(){var r;r=o.map(t.concat([e]),a.method("getData")).then(function(e){return p.apply(null,e)}),e.submit(r)}}(this),l.div(".credit-card-form",function(){return l.p({class:l.classify({"u-gutter":!0,"u-form-error":!0,hide:!d})},function(){return l.text(null!=d?d:"")}),r.map(function(e){return e({ref:a(t,"push"),errorField:n})}).forEach(a(l,"addElement")),l.hr(".u-gutter"),l.p({class:l.classify({"u-gutter":!0,"u-form-info":!0,hide:!h})},function(){return l.text(u(["alerts","authorizing"]))}),l.div({class:l.classify({"u-gutter":!0,hide:h})},function(){return l.input({type:"button",value:l.l(e),class:"primary",onClick:i})})})}),componentWillUnmount:function(){var e;return null!=(e=this._submitPromise)?e.cancel():void 0},submit:function(e){var t,r,i;if(null!=this._submitPromise)throw Error("Submission already in progress!");return i=this.props,r=i.onSubmit,t=i.doPoll,this.setState({errorField:null,unknownError:null,waitingForCCAuth:!0}),this._submitPromise=e.then(function(e){return function(e){return null==e.acceptTOS||e.acceptTOS?c(a(r,e),t,e):o.reject(n.InvalidField("",{field:"acceptTOS"}))}}(this)).then(function(e){return function(){e.props.didGetAuthStatus(),d("Business Class","Purchase","yearly price")}}(this)).catch(n.InvalidField,function(e){return function(t){var r;r=t.field,e.setState({errorField:r})}}(this)).catch(n.PostError,function(e){return function(t){var r,n;r=t.err,e.setState({unknownError:null!=(n=r.message)?n:"error"})}}(this)).catch(n.PollError,function(e){return function(t){var r;r=t.err,e.props.didntGetAuthStatus()}}(this)).catch(o.CancellationError,function(){}).finally(function(e){return function(){e.isMounted()&&e.setState({waitingForCCAuth:!1}),delete e._submitPromise}}(this)).done()}})},{}],273:[function(e,t,r){var n,o,i,s,a,u,c,l;o=e("react"),c=e(433)("credit_card"),i=e("underscore"),l=e("xtend"),a=e(209),s=e(276),n=e(277),u=function(e){var t,r;return r=e[0],t=e[1],[r,c.l(["countries",t])]},t.exports=o.createClass({displayName:"AddressComponent",formFields:["companyName","streetAddress1","streetAddress2","city","state","zipCode","country"],requiredFields:{streetAddress1:/\S/,city:/\S/,country:/\S/},mixins:[n],getInitialState:function(){return l(this.defaultInitialState(),{country:s.special[0][0]})},render:c.renderable(function(){var e,t,r,n;return t=this.props.errorField,n=this.getLocalizedCountries(),e=a(this,"controlledOpts"),r=function(r,n,o,i){var s;return s=r===t,c.label(function(){return c.format(n),c.input(l(i,e(r),{class:c.classify({text:!0,"input-error":s}),type:"text"})),s?c.span(".u-form-error",function(){return c.format(o)}):void 0})},c.div(".window-module",function(){return c.div(".window-module-title",function(){return c.h4(function(){return c.format("billing-address")})}),c.div(".u-gutter.credit-card-form-section",function(){return c.label(".quiet",function(){return c.format("company-name"),c.input(l(e("companyName"),{class:"text",type:"text",maxLength:"50",size:"30"}))}),r("streetAddress1","street-address-1","please-enter-your-address",{maxLength:"255",size:"30"}),c.label(".quiet",function(){return c.format("street-address-2"),c.input(l(e("streetAddress2"),{class:"text",type:"text",maxLength:"255",size:"30"}))}),r("city","city","please-enter-your-city",{maxLength:"30",size:"30"
}),r("state","state-province-region","us-and-canada-addresses-require-a-two-letter-abbreviation",{maxLength:"20",size:"30"}),r("zipCode","zip-postal-code","us-addresses-require-a-zip-code",{maxLength:"10",size:"30"}),c.label(function(){return c.format("country"),c.text(" "),c.select(e("country"),function(){var e,t,r,o,i;for(e=0,t=n.length;t>e;e++)o=n[e],i=o[0],r=o[1],c.option({value:i},function(){return c.text(r)})})})})})}),getLocalizedCountries:function(){var e,t;return e=s.special.map(u),t=s.unloved.map(u).sort(function(e,t){var r,n,o,i;return r=e[0],n=e[1],o=t[0],i=t[1],n.localeCompare(i)}),e.concat(t)}})},{}],274:[function(e,t,r){var n,o,i,s,a,u,c,l;o=e(282),a=e("react"),i=e(277),n=e(275),s=e("bluebird"),c=e(433)("credit_card"),u=e(209),l=e("xtend"),t.exports=a.createClass({displayName:"CreditCardComponent",formFields:["name"],requiredFields:{name:/\S/},mixins:[i,n],getInitialState:function(){return l(this.defaultInitialState(),this.gatewayInitialState())},render:c.renderable(function(){var e,t,r,n,o,i,s,a,d;return t=this.props.errorField,d=this.state,i=d.gatewayLoaded,r=d.gatewayErrorField,o=d.gatewayFocusField,n=d.gatewayFieldStatus,s="name"===t,e=u(this,"controlledOpts"),a=function(e){return function(e){return e.preventDefault()}}(this),c.div(".window-module",function(){return c.form({onSubmit:a,ref:"form"},function(){return c.div(".window-module-title",function(){return c.h4(function(){return c.format("credit-card-for-account")})}),c.div(".u-gutter.credit-card-form-section",function(){var t;return c.div(".credit-card-form-name",function(){return c.label(function(){c.format("name-as-it-appears-on-the-credit-card"),c.input(l(e("name"),{class:c.classify({text:!0,"input-error":s}),type:"text",maxLength:"50",size:"30"})),s&&c.span(".u-form-error",function(){return c.format("please-provide-your-full-name-as-shown-on-the-card-for-credit-card-verification")})})}),t=function(e){var t,r,s,a,u;return u=e.selector,a=e.labelKey,r=e.fieldType,t=e.errorKey,s="invalid"===n[r],c.label(function(){return c.format(a),c.div(".iframe-input"+u,{class:c.classify({disabled:!i,focus:o===r,"input-error":s})}),null!=t&&s?c.span(".u-form-error",function(){return c.format(t)}):void 0})},c.div(".u-clearfix",function(){return c.div(".credit-card-form-number",function(){return t({selector:".js-card-number",labelKey:"card-number",fieldType:"number",errorKey:"please-provide-your-full-card-number-for-credit-card-verification"})}),c.div(".credit-card-form-cvv",function(){return t({selector:".js-cvv",labelKey:"cvv",fieldType:"cvv"})}),c.div(".credit-card-expiration-date",function(){return t({selector:".js-expiration-date",labelKey:"expiration-date",fieldType:"expirationDate",errorKey:"please-provide-a-valid-expiration-date"})})})})})})})})},{}],275:[function(e,t,r){var n,o,i;n=e(282),o=e("bluebird"),i=e("underscore"),t.exports={gatewayFields:["number","cvv","expirationDate"],gatewayInitialState:function(){var e;return e=i.chain(this.gatewayFields).map(function(e){return[e,"empty"]}).object().value(),{gatewayLoaded:!1,gatewayFieldStatus:e,gatewayFocusField:null}},componentDidMount:function(){var e;if(null==this.refs.form)throw Error("expected to be mixed into something with a ref to a form");return e={id:this.refs.form,enableCORS:!0,onPaymentMethodReceived:function(e){return function(t){return e._resolve({nonce:t.nonce})}}(this),onError:function(e){return function(t){var r,o,s,a;if("VALIDATION"===t.type){if(null==(o=t.details.invalidFieldKeys)||i.isEmpty(o))e.setFieldStatus("number","invalid");else for(r=0,a=o.length;a>r;r++)s=o[r],e.setFieldStatus(s,"invalid");e._reject(new n.InvalidField(t.message))}else e._reject(new n.PostError(t.message))}}(this),hostedFields:{onFieldEvent:function(e){return function(t){var r,n;switch(r=t.target.fieldKey,t.type){case"focus":return e.setState({gatewayFocusField:r});case"blur":return e.setState({gatewayFocusField:null}),n=t.isEmpty?"empty":t.isValid?"valid":"invalid",e.setFieldStatus(r,n);case"fieldStateChange":return n=t.isEmpty?"empty":t.isPotentiallyValid?"valid":"invalid",e.setFieldStatus(r,n)}}}(this),styles:{input:{"font-size":"14px","font-family":'"Helvetica Neue", Arial, Helvetica, sans-serif'}},number:{selector:".js-card-number"},cvv:{selector:".js-cvv"},expirationDate:{selector:".js-expiration-date"}}},this._loadGateway().then(function(t){return function(){return t.setState({gatewayLoaded:!0}),window.braintree.setup(window.braintreeClientToken,"custom",e)}}(this))},componentWillUnmount:function(){var e;return null!=(e=this._asyncDataPromise)?e.cancel():void 0},componentWillReceiveProps:function(e){var t;return t=function(){switch(e.errorField){case"credit card number":return"number";case"expYear":return"expirationDate";default:return e.errorField}}(),this.setFieldStatus(t,"invalid")},_awaitData:function(){return null!=this._awaiting&&this._reject(new Error("submitting form again")),new o(function(e){return function(t,r){return e._awaiting={resolve:t,reject:r}}}(this)).finally(function(e){return function(){return e._awaiting=null}}(this))},_resolve:function(e){var t;return null!=(t=this._awaiting)?t.resolve(e):void 0},_reject:function(e){var t;return null!=(t=this._awaiting)?t.reject(e):void 0},getAsyncData:function(){var e,t,r,i,s;for(i=this.gatewayFields,t=0,r=i.length;r>t;t++)if(e=i[t],"valid"!==this.state.gatewayFieldStatus[e])return o.reject(n.InvalidField("",{field:e}));return null!=(s=this._asyncDataPromise)&&s.cancel(),this._asyncDataPromise=this._awaitData().cancellable(),this.refs.form.dispatchEvent(new Event("submit",{cancelable:!0})),this._asyncDataPromise},_loadGateway:function(){return null!=this._loadGatewayPromise?this._loadGatewayPromise:this._loadGatewayPromise=o.try(function(){return null==window.braintree?new o(function(e){var t;return t=document.createElement("script"),t.src="https://js.braintreegateway.com/js/braintree-2.21.0.min.js",t.onload=e,document.querySelector("head").appendChild(t)}):void 0}).return()},setFieldStatus:function(e,t){var r;return r=i.clone(this.state.gatewayFieldStatus),r[e]=t,this.setState({gatewayFieldStatus:r})}}},{}],276:[function(e,t,r){t.exports={special:[["US","united-states"],["GB","united-kingdom"],["CA","canada"],["AU","australia"],["DE","germany"],["NL","netherlands"]],unloved:[["AF","afghanistan"],["AL","albania"],["DZ","algeria"],["AS","american-samoa"],["AD","andorra"],["AI","anguilla"],["AG","antiqua-and-barbuda"],["AR","argentina"],["AM","armenia"],["AW","aruba"],["AU","australia"],["AT","austria"],["AZ","azerbaijan"],["BS","bahamas"],["BH","bahrain"],["BD","bangladesh"],["BB","barbados"],["BY","belarus"],["BE","belgium"],["BZ","belize"],["BJ","benin"],["BM","bermuda"],["BT","bhutan"],["BO","bolivia"],["BV","bouvet-islands"],["BR","brazil"],["IO","british-indian-ocean-territory"],["VI","british-virgin-islands"],["BN","brunei"],["BG","bulgaria"],["BF","burkina-faso"],["BI","burundi"],["KH","cambodia"],["CM","cameroon"],["CA","canada"],["CV","cape-verde"],["KY","cayman-islands"],["CF","central-african-republic"],["TD","chad"],["CL","chile"],["CN","china"],["CO","colombia"],["KM","comoros"],["CG","congo"],["CR","costa-rica"],["CI","cote-d-ivoire"],["HR","croatia"],["CY","cyprus"],["CZ","czech-republic"],["DK","denmark"],["DJ","djibouti"],["DM","dominica"],["DO","dominican-republic"],["EG","egypt"],["SV","el-salvador"],["EC","equador"],["GQ","equatorial-guinea"],["ER","eritrea"],["EE","estonia"],["ET","ethiopia"],["FK","falkland-islands"],["FO","faroe-islands"],["FM","federated-states-of-micronesia"],["FJ","fiji"],["FI","finland"],["FR","france"],["GF","french-guiana"],["PF","french-polynesia"],["GA","gabon"],["GM","gambia"],["GE","georgia"],["DE","germany"],["GH","ghana"],["GI","gibraltar"],["GR","greece"],["GL","greenland"],["GD","grenada"],["GP","guadeloupe"],["GU","guam"],["GT","guatemala"],["GN","guinea"],["GW","guinea-bissau"],["GY","guyana"],["HT","haiti"],["HN","honduras"],["HK","hong-kong"],["HU","hungary"],["IS","iceland"],["IN","india"],["ID","indonesia"],["IE","ireland"],["IL","israel"],["IT","italy"],["JM","jamaica"],["JP","japan"],["JO","jordan"],["KZ","kazakhstan"],["KE","kenya"],["KI","kiribati"],["KW","kuwait"],["KG","kyrgyzstan"],["LA","laos"],["LV","latvia"],["LB","lebanon"],["LS","lesotho"],["LR","liberia"],["LI","liechtenstein"],["LT","lithuania"],["LU","luxembourg"],["MO","macau"],["MG","madagascar"],["MW","malawi"],["MY","malaysia"],["MV","maldives"],["ML","mali"],["MT","malta"],["MH","marshall-islands"],["MQ","martinique"],["MR","mauritania"],["MU","mauritius"],["YT","mayotte"],["FX","metropolitan-france"],["MX","mexico"],["MD","moldova"],["MN","mongolia"],["ME","montenegro"],["MA","morocco"],["MZ","mozambique"],["NA","namibia"],["NR","nauru"],["NP","nepal"],["AN","netherlands-antilles"],["NL","netherlands"],["NC","new-caledonia"],["NZ","new-zealand"],["NI","nicaragua"],["NE","niger"],["NG","nigeria"],["MP","northern-mariana-islands"],["NO","norway"],["OM","oman"],["PK","pakistan"],["PW","palau"],["PA","panama"],["PG","papua-new-guinea"],["PY","paraguay"],["PE","peru"],["PE","peru"],["PH","philippines"],["PN","pitcairn"],["PL","poland"],["PT","portugal"],["PR","puerto-rico"],["QA","qatar"],["KR","republic-of-korea"],["RE","reunion"],["RO","romania"],["RU","russia"],["ST","sao-tome-and-principe"],["SA","saudi-arabia"],["SN","senegal"],["RS","serbia"],["SC","seychelles"],["SL","sierra-leone"],["SG","singapore"],["SK","slovakia"],["SI","slovenia"],["SB","solomon-islands"],["SO","somalia"],["ZA","south-africa"],["ES","spain"],["LK","sri-lanka"],["SH","st-helena"],["KN","st-kitts-and-nevis"],["LC","st-lucia"],["VC","st-vincent-and-the-grenadines"],["SD","sudan"],["SR","suriname"],["SJ","svalbard-and-jan-mayen-islands"],["SZ","swaziland"],["SE","sweden"],["CH","switzerland"],["SY","syria"],["TW","taiwan"],["TJ","tajikistan"],["TZ","tanzania"],["TH","thailand"],["MK","the-former-yugoslav-republic-of-macedonia"],["TG","togo"],["TO","tonga"],["TT","trinidad-and-tobago"],["TR","turkey"],["TM","turkmenistan"],["TC","turks-and-caicos-islands"],["TV","tuvalu"],["UG","uganda"],["UA","ukraine"],["AE","united-arab-emirates"],["GB","united-kingdom"],["US","united-states"],["UY","uruguay"],["UZ","uzbekistan"],["VU","vanuatu"],["VA","vatican-city"],["VE","venezuela"],["VN","vietnam"],["EH","western-sahara"],["YE","yemen"],["ZR","zaire"],["ZM","zambia"],["ZW","zimbabwe"]]}},{}],277:[function(e,t,r){var n,o,i,s;i=e("underscore"),n=e(282),o=e("bluebird"),s=e("xtend"),t.exports={defaultInitialState:function(){return i.object(this.formFields.map(function(e){return[e,""]}))},getData:function(){var e,t,r,a,u,c;r=null!=(t=this.requiredFields)?t:{};for(e in r)if(u=r[e],c=this.state[e],a=i.isRegExp(u)?u.test(c):i.isEqual(u,c),!a)return o.reject(n.InvalidField("",{field:e}));return o.resolve("function"==typeof this.getAsyncData?this.getAsyncData():void 0).then(function(e){return function(t){return s(t,i.object(e.formFields.map(function(t){return[t,e.state[t]]})))}}(this))},controlledOpts:function(e){return{onChange:function(t){return function(r){var n;return n={},n[e]=r.target.value,t.setState(n)}}(this),value:this.state[e]}}}},{}],278:[function(e,t,r){var n,o,i,s,a,u,c,l;n=e(277),o=e("react"),c=e(433)("credit_card"),i=e("underscore"),l=e("xtend"),s=e(209),a=e(74),u=e(75),t.exports=o.createClass({displayName:"ProductsComponent",formFields:["products"],mixins:[n],getInitialState:function(){return{products:[this.props.defaultProduct.toString()]}},render:c.renderable(function(){var e,t,r,n,o,i;return o=this.props,n=o.productName,r=o.monthlyProduct,i=o.yearlyProduct,e=o.billingStrategy,t=s(c,"radio",this),c.div(function(){return c.p(".u-gutter.quiet",function(){return c.format("subscribing-to-productname",{productName:n})}),c.div(".window-module",function(){return c.div(".window-module-title",function(){return c.h3(function(){return c.format("billing")})}),c.div(".u-gutter.u-clearfix.credit-card-form-section",function(){return e.perUser&&c.p(".u-quiet",function(){return c.format("smart billing explanation")}),c.div(".radio-div.u-clearfix",function(){return c.label(function(){t("products",[r.productNumber.toString()]),null!=e.perUser?c.format("monthly-totalperuserprice-per-month-price-per-billablemembercount-members-per-month",{totalPerUserPrice:a(r.totalPrice),price:a(r.price),billableMemberCount:e.perUser}):c.format("monthly-price-per-month",{price:a(r.price)})})}),c.div(".radio-div.u-clearfix",function(){return c.label(function(){t("products",[i.productNumber.toString()]),null!=e.perUser?c.format("yearly-totalperuserprice-per-year-price-per-billablemembercount-members-per-year-save-savepercent",{totalPerUserPrice:a(i.totalPrice),price:a(i.price),billableMemberCount:e.perUser,savePercent:u(i.savePercent)}):c.format("yearly-price-per-year-save-savepercent",{price:a(i.price),savePercent:u(i.savePercent)})})})})})})})})},{}],279:[function(e,t,r){var n,o,i;n=e(277),o=e("react"),i=e(433)("credit_card"),t.exports=o.createClass({displayName:"TermsOfServiceComponent",formFields:["acceptTOS"],requiredFields:{acceptTOS:!0},mixins:[n],getInitialState:function(){return{acceptTOS:!1}},render:i.renderable(function(){var e,t,r,n;return t=this.props.errorField,r="acceptTOS"===t,n=function(e){return function(t){return e.setState({acceptTOS:t.target.checked})}}(this),e=this.state.acceptTOS,i.div(".u-gutter",{id:"divAcceptTOS"},function(){return r&&i.p(".u-form-error.error",function(){return i.format("you-must-accept-the-terms-of-service-and-privacy-policy")}),i.div(".check-div.u-clearfix",function(){return i.label(function(){return i.input({class:i.classify({"input-error":r}),type:"checkbox",checked:e,onChange:n}),i.format("i-accept-the-terms-of-service-and-the-privacy-policy")})})})})})},{}],280:[function(e,t,r){var n,o,i,s,a;n=e(57),i=e(84),s=e("moment"),o=e(209),a=e("xtend"),t.exports=function(e,t,r){var o,u,c,l,d,p,h,m,f,g,v;return c={},c.paidAccount=e.get("paidAccount"),c.key=c.id=e.id,c.statementUrl=e.urlRoot+"/"+e.id+"/paidAccount/statement",u=null!=(d=c.paidAccount)&&null!=(p=d.products)?p[0]:void 0,null!=u&&(l=null!=(h=c.paidAccount.billingDates)?h[u]:void 0)&&(c.nextBillingDate=s(new Date(l)).format("LL")),c.yearlyDiscountPercent=t.getYearlyDiscountPercent(t.currentProducts.yearly,t.currentProducts.monthly),c.price=t.getPrice(u),c.billingStrategy=e.getBillingStrategy(u),t.isPerUser(u)?c.nextChargeAmount=e.totalPerUserPrice(u):c.nextChargeAmount=t.getPrice(u),c.current=t.currentPriceObjectForModel(e),c.canSwitchToYearly=u===c.current.monthly.productNumber,c.activeAccount=n.isActive(c.paidAccount),v=null!=(m=c.paidAccount)?m.standing:void 0,c.hasAccount=n.hasAccount(v),c.processingAccount=n.isProcessing(v),c.problemAccount=n.isProblem(v),c.willExpire=n.willExpire(c.paidAccount),c.willExpire&&null!=u&&(l=c.paidAccount.expirationDates[u])&&(c.expirationDate=s(l).format("LL")),null!=(o=n.standingName(null!=(f=e.get("paidAccount"))?f.standing:void 0))&&(c.accountStandingDisplay=i(["account standing",o])),c.cancelledAccount=n.isCancelled(c.paidAccount),c.needCC=n.needsCC(null!=(g=c.paidAccount)?g.standing:void 0),a(c,r)}},{}],281:[function(e,t,r){var n,o,i,s,a,u,c,l=function(e,t){function r(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d={}.hasOwnProperty;o=e(286),i=e("moment"),a=e(221),u=function(e,t){if("string"!=typeof e)throw Error("Not a string!");return 0===e.indexOf(t)},s=function(e){return{date:e.date,statementUrl:e.statementUrl,fallbackText:e.item,translationKey:e.translationKey,translationArgs:e.translationSubstitutions,amount:Math.abs(e.amount),type:function(){if(u(e.item,"Credit."))return"return";if(u(e.item,"Refund to your"))return"refund";if(e.amount>0)return"credit";if(e.amount<0)return"debit";throw new Error("Cannot format a row with 0 amount!")}()}},c=function(e){var t,r;return r=(null!=(t=e.statement)?t:[]).filter(function(e){return 0!==e.amount}).map(s).reverse(),{statement:r}},t.exports=n=function(e){function t(){var e;t.__super__.constructor.apply(this,arguments),e=null,this.state=this._protectedState.map(a(function(t){return t([{value:a.Any}],function(t){var r;return r=t.value,e=c(r)}),t([{error:a.Any}],function(e){var t;return t=e.error,{errorText:t.message}}),t([{timeout:!0}],function(){return e}),t([{}],function(){return{}})}))}return l(t,e),t}(o)},{}],282:[function(e,t,r){var n;n=e(85),t.exports=n("CreditCardForm",["InvalidField","PostError","PollError"])},{}],283:[function(e,t,r){var n,o,i,s;s=e(57),n=s.isActive,o=s.isProcessing,i=s.needsCC,t.exports=function(e){return i(null!=e?e.standing:void 0)||n(e)&&!o(null!=e?e.standing:void 0)}},{}],284:[function(e,t,r){var n;n=e(217),t.exports=n("PollTimeoutError")},{}],285:[function(e,t,r){var n,o;o=e("bluebird"),n=e(284),t.exports=function(e,t){var r,i;return i=null,r=new o(function(r,o){i=e.state.subscribe(function(e){"error"in e?o(e.error):"timeout"in e?o(n()):"value"in e&&t(e.value)&&r(e.value)})}),e.start(),e.finished.then(function(){return i()}),r.finally(function(){return e.stop()})}},{}],286:[function(e,t,r){var n,o,i,s,a,u,c,l,d;n=e(191),o=e("hearsay"),a=e("bluebird"),d=e("moment"),l=e(209),u=e(62),c=e(217),i=c("PollingError"),t.exports=s=function(){function e(e,t,r){var n;this.pollFx=e,this.minutesToPoll=t,this.intervalMs=r,this._protectedState=new o.Slot({}),this.state=this._protectedState,this.finished=new a(function(e){return function(t){return e._resolveFinished=t}}(this)),n=this._protectedState.use(),this.finished.finally(n)}return e.prototype._started=!1,e.prototype.start=function(){u(!this._started,"Cannot start more than once!"),u(!this._isComplete(),"Cannot start after stopping!"),this._started=!0,this._dateToStopPolling=d().add(this.minutesToPoll,"minutes").toDate(),this._poll()},e.prototype._done=function(){return u(!this._isComplete(),"Pollster cannot complete more than once!"),this._resolveFinished(this.state.get())},e.prototype._isComplete=function(){return this.finished.isFulfilled()},e.prototype.stop=function(){this._isComplete()||(null!=this._currentTimeout&&(clearTimeout(this._currentTimeout),delete this._currentTimeout),this._done())},e.prototype._poll=function(){return a.try(this.pollFx).catch(function(e){return a.reject(i("",{innerError:e}))}).then(function(e){return function(t){e._isComplete()||(e._protectedState.set({value:t}),d().isBefore(e._dateToStopPolling)?e._currentTimeout=setTimeout(l(e,"_poll"),e.intervalMs):(e._protectedState.set({timeout:!0}),delete e._currentTimeout,e._done()))}}(this)).catch(i,function(e){return function(t){var r;return r=t.innerError,e._protectedState.set({error:r}),e._done()}}(this)).done()},e}()},{}],287:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h;n=e(191),o=e(192),s=e(286),a=e("bluebird"),d=e(285),u=e(283),i=e(282),c=function(e){return u(e.paidAccount)},h="U.S. addresses require a 5 or 9 digit zip code. Canadian addresses require a Postal Code.",l=function(e){return e instanceof n.BadRequest&&(/^invalid value for /.test(e.message)||e.message.trim()===h)},p=function(e){return a.resolve(e).disposer(function(e){return e.stop()})},t.exports=function(e,t,r){return a.using(p(new s(t,1,1e3)),function(t){return e().cancellable().catch(l,function(e){var t,r;return r=e.message,t=r.trim()===h?"zipCode":r.replace("invalid value for ","").trim(),a.reject(i.InvalidField("",{field:t}))}).catch(n,function(e){return a.reject(i.PostError("",{err:e}))}).then(function(e){return c(e)?e:d(t,c).catch(function(e){return a.reject(i.PollError("",{err:e}))})})})}},{}],288:[function(e,t,r){var n,o;n=e("react"),o=e(433)("board_list_item_add"),t.exports=n.createClass({displayName:"BoardListItemAddComponent",render:o.renderable(function(){var e;return e=this.props.newBoard,o.li(".boards-page-board-section-list-item",function(){return o.b(e,".board-tile.mod-add",function(){return o.format("create-new-board-ellipsis")})})})})},{}],289:[function(e,t,r){var n,o,i,s,a,u,c;n=e(65),i=e(209),a=e(111),o=e("react"),u=e(433)("board_list_item"),c=e(38),s=function(e){var t;return t=n.browserStr,"safari"===t&&0===e.button},t.exports=o.createClass({displayName:"BoardListItemComponent",render:u.renderable(function(){var e,t,r,n,o,a,l,d,p,h,m,f,g,v,y,b,w,_,k;return v=this.props,h=v.isStarred,y=v.background,n=y.color,d=y.image,k=y.tiled,r=y.brightness,b=v.relUrl,g=v.orgname,m=v.name,w=v.showOptions,l=v.id,f=v.onStarClick,t=v.badgeComponents,_=v.tagComponents,a=v.hidden,o=v.hasUnseenActivity,p=v.isDraggable,e=this.getBackgroundStyle(),u.li({class:u.classify({hide:a,"boards-page-board-section-list-item":!0,"js-draggable":p})},function(){var a,d,p,v;if(a={"board-tile":!0,tile:k},!n)switch(r){case"unknown":a["mod-unknown-background"]=!0;break;case"light":a["mod-light-background"]=!0}return p=function(e){var t;return s(e)?(t=e.currentTarget,t.removeAttribute("href")):void 0},v=function(e){var t;return t=e.currentTarget,t.setAttribute("href",b)},d=function(){return c("Organization View","Boards Page","Click on Board")},u.link(b,{onMouseDown:p,onMouseUp:v,onClick:d,class:u.classify(a),style:e},function(){var e;return u.span(".board-tile-fade"),e={"board-tile-details":!0,"is-badged":!0,"is-sub-named":g},u.span({class:u.classify(e)},function(){u.span(".board-tile-details-name",{title:m,dir:"auto"},function(){return u.text(m)}),g&&u.span(".board-tile-details-sub-name",{title:g,dir:"auto"},function(){return u.text(g)})}),w&&u.span(".board-tile-options",function(){return o&&u.span(".board-tile-options-unread-indicator",{title:u.l("there-is-new-activity-on-this-board")}),u.icon("star",{class:u.classify({"is-starred":h,"board-tile-options-star-icon":!0}),title:u.l("click-to-star-this-board-it-will-show-up-at-top-of-your-boards-list"),onClick:function(e){return e.preventDefault(),e.stopPropagation(),f(l)}})}),u.span(".board-tile-badges",function(){return t.forEach(i(u,"addElement"))})}),u.div(".board-tags.u-clearfix",function(){return _.forEach(i(u,"addElement"))})})}),getBackgroundStyle:function(){var e,t,r,n,o;return n=this.props.background,t=n.color,r=n.image,o=n.tiled,e=n.brightness,t?{backgroundColor:t}:{backgroundImage:u.urlify(r)}},shouldComponentUpdate:a})},{}],290:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m;n=e(289),p=e(209),o=e("react"),s=e("react-dnd"),i=e("react-dom"),h=e("recup"),m=e("xtend"),a=o.createClass({displayName:"BoardListItemDndComponent",render:function(){var e,t,r,s,a;return a=this.props,t=a.connectDropTarget,e=a.connectDragSource,r=a.isDragging,r?h.render(function(){return h.li(".boards-page-board-section-list-item.mod-placeholder")}):(s=m(this.props,{ref:function(r){return t(i.findDOMNode(r)),e(i.findDOMNode(r))}}),o.createElement(n,s))}}),d={canDrop:function(){return!1},hover:function(e,t){return e.id!==t.getItem().id?e.onDragHover(t.getItem().id):void 0}},l=function(e,t){return{connectDropTarget:e.dropTarget()}},c={beginDrag:function(e){return{id:e.id}},endDrag:function(e){return e.onDragEnd()}},u=function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}},t.exports=s.DragSource("BoardTile",c,u)(s.DropTarget("BoardTile",d,l)(a))},{}],291:[function(e,t,r){var n,o,i;n=e("react"),i=e(433)("org_filtering"),o=e(111),t.exports=n.createClass({displayName:"BoardListItemTagAddComponent",render:i.renderable(function(){var e;return e=this.props.onClick,i.b(e,{class:"board-tags-item mod-add"},function(){return i.icon("add",{class:"board-tags-item-icon"})})}),shouldComponentUpdate:o})},{}],292:[function(e,t,r){var n,o,i;n=e("react"),i=e(433)(),o=e(111),t.exports=n.createClass({displayName:"BoardListItemTagComponent",render:i.renderable(function(){var e,t,r,n;return t=this.props,n=t.text,e=t.onClick,r=t.selected,i.b(e,{class:i.classify({"board-tags-item":!0,"mod-selected":r})},function(){return i.text(n)})}),shouldComponentUpdate:o})},{}],293:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;i=e(334),s=e(38),a=e("xtend"),n=e(25),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.events={mouseenter:"select",mouseleave:"deselect"},t.prototype.delegateEvents=function(e){return t.__super__.delegateEvents.call(this,a(i.prototype.events,e||this.events))},t.prototype.select=function(){return this.$el.addClass("selected")},t.prototype.deselect=function(){return this.$el.removeClass("selected")},t.prototype.trackBoardClick=function(){var e;return e=this.model.isMember(n.me())?"Board (Member of)":"Board (Not a Member)",s("Search","Select Item",e)},t}(i)},{}],294:[function(e,t,r){var n,o,i;n=e("react"),i=e(433)("board_list"),o=e("underscore"),t.exports=n.createClass({displayName:"BoardListSectionComponent",getInitialState:function(){return{collapsed:!0}},render:i.renderable(function(){var e,t,r,n,s,a,u,c,l,d,p,h;return h=this.props,c=h.items,a=h.header,p=h.noSidebarMod,n=h.createNewItem,d=h.mayBeSorted,u=h.isStarredSection,r=this.state.collapsed,e=c.length,s=d?o.chain(c).sortBy(function(e){return-e.props.dateLastActivity}).filter(function(e,t){return!r||10>=t||!e.props.isLessActive}).sortBy(function(e){return e.props.name.toLowerCase()}).value():c,l=e-s.length,t=i.classify({"boards-page-board-section":!0,"mod-no-sidebar":p}),i.div({class:t},function(e){return function(){var t;return a&&i.addElement(a),i.ul(".boards-page-board-section-list",function(){var e,t,r;for(e=0,r=s.length;r>e;e++)t=s[e],i.addElement(t);n&&i.addElement(n)}),t=function(){return e.setState({collapsed:!1})},s.length<c.length?i.b(t,".boards-page-show-all-boards.quiet-button",function(){return i.format("show-less-active-boards-count",{lessActiveCount:l})}):void 0}}(this))})})},{}],295:[function(e,t,r){var n,o,i,s,a,u;n=e(294),i=e("react-dnd"),o=e("react"),s=o.createClass({displayName:"BoardListSectionDndComponent",render:function(){var e;return(e=this.props.connectDropTarget)(o.createElement("div",{},o.createElement(n,this.props)))}}),u={drop:function(){}},a=function(e,t){return{connectDropTarget:e.dropTarget()}},t.exports=i.DropTarget("BoardTile",u,a)(s)},{}],296:[function(e,t,r){var n,o;n=e("react"),o=e(433)("board_list"),t.exports=n.createClass({displayName:"BoardListSectionHeaderComponent",render:o.renderable(function(){var e,t,r,n,i,s,a,u,c;return s=this.props,r=s.logoHash,c=s.title,e=s.iconClass,a=s.smallIconClass,u=s.smallIconTitleKey,t=s.linkElements,r&&(n=window.logoDomain+"/"+r+"/30.png",i=window.logoDomain+"/"+r+"/170.png"),o.div(".boards-page-board-section-header",function(){return o.div(".boards-page-board-section-header-icon",function(){return r?o.img({class:"boards-page-board-section-header-icon-image",src:n,srcSet:n+" 1x, "+i+" 2x",alt:c+" logo"}):o.span({class:"icon-lg icon-"+e})}),o.h3(".boards-page-board-section-header-name",function(){return o.text(c)}),a&&o.span(".boards-page-board-section-header-small-icon",function(){return o.icon(a,{title:o.l(u)})}),t?o.div(".boards-page-board-section-header-options",function(){var e,r,n,i;for(i=[],e=0,r=t.length;r>e;e++)n=t[e],i.push(o.addElement(n));return i}):void 0})})})},{}],297:[function(e,t,r){var n,o;n=e("react"),o=e(433)("board_list"),t.exports=n.createClass({displayName:"BoardlistSectionHeaderLinkComponent",render:o.renderable(function(){var e,t,r,n;return t=this.props,n=t.url,e=t.iconClass,r=t.titleKey,o.link(n,".boards-page-board-section-header-options-item.dark-hover",function(){return o.icon(e,{class:"boards-page-board-section-header-options-item-icon"}),o.span(".boards-page-board-section-header-options-item-name",function(){return o.format(r)})})})})},{}],298:[function(e,t,r){var n,o,i,s,a,u,c,l,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p={}.hasOwnProperty;n=e("jquery"),s=e(441),i=e(109),u=e(436)("bc_upsell_ad"),l=e(38),a=e("underscore"),c=u.renderable(function(){return u.div(".power-ups-pane-upsell-ad-icon",function(){return u.img(".power-ups-pane-upsell-ad-icon-image",{src:"https://d78fikflryjgj.cloudfront.net/images/e5a5cdbdce4d6a5cc83d8f1d94ba32cd/business-class-logo-mark-blue.svg"})}),u.div(".power-ups-pane-upsell-ad-details",function(){return u.h4(".power-ups-pane-upsell-ad-details-header",function(){return u.format("name")}),u.p(function(){return u.format("description")}),u.p(function(){return u.a(".quiet.js-show-details",{href:"/business-class?utm_source=trello&utm_medium=inapp&utm_content=power-ups-menu&utm_campaign=bc-upgrade",target:"_blank"},function(){return u.format("show-details")})})})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.className="power-ups-pane-upsell-ad",t.prototype.events={"click .js-show-details":function(){return l("Power-Ups","BC Upsell Ad")}},t.prototype.renderOnce=function(){return this.$el.html(c())},t}(s)},{}],299:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(450),i=e(441),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.viewTitleKey="labels",t.prototype.el=function(){var e;return e=this.subview(o,this.model,{board:this.model,popOverMethod:"toggle",className:"board-menu-content-frame",selectLabel:function(t){return e.editLabel(t)}}),e.render().el},t}(i)},{}],300:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M,B,T,O=function(e,t){function r(){this.constructor=e}for(var n in t)L.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},L={}.hasOwnProperty;n=e("jquery"),o=e(190),i=e(25),s=e(471),u=e(303),c=e(452),l=e(5),d=e(443),p=e(174),h=e(80),m=e(16),S=e(708),f=e(178),g=e(486),v=e(581),y=e(30),b=e(458),w=e(511),_=e(109),k=e(441),C=e("underscore"),M=e(89),B=e(438),x=e(698),T=e(38),j=e(84),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return O(t,e),M(v,g,d,t),t.prototype.viewTitleKey="members",t.prototype.initialize=function(){var e;e=this.model.getOrganization(),null!=e&&this.listenTo(e.memberList,"add remove reset",this.frameDebounce(this.renderOrgMembers)),this.listenTo(this.model.memberList,"add remove reset",this.frameDebounce(this.renderOrgMembers)),null!=e&&this.listenTo(e,"change:prefs",this.frameDebounce(this.render)),this.savedSearch=""},t.prototype.events={"click .js-board-members .js-select-member":"showMemberMenu","click .js-search-results .js-select-member":"didClickAddOtherMember","paste .js-search-input":"searchPaste","click .js-org-members .js-select-member":"didClickAddOrgMember","click .js-org-members .js-add-all-org-members":"didClickAddAllOrgMembers","click .js-org-members .js-more-org-members":"didClickViewMoreOrgMembers","click .js-remove-invitation":"removeInvitation","click .js-send-email-invite":"sendEmailInvite","submit .js-email-data":"sendEmailInvite","click .js-open-option":"openOption","mouseenter .js-select-member":"hoverMember","click .js-show-invitation-link":"showInvitationLink","click .js-invitation-link":"clickInvitationLink","click .js-deactivate-link":"deactivateInvitationLink"},t.prototype.render=function(){var e,t;return e={},e.placeholder=j("add member placeholder"),e.canAddMembers=this.model.canInviteMembers(),t=this.model.getOrganization(),null!=t&&(e.orgName=t.get("displayName")),e.canInviteMembers=e.canAddMembers&&!(null!=t?t.externalMembersDisabled():void 0),e.disableAddingExternalMembers=this.model.isMember(i.me())&&(null!=t?t.externalMembersDisabled():void 0),e.isBCOrgAdmin=null!=t?t.isPremOrgAdmin(i.me()):void 0,e.orgSettingsURL=null!=t?l.getOrganizationAccountUrl(t):"",e.editable=this.model.editable(),this.$el.html(S(e)),e.canAddMembers?this.setTimeout(function(e){return function(){return e.renderOrgMembers(),e.input=e.$(".js-search-input"),e.input.click(function(e){return _.stop(e)}).keyup(e.debounce(e.search,500).bind(e)).keydown(e.keydownEvent.bind(e)).focus(),
e.savedSearch?(e.input.val(e.savedSearch),e.search(),e.savedSearch=""):void 0}}(this),10):this.setTimeout(function(e){return function(){return e.renderBoardMembers()}}(this),10),this.lastSearch="",this.loadingEl=this.$(".js-loading"),this.helperEl=this.$(".js-helper"),this},t.prototype.loadOrgData=function(){var e;e=this.model.getOrganization(),null!=e&&this.model.editable()&&y.loadOrganizationMembersMinimal(e.id).then(function(e){return function(){e.renderOrgMembers()}}(this)).done()},t.prototype.renderBoardMembers=function(){var e,t,r,n,o,i;for(t=this.$(".js-board-members").hide(),e=t.find(".js-list").empty(),this.model.memberList.models.length>7&&e.addClass("collapsed"),i=this.model.memberList.models,r=0,n=i.length;n>r;r++)o=i[r],this.appendSubview(this.subview(w,o),e);t.show()},t.prototype.renderOrgMembers=function(){var e,t,r,n,o,i,s,a,u;r=this.$(".js-org-members").hide(),t=r.find(".js-list").empty(),e=r.find(".js-add-all-org-members").empty(),n=r.find(".js-more-org-members").addClass("hide"),a=this.model.getOrganization(),null!=a&&(i=this.model.orgMembersAvailable(),i.length>0&&(u=!1,i.length>7&&(u=!0,n.removeClass("hide")),s=i.slice(0,7),C.each(s,function(e){return function(e){var r;return r=e.toJSON(),(null!=a?a.isPremOrgAdmin(e):void 0)&&(r.className="no-option"),t.append(B.fill("select_member",r,{},{member:B.member}))}}(this)),o={count:i.length.toString()},e.text(j("add all org members",o)),r.show()))},t.prototype.renderEmailInviteToSearchResults=function(e){var t,r,n,o,i,s;return o=/[\s\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,n=/[\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,r=C.compact(_.removeDomainFromEmailAddress(e.email).split(o)).join(" ").replace(n,""),e.fullName=_.toTitleCase(r),e.canAddAsObserver=null!=(i=this.model.getOrganization())?i.isFeatureEnabled("observers"):void 0,e.modelType="Board",t=null!=(s=this.model.getOrganization())?s.get("prefs").externalMembersDisabled:void 0,this.$(".js-no-results").toggleClass("hide",!t),t?void 0:this.$(".js-uninvited-search-results").append(x(e)).show()},t.prototype.showMemberMenu=function(e){var t,r;_.stop(e),t=n(e.target).closest(".js-select-member").attr("idMember"),r=this.modelCache.get("Member",t),b.pushView({view:new s({model:r,board:this.model,modelCache:this.modelCache})})},t.prototype.searchPaste=function(){return this.loadingEl.show(),this.input.keyup()},t.prototype.search=function(e){var t,r,n;if(null==this.lastSearch||this.lastSearch!==this.input.val()){if(this.lastSearch=this.input.val(),n=this.input.val().toLowerCase().trim(),""===n)return void this.clearSearchResults();this.loadingEl.show(),o({url:"/1/search/members/",type:"get",data:{idBoard:this.model.id,query:n,idOrganization:null!=(t=this.model.getOrganization())?t.id:void 0,onlyOrgMembers:null!=(r=this.model.getOrganization())?r.externalMembersDisabled():void 0},dataType:"json",success:function(e){return function(t){return e.renderSearchResults(n,t)}}(this)})}},t.prototype.keydownEvent=function(e){var t;t=h.getKey(e),t===m.Enter?this.$(".js-search-results .js-list .selected .js-select-member").length>0?(_.stop(e),this.$(".js-search-results .js-list .selected:first .js-select-member").click()):this.$(".js-search-results .js-list .email-invite").length>0&&(_.stop(e),this.$(".email-invite:first").click()):(t===m.ArrowUp||t===m.ArrowDown)&&(_.stop(e),_.navMenuList(this.$(".js-search-results .js-list"),"li",t))},t.prototype.clearSearchResults=function(){return this.helperEl.show(),this.lastSearch="",this.input.val("").focus().select(),this.$(".js-search-results").hide(),this.$(".js-uninvited-search-results").empty().hide(),this.renderOrgMembers()},t.prototype.removeInvitation=function(e){var t;t=n(e.currentTarget).closest(".invitation").data("id"),p.prototype.delete({model:this.model,idInvitation:t,success:function(e){return function(){return T("Invitations","Delete Board Invite"),e.search}}(this)}),_.setCaretAtEnd(this.input[0])},t.prototype.canRemoveInvitation=function(e){return e.get("idMemberInviter")===i.myId()||this.model.owned()},t.prototype.sendEmailInvite=function(e){var t,r,i,s;if(_.stop(e),r=this.$(".js-send-email-invite"),null==r.attr("disabled")){if(t=this.$(".js-email-data .js-full-name"),s=t.val().trim(),!_.validName(s))return _.setCaretAtEnd(t),void n(".js-name-error").show();i={fullName:s,email:this.$(".js-email-data .js-email").val().trim(),type:"normal"},this.$("#addAsObserver").is(":checked")&&(i.type="observer"),r.attr("disabled","disabled"),o({url:"/1/board/"+this.model.id+"/members",type:"put",dataType:"json",data:i,success:function(e){return function(t){var n;return n=new f(t,{modelCache:e.modelCache}),e.renderOrgMembers(),T("Invitations","Send Email Board Invite to New Member","Role: "+t.type),r.removeAttr("disabled"),b.hide()}}(this),error:function(e){return function(t,o){n(".manage-member-section.js-error").removeClass("hide").find(".error").html(t.responseText),e.$(".js-uninvited-search-results").empty().hide(),r.removeAttr("disabled"),e.input.focus().select(),T("Invitations","Error",t.responseText)}}(this)})}},t.prototype.addMember=function(e){var t;t=this.modelCache.get("Member",e),this.model.addMember(t),this.renderOrgMembers()},t.prototype.didClickAddOtherMember=function(e){var t,r,o;return _.stop(e),n(e.target).closest(".item.disabled").length>0?void 0:(t=n(null!=e?e.target:void 0).closest(".js-select-member").attr("idMember"),this.clearSearchResults(),o=this.model.getOrganization(),r=this.modelCache.get("Member",t),r&&(null!=o?o.isMember(r):void 0)?T("Invitations","Add Org Member to Board","Role: Member"):T("Invitations","Add Other Member to Board","Role: Member"),this.addMember(t))},t.prototype.didClickAddOrgMember=function(e){var t;return _.stop(e),T("Invitations","Add Org Member to Board (via List)","Role: Member"),t=n(null!=e?e.target:void 0).closest(".js-select-member").attr("idMember"),this.addMember(t)},t.prototype.didClickAddAllOrgMembers=function(e){var t,r;return _.stop(e),T("Invitations","Add All Org Members to Board"),r=this.model.orgMembersAvailable(),t=r.length.toString(),c.pushView("add all org members",{model:this.model,text:j("confirm.add all org members.text",{memberCount:t}),confirmBtnClass:"primary",fxConfirm:function(e){return function(t){var n,o,i,s;for(s=[],n=0,o=r.length;o>n;n++)i=r[n],s.push(e.model.addMember(i));return s}}(this)})},t.prototype.didClickViewMoreOrgMembers=function(e){_.stop(e),T("Invitations","View More Org Members"),b.pushView({view:new u({model:this.model,modelCache:this.modelCache})})},t.prototype.willBePushedDown=function(){return this.savedSearch=this.input.val()},t.prototype.willBePopped=function(){return this.savedSearch=""},t}(k)},{}],301:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h={}.hasOwnProperty;n=e(141),o=e(241),s=e(197),u=e(440),a=e(441),c=e(89),l=e(438),d=e(38),c(u,i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="activity",t.prototype.initialize=function(){this.mode="all",this.fullHistory=this.options.fullHistory,null==this.fullHistory&&(this.fullHistory=!1),this.actionListView=this.collectionSubview(o,new n(this.getActions(),{modelCache:this.modelCache}),{renderOpts:{compact:!this.fullHistory,key:"boardmenuactivity",context:this.model}}),this.makeDebouncedMethods("renderMoreActionsLink"),this.listenTo(this.modelCache,"add:Action:"+this.model.id,function(e){return function(){return e.actionListView.collection.reset(e.getActions(),{silent:!0}),e.renderMoreActionsLinkDebounced()}}(this)),this.loadMoreActions()},t.prototype.className="board-menu-content-frame",t.prototype.events={"click .js-show-all":"showAll","click .js-show-comments":"showComments","click .js-more-actions":"loadMoreActions"},t.prototype.render=function(){return this.$el.html(l.fill("board_menu_activity",this.model.toJSON())),this.actionListView.setElement(this.$(".js-list-activity")[0]),this.renderActions(),this.renderMode(),this},t.prototype.renderActions=function(){return this.actionListView.render(),this.renderMoreActionsLink()},t.prototype.renderMoreActionsLink=function(){return this.$(".js-more-actions").toggle(this.hasMoreActions()),this},t.prototype.renderMode=function(){return this.$(".js-control-option").removeClass("is-active"),"all"===this.mode?(this.$(".js-list-activity").removeClass("is-only-comments"),this.$(".js-show-all").addClass("is-active")):(this.$(".js-list-activity").addClass("is-only-comments"),this.$(".js-show-comments").addClass("is-active")),this},t.prototype.showAll=function(e){this.mode="all",this.renderMode(),d("Board Menu","Activity","Show All")},t.prototype.showComments=function(e){this.mode="comments",this.renderMode(),d("Board Menu","Activity","Show Comments Only")},t}(a)),t.exports=i},{}],302:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b=function(e,t){function r(){this.constructor=e}for(var n in t)w.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},w={}.hasOwnProperty;n=e("jquery"),o=e(25),i=e(410),l=e(458),p=e(109),h=e(441),a=e(452),d=e(333),c=e(320),u=e(331),m=e(127),f=e("underscore"),v=e(438),y=e(38),g=e(84),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.viewTitleKey="more",t.prototype.initialize=function(e){return this.sidebarView=e.sidebarView,this.listenTo(this.model,{"change:subscribed":this.renderSubscribeState})},t.prototype.className="board-menu-content-frame",t.prototype.events={"click .js-open-settings":"openSettings","click .js-open-stickers":"openStickers","click .js-open-labels":"openLabels","click .js-open-archive":"openArchivedItems","click .js-share":"shareBoard","click .js-email":"openEmailSettings","click .js-board-subscribe":"toggleSubscribe","click .js-copy-board":"copyBoard","click .js-close-board":"closeConfirm","click .js-leave-board":"leaveConfirm","click .js-short-url":"selectUrl","submit form":"cancel"},t.prototype.render=function(e){var t,r,n;return r=o.me(),t=this.model.toJSON(),t.canJoin=this.model.canJoin(),t.canInviteMembers=this.model.canInviteMembers(),t.confirmed=r.get("confirmed"),n=this.model.getOrganization(),t.canCloseBoard=this.model.owned()||(null!=n?n.isFeatureEnabled("superAdmins"):void 0)&&(null!=n?n.owned():void 0),t.editableByMember=this.model.editableByMember(r),t.canLeaveBoard=(this.model.isMemberObserver(r)||this.model.editableByMember(r))&&r.getMembershipData(this.model).canRemove,t.canCloseOrLeave=t.canLeaveBoard||t.canCloseBoard,t.pLevelClass=i.getPermLevelIconClassForBoard(this.model),t.pLevelAltText=i.getPermLevelAltTextForBoard(this.model),t.helperText=g(["board perms",this.model.getPermLevel(),"short summary"]),this.$el.html(v.fill("board_menu_more",t)),this.renderSubscribeState(),this},t.prototype.renderSubscribeState=function(){var e;e=this.model.toJSON(),this.$(".js-subscribed-state").html(v.fill("board_menu_subscribed_state",e))},t.prototype.openSettings=function(e){p.stop(e),this.sidebarView.pushView("settings"),y("Board Menu","Open Settings")},t.prototype.openLabels=function(e){p.stop(e),this.sidebarView.pushView("labels"),y("Board Menu","Open Labels")},t.prototype.openStickers=function(e){p.stop(e),this.sidebarView.pushView("stickers"),y("Board Menu","Open Stickers","Via More Menu")},t.prototype.openArchivedItems=function(e){p.stop(e),this.sidebarView.pushView("archive"),y("Board Menu","Open Archived Items")},t.prototype.shareBoard=function(e){p.stop(e),l.toggle({elem:this.$(e.target).closest(".js-share"),view:new d({model:this.model,modelCache:this.modelCache})}),y("Board Menu","Open Share, Print, and Export Menu")},t.prototype.openEmailSettings=function(e){p.stop(e),l.toggle({elem:this.$(e.target).closest(".js-email"),view:new c({model:this.model,modelCache:this.modelCache})}),y("Board Menu","Open Email Settings - Menu")},t.prototype.copyBoard=function(e){p.stop(e),n(e.target).hasClass("disabled")||(y("Board Menu","Open Copy Board"),l.toggle({elem:this.$(e.target).closest(".js-copy-board"),view:new u({model:this.model,copyBoard:!0,modelCache:this.modelCache})}))},t.prototype.toggleSubscribe=function(e){p.preventDefault(e),n(e.target).hasClass("disabled")||(this.model.subscribe(!this.model.get("subscribed")),y("Board Menu","Subscribe/Unsubscribe"))},t.prototype.closeConfirm=function(e){p.stop(e),y("Board Menu","Open Close Menu"),a.toggle("close board",{elem:n(e.target).closest("a"),model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.close(),y("Board","Close Board")}}(this)})},t.prototype.leaveConfirm=function(e){var t,r;p.stop(e),y("Board Menu","Open Leave Menu"),r=o.me(),t=r.removeMembershipConfirmationKey(this.model),a.toggle(t,{elem:n(e.target).closest("a"),confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.removeMember(r),y("Board","Leave Board")}}(this)})},t.prototype.selectUrl=function(e){return this.$(".js-short-url").focus().select()},t.prototype.cancel=function(e){return p.stop(e),!1},t}(h)},{}],303:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g=function(e,t){function r(){this.constructor=e}for(var n in t)v.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},v={}.hasOwnProperty;n=e("jquery"),i=e(80),s=e(16),h=e(708),a=e(486),u=e(458),c=e(109),l=e(441),d=e("underscore"),m=e(89),f=e(438),p=e(84),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),m(a,t),t.prototype.viewTitleKey="organization members",t.prototype.initialize=function(){var e;e=this.model.getOrganization(),null!=e&&this.listenTo(e.memberList,"add remove reset",this.frameDebounce(this.render))},t.prototype.events={"click .js-board-members .js-select-member":"didClickAddOrgMember",keyup:"keyupEvent","click .js-open-option":"openOption","mouseenter .js-select-member":"hoverMember"},t.prototype.renderOrgMembers=function(e){var t,r,n,o,i,s;for(i=[],i=e?this.modelCache.get("Member",e):this.model.orgMembersAvailable(),s=this.$(".js-board-members .js-list").empty().show(),r=0,n=i.length;n>r;r++)o=i[r],t=o.toJSON(),s.append(f.fill("select_member",t,{},{member:f.member}));this.$(".js-board-members .js-num-org-mem").empty().text(i.length)},t.prototype.render=function(){var e,t;return e=this.model.toJSON({prefs:!0}),e.orgName=null!=(t=this.model.getOrganization())?t.get("displayName"):void 0,e.canInvite=!0,e.editable=this.model.editable(),this.$el.html(h(e)),this.renderOrgMembers(),this.$(".js-board-members").removeClass("hide"),this},t.prototype.keyupEvent=function(e){var t,r,o,a,l;r=i.getKey(e),l=n(".js-search-input").val().trim(),r===s.Enter?(c.stop(e),this.$(".js-org-members .js-list .selected").length>0&&(t=this.$(".js-org-members .js-list .selected:first .js-select-member").attr("idMember"),o=this.modelCache.get("Member",t),this.model.addMember(o),this.$(".js-search-input").focus().select())):r===s.ArrowUp||r===s.ArrowDown?(c.stop(e),c.navMenuList(n(null!=(a=u.view)?a.el:void 0).find(".js-org-members .js-list"),".item",r)):l.length>0?(this.filterAndFillMembers(l),n(".js-org-members .js-list").removeClass("collapsed"),n(".js-add-all-org-members").addClass("hide")):(this.renderOrgMembers(),n(".js-org-members .js-list").addClass("collapsed"),n(".js-add-all-org-members").removeClass("hide"))},t.prototype.filterAndFillMembers=function(e){var t,r,n;r=d.pluck(this.model.orgMembersAvailable(),"id"),n=c.filterMembers(this.modelCache,e,r),n=n.slice(0,7),n.length>0?(this.renderOrgMembers(n),t=this.$(".js-org-members .js-list .item:first"),c.selectMenuItem(this.$(".js-org-members .js-list"),".item",t)):this.$(".js-org-members .js-list").html('<li><p class="empty"></p></li>').find("p").text(p("no matched memebers"))},t.prototype.didClickAddOrgMember=function(e){var t,r;return c.stop(e),t=n(e.target).closest(".js-select-member").attr("idMember"),r=this.modelCache.get("Member",t),this.model.addMember(r),this.render()},t}(l)},{}],304:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h=function(e,t){function r(){this.constructor=e}for(var n in t)m.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},m={}.hasOwnProperty;n=e("jquery"),o=e(410),s=e(5),a=e(458),u=e(109),c=e(441),p=e(438),d=e(84),l=e(626),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.viewTitleKey="change visibility",t.prototype.tagName="ul",t.prototype.events={"click .js-select":"selectVis"},t.prototype.className="pop-over-list",t.prototype.render=function(){var e,t,r;return r=this.options.organization,r.canSetVisibility("private")||r.canSetVisibility("org")||r.canSetVisibility("public")?(e=this.model.getPref("permissionLevel"),this.$el.html(l({current:e,canChange:!0,mustChange:!r.canSetVisibility(e),hasSuperAdmins:r.isFeatureEnabled("superAdmins"),hasOrg:!0,orgName:r.get("displayName"),privateRestricted:!r.canSetVisibility("private"),orgRestricted:!r.canSetVisibility("org"),publicRestricted:!r.canSetVisibility("public")}))):(t={isOrgAdmin:r.owned(),orgSettingsUrl:s.getOrganizationAccountUrl(r),organization:r.toJSON()},this.$el.html(p.fill("cant_add_board_to_org",t))),this},t.prototype.selectVis=function(e){var t,r,o;return u.stop(e),t=n(e.target).closest(".js-select"),t.hasClass("disabled")||t.closest(".js-disabled").length?void 0:(o=t.attr("name"),this.options.idOrganizationSource&&null!=(r=this.modelCache.get("Organization",this.options.idOrganizationSource))&&r.boardList.remove(this.model),this.model.update({idOrganization:this.options.organization.id,"prefs/permissionLevel":o}),this.options.organization.boardList.add(this.model),a.hide())},t}(c)},{}],305:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S=function(e,t){function r(){this.constructor=e}for(var n in t)M.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},M={}.hasOwnProperty;n=e("jquery"),v=e("underscore"),i=e(306),s=e(452),b=e(209),w=e(84),_=e(228),c=e(425),l=e(424),a=e(321),u=e(566),d=e(429),k=e(430),p=e(458),h=e("bluebird"),m=e("react"),C=e(436)("plugin_item"),f=e(109),g=e(441),j=e("xtend"),x=C.renderable(function(e){var t,r,n,o,i,s,a,u,c,l;return i=e.loading,s=e.name,o=e.iconUrl,r=e.desc,u=e.source,a=e.pluginsEnabled,t=e.canEnable,l=e.supportsSettings,c=e.supportsAuth,n=e.hasPersonalSettings,C.div(".power-up-item-icon",function(){return o&&C.img(".power-up-item-icon-image.plugin-item-icon",{src:o,alt:s}),C.icon("check",{class:"power-up-item-enabled-icon"})}),C.div(".power-up-item-details",function(){return C.h4(".power-up-item-details-header.js-show-details",function(){return i?C.format("loading"):s?C.text(s):C.format("unknown plugin"),C.icon("information",{class:"power-up-item-details-info-icon"})})}),C.div(".power-up-item-actions",function(){return t?((n||l||c)&&C.a(".power-up-item-actions-button.mod-settings.button-link.js-show-settings",{href:"#"},function(){return C.icon("gear")}),C.a(".power-up-item-actions-button.mod-enable.button-link.js-enable",{href:"#"},function(){return C.format("enable")}),C.a(".power-up-item-actions-button.mod-disable.button-link.js-disable",{href:"#"},function(){return C.format("disable")})):void 0})}),y=function(e,t){return e.catch(c.Error.UnableToLoadManifest,function(){return t})},t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return S(t,e),t.prototype.initialize=function(e){var t,r;this.plugin=e.plugin,this.io=l.get(this.plugin),t=this.model.getOrganization(),r=t&&t.isFeatureEnabled("plugins"),this.initialData={loading:!0,pluginsEnabled:r,canEnable:r&&this.model.editable()}},t.prototype.renderOnce=function(){return this.$el.html(x(this.initialData)),this.renderPluginData(),this},t.prototype.renderPluginData=function(){return h.props({loading:!1,name:this.io.getName(),desc:y(this.io.getDescription(),this.io.manifestUrl),iconUrl:y(this.io.getIconUrl(),null),hasPersonalSettings:this.hasPersonalSettings(),supportsAuth:this.io.supports("show-authorization"),supportsSettings:this.io.supports("show-settings")}).then(function(e){return function(t){return e.$el.html(x(j(e.initialData,t))),e.subscribe(e.model.boardPluginList.snoop(),e.renderEnabledState)}}(this)).done(),this},t.prototype.getEnabledState=function(){return this.model.isPluginEnabled(this.plugin.id)},t.prototype.renderEnabledState=function(){return this.$el.toggleClass("is-enabled",this.getEnabledState()),this},t.prototype.hasPersonalSettings=function(){return v.any(this.model.getPluginData(this.io.id),function(e){var t;return t=e.private,null!=t})},t.prototype.enable=function(){this.model.enablePlugin(this.plugin.id)},t.prototype.disable=function(){this.model.disablePlugin(this.plugin.id)},t.prototype.showDetails=function(e){var t,r;t=this.model,r=l.get(this.plugin),p.toggle({elem:e,getViewTitle:b(r,"getName"),reactElement:m.createElement(u,{io:r,model:t,key:this.plugin.id})})},t.prototype.showSettings=function(e){var t;return t=l.get(this.plugin),p.toggledBy(e)?void p.hide():void h.props({supportsAuth:this.io.supports("show-authorization"),supportsSettings:this.io.supports("show-settings"),hasPersonalSettings:this.hasPersonalSettings()}).then(function(e){return function(t){return t.supportsAuth?d.one({timeout:1e3,plugin:e.plugin,command:"authorization-status",board:e.model}).then(function(e){return j(t,{authStatus:e})}):h.resolve(t)}}(this)).then(function(r){return function(n){var o;return o=function(t){return v.bind(t,r,e)},p.toggle({elem:e,getViewTitle:function(){return t.getName().then(function(e){return w(["view title","powerup settings"],{name:e})})},reactElement:m.createElement(a,j(n,{plugin:r.plugin,key:r.io.id,authorize:o(r.showAuthorization),removeData:o(r.clearData),showSettings:o(r.showPluginSettings)}))})}}(this))},t.prototype.showAuthorization=function(e){d.one({plugin:this.plugin,command:"show-authorization",board:this.model,el:e}).done()},t.prototype.showPluginSettings=function(e){d.one({plugin:this.plugin,command:"show-settings",board:this.model,el:e}).done()},t.prototype.clearData=function(e){s.pushView("clear plugin data",{elem:e,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.clearPluginData(e.io.id),e.renderPluginData(),e.io.supports("remove-data").then(function(t){return t?d.one({plugin:e.plugin,command:"remove-data"}):void 0}).done()}}(this)})},t}(i)},{}],306:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h={}.hasOwnProperty;n=e("jquery"),u=e(441),i=e(458),a=e(109),s=e(322),l=e(438),d=e(38),c=e("underscore"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.initialize=function(e){this.powerUp=e.powerUp},t.prototype.className="power-up-item",t.prototype.events={"click .js-enable":function(e){return a.stop(e),i.hide(),this.enable()},"click .js-disable":function(e){return a.stop(e),i.hide(),this.disable()},"click .js-show-details":function(e){return a.stop(e),this.showDetails(e.currentTarget)},"click .js-show-settings":function(e){return a.stop(e),this.showSettings(e.currentTarget)}},t.prototype.renderOnce=function(){var e;return e=c.clone(this.powerUp),e.canEnable=this.model.owned(),this.$el.html(l.fill("power_up_item",e)),this.renderEnabledState(),this.listenTo(this.model,{"change:powerUps":this.renderEnabledState}),this},t.prototype.getEnabledState=function(){return this.model.isPowerUpEnabled(this.powerUp.name)},t.prototype.renderEnabledState=function(){return this.$el.toggleClass("is-enabled",this.getEnabledState()),this},t.prototype.enable=function(){this.model.addToSet("powerUps",this.powerUp.name),d("Power-Ups",this.powerUp.displayName,"Enable")},t.prototype.disable=function(e){this.model.pull("powerUps",this.powerUp.name),d("Power-Ups",this.powerUp.displayName,"Disable")},t.prototype.showDetails=function(e){return i.toggle({elem:e,view:new s({powerUp:this.powerUp}),autoPosition:!0}),d("Power-Ups",this.powerUp.displayName,"Show Details")},t.prototype.showSettings=function(e){return i.toggle({elem:e,view:this.powerUp.settingsView(this.model),autoPosition:!0}),d("Power-Ups",this.powerUp.displayName,"Show Details")},t}(u)},{}],307:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S=function(e,t){function r(){this.constructor=e}for(var n in t)M.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},M={}.hasOwnProperty;n=e("jquery"),b=e("underscore"),s=e(305),a=e(306),c=e(575),l=e(576),i=e(298),d=e(30),p=e(425),h=e(424),g=e("bluebird"),v=e(441),y=e(577),w=e(84),C=e(227),j=e("xtend"),o=e(25),x=e(38),_=[{name:"voting",iconSrc:"https://d78fikflryjgj.cloudfront.net/images/powerups/7a64373ca0f3e1858b4a9a3928d561d3/voting-icon.svg",aboutTemplate:"power_ups_about_voting",settingsView:function(e){return new y({model:e})},screenshots:["https://d78fikflryjgj.cloudfront.net/images/powerups/voting/screenshots/de063c1421497f609fef2e5b37797cff/2015-3-23-screenshot1.png"]},{name:"cardAging",iconSrc:"https://d78fikflryjgj.cloudfront.net/images/powerups/d33d5c107f425c21f7f3a19f602871ec/card-aging-icon.svg",aboutTemplate:"power_ups_about_card_aging",settingsView:function(e){return new l({model:e})},screenshots:["https://d78fikflryjgj.cloudfront.net/images/powerups/card-aging/screenshots/27972dcff7cab11886b671d6fcfc11ae/2015-3-23-screenshot1.png"]},{name:"calendar",iconSrc:"https://d78fikflryjgj.cloudfront.net/images/powerups/ff818ba7df38d8af7f68d26ae408f5eb/calendar-icon.svg",aboutTemplate:"power_ups_about_calendar",settingsView:function(e){return new c({model:e})},screenshots:["https://d78fikflryjgj.cloudfront.net/images/powerups/calendar/screenshots/e204a5ed5a8dc113760b185b4c7276c5/2015-3-23-screenshot1.png"]}],m=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return S(t,e),t.prototype.events={"click .js-close-explainer":"closeExplainer"},t.prototype.className="power-ups-explainer",t.prototype.render=function(){var e;return e=C.render(function(){return C.p(".power-ups-explainer-text",w("power-up explainer")),C.a(".power-ups-explainer-close.js-close-explainer",{href:"#"},w("close power-up explainer"))}),this.$el.html(e),this},t.prototype.closeExplainer=function(e){this.remove(),o.me().dismiss("PowerUpsPaneExplainer"),x("Board Menu","Dismiss Power-Ups Explainer")},t}(v),k=C.renderable(function(){return C.div(function(){return C.div(".spinner.loading")})}),f=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return S(t,e),t.prototype.render=function(){return this.$el.html(k()),this},t}(v),t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return S(t,e),t.prototype.viewTitleKey="power ups",t.prototype.className="board-menu-content-frame power-ups-list",t.prototype.renderOnce=function(){var e,t;return this.appendSubview(this.subview(f,this.model)),e=this.model.getOrganization(),t=!(null!=e&&e.isFeatureEnabled("plugins")),g.all([b.map(_,function(e){return function(t){var r,n;return n=t.name,r=j(t,{displayName:w(["power ups",n,"name"]),description:w(["power ups",n,"description"])}),{displayName:r.displayName,view:e.subview(a,e.model,{powerUp:r},n)}}}(this)),g.try(function(e){return function(){return t?[]:d.loadBoardAvailablePlugins(e.model.id).map(function(t){return h.get(t).getName().catch(p.Error.UnableToLoadManifest,function(){return t.get("url")}).then(function(r){return{displayName:r,view:e.subview(s,e.model,{plugin:t},t.id)}})})}}(this))]).spread(function(e){return function(r,n){var s;return s=b.chain([r,n]).flatten().sortBy(function(e){return e.displayName.toLowerCase()}).pluck("view").value().concat(t?[e.subview(i,e.model)]:[]),o.me().isDismissed("PowerUpsPaneExplainer")||s.unshift(e.subview(m,e.model)),e.ensureSubviews(s)}}(this)).done(),this},t}(v)},{}],308:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;n=e(304),i=e(309),s=e(458),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.initialize=function(e){return this.disableNone=null!=e?e.disableNone:void 0,t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.disableNone&&this.$(".js-submit").addClass("disabled").attr("disabled","disabled"),this},t.prototype.showOrgBoardVisPerms=function(e,t){return s.pushView({view:new n({model:this.model,organization:e,idOrganizationSource:t,modelCache:this.modelCache})})},t.prototype.submit=function(e){return t.__super__.submit.apply(this,arguments)},t.prototype.canAddToOrg=function(e){return!e.isFeatureEnabled("restrictVis")||e.canSetVisibility("org")},t.prototype.updateModel=function(e){return this.model.update({idOrganization:e,"prefs/permissionLevel":"org"})},t.prototype.orgSelected=function(){return t.__super__.orgSelected.apply(this,arguments),this.disableNone?""===this.$(".js-org").val()?this.$(".js-submit").addClass("disabled").attr("disabled","disabled"):this.$(".js-submit").removeClass("disabled").removeAttr("disabled"):void 0},t}(i)},{}],309:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h={}.hasOwnProperty;n=e(25),o=e(304),s=e(30),a=e(458),u=e(109),c=e(441),l=e(438),d=e(38),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="change organization",t.prototype.events={"click .js-submit":"submit","change .js-org":"orgSelected"},t.prototype.render=function(){var e,t,r,o,i,s;if(e=this.model.toJSON({org:!0}),i=this.model.owned()?n.me().organizationList.models:[],e.orgs=function(){var e,t,r;for(r=[],e=0,t=i.length;t>e;e++)o=i[e],r.push(o.toJSON());return r}(),e.hasOrgs=0!==e.orgs.length,e.idOrganization)for(s=e.orgs,t=0,r=s.length;r>t;t++)o=s[t],o.id===e.idOrganization&&(o.select=!0);return e.isPrivate=this.model.isPrivate(),e.allowsSelfJoin=this.model.allowsSelfJoin(),this.$el.html(l.fill("popover_change_board_org",e)),this.updateOrgOptions(),this},t.prototype.showOrgBoardVisPerms=function(e,t){return a.pushView({view:new o({model:this.model,organization:e,idOrganizationSource:t,modelCache:this.modelCache})})},t.prototype.changeOrg=function(e,t){var r,n,o;return r=e!==t,r&&t&&null!=(n=this.modelCache.get("Organization",t))&&n.boardList.remove(this.model),o={},r&&(o.idOrganization=e),e&&(this.$(".js-make-org-visible").is(":checked")&&(o["prefs/permissionLevel"]="org"),this.$(".js-make-org-joinable").is(":checked")&&(o["prefs/selfJoin"]=!0)),this.model.update(o),r&&e&&this.modelCache.get("Organization",e).boardList.add(this.model),a.hide()},t.prototype.canAddToOrg=function(e){return e.canAddBoard(this.model)},t.prototype.submit=function(e){var t,r,n,o;return u.stop(e),d("Board","Change Org"),n=this.$(".js-org").val(),r=this.model.get("idOrganization"),o=this.modelCache.get("Organization",n),t=function(e){return function(){return e.changeOrg(n,r)}}(this),(null!=o?o.isFeatureEnabled("restrictVis"):void 0)?s.loadOrganizationMembersData(n).then(function(e){return function(){e.canAddToOrg(o)?t():e.showOrgBoardVisPerms(o,r)}}(this)).done():t()},t.prototype.updateOrgOptions=function(){var e;e=""!==this.$(".js-org").val(),this.$(".js-make-org-visible,.js-make-org-joinable").closest(".js-check-div").toggleClass("hide",!e)},t.prototype.orgSelected=function(e){return this.updateOrgOptions()},t}(c)},{}],310:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},f={}.hasOwnProperty;n=e("jquery"),o=e(309),s=e(314),a=e(316),u=e(458),c=e(109),l=e(441),p=e(438),h=e(38),d=e(84),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="settings",t.prototype.className="board-menu-content-frame",
t.prototype.events={"click .js-change-org:not(.disabled)":"changeOrg","click .js-toggle-covers:not(.disabled)":"toggleCovers","click .js-change-comments:not(.disabled)":"changeCommentingPerms","click .js-change-add-members:not(.disabled)":"changeAddMemberPerms","click .js-toggle-org-mem-join:not(.disabled)":"toggleSelfJoin"},t.prototype.initialize=function(){this.listenTo(this.model,"change",this.frameDebounce(this.render))},t.prototype.render=function(){var e,t;return e=this.model.toJSON({prefs:!0,url:!0,labels:!0}),e.cardCovers=e.prefs.cardCovers,t=this.model.getOrganization(),e.orgDisplayName=null!=t?t.get("displayName"):void 0,e.hasOrg=null!=(null!=t?t.id:void 0),e.commentsDisplay=d(["board pref perms",this.model.getCommentPerm()]),e.invitationsDisplay=d(["board pref perms",this.model.getInvitePerm()]),e.canChangeOrg=(null!=t?t.owned():void 0)||this.model.owned(),(null!=t?t.owned():void 0)&&!this.model.owned()&&(e.setOrgNull=!0),this.$el.html(p.fill("board_menu_settings",e,{editable:this.model.editable(),owned:this.model.owned()})),this},t.prototype.changeOrg=function(e){var t,r;c.stop(e),this.model.owned()?(u.toggle({elem:n(e.target).closest("a"),view:o,options:{model:this.model,modelCache:this.modelCache}}),h("Board Menu","Settings","Change Org")):(t=this.model.get("idOrganization"),null!=(r=this.modelCache.get("Organization",t))&&r.boardList.remove(this.model),this.model.update("idOrganization",""),u.hide(),h("Board Menu","Settings","Remove Org"))},t.prototype.toggleCovers=function(e,t){c.stop(e),this.model.setPref("cardCovers",!this.model.getPref("cardCovers")),h("Board Menu","Settings","Enable/Disable Cover Images")},t.prototype.changeCommentingPerms=function(e){c.stop(e),u.toggle({elem:n(e.target).closest("a"),view:new a({model:this.model,modelCache:this.modelCache})}),h("Board Menu","Settings","Open Change Commenting Permissions")},t.prototype.changeAddMemberPerms=function(e){c.stop(e),u.toggle({elem:n(e.target).closest("a"),view:new s({model:this.model,modelCache:this.modelCache})}),h("Board Menu","Settings","Open Change Add Member Permissions")},t.prototype.toggleSelfJoin=function(e){c.stop(e),this.model.setPref("selfJoin",!this.model.getPref("selfJoin")),this.model.save(),h("Board Menu","Settings","Toggle Allow Org Join")},t}(l)},{}],311:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M,B=function(e,t){function r(){this.constructor=e}for(var n in t)T.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},T={}.hasOwnProperty;n=e("jquery"),o=e(128),i=e(141),s=e(241),a=e(25),u=e(13),c=e(300),p=e(455),h=e(475),l=e(302),m=e(458),f=e(97),g=e(109),v=e(441),b=e(127),w=e("underscore"),S=e(438),_=e(619),M=e(38),C=e(82),k=e(75),x=e(34),j=e(89),y=e(440),t.exports=d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return B(t,e),j(y,t),t.prototype.viewTitleKey="menu",t.prototype.className="board-menu-content-frame",t.prototype.headerDisplayTypeClass="is-board-menu-default-view",t.prototype.initialize=function(e){return this.sidebarView=e.sidebarView,this.showAllMembers=!1,this.numActionsToShow=15,this.makeDebouncedMethods("render","renderMembers"),this.listenTo(this.model.memberList,{"change:status":this.renderMembersDebounced,"add remove reset":this.renderDebounced}),this.listenTo(this.model,{"change:memberships":this.renderDebounced,"change:prefs:canInvite":this.renderDebounced,"change:prefs.selfJoin":this.renderDebounced,"change:prefs.invitations":this.renderDebounced,"change:powerUps":this.renderEnabledPowerUpCount,"change:idOrganization":this.renderMembersDebounced}),this.listenTo(this.model.boardPluginList,{"add remove reset":this.renderEnabledPowerUpCount}),this.actionListView=this.collectionSubview(s,new i([],{modelCache:this.modelCache}),{renderOpts:{limit:this.numActionsToShow,context:this.model,compact:!0,truncateComments:function(e){return function(t){return t.get("date")<e.model.get("dateLastView")}}(this),excludeTypes:["copyCommentCard"]}}),this.waitForId(this.model,function(e){return function(){return e.listenTo(e.modelCache,"add:Action:"+e.model.id+" remove:Action:"+e.model.id+" change:Action:"+e.model.id,e.frameDebounce(function(){return e.renderActionCount(),e.actionListView.collection.reset(e.getActions())})),e.actionListView.collection.reset(e.getActions())}}(this))},t.prototype.events={"click .js-open-manage-board-members":"openAddMembers","click .js-show-extra-members":"showExtraMembers","click .js-hide-extra-members":"hideExtraMembers","click .js-join-board":"joinBoard","click .js-change-background":"changeBackground","click .js-open-power-ups":"showPowerUps","click .js-open-stickers":"openStickers","click .js-open-card-filter":"showCardFilter","click .js-open-activity":"openActivity","click .js-open-more":"openMore"},t.prototype.render=function(){var e,t,r;return r=a.me(),this.showAllMembers=!1,t=this.model.editable(),e={canJoin:this.model.canJoin(),canInviteMembers:this.model.canInviteMembers(),canAssign:t,canChangeBackground:t,canEnablePowerUps:t,selfJoin:this.model.allowsSelfJoin()},this.$el.html(_(e)),this.renderMembers(),this.actionListView.setElement(this.$(".js-menu-action-list")[0]),this.renderActions(),this.renderActionCount(),this.renderEnabledPowerUpCount(),this.renderBackgroundPreview(),this},t.prototype.renderBackgroundPreview=function(){var e,t,r,n,o,i,s;return e=this.$(".js-fill-background-preview").css({"background-image":"","background-color":""}),null!=(null!=(n=u[this.model.getPref("background")])?n.tile:void 0)?r=this.model.getPref("backgroundImage"):null!=this.model.getPref("backgroundImageScaled")||null!=this.model.getPref("backgroundImage")?r=null!=(o=null!=(i=null!=(s=g.previewBetween(this.model.getPref("backgroundImageScaled"),90,60,600,400))?s.url:void 0)?i:this.model.get("fullSizeUrl"))?o:this.model.getPref("backgroundImage"):t=null!=this.model.getPref("backgroundColor")?this.model.getClientBackgroundColor(this.model.getPref("background")):this.model.getClientBackgroundColor("blue"),e.css({"background-image":"url("+r+")","background-color":t}),this},t.prototype.getDateLastViewedActionsStorageKey=function(){return this.model.id?"timeLastViewedActions-"+this.model.id:null},t.prototype.setDateLastViewedActions=function(e){var t;null!=(t=this.getDateLastViewedActionsStorageKey())&&f.set(t,e.toISOString())},t.prototype.setDateLastViewedActionsAsNow=function(){this.setDateLastViewedActions(new Date)},t.prototype.getDateLastViewedActions=function(){var e,t;return null!=(t=this.getDateLastViewedActionsStorageKey())&&null!=(e=f.get(t))?new Date(e):null},t.prototype.renderActionCount=function(){var e,t,r,n,o,i,s,u,c,l;for(this.$(".js-unread-activity-count").empty(),o=this.getDateLastViewedActions(),c=50,null==o&&(o=new Date,this.setDateLastViewedActions(o)),s=function(e){return function(e){var t,r;return t=new Date(e.get("date"))>o,r=e.get("idMemberCreator")!==a.me().id,t&&r}}(this),t=0,l=this.model.getActions(),i=0,u=l.length;u>i;i++)e=l[i],s(e)&&t++;return t>0&&t<=this.numActionsToShow&&this.setDateLastViewedActionsAsNow(),r=t,t>=c&&(r=c+"+"),t>this.numActionsToShow&&this.$(".js-unread-activity-count").text(r),n={count:r,hasCount:t>this.numActionsToShow},this.$(".js-fill-activity-button").empty().append(S.fill("board_menu_more_activity_button",n)),this},t.prototype.getEnabledPowerUpCount=function(){return this.model.get("powerUps").length+this.model.boardPluginList.length},t.prototype.renderEnabledPowerUpCount=function(){var e;return e=this.getEnabledPowerUpCount(),this.$(".js-enabled-power-up-count").text(e?k(e):""),this},t.prototype.renderMembers=function(){var e,t,r,n,o,i,s,a,u,c,l,d,m,f,g,v,y,_,k,j,S,M;for(o=null!=this.model.get("idOrganization"),g=this.model.getOrganization(),M=this.model.orderedVisibleMembers(),w.any(M,function(e){return function(t){return e.model.ownedByMember(t)}}(this))||x(new Error("Board had no admins, id = "+this.model.id+", "+M.length+" visibleMembers")),n=w.groupBy(M,function(e){return function(t){var r;return r=e.model.getMembershipFor(t),e.model.isVirtual(t)?"invited":null==r?"other":r.deactivated?"deactivated":"observer"===r.memberType?"observer":null!=r.orgMemberType||null!=(null!=g?g.getMembershipFor(t):void 0)?"team":o?"other":"member"}}(this)),k=[{selector:".js-list-members",list:n.member},{selector:".js-list-team-members",list:n.team},{selector:".js-list-invited-members",list:n.invited},{selector:".js-list-non-team-members",list:n.other},{selector:".js-list-observers",list:n.observer},{selector:".js-deactivated-members",list:n.deactivated}],s=1===w.keys(n).length&&(null!=n.member||null!=n.team),y=9,b.fSmall&&(y=7),_=3,d=y*_,a=y*(_+1),i=0,u=0,l=k.length;l>u;u++)v=k[u],j=v.selector,m=v.list,null==m&&(m=[]),r=this.$(j),t=r.find(".js-list"),e=r.find(".js-heading"),r.toggleClass("is-hidden",0===m.length),e.toggleClass("is-hidden",s),r.toggleClass("is-partial-row",m.length<y),c=m.length>a,M=m,c&&!this.showAllMembers&&(i+=m.length-d,M=M.slice(0,d)),S=function(){var e,t,r;for(r=[],e=0,t=M.length;t>e;e++)f=M[e],r.push(this.subview(h,f,{board:this.model}));return r}.call(this),this.ensureSubviews(S,t);return this.$(".js-show-extra-members").text(C("show more members",i)),this.$(".js-show-extra-members-button").toggleClass("is-shown",!this.showAllMembers&&i>0),this.$(".js-hide-extra-members-button").toggleClass("is-shown",this.showAllMembers),this.defer(function(){return p.refreshDraggableSidebarMembers()}),this},t.prototype.showExtraMembers=function(e){g.stop(e),this.showAllMembers=!0,this.renderMembers()},t.prototype.hideExtraMembers=function(e){g.stop(e),this.showAllMembers=!1,this.renderMembers()},t.prototype.renderActions=function(){return this.actionListView.render(),this},t.prototype.showPowerUps=function(e){g.stop(e),this.sidebarView.pushView("powerUps"),M("Board Menu","Open Power-Ups")},t.prototype.showCardFilter=function(e){g.stop(e),this.sidebarView.pushView("filter"),M("Board Menu","Open Card Filter Menu")},t.prototype.openStickers=function(e){g.stop(e),this.sidebarView.pushView("stickers"),M("Board Menu","Open Stickers","Via Default Menu")},t.prototype.changeBackground=function(e){g.stop(e),this.sidebarView.pushView("background"),M("Board Menu","Open Change Background")},t.prototype.openActivity=function(e){g.stop(e),this.sidebarView.pushView("activity"),this.setDateLastViewedActionsAsNow(),M("Board Menu","View All Board Activity")},t.prototype.openMore=function(e){g.stop(e),this.sidebarView.pushView("more"),M("Board Menu","More Menu")},t.prototype.joinBoard=function(e){g.stop(e),this.$(".js-join-board").remove(),this.model.joinBoard(),M("Board Menu","Join Board via Sidebar")},t.prototype.openAddMembers=function(e){var t;g.stop(e),M("Board Menu","Add Members via Sidebar Button"),t=new c({model:this.model,modelCache:this.modelCache}),t.loadOrgData(),m.toggle({elem:n(e.target).closest(".js-open-manage-board-members"),view:t})},t.prototype.remove=function(){return this.setDateLastViewedActionsAsNow(),t.__super__.remove.apply(this,arguments)},t}(v)},{}],312:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x=function(e,t){function r(){this.constructor=e}for(var n in t)j.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},j={}.hasOwnProperty;n=e("jquery"),o=e(253),i=e(299),s=e(301),l=e(311),u=e(307),c=e(310),a=e(302),p=e(65),h=e(313),m=e(315),f=e(16),g=e(458),v=e(326),y=e(439),b=e(109),w=e(441),_=e("underscore"),k=e(438),C=e(38),t.exports=d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.initialize=function(){y.addHandler(this,{scope:"board_sidebar"}),this.defaultView=this.subview(l,this.model,{sidebarView:this}),this.viewStack=[["default",this.defaultView]]},t.prototype.events={"click .js-hide-sidebar":"hideSidebar","click .js-pop-widget-view":"popView",shortcut:"shortcut"},t.prototype.shortcut=function(e){switch(e){case f.F:return this.pushView("filter"),"F - Search and Filter Cards"}},t.prototype.className="board-menu-container",t.prototype.render=function(){return this.$el.html(k.fill("board_sidebar")),this.renderView(),this},t.prototype.sidebarSubviews=function(){return{default:l,filter:h,archive:o,stickers:v,labels:i,background:m,activity:s,powerUps:u,more:a,settings:c}},t.prototype.hackySidebarLifetimeEvents={filter:{didBecomeVisible:function(e){var t;return t=e.$(".js-autofocus")[0],b.setCaretAtEnd(t)}},more:{didBecomeVisible:function(e){return e.selectUrl()}},archive:{didBecomeVisible:function(e){var t;return t=e.$(".js-autofocus")[0],b.setCaretAtEnd(t)}}},t.prototype.viewNamed=function(e){var t,r,n,o,i,s,a,u;for(i=this.viewStack,t=0,r=i.length;r>t;t++)if(s=i[t],o=s[0],u=s[1],e===o)return u;if(a=_.result(this,"sidebarSubviews")[e],null==a)throw new Error("Unknown sidebar view "+e);return n="filter"===e?this.model.filter:this.model,new a({model:n,modelCache:this.modelCache,sidebarView:this})},t.prototype.topSidebarView=function(){return _.last(this.viewStack)[1]},t.prototype.renderView=function(e,t){var r,o,i,s,a,u;return i=this.$(".js-board-menu-title"),s=this.$(".js-board-menu-title-text").empty(),o=this.$(".js-board-menu-content-wrapper").empty().scrollTop(0),u=this.topSidebarView(),null!=u.headerDisplayTypeClass?this.$(".js-board-menu-title").addClass(u.headerDisplayTypeClass):this.$(".js-board-menu-title").removeClass("is-board-menu-default-view"),r=u.render().$el,null!=e&&r.addClass(e),a=u.getViewTitle(),a?(i.addClass("is-in-frame"),s.append(a)):i.removeClass("is-in-frame"),o.append(r),null!=t&&n(".board-menu-content-frame").one("transitionend webkitTransitionEnd",function(e){return function(e){return t(u)}}(this)),this.defer(function(t){return function(){return null!=e?r.removeClass(e):void 0}}(this)),u.delegateEvents(),this},t.prototype.pushView=function(e){var t,r,o,i,s,a,u,c;c=this.viewNamed(e),r=null!=(s=null!=(a=this.hackySidebarLifetimeEvents)&&null!=(u=a[e])?u.didBecomeVisible:void 0)?s:function(){},o=c===this.topSidebarView(),i=this.model.viewState.get("showSidebar"),i?o?r(c):t=r:n(".board-menu").one("transitionend webkitTransitionEnd",function(e){return function(e){return r(c)}}(this)),i||this.model.viewState.setShowSidebar(!0),o||(this.viewStack.push([e,c]),this.renderView("is-right-of-frame",t),g.hide())},t.prototype.popView=function(){1!==this.viewStack.length&&(this.topSidebarView().remove(),this.viewStack.pop(),this.renderView("is-left-of-frame"),g.hide(),C("Board Menu","Go Back a View"))},t.prototype.hideSidebar=function(){this.model.viewState.setShowSidebar(!1)},t}(w)},{}],313:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h={}.hasOwnProperty;n=e("jquery"),i=e(80),s=e(16),a=e(109),u=e(441),c=e("underscore"),d=e(438),l=e(84),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="filter cards",t.prototype.className="board-menu-content-frame",t.prototype.initialize=function(){return this.listenTo(this.model.board,"change:labelNames change:memberships",this.renderFilterOptions),this.listenTo(this.model,"change",this.renderFilterOptions)},t.prototype.events={"click .js-toggle-label-filter":"toggleLabelFilter","click .js-select-member":"toggleMemberFilter","click .js-show-all-labels":"showAllLabels","click .js-show-all-members":"showAllMembers","click .js-clear-all":"clearFilter","click .js-due-filter":"toggleDateFilter","mouseenter .js-filter-search-results li":"hoverSelect","mouseenter .js-clear-all":"clearAllSelected","mouseenter .js-show-all-members":"clearAllSelected","keydown .js-input":"keyDownEvent","keyup .js-input":"keyUpEvent"},t.prototype.render=function(){var e;return this.isFiltering=!1,e=this.model.toJSON(),this.$el.html(d.fill("filter_cards",e)),this.renderFilterOptions(),this},t.prototype.renderFilterOptions=function(){var e,t,r,n,o,i,s;return e=this.model.toJSON({board:!0,expanded:!0}),r=!c.isEmpty(e.labels),n=!c.isEmpty(e.members),t=this.model.get("title")&&(r||n),t?(e.limitMembers=!1,e.limitLabels=!1):(o=6,(null!=(i=this.model.get("limitMembers"))?i:!0)&&(e.remainingMembers=Math.max(0,e.members.length-o),e.members=c.first(e.members,o),e.limitMembers=e.remainingMembers>0),(null!=(s=this.model.get("limitLabels"))?s:!0)&&(e.remainingLabels=Math.max(0,e.labels.length-o),e.labels=c.first(e.labels,o),e.limitLabels=e.remainingLabels>0)),c.extend(e,{filtering:t,showHelper:!t,showLabels:!t||r,showMembers:!t||n,showDueTimes:!t,isFiltering:this.model.isFiltering(),labels:e.labels.map(function(e){var t;return t=e.color?l(["labels",e.color]):"",c.extend({defaultColorName:t},e)})}),this.$(".js-filter-search-results").html(d.fill("filter_cards_search_results",e,{},{member:d.member,select_member:d.select_member})),null===this.model.get("title")&&this.$(".js-input").val(""),this},t.prototype.keyDownEvent=function(e){var t,r,n,o;n=i.getKey(e),(n===s.Enter||n===s.ArrowUp||n===s.ArrowDown)&&(a.stop(e),o=".item, .label-list-item",t=this.$(o),r=t.filter(".selected").first(),n===s.Enter?r.find("a").click():(n===s.ArrowUp||n===s.ArrowDown)&&(0===r.length?t.first().addClass("selected"):a.navMenuList(this.$el,o,n)))},t.prototype.keyUpEvent=function(e){var t;return t=i.getKey(e),t!==s.Escape&&t!==s.Enter&&t!==s.ArrowUp&&t!==s.ArrowDown?this.model.save({title:this.$(".js-input").val(),limitMembers:!0,limitLabels:!0}):void 0},t.prototype.showAllMembers=function(e){a.stop(e),this.model.save("limitMembers",!1)},t.prototype.showAllLabels=function(e){a.stop(e),this.model.save("limitLabels",!1)},t.prototype._clearAndFocusInput=function(){return this.model.save({title:""}),this.$(".js-input").val("").focus()},t.prototype.toggleLabelFilter=function(e){var t,r;return a.stop(e),t=this.model.toJSON({expanded:!0}),c.isEmpty(t.labels)||this._clearAndFocusInput(),r=n(e.target).closest("a").attr("data-idlabel"),this.model.toggleIdLabel(r)},t.prototype.toggleMemberFilter=function(e){var t;return a.stop(e),t=this.model.toJSON({expanded:!0}),c.isEmpty(t.members)||this._clearAndFocusInput(),a.stop(e),this.model.toggleMember(n(e.target).closest("a").attr("idMember"))},t.prototype.toggleDateFilter=function(e){var t;return a.stop(e),t=n(e.target).closest("a").attr("time"),this.model.get("due")===t?this.model.save("due",null):this.model.save("due",t)},t.prototype.clearFilter=function(e){return this.model.clear()},t.prototype.clearAllSelected=function(){return this.$("li").removeClass("selected")},t.prototype.hoverSelect=function(e,t){return this.clearAllSelected(),a.selectMenuItem(n(e.currentTarget).closest("ul"),"li",n(e.currentTarget))},t}(u)},{}],314:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(317),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.viewTitleKey="add member permissions",t.prototype.getTemplate=function(){return"board_menu_invitations"},t.prototype.getPerm=function(){return"invitations"},t}(o)},{}],315:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function r(){this.constructor=e}for(var n in t)y.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},y={}.hasOwnProperty;n=e(451),o=e(25),i=e(13),s=e(133),u=e(30),c=e(324),l=e(325),d=e(109),p=e(441),h=e("underscore"),f=e(438),g=e(38),m=e(84),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.viewTitleKey="change background",t.prototype.className="board-menu-content-frame",t.prototype.events={"change .js-upload-image":"setUploadImage",'click a[href="/gold"]':function(){return g("Board Menu","Open Trello Gold Promo - via Change Background")},'click a[href="/business-class"]':function(){return g("Board Menu","Open Business Class Promo - via Change Background")}},t.prototype.initialize=function(){var e;t.__super__.initialize.apply(this,arguments),this.makeDebouncedMethods("render","renderCustomBackgrounds"),this.listenTo(o.me().boardBackgroundList,"change add remove reset",this.renderCustomBackgroundsDebounced),(o.me().isFeatureEnabled("customBoardBackgrounds")||(null!=(e=this.model.getOrganization())?e.isFeatureEnabled("customBoardBackgrounds"):void 0))&&u.loadMemberCustomBackgrounds(o.myId()).done()},t.prototype.fillBackgroundList=function(e,t,r){var n;null==r&&(r=c),e.find(".js-select-background:not(.js-uploader)").remove(),this.appendSubviews(function(){var e,o,i;for(i=[],e=0,o=t.length;o>e;e++)n=t[e],i.push(this.subview(r,n,{board:this.model}));return i}.call(this),e)},t.prototype.render=function(){var e,t,r,n,a,u,c;return n=this.model.toJSON(),n.enabled_additionalBackgrounds=o.me().isFeatureEnabled("additionalBoardBackgrounds")||(null!=(u=this.model.getOrganization())?u.isFeatureEnabled("additionalBoardBackgrounds"):void 0),n.enabled_customBoardBackgrounds=o.me().isFeatureEnabled("customBoardBackgrounds")||(null!=(c=this.model.getOrganization())?c.isFeatureEnabled("customBoardBackgrounds"):void 0),n.idMember=o.myId(),this.$el.html(f.fill("board_change_background",n)),a=function(e){return function(e,t){var r,n,o,a;a=[];for(n in i)r=i[n],r.type!==e||(null!=(o=r.pack)?o.name:void 0)!==t||r.discontinued||a.push(new s(h.extend({name:n},r)));return a}}(this),e=this.$(".js-default-list"),r=this.$(".js-gold-photos-list"),t=this.$(".js-gold-patterns-list"),this.fillBackgroundList(e,a("default")),this.fillBackgroundList(r,a("premium","Photos")),this.fillBackgroundList(t,a("premium","Patterns and Textures")),n.enabled_additionalBackgrounds||(r.append(f.fill("product_promo_button")),t.append(f.fill("product_promo_button"))),this.renderCustomBackgrounds(),this},t.prototype.renderCustomBackgrounds=function(){var e,t,r,n,i;return r=o.me().isFeatureEnabled("customBoardBackgrounds")||(null!=(i=this.model.getOrganization())?i.isFeatureEnabled("customBoardBackgrounds"):void 0),e=this.$(".js-custom-list"),r?(n=this.modelCache.get("Member",o.myId()),t=n.boardBackgroundList.filter(function(e){return"custom"===e.get("type")}),this.fillBackgroundList(e,t,l),e.find(".js-uploader").appendTo(e)):e.append(f.fill("product_promo_button")),this},t.prototype.uploadBackgroundsAndAddPreviews=function(e){var t,r,i,s,a;for(a=[],r=i=0,s=e.length;s>i;r=++i)t=e[r],a.push(function(e){return function(r){var i,s,a;return a=new FileReader,i={file:t},d.validFileSize(t)?(s=new FormData,s.append("token",o.myToken()),s.append("file",t),a.onload=function(t){return e.modelCache.get("Member",o.myId()).boardBackgroundList.create({type:"custom",fullSizeUrl:t.target.result},{data:s,processData:!1,contentType:!1,error:function(t){return t.set("error","Failed"),e.setTimeout(function(){return t.destroy()},5e3)},success:function(t){var r;return r=e.model,h.extend(r.attributes.prefs,{backgroundColor:t.get("color"),backgroundImage:t.get("fullSizeUrl"),backgroundImageScaled:t.get("scaled"),backgroundTile:t.get("tile"),backgroundBrightness:t.get("brightness")}),r.setPref("background",t.id)}})},a.readAsDataURL(t)):void n.flash("file too large","error")}}(this)(r));return a},t.prototype.setUploadImage=function(e){var t,r;return d.stop(e),t=this.$(".js-upload-image"),g("Board Menu","Upload Custom Background"),null==t.prop("files")&&t.val()?void d.uploadFile(o.myToken(),t,function(){}):(r=t[0].files,void(r.length>0&&this.uploadBackgroundsAndAddPreviews(r)))},t}(p)},{}],316:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(317),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.viewTitleKey="commenting permissions",t.prototype.getTemplate=function(){return"board_menu_commenting"},t.prototype.getPerm=function(){return"comments"},t}(o)},{}],317:[function(e,t,r){var n,o,i,s,a,u,c,l,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p={}.hasOwnProperty;n=e("jquery"),o=e(410),s=e(458),a=e(109),u=e(441),c=e(438),l=e(38),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="change permissions",t.prototype.initialize=function(){this.listenTo(this.model,"change",this.frameDebounce(this.render))},t.prototype.events={"click .js-select":"selectPerm"},t.prototype.render=function(){var e,t,r,n;return e=this.model.toJSON({prefs:!0,url:!0}),e.cardCovers=e.prefs.cardCovers,t=this.model.getOrganization(),e.hasOrg=null!=(null!=t?t.id:void 0),e.orgCanSee=e.hasOrg&&("public"===(r=this.model.getPref("permissionLevel"))||"org"===r),e.premium=null!=t?t.isFeatureEnabled("observers"):void 0,e.voting_showObservers=(e.premium||e.voting_observers)&&e.hasOrg,e.comments_showObservers=(e.premium||e.comments_observers)&&e.hasOrg,e.pLevelClass=o.getPermLevelIconClassForBoard(this.model),(null!=t?t.owned():void 0)?(e.orgOwner=!0,e.orgName=t.get("displayName"),this.model.owned()||(e.setOrgNull=!0)):this.model.owned()||(e.noEditOrg=!0),n=this.getTemplate(),this.$el.html(c.fillMenu(n,e,{editable:this.model.editable(),owned:this.model.owned()})),this},t.prototype.selectPerm=function(e){var t,r,o;a.stop(e),l("Board","Change "+this.getPerm()),t=n(e.target).closest(".js-select"),t.hasClass("disabled")||t.closest(".js-disabled").length||(r=this.getPerm(),o=t.attr("name"),this.model.setPref(r,o),this.model.save(),s.popView())},t}(u)},{}],318:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},f={}.hasOwnProperty;n=e("jquery"),o=e(410),i=e(308),a=e(458),u=e(109),c=e(441),p=e(438),h=e(38),d=e(84),l=e(626),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey=function(){return this.model.owned()?"change visibility":"visibility"},t.prototype.tagName="ul",t.prototype.initialize=function(){this.listenTo(this.model,"change",this.render)},t.prototype.className="pop-over-list",t.prototype.events={"click .js-select":"selectVis"},t.prototype.render=function(){var e;return e=this.model.getOrganization(),this.$el.html(l({canChange:this.model.owned(),current:this.model.getPref("permissionLevel"),hasSuperAdmins:null!=e?e.isFeatureEnabled("superAdmins"):void 0,hasOrg:null!=e,orgName:null!=e?e.get("displayName"):void 0,privateRestricted:null!=e&&!(null!=e?e.canSetVisibility("private"):void 0),orgRestricted:null!=e&&!(null!=e?e.canSetVisibility("org"):void 0),publicRestricted:null!=e&&!(null!=e?e.canSetVisibility("public"):void 0)})),this},t.prototype.selectVis=function(e){var t,r;if(u.stop(e),t=n(e.target).closest(".js-select"),!t.hasClass("disabled")&&!t.closest(".js-disabled").length){if(r=t.attr("name"),"org"===r&&!this.model.getOrganization())return void a.pushView({view:i,options:{model:this.model,modelCache:this.modelCache,disableNone:!0}});this.model.setPref("permissionLevel",r),this.model.save(),h("Board","Change Board Visibility",r),a.popView()}},t}(c)},{}],319:[function(e,t,r){var n,o,i,s,a,u,c,l=function(e,t){function r(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d={}.hasOwnProperty;n=e("jquery"),o=e(452),s=e(109),a=e(441),u=e(438),c=e(38),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="background options",t.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render)},t.prototype.events={"click .js-delete-background":"deleteBackground","click .js-select-option":"selectOption"},t.prototype.render=function(){var e,t;return t=this.model.toJSON(),t.tile=this.model.get("tile"),e=this.model.get("brightness"),t.brightnessLight="light"===e,t.brightnessDark="dark"===e,this.$el.html(u.fill("board_background_options",t)),this},t.prototype.selectOption=function(e){var t,r;t=n(e.target).closest(".js-select-option"),null!=t.attr("data-board-brightness")?this.model.update("brightness",t.attr("data-board-brightness")):null!=t.attr("data-background-display-type")&&(r=t.attr("data-background-display-type"),this.model.update("tile","tile"===r))},t.prototype.deleteBackground=function(e){return s.stop(e),o.pushView("delete background",{elem:n(e.target).closest(".js-delete-background"),model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.destroy(),e.remove(),c("Board Menu","Change Background","Delete Uploaded Background")}}(this)})},t}(a)},{}],320:[function(e,t,r){var n,o,i,s,a,u,c,l,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p={}.hasOwnProperty;n=e("jquery"),o=e(451),i=e(452),a=e(109),u=e(441),l=e(438),c=e(84),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="add cards via email",t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.modelCache,"add:List remove:List change:List:closed reset:List",this.frameDebounce(this.render)),this.listenTo(this.model,"change:myPrefs",this.frameDebounce(this.render)),this.allowEmail=!0,null==this.model.getPref("emailKey")?this.model.generateEmailKey():void 0},t.prototype.events={"change .js-select-position":"updatePosition","change .js-select-list":"updateList","click .js-generate-address":"generateAddress","click .js-send-address":"sendAddressEmail","click .js-autofocus":"focusInput"},t.prototype.render=function(){var e,t,r,n,o,i,s,a,u;return t=this.model.getPref("idEmailList"),u="None",o=!1,i=function(){var e,i,s,a;for(s=this.model.listList.models,a=[],e=0,i=s.length;i>e;e++)n=s[e],r={id:n.id,name:n.get("name")},n.id===t&&(o=!0,r.selected=!0,u=r.name),a.push(r);return a}.call(this),null==t||o||(n=this.modelCache.get("List",t),null!=n?(s=c("archived list",{listName:n.get("name")}),u=s,i.push({id:n.id,name:s,selected:!0})):(u=c("unknown list placeholder"),i.push({id:null,name:u,selected:!0}))),e={email:null!=(a=this.model.getPref("fullEmail"))?a:"",lists:i,listName:u,positionName:c(["email position",this.model.getPref("emailPosition")])},e["position_"+this.model.getPref("emailPosition")]=!0,this.$el.html(l.fill("board_menu_email",e)),this},t.prototype.focusInput=function(e){n(e.target).focus().select()},t.prototype.updateValue=function(e,t){var r;return r=this.$el.find(e).val(),null!=r&&r!==this.model.getPref(t)?this.model.setPref(t,r):void 0},t.prototype.updatePosition=function(){return this.updateValue(".js-select-position","emailPosition")},t.prototype.updateList=function(){return this.updateValue(".js-select-list","idEmailList"),this.allowEmail=!0},t.prototype.generateAddress=function(e){a.stop(e),i.pushView("regenerate email address",{model:this.model,confirmBtnClass:"negate",popOnClick:!0,fxConfirm:function(e){return function(t){return e.model.set({"myPrefs/emailKey":null}),e.allowEmail=!0,e.model.generateEmailKey()}}(this)})},t.prototype.sendAddressEmail=function(e){a.stop(e),this.allowEmail&&(this.allowEmail=!1,this.model.api({method:"emailKey/message",type:"post"},function(e){return function(e){return e?o.show("could not send email","error","email",5e3):o.flash("email sent","confirm")}}(this)))},t}(u)},{}],321:[function(e,t,r){var n,o,i,s,a,u;n=e(429),o=e("react"),s=e(433)("plugin_auth"),u=e("xtend"),i=e("underscore"),a=s.renderable(function(e){var t,r,n,o,i,a,u,c;return o=null!=e?e:{},c=o.supportsSettings,u=o.supportsAuth,
n=o.hasPersonalSettings,t=o.authStatus,r=o.authorize,i=o.removeData,a=o.showSettings,s.ul(".pop-over-list",function(){return!u||t&&t.authorized?(c&&s.li({onClick:a},function(){return s.a(function(){return s.format("edit-power-up-settings")})}),n?s.li({onClick:i},function(){return s.a(function(){return s.format("remove-personal-settings")})}):void 0):s.li({onClick:r},function(){return s.a(function(){return s.format("authorize-account")})})})}),t.exports=o.createClass({displayName:"PluginSettings",render:function(){return a(this.props)}})},{}],322:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;i=e(441),a=e(438),s=e(28).locales,n=e(81),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(e){this.powerUp=e.powerUp},t.prototype.getViewTitle=function(){return this.powerUp.displayName},t.prototype.render=function(){var e;return e={about:a.fill(this.powerUp.aboutTemplate),showScreenshots:n.matches(s[0],"en"),screenshots:this.powerUp.screenshots},this.$el.html(a.fill("power_up_item_details",e)),this},t}(i)},{}],323:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n=e(458),i=e(109),s=e(441),a=e(438),u=e(38),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="rename board",t.prototype.events={"click .js-rename-board":"rename","submit form":"rename"},t.prototype.render=function(e){var t;return t={},t.boardName=this.model.get("name"),this.$el.html(a.fill("popover_rename_board",t)),this},t.prototype.rename=function(e){var t,r;return i.stop(e),t=this.$(".js-board-name"),r=t.val().trim(),""===r?void t.focus().select():(u("Board","Successfully Rename Board"),this.model.update("name",r),void n.hide())},t}(s)},{}],324:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e(109),i=e(441),s=e("underscore"),a=e(438),u=e(38),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:error",this.render)},t.prototype.className="board-background-select js-select-background",t.prototype.events={click:"selectBackground","click .js-background-attribution":"clickAttribution"},t.prototype.render=function(){var e,t,r;return e=this.model.toJSON(),e.pending=null==this.getId()&&null==e.error,null==e.color&&(e.backgroundImageThumbnail=null!=(t=null!=(r=o.previewBetween(this.model.get("scaled"),90,60,600,400))?r.url:void 0)?t:this.model.get("fullSizeUrl")),this.$el.html(a.fill("board_background_selection",e)),this.$el.toggleClass("is-still-uploading-background",e.pending),this},t.prototype.clickAttribution=function(e){return e.stopPropagation(),u("Board Menu","Change Background","Clicked Attribution")},t.prototype.getId=function(){return this.model.get("name")},t.prototype.selectBackground=function(e){var t,r,n;o.stop(e),null!=this.getId()&&(t=this.options.board,s.extend(t.attributes.prefs,{backgroundColor:this.model.get("color"),backgroundImage:this.model.get("fullSizeUrl"),backgroundImageScaled:this.model.get("scaled"),backgroundTile:null!=(r=this.model.get("tile"))?r:!1,backgroundBrightness:null!=(n=this.model.get("brightness"))?n:"unknown"}),t.setPref("background",this.getId()),u("Board Menu","Change Background",this.getId()))},t}(i)},{}],325:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;n=e(319),o=e(458),i=e(324),a=e(109),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:id",this.render)},t.prototype.events={"click .js-options":"openOptions",click:"selectBackground"},t.prototype.openOptions=function(e){return a.stop(e),o.toggle({elem:this.$(".js-options"),view:new n({model:this.model,modelCache:this.modelCache})})},t.prototype.getId=function(){return this.model.id},t}(i)},{}],326:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_=function(e,t){function r(){this.constructor=e}for(var n in t)k.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},k={}.hasOwnProperty;n=e("jquery"),o=e(451),i=e(25),s=e(585),a=e(455),u=e(30),c=e("bluebird"),l=e(186),h=e(22),p=e(587),m=e(109),f=e(441),g=e("underscore"),b=e(438),w=e(38),y=e(84),v=e(62),t.exports=d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _(t,e),t.prototype.viewTitleKey="stickers",t.prototype.className="board-menu-content-frame",t.prototype.initialize=function(){return v(i.isLoggedIn(),"Can't show the StickerPickerView when not logged in!"),this.me=i.me(),u.loadMemberCustomStickers(this.me.id).done(),this.listenTo(this.me.customStickerList,"change add remove reset",this.renderCustomStickers)},t.prototype.events={"change .js-upload-image":"setUploadImage",'click a[href="/gold"]':function(){return w("Board Menu","Open Trello Gold Promo - via Sticker Picker")},'click a[href="/business-class"]':function(){return w("Board Menu","Open Business Class Promo - via Sticker Picker")}},t.prototype.render=function(){return this.$el.html(b.fill("sticker_select")),this.renderStandardStickers(),this.renderPremiumStickers(),this.renderCustomStickers(),this.defer(function(){return a.refreshDraggableStickers()}),this},t.prototype._getStickers=function(e){var t;return t=h[e].premium,h[e].stickers.map(function(e){return new l(g.extend({premium:t},e),{modelCache:this.modelCache})})},t.prototype._loadStickers=function(e){var t,r,o;return o="sticker-list-loading",e.addClass(o),r=e.find(".sticker-select-image").get(),t=r.map(function(e){var t;return t=n(e),new c(function(e){return t.load(e),t.error(e)})}),c.all(t).then(function(){return e.removeClass(o)}).done()},t.prototype.renderStandardStickers=function(){var e,t;return e=this.$(".js-standard-sticker-list"),t=this._getStickers("standard").map(function(e){return function(t){return e.subview(p,t)}}(this)),this.appendSubviews(t,e),this._loadStickers(e),this},t.prototype.renderPremiumStickers=function(){var e,t,r,o,i,s,a,u,c;i=null!=(u=this.model.getOrganization())?u:null,e=this.$(".js-premium-stickers"),o=this.me.isFeatureEnabled("additionalStickers")||(null!=i?i.isFeatureEnabled("additionalStickers"):void 0);for(s in h)a=h[s].premium,a&&(t=n(b.fill("sticker_pack_selection_list",{displayName:y(["sticker packs",s])})),r=t.filter(".js-sticker-list"),c=this._getStickers(s).map(function(e){return function(t){return e.subview(p,t,{org:i})}}(this)),this.appendSubviews(c,r),this._loadStickers(r),e.append(t),o||r.append(b.fill("product_promo_button")));return this},t.prototype.renderCustomStickers=function(){var e,t,r,n,o;return r=null!=(n=this.model.getOrganization())?n:null,e=this.$(".js-custom-sticker-list"),e.children().detach(),t=this.me.isFeatureEnabled("customStickers")||(null!=r?r.isFeatureEnabled("customStickers"):void 0),t?(o=this.me.customStickerList.map(function(e){return function(t){return e.subview(s,t,{org:r})}}(this)),this.appendSubviews(o,e)):e.append(b.fill("product_promo_button")),e.append(b.fill("sticker_select_item_upload",{id:this.me.id})),this.defer(function(){return a.refreshDraggableStickers()}),this},t.prototype.setUploadImage=function(e){var t,r;return m.stop(e),t=this.$(".js-upload-image"),null==t.prop("files")&&t.val()?void m.uploadFile(i.myToken(),t,function(){}):(r=t[0].files,void(r.length>0&&this.uploadStickers(r)))},t.prototype.uploadStickers=function(e){g.each(e,function(e){return function(t){var r,n,s;return s=new FileReader,r={file:t},m.validFileSize(t)?(n=new FormData,n.append("token",i.myToken()),n.append("file",t),s.onload=function(t){var r;return r=t.target.result,e.me.customStickerList.create({url:r},{data:n,processData:!1,contentType:!1,error:function(t){return t.set("error","Failed"),e.setTimeout(function(){return t.destroy()},5e3)}})},s.readAsDataURL(t)):void o.flash("file too large","error")}}(this))},t}(f)},{}],327:[function(e,t,r){var n,o,i,s,a,u,c,l,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p={}.hasOwnProperty;n=e("jquery"),i=e(458),s=e(109),a=e(441),u=e("underscore"),c=e(438),l=e(38),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="add list",t.prototype.events={"change .js-select-list-pos":"renderValue","click .js-add-list":"addList","submit form":"addList","click .js-cancel":"cancel"},t.prototype.initialize=function(e){return this.didAddList=e.didAddList,t.__super__.initialize.apply(this,arguments)},t.prototype.getLists=function(){return this.lists=this.model.listList,this.listsLength=this.lists.length+1},t.prototype.render=function(){var e;return e=this,this.$el.html(c.fill("popover_add_list")),this.setTimeout(function(e){return function(){return e.getClosestListPos(),e.getLists(),e.updateListList()}}(this),10),this},t.prototype.getClosestListPos=function(){var e,t,r;return t=n(".js-list"),r=[],this.closestListIdx=0,t.each(function(e){return function(o){var i;return i=parseInt(Math.abs(n(t[o]).offset().left+n(t[o]).width()/2-e.$el.offset().left),10),r.push(i)}}(this)),this.closestListIdx=u.indexOf(r,u.min(r)),e=n(t[this.closestListIdx]),e.length>0&&this.$el.offset().left>e.offset().left+e.width()/2&&this.closestListIdx<t.length?this.closestListIdx+=1:void 0},t.prototype.updateListList=function(){var e,t,r,o,i,s,a;for(a=this,e=n(a.el),r=e.find(".js-select-list-pos"),o=i=0,s=this.listsLength;s>=0?s>i:i>s;o=s>=0?++i:--i)n("<option>").val(o).text(o+1).appendTo(r);return t=r.find("option:last"),t=r.find("option:eq("+this.closestListIdx+")"),t.attr("selected","selected"),this.renderValue()},t.prototype.renderValue=function(){var e;e=parseInt(this.$(".js-select-list-pos").val(),10)+1,n(".js-pos-value").text(e.toString())},t.prototype.addList=function(e){var t,r,n,o,a;return s.stop(e),o=this.$(".js-list-name").val().trim(),""===o?void this.$(".js-list-name").focus().select():(t=this.$(".js-select-list-pos"),a=parseInt(t.find("option:selected").val(),10),n=a===this.listsLength-1?!1:!0,r="List"===o?!1:!0,i.hide(),void this.model.listList.create({name:o,pos:this.model.calcPos(a),closed:!1},{success:function(e){return function(t){return r&&n?l("Board","Add List","Successfully Add List - Changed Name, Changed Position"):r?l("Board","Add List","Successfully Add List - Changed Name, Default Position"):n?l("Board","Add List","Successfully Add List - Default Name, Changed Position"):l("Board","Add List","Successfully Add List - Default Name, Default Position"),e.didAddList(t)}}(this)}))},t.prototype.cancel=function(e){s.stop(e),i.hide(),l("Board Menu","Add List Menu","Click Cancel Button")},t}(a)},{}],328:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n=e("jquery"),i=e(416),s=e(86),a=e(109),u=e(438),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(){this.makeDebouncedMethods("render"),this.listenTo(this.model,"change:name change:desc",this.renderDebounced)},t.prototype.events={"click .js-edit-desc":"editDesc"},t.prototype.render=function(){var e,t,r;return t=this.model.get("desc"),r=this.model.get("descData"),e={hasDesc:!!t},this.$el.html(u.fillFromModel("board_desc",this.model,e)),e.hasDesc&&n(this.el).find(".board-description>div.current").html(s.markdownAsHtml(t,{textData:r})),this},t.prototype.editDesc=function(e){a.stop(e),this.edit("desc")},t}(i)},{}],329:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e(309),i=e(458),s=e(441),a=e(438),u=e(38),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.getViewTitle=function(){return this.model.getOrganization().get("displayName")},t.prototype.events={"click .js-change-org":"openChangeOrg","click .js-view-org":"viewOrg"},t.prototype.render=function(){var e,t;return t=this.model.getOrganization(),e=t.toJSON(),e.canChangeOrg=(null!=t?t.owned():void 0)||this.model.owned(),(null!=t?t.owned():void 0)&&!this.model.owned()&&(e.setOrgNull=!0),this.$el.html(a.fill("popover_board_header_org_menu",e)),this},t.prototype.openChangeOrg=function(e){var t,r;this.model.owned()?(i.pushView({view:o,options:{model:this.model,modelCache:this.modelCache}}),u("Board Header","Change Org from Board Header Org Menu")):(t=this.model.get("idOrganization"),null!=(r=this.modelCache.get("Organization",t))&&r.boardList.remove(this.model),this.model.update("idOrganization",""),i.hide(),u("Board Header","Remove Org from Board Header Org Menu"))},t.prototype.viewOrg=function(){return u("Board Header","View Org From Board Header Org Menu")},t}(s)},{}],330:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M,B,T,O,L,P,A,E,D,I,V,N,$,z,F,R,U,q,H=function(e,t){function r(){this.constructor=e}for(var n in t)K.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},K={}.hasOwnProperty,W=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};n=e("jquery"),o=e(327),i=e(25),s=e(328),a=e(410),u=e(329),c=e(312),d=e(347),p=e(138),h=e(368),m=e(373),f=e(318),g=e(452),v=e(5),y=e(454),b=e(455),w=e(70),_=e(26),k=e(463),C=e(16),x=e(456),j=e(466),S=e(469),M=e(490),B=e(30),T=e(197),O=e(568),L=e(458),P=e(323),A=e(439),E=e(109),D=e(441),I=e(127),V=e("underscore"),z=e(35),F=e(112),U=e(438),N=e(614),R=e(615),q=e(38),$=e(84),t.exports=l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return H(t,e),t.prototype.className="board-wrapper",t.prototype.events={sortcommit:"sortCommit","click .js-rename-board":"renameBoard","click .js-open-org-menu":"openOrgMenu","click .js-change-vis":"changeVis","click .js-open-desc":"openDesc","click .js-close-calendar":"toggleCalendar","click .js-calendar":"toggleCalendar","click .js-filter-cards-indicator":"openFilter","click .js-filter-card-clear":"clearFilters","click .js-board-header-subscribed":"openUnsubscribe","click .js-star-board":"toggleStarred","click .js-show-sidebar":"setSidebarShow","dblclick #board":"dblClickAddListMenu","click .js-reopen":"reopen",shortcut:"shortcut","prevent-scroll-selection":"preventScrollSelection"},t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.sidebarView=this.subview(c,this.model),this.inlineListComposerView=this.subview(k,this.model),this.makeDebouncedMethods("refreshOrganization","render","renderBoardBackground","renderBoardHeader","renderBoardHeaderCalendar","renderBoardHeaderDescription","renderBoardHeaderSubscribed","renderLists","renderPermissionLevel","updateControllerTitle"),this.listenTo(this.model,{"change:closed":this.renderDebounced,"change:desc":this.renderBoardHeaderDescriptionDebounced,"change:idOrganization":this.refreshOrganizationDebounced,"change:memberships":this.renderPermissionLevelDebounced,"change:name":function(e){return function(){return e.renderBoardHeaderDebounced(),e.updateControllerTitleDebounced()}}(this),"change:powerUps":function(){return this.renderBoardHeaderCalendarDebounced(),W.call(this.model.get("powerUps"),"calendar")>=0?void 0:this.closeCalendar()},"change:prefs.cardCovers":this.renderListsDebounced,"change:prefs.permissionLevel":function(e){return function(){return e.renderListsDebounced(),e.renderPermissionLevelDebounced()}}(this),"change:prefs.background change:prefs.backgroundTile change:prefs.backgroundBrightness":function(e){return function(){return e.renderBoardBackgroundDebounced(!0)}}(this),"change:subscribed":this.renderBoardHeaderSubscribedDebounced,permChange:this.permChange,ownedChange:this.renderBoardHeaderDebounced}),this.listenTo(this.model.viewState,{"change:showSidebar":this.renderSidebarState,"change:sidebarDisplayType":this.renderSidebarDisplayType}),this.listenTo(i.me().boardStarList,"add remove reset",function(e){return function(){return e.renderBoardHeaderStarred()}}(this)),this.memberTypeMe=this.model.getMemberType(i.me()),this.refreshOrganization(),this.listScrollLeft=null,this.savingScroll=!1,this.calcState={},this.listenTo(this.model.filter,"change",this.renderFilteringStatus),A.addHandler(this,{scope:"board"}),this.listListView=this.collectionSubview(j,this.model.listList,{id:"board",className:"u-fancy-scrollbar js-no-higher-edits",resetCallback:function(e){return function(){return e.postListListRender()}}(this)}),this.listenTo(this.listListView,{mouseMoveCardView:function(e,t){return this.ignoreMouseCardSelects||L.isVisible||b.sorting?void 0:this.model.viewState.selectCard(t.model)},mouseLeaveCardView:function(e,t){return this.ignoreMouseCardSelects||L.isVisible||b.sorting?void 0:this.model.viewState.selectCard(null)},moveCard:this.moveCardRequested,copyCard:this.copyCardRequested})},t.prototype.permChange=function(e){"none"===e?v.memberBoardsView():(this.render(),this.model.editable()||this.model.composer.save("vis",!1))},t.prototype.shortcut=function(e){var t,r,o,s,a;switch(r=this.model.editable(),s=i.isLoggedIn(),e){case C.Q:if(s)return this.model.filter.toggleQuietMode(),"Q - My cards";break;case C.X:return this.model.filter.clear(),"X - Clear All Filters";case C.W:return this.toggleSidebar(),"W - Toggle Board Sidebar";case C.ArrowDown:case C.J:return this.moveCard("down"),["Keyboard Nav","Down"];case C.ArrowUp:case C.K:return this.moveCard("up"),["Keyboard Nav","Up"];case C.ArrowRight:return this.moveCard("right"),["Keyboard Nav","Right"];case C.ArrowLeft:return this.moveCard("left"),["Keyboard Nav","Left"];case C.N:if(r&&(a=this.model.viewState.getList(),t=this.model.viewState.getCard(),null!=a&&null!=t))return o=a.openCards().indexOf(t),this.model.composer.save({list:a,index:o+1,vis:!0}),"N - Insert Card";break;case C.Escape:if(r)return b.sorting?b.abort():x.isEditing()||L.isVisible||y.isVisible||(this.model.composer.get("vis")?this.model.composer.save("vis",!1):this.model.viewState.get("listComposerOpen")?this.model.viewState.set("listComposerOpen",!1):this.sidebarView.popView()),v.showingCalendar(this)&&n(".calendar-day.active").removeClass("active"),!0}},t.prototype.openListComposer=function(){return this.model.viewState.openListComposer()},t.prototype.scrollToList=function(e){E.scrollElementIntoView(this.$("#board")[0],this.viewForList(e).el,{horizontal:!0,animated:!0})},t.prototype.viewForList=function(e){var t;return t=this.collectionSubview(j,this.model.listList),t.viewForModel(e)},t.prototype.scrollToCard=function(e){var t;return t=e.getList(),this.scrollToList(t),this.viewForList(t).scrollToCard(e)},t.prototype.preventScrollSelection=function(){var e,t;this.ignoreMouseCardSelects||(t=function(e){var t,r,n;return t=e.originalEvent,r=t.movementX,n=t.movementY,0!==r||0!==n},this.ignoreMouseCardSelects=!0,(e=function(r){return function(){return n(document).one("mousemove",function(n){t(n)?r.ignoreMouseCardSelects=!1:e()})}}(this))())},t.prototype.moveCard=function(e){var t,r,n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_;if(this.preventScrollSelection(),w=this.model.viewState.getCard(),null==w)return l=this.model.listList.find(function(e){return!e.openCards().isEmpty()}),void(null!=l&&l.selectFirstCardInList());if(_=w.getList(),g=_.openCards(),r=g.indexOf(w),o=function(e){return function(t,r,n,o){var i;if(i=t+r,e.model.filter.isFiltering)for(;i>=0&&n>i&&!o(i);)i+=r;return i}}(this),"up"===e||"down"===e){if(s="up"===e?-1:1,d=o(r,s,g.length,function(e){return function(t){return e.model.filter.satisfiesFilter(g.at(t))}}(this)),d>=0&&d<g.length)return t=g.at(d),this.scrollToCard(t),this.model.viewState.selectCard(t)}else if(("left"===e||"right"===e)&&(v=this.model.listList,u=v.indexOf(_),c="left"===e?-1:1,m=o(u,c,v.length,function(e){return function(t){return v.at(t).openCards().any(function(t){return e.model.filter.satisfiesFilter(t)})}}(this)),m>=0&&m<v.length)){for(h=v.at(m),f=h.openCards(),p=Math.min(r,f.length-1),y=[1,-1],b=[],i=0,a=y.length;a>i;i++){if(n=y[i],d=o(p-n,n,f.length,function(e){return function(t){return e.model.filter.satisfiesFilter(f.at(t))}}(this)),d>=0&&d<f.length){t=f.at(d),this.model.viewState.selectCard(t),this.scrollToCard(t);break}b.push(void 0)}return b}},t.prototype.renderClosed=function(){this.$el.html(U.fillFromModel("board_closed",this.model)),this.defaultBoardBackground()},t.prototype.renderOpen=function(){var e,t,r,o,s;for(e={},e.url=v.getBoardUrl(this.model),s=this.model.prefNames.concat(this.model.myPrefNames),t=0,r=s.length;r>t;t++)o=s[t],e[o+"_"+this.model.getPref(o)]=!0;e.canJoin=this.model.canJoin(),e.canInviteMembers=this.model.canInviteMembers(),e.confirmed=i.me().get("confirmed"),this.listListView.$el.detach(),this.$el.html(U.fillFromModel("board",this.model)),this.renderBoardHeader(),this.renderBoardBackground(),this.model.viewState.get("showSidebar")&&this.$el.addClass("is-show-menu"),this.appendSubview(this.sidebarView,this.$(".js-fill-board-menu")),this.renderSidebarState(),this.renderLists(),v.setLocation({title:e.name}),this.defer(function(e){return function(){return e.$("#board").unbind("mousedown.dragscrollable").dragscrollable({fxIgnore:function(e){var t,r,o,i;return t=n(e.target).closest("#board"),i=e.offsetY>t.height()-11,r=n(e.target).closest(".js-list-content").length>0,o=n(e.target).closest(".js-add-list").length>0,i||r||o}}),b.refreshListSortable()}}(this))},t.prototype.render=function(){return this.model.get("closed")?this.renderClosed():this.renderOpen(),this},t.prototype.renderFilteringStatus=function(){var e;return e=this.model.filter.isFiltering(),this.$(".js-filter-cards-indicator").toggleClass("hide",!e),this.$(".js-num-cards").toggleClass("hide",!e),this.$("#board").toggleClass("filtering",e)},t.prototype.removeSidebarDisplayTypes=function(){this.$el.removeClass("sidebar-display-wide")},t.prototype.renderSidebarDisplayType=function(){var e;e=this.model.viewState.getSidebarDisplayType(),this.$el.addClass(e)},t.prototype.renderSidebarState=function(){this.renderSidebarDisplayType(),this.model.viewState.get("showSidebar")?this.showSidebar():this.hideSidebar()},t.prototype.toggleSidebar=function(){return this.model.viewState.setShowSidebar(!this.model.viewState.get("showSidebar"))},t.prototype.setSidebarShow=function(){this.model.viewState.setShowSidebar(!0)},t.prototype.showSidebar=function(){this.renderSidebarDisplayType(),clearTimeout(this._sidebarHideTimeout),this.$(".js-fill-board-menu").removeClass("hide"),this.defer(function(e){return function(){return e.$el.addClass("is-show-menu")}}(this))},t.prototype.hideSidebar=function(){this.$el.removeClass("is-show-menu"),clearTimeout(this._sidebarHideTimeout),this._sidebarHideTimeout=this.setTimeout(function(e){return function(){return e.$(".js-fill-board-menu").addClass("hide")}}(this),250)},t.prototype.refreshOrganization=function(){var e,t,r,n,o,i;if(r=this.modelCache.get("Organization",this.model.previous("idOrganization")),n=this.model.getOrganization(),null!=r&&this.stopListening(r),null!=n)for(i=["name","logoHash","displayName"],e=0,t=i.length;t>e;e++)o=i[e],this.listenTo(n,"change:"+o,this.frameDebounce(this.renderBoardHeader));return this.renderBoardHeader()},t.prototype.renderBoardHeader=function(){var e,t,r,n;return r=this.model.isPremOrgAdmin(i.me()),t={name:this.model.get("name"),canRename:r||this.model.owned(),isLoggedIn:i.isLoggedIn()},n=this.model.getOrganization(),null!=n&&(t.orgDisplayName=n.get("displayName"),t.orgName=n.get("name"),e=n.get("logoHash"),e&&(t.orgLogoUrl=logoDomain+"/"+e+"/30.png",t.orgLogoUrl2x=logoDomain+"/"+e+"/170.png"),t.hasBusinessClass=n.isPremium()),this.$(".js-board-header").html(N(t)),this.renderPermissionLevel(),this.renderBoardHeaderDescription(),this.renderBoardHeaderCalendar(),this.renderBoardHeaderSubscribed(),this.renderFilteringStatus(),this.renderBoardHeaderStarred(),this.renderPluginButtons(),this},t.prototype.renderPluginButtons=function(){var e;return e=this.subview(O,this.model),this.appendSubview(e,this.$(".js-plugin-header-btns")),this},t.prototype.renderBoardHeaderStarred=function(){return this.$(".js-star-board").toggleClass("board-header-btn-enabled",this.model.isStarred()),this},t.prototype.toggleStarred=function(){var e;return e=i.me().boardStarList,null!=e.getBoardStar(this.model.id)?(e.unstarBoard(this.model.id),q("Board Header","Unstar Board")):(e.starBoard(this.model.id),q("Board Header","Star Board")),this},t.prototype.renderBoardHeaderCalendar=function(){var e;return e=this.model.isPowerUpEnabled("calendar"),this.$(".js-calendar").toggleClass("hide",!e),this},t.prototype.getAllBackgroundClasses=function(){return["body-custom-board-background","body-custom-board-background-tiled","body-light-board-background","body-dark-board-background","body-default-header"].join(" ")},t.prototype.defaultBoardBackground=function(){this.clearBoardBackground(),n("body").addClass("body-default-header")},t.prototype.clearBoardBackground=function(){var e,t;t=this.model.get("prefs"),e=this.getAllBackgroundClasses(),n("body").removeClass(e).css({"background-image":"","background-color":""})},t.prototype.renderBoardBackground=function(e){var t,r,o,i,s,a,u,c;return null==e&&(e=!1),this.clearBoardBackground(),i=this.model.get("prefs"),t=n("body"),null!=i.backgroundColor?(o=this.model.getClientBackgroundColor(i.background),t.css({"background-color":o}),w.setBackground({color:o})):(c=i.backgroundImage,u=i.backgroundTile?c:null!=(s=null!=(a=E.smallestPreviewBiggerThan(i.backgroundImageScaled,64,64))?a.url:void 0)?s:i.backgroundImage,r=function(e){return function(){var e;switch(t.addClass("body-custom-board-background"),i.backgroundTile&&t.addClass("body-custom-board-background-tiled"),e=i.backgroundBrightness){case"light":t.addClass("body-light-board-background");break;case"dark":t.addClass("body-dark-board-background")}return t.css({"background-image":'url("'+c+'")'}),w.setBackground({url:u,tiled:i.backgroundTile})}}(this),e?E.waitForImageLoad(c,r):r())},t.prototype.renderBoardHeaderSubscribed=function(){var e;return e=this.model.get("subscribed"),this.$(".js-board-header-subscribed").toggleClass("hide",!e),this},t.prototype.renderBoardHeaderDescription=function(){var e,t,r;return e=this.$(".js-fill-desc"),(t=this.model.get("desc"))?(t?r=t:this.model.editable()&&(r=$("click to add a description")),e.attr("title",r),e.removeClass("hide"),this):(e.addClass("hide"),this)},t.prototype.renameBoard=function(e){E.stop(e),q("Board Header","Open Rename Board From Title"),L.toggle({elem:n(e.target).closest("a"),view:new P({model:this.model,modelCache:this.modelCache})})},t.prototype.openOrgMenu=function(e){E.stop(e),q("Board Header","Open Org Menu"),L.toggle({elem:n(e.target).closest("a"),view:new u({model:this.model,modelCache:this.modelCache})})},t.prototype.renderPermissionLevel=function(){var e,t,r;return e=this.$("#permission-level"),r={permIconClass:a.getPermLevelIconClassForBoard(this.model),permText:$(["board perms",this.model.getPermLevel(),"name"])},e.html(R(r)),e.attr("title",a.getPermLevelAltTextForBoard(this.model)),t=this.model.canInvite(i.me()),this.$(".js-manage-board-members").toggle(t),this},t.prototype.postListListRender=function(){return z("render","rendering inline composer and calculating list layout"),this.renderInlineListComposer(),this.renderFilteringStatus(),b.refreshListCardSortable()},t.prototype.renderLists=function(){return this.listListView.render(),this.listListView.$el.toggleClass("js-list-sortable",this.model.editable()),this.$(".board-canvas").append(this.listListView.el),this.postListListRender(),this},t.prototype.renderInlineListComposer=function(){this.$(".js-add-list").remove(),this.model.editable()&&this.appendSubview(this.inlineListComposerView,this.$("#board"))},t.prototype.sortCommit=function(e,t){return t.item.trigger("movelist",t)},t.prototype.changeVis=function(e){E.stop(e),q("Board Header","Open Change Visibilty via Header"),L.toggle({elem:this.$(".js-change-vis"),view:f,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openDesc=function(e){E.stop(e),q("Board Header","Edit Description Button via Header"),y.show({view:new s({model:this.model,modelCache:this.modelCache}),maxWidth:500})},t.prototype.toggleCalendar=function(){return this.calendarView?this.navigateToBoardEvent():this.navigateToCalendarEvent()},t.prototype.navigateToCalendarEvent=function(){return q("Board Header","Open Calendar View via Header"),this.navigateToCalendar()},t.prototype.navigateToCalendar=function(){var e;return e=v.getBoardUrl(this.model.id,"calendar"),v.navigate(e,{trigger:!0})},t.prototype.navigateToBoardEvent=function(){return q("Board Header","Close Calendar View via Header"),this.navigateToBoard()},t.prototype.navigateToBoard=function(){var e;return e=v.getBoardUrl(this.model.id),v.navigate(e,{trigger:!0})},t.prototype.isShowingCalendar=function(){return null!=this.calendarView},t.prototype.showMemberProfile=function(e){v.saveMemberBoardProfileLocation(e,this.model.id),y.show({view:new M({model:e,board:this.model,modelCache:this.modelCache}),maxWidth:500,hide:function(e){return function(){return v.setBoardLocation(e.model.id)}}(this)})},t.prototype.showCalendar=function(e){return this.model.isPowerUpEnabled("calendar")&&!this.isShowingCalendar()?(this.$(".calendar-btn").addClass("board-header-btn-enabled"),this.$("#board").addClass("hide"),this.calendarView=new d({model:this.model,modelCache:this.modelCache}),this.$(".board-canvas").append(this.calendarView.render(e).el),this.calendarView.addedToDOM()):void 0},t.prototype.closeDetailView=function(){y.hide(!0),this.closeCalendar()},t.prototype.closeCalendar=function(){null!=this.calendarView&&(this.calendarView.remove(),this.calendarView=null,this.navigateToBoard(),this.$(".calendar-btn").removeClass("board-header-btn-enabled"),this.$("#board").removeClass("hide"))},t.prototype.getCardViews=function(){var e,t,r,n,o,i,s,a,u,c,l;for(a=this.collectionSubview(j,this.model.listList),r=[],c=a.subviewsOfType(S),n=0,i=c.length;i>n;n++)for(u=c[n],e=u.collectionSubview(h,u.model.cardList),l=e.subviewsOfType(m),o=0,s=l.length;s>o;o++)t=l[o],r.push(t);return r},t.prototype.openFilter=function(e){E.stop(e),q("Board Header","Open Filtering via Header"),this.sidebarView.pushView("filter")},t.prototype.clearFilters=function(e){E.stop(e),q("Board Header","Clear Filtering via Header"),this.model.filter.clear()},t.prototype.openUnsubscribe=function(e){E.stop(e),g.toggle("unsubscribe",{elem:n(e.target).closest(".js-board-header-subscribed")[0],model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return q("Board Header","Unsubscribe"),e.model.subscribe(!1)}}(this)})},t.prototype.dblClickAddListMenu=function(e){E.stop(e),!this.model.viewState.get("listComposerOpen")&&this.model.isMember(i.me())&&0===n(e.target).closest(".js-list-content").length&&(q("Board View","Open Add List Menu via Double Click"),L.show({clientx:e.clientX,clienty:e.clientY,view:new o({model:this.model,
modelCache:this.modelCache,didAddList:function(e){return function(t){return e.scrollToList(t)}}(this)})}))},t.prototype.reopen=function(){return this.model.reopen()},t.prototype.updateControllerTitle=function(){return v.title(this.model.get("name"))},t.prototype._insertCardPosition=function(e){var t;return t=this.model.viewState.getCard(),null!=t?{idList:t.get("idList"),index:t.getIndexInList()}:{idList:e,index:this.model.listList.get(e).cardList.length}},t.prototype.moveCardRequested=function(e,t){var r,n,o,i,s,a;return a=t.shortLink,n=t.idList,i=this._insertCardPosition(n),n=i.idList,o=i.index,r=null!=(s=_.getId("Card",a))?s:a,p.load(r,T.cardMinimal,this.modelCache).then(function(e){return function(t){return t.moveToList(e.model.listList.get(n),o)}}(this)).done()},t.prototype.copyCardRequested=function(e,t){var r,n,o,i,s,a;return a=t.shortLink,n=t.idList,i=this._insertCardPosition(n),n=i.idList,o=i.index,r=null!=(s=_.getId("Card",a))?s:a,p.load(r,T.cardMinimal,this.modelCache).then(function(e){return function(t){return t.copyTo({idList:n,pos:e.model.listList.get(n).calcPos(o,t)})}}(this)).done()},t}(D)},{}],331:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C=function(e,t){function r(){this.constructor=e}for(var n in t)x.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},x={}.hasOwnProperty,j=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};n=e("jquery"),o=e(451),i=e(25),s=e(13),a=e(410),u=e(5),l=e(527),d=e(81),p=e(30),h=e(332),m=e(458),f=e("bluebird"),g=e(109),v=e(441),y=e("underscore"),_=e(438),k=e(38),w=e(84),b=e(626),t.exports=c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return C(t,e),t.prototype.viewTitleKey=function(){return this.options.copyBoard?"copy board":"create board"},t.prototype.events={'change select[name="org-id"]':"changeOrg","click .js-helper-add-org":"helperAddOrg","submit form":"submit","click .js-submit":"submit","click .js-create-org":"newOrg","click .js-change-vis":"openChangeVis","click .js-select":"selectVis"},t.prototype.getOrganization=function(){switch(this.model.typeName){case"Organization":return this.model;case"Board":return this.model.getOrganization();default:return this.options.organization}},t.prototype.render=function(){var e,t,r,n,o,s,a,u,c,l;for(a=y.map(i.me().organizationList.models,function(e){return e.toJSON()}),n=null!=(c=this.getOrganization())?c.id:void 0,r=0,o=a.length;o>r;r++)s=a[r],s.id===n?s.selectOrg=!0:s.selectOrg=!1;return t=null!=n,e={orgs:a,hasOrg:t,canAddToOrgs:0!==a.length,isCopyBoard:this.options.copyBoard},u=Math.floor(13*Math.random()).toString(),e.placeholder=w(["board name placeholder",u]),this.options.term&&(e.name=this.options.term),e.pLevel="private",this.options.copyBoard&&this.model.owned()?e.pLevel=this.model.get("prefs").permissionLevel:t&&(e.pLevel="org"),(null!=(l=this.options)?l.newOrgBoard:void 0)&&(e.hideOrg=!0),this.$el.html(_.fill("board_new",e)),this.renderBoardVisChooser(),this},t.prototype.renderBoardVisChooser=function(e){var t,r;return t=this.$('select[name="org-id"]').val(),r={isNewBoard:!0,canChange:!0},this.disableSubmit(),f.try(function(e){return function(){var r,n;return r=function(e){return"<p>"+w(e)+"</p>"},e.$(".js-vis-display").html(r("checking visibility permissions")),t?(n=e.modelCache.get("Organization",t),null!=n&&null!=n.get("memberships")&&null!=n.get("products")&&(null!=n?n.isFeatureEnabled("restrictVis"):void 0)?n:p.loadOrganizationMinimal(t)):void 0}}(this)).then(function(t){return function(n){var o;return null!=n&&(t.canChangeOrg(n,e)||(e=null),y.extend(r,{hasOrg:!0,orgName:n.get("displayName"),hasSuperAdmins:n.isFeatureEnabled("superAdmins"),privateRestricted:!t.canChangeOrg(n,"private"),orgRestricted:!t.canChangeOrg(n,"org"),publicRestricted:!t.canChangeOrg(n,"public")})),o=null!=n&&t.canChangeOrg(n,"org")?"org":"private",r.current=null!=e?e:o,{org:n,visData:r}}}(this)).then(function(e){return function(t){var r,n,o,i;return o=t.org,i=t.visData,n=i.current,e.setPermissionLevel(n),e.$(".js-vis-chooser").html(b(i)),e.$(".js-vis-display").html(_.fill("board_new_vis",{visIconClass:a.getPermLevelIconClass(n),visDisplayText:w(["board perms",n,"name"])})),null!=o&&i.privateRestricted&&i.orgRestricted&&i.publicRestricted?(r=e.$(".js-no-valid-org-privs"),o.owned()?r.html(w("board create restriction admin",{urlSettings:"/"+o.get("name")+"/account"})):r.html(w("board create restriction not admin")),r.removeClass("hide"),e.$(".js-vis-chooser,.js-vis-display").addClass("hide")):e.enableSubmit()}}(this)).done(),this},t.prototype.enableSubmit=function(){return this.$(".js-submit").removeClass("disabled")},t.prototype.disableSubmit=function(){return this.$(".js-submit").addClass("disabled")},t.prototype.resetVisChooser=function(){this.$(".js-no-valid-org-privs").addClass("hide")},t.prototype.openChangeVis=function(e){g.stop(e),this.$(".js-vis-display").addClass("hide"),this.$(".js-vis-chooser").removeClass("hide")},t.prototype.selectVis=function(e){var t,r;g.stop(e),t=n(e.target).closest(".js-select"),t.hasClass("disabled")||(this.$(".js-vis-display").removeClass("hide"),this.$(".js-vis-chooser").addClass("hide"),r=t.attr("name"),this.renderBoardVisChooser(r),k("New Board","Change Visibility",r))},t.prototype.setPermissionLevel=function(e){return this.$('input[name="permissionLevel"]').val(e)},t.prototype.getPermissionLevel=function(){var e;return null!=(e=this.$('input[name="permissionLevel"]').val())?e:""},t.prototype.canChangeOrg=function(e,t){var r,n,o,s;return r=i.me(),(null!=e?e.isFeatureEnabled("restrictVis"):void 0)?(s=e.getMembershipFor(r).memberType,n=function(){switch(s){case"admin":return 2;case"normal":return 1}}(),o=function(){var r,n;switch(null!=(r=e.get("prefs"))&&null!=(n=r.boardVisibilityRestrict)?n[t]:void 0){case"none":return 3;case"admin":return 2;default:return 1}}(),n>=o):!0},t.prototype.changeOrg=function(e){return this.resetVisChooser(),this.$(".js-vis-display").removeClass("hide"),this.$(".js-vis-chooser").addClass("hide"),k("New Board","Change Org"),this.renderBoardVisChooser()},t.prototype.helperAddOrg=function(e){g.stop(e),m.pushView({view:new h({model:this.model,modelCache:this.modelCache})}),k("New Board","Open Add Org Helper")},t.prototype.defaultBackgroundColor=function(){var e,t,r;return d.is("en")&&(r=new Date,t=r.getMonth(),e=r.getDate(),2===t&&17===e)?"green":"blue"},t.prototype.submit=function(e){var t,r,n,s,a,c,l,d,p,h;return g.stop(e),this.$(".js-submit").hasClass("disabled")?void 0:(t=this.$('input[name="name"]'),a=t.val().trim(),""===a?void t.focus().select():(n=null!=(d=this.$('select[name="org-id"]').val())?d:"",s={name:a,idOrganization:n},l=this.$('input[name="permissionLevel"]').val(),h=""!==n&&"private"!==l,r=this.defaultBackgroundColor(),p=y.extend({prefs_permissionLevel:l,prefs_selfJoin:h,defaultLists:!1},s),this.options.copyBoard&&(p.idBoardSource=this.model.id,p.keepFromSource=this.$("input:checkbox:checked").map(function(){return this.name}).get().join()),this.options.copyBoard?k("New Board","Copy"):k("New Board","New"),c=i.me().boardList.create(s,{modelCache:this.modelCache,requestData:p,success:function(e){return function(t){var r,n;e.options.copyBoard&&o.hide("copying"),n=t.id,j.call(r=i.me().get("idBoards"),n)<0&&i.me().set("idBoards",r.concat(t.id)),u.displayBoard({idBoard:t.id,openListComposer:!e.options.copyBoard}).done()}}(this),error:function(){return o.flash("could not create board","error","create error")}}),this.options.copyBoard&&o.show("copying","info","copying"),m.hide()))},t.prototype.newOrg=function(e){g.stop(e),m.pushView({view:new l({model:this.model,modelCache:this.modelCache})}),k("New Board","Open Create Org")},t}(v)},{}],332:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n=e(527),i=e(458),s=e(109),a=e(441),u=e(438),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="add an organization",t.prototype.events={"click .js-create-org":"newOrg"},t.prototype.render=function(){var e;return e=this,this.$el.html(u.fill("popover_helper_new_board_add_org")),this},t.prototype.newOrg=function(e){return s.stop(e),i.pushView({view:new n({model:this.model,modelCache:this.modelCache})})},t}(a)},{}],333:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n=e(458),i=e(109),s=e(441),a=e(438),u=e(38),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="print and export",t.prototype.events={"click .js-print":"printModel","click .js-export-json":"exportJSON","click .js-export-csv":"exportCSV"},t.prototype.render=function(){var e,t,r;return r=this,t=this.model.getOrganization(),e=this.model.toJSON(),e.hasCsvExport=!1,null!=t&&(null!=t?t.isFeatureEnabled("csvExport"):void 0)&&(e.hasCsvExport=!0,e.csvURL="/b/"+this.model.get("shortLink")+".csv"),(null!=t?t.isPremium():void 0)&&!(null!=t?t.isFeatureEnabled("csvExport"):void 0)&&(e.needsUpgradeForCsv=!0,e.upgradeUrl="/"+t.get("name")+"/billing"),e.jsonURL="/b/"+this.model.get("shortLink")+".json",this.$el.html(a.fill("popover_share",e)),this},t.prototype.printModel=function(e){i.stop(e),u("Board Menu","Print and Export Menu","Print"),n.hide(),this.defer(function(){return window.print()})},t.prototype.exportJSON=function(e){return u("Board Menu","Print and Export Menu","Export JSON")},t.prototype.exportCSV=function(e){return u("Board Menu","Print and Export Menu","Export CSV")},t}(s)},{}],334:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h={}.hasOwnProperty;n=e(25),i=e(5),s=e(240),a=e(109),u=e(441),d=e(38),c=e(436)("board_list_item"),l=c.renderable(function(e){var t,r,n,o,i,s,a,u,l,d;return s=e.isLoggedIn,a=e.name,u=e.orgname,d=e.url,i=e.current,l=e.recent,n=e.backgroundImageThumbnail,r=e.backgroundColor,t=e.backgroundBrightness,o=e.backgroundTile,c.div(".compact-board-tile-wrapper",function(){var e,p;return p={},n&&(p["background-image"]=c.urlify(n)),r&&(p["background-color"]=r),c.span({class:c.classify({"mod-tiled":o,"compact-board-tile-background":!0}),style:c.stylify(p)}),c.span(".compact-board-tile-fade"),e={"js-open-board":!0,current:i,"compact-board-tile-link":!0},t&&(e[t]=!0),c.a({class:c.classify(e),href:d},function(){return c.span(".compact-board-tile-link-thumbnail",{style:c.stylify(p)}),c.span({class:c.classify({"compact-board-tile-link-text":!0,details:!0,"has-sub-name":u})},function(){return c.span(".compact-board-tile-link-text-name",{title:a},function(){return c.text(a)}),u?c.span(".compact-board-tile-link-text-sub-name",{title:u},function(){return c.text(u)}):void 0}),s?c.span({class:"compact-board-tile-link-options"},function(){return c.span(".compact-board-tile-link-options-unread.js-unread",{title:c.l("there-is-new-activity-on-this-board")}),l&&c.icon("close",{class:"js-remove-board compact-board-tile-link-options-remove",title:c.l("click-to-remove-this-board-from-your-recent-boards")}),c.icon("star",{class:"compact-board-tile-link-options-star js-star-board",title:c.l("click-to-star-this-board-it-will-show-up-at-top-of-your-boards-list")})}):void 0})})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.tagName="li",t.prototype.className="compact-board-tile",t.prototype.initialize=function(){var e;return this.listenTo(this.model,"change:prefs change:name change:idOrganization",this.frameDebounce(this.render)),this.listenTo(n.me().boardStarList,"add remove reset",this.frameDebounce(this.renderStarred)),this.listenTo(this.model,"change:dateLastActivity change:dateLastView",this.frameDebounce(this.renderUnread)),(null!=(e=this.options)?e.showOrgName:void 0)?(this.listenTo(this.model,"change:idOrganization",function(e){return function(){var t;return t=e.modelCache.get("Organization",e.model.previous("idOrganization")),null!=t&&e.stopListening(t,"change:displayName"),e.listenToOrgNameChange(),e.render()}}(this)),this.listenToOrgNameChange()):void 0},t.prototype.listenToOrgNameChange=function(){return null!=this.model.getOrganization()?this.listenTo(this.model.getOrganization(),"change:displayName",this.render):void 0},t.prototype.events={"click .js-open-board":"openBoard","click .js-star-board":"starBoard","click .js-remove-board":"removeRecent",moveto:"moveTo"},t.prototype.render=function(){var e,t,r,o,s,u;return t=this.model.toJSON({prefs:!0}),t.url=i.getBoardUrl(this.model),this.model.getPref("backgroundTile")?(t.backgroundTile=!0,t.backgroundImageThumbnail=this.model.getPref("backgroundImage")):t.backgroundImageThumbnail=null!=(r=null!=(o=a.smallestPreviewBiggerThan(this.model.getPref("backgroundImageScaled"),400,200))?o.url:void 0)?r:this.model.getPref("backgroundImage"),null==t.backgroundImageThumbnail&&(t.backgroundColor=this.model.getClientBackgroundColor("blue")),null!=this.model.getPref("backgroundColor")&&(e=this.model.getPref("background"),t.backgroundColor=this.model.getClientBackgroundColor(e)),t.backgroundBrightness=this.model.getPref("backgroundBrightness"),(null!=(s=this.options)?s.showOrgName:void 0)&&(t.orgname=null!=(u=this.model.getOrganization())?u.get("displayName"):void 0),t.isLoggedIn=n.isLoggedIn(),t.recent=this.options.recent,this.$el.html(l(t)),this.renderStarred(),this.renderUnread(),this},t.prototype.trackBoardClick=function(){return d("Header","Boards Menu","Opened Board")},t.prototype.openBoard=function(e){return s.getPinSidebar()||s.hideSidebar(),this.trackBoardClick()},t.prototype.starBoard=function(e){var t,r;a.stop(e),r=this.model.id,t=n.me().boardStarList,null==t.getBoardStar(r)?t.starBoard(r):t.unstarBoard(r)},t.prototype.removeRecent=function(e){return a.stop(e),s.pullBoard(this.model.id)},t.prototype.renderUnread=function(){var e;return e=this.model.hasUnseenActivity()&&!i.onBoardView(this.model.id),this.$(".js-unread").toggleClass("any",e),this.$el.toggleClass("has-unread-activity",e),this},t.prototype.moveTo=function(e,t){var r,o;o=t.item.closest(".js-board-list").find("li"),r=o.index(t.item),n.me().boardStarList.updateStarBoard(this.model.id,r)},t.prototype.renderStarred=function(){return null!=n.me().boardStarList.getBoardStar(this.model.id)?(this.$el.addClass("starred"),this.$(".icon-star").addClass("icon-star-active")):(this.$el.removeClass("starred"),this.$(".icon-star").removeClass("icon-star-active")),this},t}(u)},{}],335:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h=function(e,t){function r(){this.constructor=e}for(var n in t)m.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},m={}.hasOwnProperty;d=e("underscore"),n=e(25),i=e(337),s=e(339),a=e(340),u=e(341),c=e(344),l=e(30),p=e(633),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.initialize=function(){return this.listenTo(this.model.organizationList,"add remove reset",this.frameDebounce(this.renderBoardsSections))},t.prototype.renderOnce=function(){return this.$el.html(p()),this.renderBoardsSections(),this},t.prototype.renderBoardsSections=function(){return this.renderStarredBoardsSection(),this.renderRecentBoardsSection(),this.renderAllBoardsSection(),this},t.prototype.renderAllBoardsSection=function(){var e,t,r,o,i,u,c,l;if(e=this.$(".js-all-boards"),r=function(){var e,r,n,o;for(n=this.model.boardList.models,o=[],e=0,r=n.length;r>e;e++)t=n[e],t.isOpen()&&o.push(t);return o}.call(this),0===r.length)u=function(e){return function(){return e.stopListening(n.me().boardList,"add reset",u),e.renderAllBoardsSection()}}(this),this.listenTo(n.me().boardList,"add reset",u);else for(this.appendSubview(this.subview(s,n.me(),{},"my-boards"),e),l=this.model.getSortedOrgs(),o=0,i=l.length;i>o;o++)c=l[o],this.appendSubview(this.subview(a,n.me(),{org:c},"group-"+c.id),e);return this},t.prototype.renderStarredBoardsSection=function(){return this.appendSubview(this.subview(c,n.me(),{},"starred-boards"),this.$(".js-starred-boards")),this},t.prototype.renderRecentBoardsSection=function(){return l.waitFor("boardsData",function(e){return function(){return e.appendSubview(e.subview(u,n.me(),{},"recent-boards"),e.$(".js-recent-boards"))}}(this)),this},t}(i)},{}],336:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f=function(e,t){function r(){this.constructor=e}for(var n in t)g.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},g={}.hasOwnProperty;n=e(25),i=e(258),s=e(331),a=e(454),u=e(30),c=e(458),l=e(240),d=e(109),p=e(441),h=e(634),m=e(38),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.initialize=function(){return this.listenTo(l,"change:pinBoardsListSidebar",function(){return this.updatePinned()})},t.prototype.events={"click .js-add-board":"addBoard","click .js-pin":"pinDrawer","click .js-unpin":"unpinDrawer","click .js-open-closed-boards":"openClosedBoards"},t.prototype.renderOnce=function(){return this.$el.html(h()),this.updatePinned(),this},t.prototype.addBoard=function(e){d.stop(e),m("Boards Drawer","Add Board"),c.toggle({elem:this.$(".js-add-board"),view:s,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.unpinDrawer=function(){return m("Boards Drawer","Unpin Drawer"),l.hidePinSidebar()},t.prototype.pinDrawer=function(){return m("Boards Drawer","Pin Drawer"),l.showPinSidebar()},t.prototype.updatePinned=function(){return this.$(".js-pin").toggleClass("hide",l.getPinSidebar()),this.$(".js-unpin").toggleClass("hide",!l.getPinSidebar())},t.prototype.openClosedBoards=function(e){d.stop(e),l.hideSidebar(),a.show({view:new i({model:n.me(),modelCache:this.modelCache})}),u.loadClosedBoards().done(),m("Boards Drawer","Open Closed Boards")},t}(p)},{}],337:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n=e("jquery"),i=e(80),s=e(458),a=e(109),u=e(441),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.events={"mouseenter .sidebar-boards-list li":"hoverItem","mouseleave .sidebar-boards-list":"deselectBoards"},t.prototype.hoverItem=function(e){var t;t=n(e.target).closest("li"),a.selectMenuItem(n(".sidebar-boards-list"),"li",t)},t.prototype.deselectBoards=function(e){var t;t=n(".sidebar-boards-list li").removeClass("selected")},t.prototype.arrowKeyEvent=function(e){var t;t=i.getKey(e),a.navMenuList(n(".sidebar-boards-list"),"li:visible",t)},t.prototype.enterKeyEvent=function(e){var t;t=n(".sidebar-boards-list li.selected:visible:first a"),t.length>0&&(t.click(),s.hide())},t}(u)},{}],338:[function(e,t,r){var n,o,i,s,a,u,c,l,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p={}.hasOwnProperty,h=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};n=e(334),o=e(337),s=e(240),a=e(109),u=e("underscore"),c=e(209),l=e(635),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.initialize=function(e){var t;return t=e.searchText,this.searchText=t.map(function(e){return e.toLowerCase().trim()}),this.subscribe(this.searchText,this.renderResults),this.makeDebouncedMethods("renderResults"),this.listenTo(this.model.boardList,"add remove reset change:idOrganization",this.renderResultsDebounced),this.listenTo(s,"change:idRecentBoards",this.renderResultsDebounced),this.listenTo(this.model.boardStarList,"add remove reset",function(){return this.renderResultsDebounced})},t.prototype.renderOnce=function(){return this.$el.html(l()),this.renderResults(),this},t.prototype.renderResults=function(){var e,t,r,o,i;for(e=this.$(".js-board-results"),e.empty(),i=this.getBoardsForTerm(this.searchText.get()),r=0,o=i.length;o>r;r++)t=i[r],this.appendSubview(this.subview(n,t,{showOrgName:!0}),e);return a.selectMenuItem(this.$(".sidebar-boards-list"),"li",this.$(".sidebar-boards-list li:first")),this},t.prototype.getBoardsForTerm=function(e){var t,r,n;return r=this.model.boardStarList.getBoardIds(),t=s.getRecentBoards(),n=a.buildFuzzyMatcher(e),u.chain(this.model.boardList.models).union(this.model.boardStarList.getBoards()).union(this.modelCache.get("Board",t)).compact().filter(function(e){return n(e.get("name"))}).filter(function(e){return e.isOpen()}).value().sort(function(e,n){var o,i,s,a,u,c,l,d;return o=e.id,h.call(r,o)>=0&&(i=n.id,h.call(r,i)<0)?-1:(s=n.id,h.call(r,s)>=0&&(a=e.id,h.call(r,a)<0)?1:(u=e.id,h.call(t,u)>=0&&(c=n.id,h.call(t,c)<0)?-1:(l=n.id,h.call(t,l)>=0&&(d=e.id,h.call(t,d)<0)?1:e.get("name")<n.get("name")?-1:e.get("name")>n.get("name")?1:0)))}).slice(0,7)},t}(o)},{}],339:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty,u=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(343),i=e(84),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardList,"add remove reset change:idOrganization",this.debouncedRenderBoards)},t.prototype.getBoards=function(){var e,t,r,n,o,i;for(r=function(e){return function(t){var r,n;return r=null!=(n=t.getOrganization())?n.id:void 0,null!=r&&u.call(e.model.get("idOrganizations"),r)>=0}}(this),o=this.model.boardList.models,i=[],t=0,n=o.length;n>t;t++)e=o[t],!r(e)&&e.isOpen()&&i.push(e);return i},t.prototype.sectionId=function(){return"my-boards"},t.prototype.doesTruncate=function(){return!0},t.prototype.getHeaderInfo=function(){return{title:this.getTitle(),iconClass:"board"}},t.prototype.getTitle=function(){return i("board section title.my boards")},t}(o)},{}],340:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(343),i=e(5),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardList,"add remove reset change:idOrganization",this.debouncedRenderBoards),this.listenTo(this.getOrg(),"change:name change:displayName change:logoHash",this.render)},t.prototype.getOrg=function(){return this.options.org},t.prototype.sectionId=function(){return"org-"+this.getOrg().get("id")},t.prototype.doesTruncate=function(){return!0},t.prototype.getBoards=function(){var e,t,r,n,o,i;for(n=this.model.boardList.models,i=[],t=0,r=n.length;r>t;t++)e=n[t],(null!=(o=e.getOrganization())?o.id:void 0)===this.getOrg().id&&e.isOpen()&&i.push(e);return i},t.prototype.getHeaderInfo=function(){var e,t,r;return t={},r=this.getOrg(),null!=r&&(t=r.toJSON(),t.isOrg=!0,t.url=i.getOrganizationUrl(r.get("name")),e=r.get("logoHash"),e&&(t.orgLogoUrl=logoDomain+"/"+e+"/30.png")),t},t.prototype.postRenderBoardsEvent=function(){this.renderBCStatus()},t.prototype.renderBCStatus=function(){this.$(".js-has-business-class").toggleClass("hide",!this.getOrg().isPremium())},t.prototype.getTitle=function(){return this.getOrg().get("displayName")},t}(o)},{}],341:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},f={}.hasOwnProperty;o=e(25),s=e(343),a=e(30),u=e(197),c=e("bluebird"),l=e(240),d=e("underscore"),p=e(84),h=e(112),n=e(191),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(l,"change:idRecentBoards",function(){return this.debouncedRenderBoards()}),this.listenTo(this.model.boardStarList,"add remove reset",function(){return this.debouncedRenderBoards()}),this._idBoardsFetching=[]},t.prototype.sectionId=function(){return"recent-boards"},t.prototype.showOrgName=function(){return!0},t.prototype.isRecent=function(){return!0},t.prototype.getBoards=function(){var e;return e=o.me(),d.chain(l.getRecentBoards()).difference(this.model.boardStarList.getBoardIds()).tap(function(e){return function(t){return e.fetchUnknownBoards(t)}}(this)).map(function(e){return function(t){return e.modelCache.get("Board",t)}}(this)).compact().filter(function(t){return function(t){return t.isViewableBy(e)}}(this)).take(7).value()},t.prototype.fetchUnknownBoards=function(e){var t,r;return r=d.chain(e).difference(this._idBoardsFetching).reject(function(e){return function(t){return null!=e.modelCache.get("Board",t)}}(this)).value(),0!==r.length?(this._idBoardsFetching=this._idBoardsFetching.concat(r),t=r.map(function(e){return function(e){return a.loadBoardData(e,u.boardMinimal).catch(n.NotFound,n.Unauthorized,function(){return l.pullBoard(e)})}}(this)),c.all(t).then(function(e){return function(){e._idBoardsFetching=d.difference(e._idBoardsFetching,r),e.debouncedRenderBoards()}}(this)).done()):void 0},t.prototype.getHeaderInfo=function(){return{title:p("board section title.recent boards"),iconClass:"clock"}},t}(s)},{}],342:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e(331),i=e(458),s=e(441),a=e(636),u=e(38),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(e){var t;return t=e.searchText,this.searchText=t.map(function(e){return e.trim()})},t.prototype.events={"click .js-add-board-with-name":"addBoardWithName"},t.prototype.renderOnce=function(){return this.$el.html(a()),this.subscribe(this.searchText,function(e){return this.$(".js-add-board-with-name").format("add board named",{boardName:e})}),this},t.prototype.addBoardWithName=function(){var e;u("Boards Drawer","Add Board - With Name"),e=this.searchText.get(),i.toggle({elem:this.$(".js-add-board-with-name"),view:o,options:{model:this.model,modelCache:this.modelCache,term:e}})},t}(s)},{}],343:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h={}.hasOwnProperty;n=e(334),i=e(240),a=e(441),u=e("underscore"),l=e(436)("boards_sidebar_section"),s=e(109),c=e(84),d=l.renderable(function(e){var t,r,n,o,i,s,a;return s=e.title,r=e.iconClass,a=e.url,n=e.isOrg,o=e.orgLogoUrl,t=e.displayName,i=e.sectionId,l.div(".sidebar-section-header.quiet.js-sidebar-section-header",function(){return null==n?s&&(r&&l.icon(r,{class:"sidebar-section-header-icon"}),l.span(".sidebar-section-header-title",function(){return l.text(s)})):l.a(".dark-hover",{href:a},function(){return o?l.img({class:"sidebar-section-header-icon",src:o,alt:t}):l.icon("organization",{class:"sidebar-section-header-icon"}),l.span(".sidebar-section-header-title.mod-clickable",function(){return l.text(t)}),l.icon("business-class",{class:"sidebar-section-header-bc-icon hide js-has-business-class"})}),i?(l.icon("remove",{class:"sidebar-section-header-toggle-icon dark-hover js-collapse-section hide"}),l.icon("add",{class:"sidebar-section-header-toggle-icon dark-hover js-expand-section hide"})):void 0}),l.div(".js-section-content",function(){return l.ul(".sidebar-boards-list.js-board-list"),l.div(function(){return l.a(".dark-hover.quiet-button.js-show-all-section-boards",{href:"#"})})})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.events={"click .js-collapse-section":"collapseSection","click .js-expand-section":"expandSection","click .js-show-all-section-boards":"showAllSectionBoards"},t.prototype.initialize=function(){return this.debouncedRenderBoards=this.debounce(this.renderBoards,10),this.debouncedPostRenderBoardsEvent=this.debounce(this.postRenderBoardsEvent,150),this.sectionId=this.sectionId(),this.initedSortable=!1,this.listenTo(i,"change:collapsedDrawerSections",function(){return this.renderCollapsed()}),this.listenTo(this.model.boardList,"add remove reset change:closed",this.debouncedRenderBoards),this.truncated=this.doesTruncate()},t.prototype.render=function(){var e;return e=this.getHeaderInfo(),e.sectionId=this.sectionId,this.$el.html(d(e)),this.renderBoards(),this.renderCollapsed(),this},t.prototype.getBoards=function(){return[]},t.prototype.getHeaderInfo=function(){return"Boards"},t.prototype.sectionId=function(){return null},t.prototype.showOrgName=function(){return!1},t.prototype.isRecent=function(){return!1},t.prototype.doesTruncate=function(){return!1},t.prototype.postRenderBoardsEvent=function(){},t.prototype.showAllSectionBoards=function(){this.truncated=!1,this.renderBoards()},t.prototype.collapseSection=function(e){return i.collapseSection(this.sectionId)},t.prototype.expandSection=function(e){return i.expandSection(this.sectionId)},t.prototype.renderCollapsed=function(){var e;e=i.isCollapsed(this.sectionId),this.$(".js-collapse-section").toggleClass("hide",e),this.$(".js-expand-section").toggleClass("hide",!e),this.$(".js-section-content").toggleClass("hide",e),this.$(".js-sidebar-section-header").toggleClass("bold",!e)},t.prototype.renderSubviews=function(e){var t,r,o;t=this.$(".js-board-list"),o=function(){var t,o,i;for(i=[],t=0,o=e.length;o>t;t++)r=e[t],i.push(this.subview(n,r,{showOrgName:this.showOrgName(),recent:this.isRecent()},"board-"+r.id));return i}.call(this),this.ensureSubviews(o,t)},t.prototype.renderBoards=function(){var e,t,r;return e=u.filter(this.getBoards(),function(e){return null!=e?e.isOpen():void 0}),e.length>0?(r=this.doesTruncate()?u.chain(e).sortBy(function(e){var t;return-new Date(null!=(t=e.get("dateLastActivity"))?t:s.idToDate(e.id))}).filter(function(e){return function(t,r){return!e.truncated||10>=r||!t.isLessActive()}}(this)).sortBy(function(e){return e.get("name").toLowerCase()}).value():e,t=e.length-r.length,this.$el.removeClass("hide"),this.renderSubviews(r),this.$(".js-show-all-section-boards").toggleClass("hide",0===t).text(c(["templates","boards_sidebar_section","show-less-active-boards-count"],{countString:t.toString()}))):this.$el.addClass("hide"),this.debouncedPostRenderBoardsEvent(),this},t}(a)},{}],344:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;n=e(343),i=e(65),s=e(455),a=e(84),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardStarList,"add remove reset change:pos",function(){return this.debouncedRenderBoards()})},t.prototype.getBoards=function(){return this.model.boardStarList.getBoards()},t.prototype.showOrgName=function(){return!0},t.prototype.sectionId=function(){return"starred-boards"},t.prototype.getHeaderInfo=function(){
return{title:a("board section title.starred boards"),iconClass:"star"}},t.prototype.postRenderBoardsEvent=function(){var e;return i.isTouch()?void 0:(e=this.$(".js-board-list"),this.initedSortable?s.refreshIfInitialized(e):(this.initedSortable=!0,e.sortable({axis:"y",containment:"parent",delay:75,distance:7,forcePlaceholderSize:!0,items:"> li",placeholder:"placeholder",scroll:!0,helper:"clone",stop:function(e){return function(t,r){e.defer(function(){return r.item.trigger("moveto",r)})}}(this),tolerance:"pointer"})))},t}(n)},{}],345:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S=function(e,t){function r(){this.constructor=e}for(var n in t)M.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},M={}.hasOwnProperty;n=e("jquery"),o=e(25),s=e(336),i=e(335),a=e(338),u=e(342),l=e(5),d=e("hearsay"),p=e(80),h=e(16),m=e(30),f=e(90),g=e(197),v=e(458),y=e(240),b=e(439),w=e(109),_=e(441),k=e("underscore"),C=e(209),j=e(632),x=e(84),t.exports=c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return S(t,e),t.prototype.UNREAD_POLL_RATE_ACTIVE=w.getMs({minutes:5}),t.prototype.UNREAD_POLL_RATE_IDLE=w.getMs({minutes:60}),t.prototype.className=function(){return"boards-drawer"},t.prototype.initialize=function(){this.searchText=this.slot(""),this.isSearching=this.searchText.map(C.compose(C.not,k.isEmpty)).distinct(),Object.defineProperty(this,"$searchInput",{get:function(){return this.$(".js-search-boards")}}),this.listenTo(y,"change:showBoardsListSidebar",function(){return this.renderSidebarState(),this.ensureUnreadData(),y.getShowSidebar()||y.getPinSidebar()?this.defer(function(e){return function(){return e.focusInput()}}(this)):this.searchText.set("")}),this.listenTo(y,"change:pinBoardsListSidebar",function(){return this.renderSidebarState(),this.updatePinned(),this.updateHeight(),this.ensureUnreadData()}),b.addHandler(this,{scope:"header"}),this.ensureUnreadData(),this.filteredBoardsView=this.subview(a,this.model,{searchText:this.searchText}).render(),this.allBoardsView=this.subview(i,this.model).render(),this.activeBoardsSubview=d.if(this.isSearching,d.const(this.filteredBoardsView),d.const(this.allBoardsView)),this.searchingButtonsView=this.subview(u,this.model,{searchText:this.searchText}).render(),this.boardsButtonsView=this.subview(s,this.model).render(),this.activeButtonsSubview=d.if(this.isSearching,d.const(this.searchingButtonsView),d.const(this.boardsButtonsView)),this.subscribe(l.currentModel.distinct(),function(){return y.getPinSidebar()?void 0:y.hideSidebar()})},t.prototype.events={"keyup .js-search-boards":"keyEvent","input .js-search-boards":function(){return this.searchText.set(this.$searchInput.val())},shortcut:"shortcut"},t.prototype.renderOnce=function(){return this.$el.html(j()),this.renderSidebarState(),this.updatePinned(),n(window).bind(["resize",this.uniqueId()].join("."),this.debounce(function(e){return function(){return e.updateHeight()}}(this),300)),this.subscribeChanges(this.activeBoardsSubview,{out:function(e){return e.$el.detach()},in:function(e){return this.$(".js-board-drawer-boards").append(e.el)}}),this.subscribeChanges(this.activeButtonsSubview,{out:function(e){return e.$el.detach()},in:function(e){return this.$(".js-board-drawer-buttons").append(e.el)}}),this},t.prototype.remove=function(){return n(window).unbind(["resize",this.uniqueId()].join(".")),t.__super__.remove.apply(this,arguments)},t.prototype.ensureUnreadData=function(){var e;if(e=function(e){return function(){return"active"===f.getStatus()?e.UNREAD_POLL_RATE_ACTIVE:e.UNREAD_POLL_RATE_IDLE}}(this),null!=this._lastPoll&&Date.now()-this._lastPoll>1.5*e()&&(this.refreshUnreadData(),this._lastPoll=Date.now()),y.getShowSidebar()||y.getPinSidebar()){if(null==this._unreadTimeout)return this._unreadTimeout=this.setTimeout(function(e){return function(){return e.refreshUnreadData(),e._unreadTimeout=null,e._lastPoll=Date.now(),e.ensureUnreadData()}}(this),e())}else if(null!=this._unreadTimeout)return clearTimeout(this._unreadTimeout),this._unreadTimeout=null},t.prototype.shortcut=function(e){switch(e){case h.B:return y.getPinSidebar()?this.focusInput():y.getShowSidebar()?y.hideSidebar():y.showSidebar(),!0}},t.prototype.clearSearch=function(){this.$searchInput.val("")},t.prototype.focusInput=function(){return this.$searchInput.focus().select()},t.prototype.refreshUnreadData=function(){var e,t,r,n,i;for(m.loadMyBoardsUnreadData().done(),n=o.me(),i=y.getRecentBoards(),e=0,r=i.length;r>e;e++)t=i[e],n.boardList.get(t)||n.boardStarList.getBoardStar(t)||m.loadBoardData(t,g.boardUnread).done()},t.prototype.renderSidebarState=function(){return y.getShowSidebar()||y.getPinSidebar()?(this.$el.addClass("is-shown"),v.hide()):(this.$el.removeClass("is-shown"),this.clearSearch()),this},t.prototype.updateHeight=function(){var e;return e=y.getPinSidebar()?n(window).height()-50:n(window).height()-64,this.$(".board-drawer-content").css({"max-height":e})},t.prototype.updatePinned=function(){return this.$el.toggleClass("boards-drawer-pinned",y.getPinSidebar()),this.updateHeight()},t.prototype.keyEvent=function(e){var t;return t=p.getKey(e),t===h.ArrowUp||t===h.ArrowDown?(this.activeBoardsSubview.get().arrowKeyEvent(e),void this.focusInput()):void(t===h.Enter&&(this.activeBoardsSubview.get().enterKeyEvent(e),this.focusInput()))},t}(_)},{}],346:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(373),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.onCalendar=!0,t}(o)},{}],347:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g=function(e,t){function r(){this.constructor=e}for(var n in t)v.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},v={}.hasOwnProperty,y=[].slice;n=e("jquery"),o=e(357),s=e(350),a=e(233),u=e(353),c=e(66),l=e(458),d=e(109),p=e(441),h=e(127),f=e(438),m=e("moment"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),t.prototype.className="calendar-wrapper",t.prototype.events={"click .js-week-view":"switchToWeekViewFromMonth","click .js-month-view":"switchToMonthViewFromWeek","click .js-left-arrow":"navigatePrevious","click .js-right-arrow":"navigateNext","click .js-today":"navigateToday","click .js-open-card-composer":"openComposer"},t.prototype.initialize=function(){return this.monthView=this.subview(s,this.model),this.weekView=this.subview(u,this.model),this.localState=new a({id:"calendar"+this.model.id}),this.localState.fetch(),this.model.viewState.clearSelectedCard()},t.prototype.render=function(e){var t;return null==e&&(e=new Date),t=c.getDaysOfWeek(e).map(function(e){return m(e).format("ddd")}),this.$el.html(f.fill("calendar_toolbar",{days:t})),this.localState.getMode()===u.prototype.VIEWSTATE_PREF_STR?this.showView(this.weekView,e):this.showView(this.monthView,e),this},t.prototype.remove=function(){return this.stopSubscriptions(),this.model.viewState.clearSelectedCard(),t.__super__.remove.apply(this,arguments)},t.prototype.openComposer=function(e){var t,r,i;return d.stop(e),t=n(e.target).closest(".day-cell, .day-column"),i=new Date(parseInt(t.attr("name"))),r=new o({model:this.model.composer,modelCache:this.modelCache}),r.setDate(i),l.show({clientx:e.clientX,clienty:e.clientY,view:r})},t.prototype.showView=function(e,t){var r;return this.currentSubView=e,r=this.$(".calendar-header").removeClass("week-view month-view").addClass(this.currentSubView.HEADER_CLASS_NAME),this.$(".calendar-content").empty().append(this.currentSubView.render(t).el),this.model.viewState.clearSelectedCard(),this.localState.setMode(this.currentSubView.VIEWSTATE_PREF_STR),this.currentSubView.delegateEvents(),this.currentSubView.updateRoute()},t.prototype.switchToWeekViewFromMonth=function(){return this.showView(this.weekView,this.monthView.currentCenterWeek),this.addedToDOM()},t.prototype.switchToMonthViewFromWeek=function(){return this.showView(this.monthView,this.weekView.currentWeek),this.addedToDOM()},t.prototype.setSubscriptions=function(){this.stopSubscriptions(),this.currentSubView===this.monthView?this.monthView.setSubscriptions():(n(h).on("windowClassChange."+this.uniqueId(),function(e){return function(){var t;return t=1<=arguments.length?y.call(arguments,0):[],e.weekSmallWindowResizeCheck.apply(e,t)}}(this)),this.weekView.setSubscriptions())},t.prototype.stopSubscriptions=function(){return this.weekView.stopSubscriptions(),this.monthView.stopSubscriptions(),n(h).off("."+this.uniqueId())},t.prototype.delegateEvents=function(){var e;return t.__super__.delegateEvents.apply(this,arguments),null!=(e=this.currentSubView)?e.delegateEvents():void 0},t.prototype.addedToDOM=function(){return this.setSubscriptions(),this.currentSubView.addedToDOM()},t.prototype.navigateToday=function(){return this.currentSubView.navigateToday()},t.prototype.navigatePrevious=function(){return this.currentSubView.navigatePrevious()},t.prototype.navigateNext=function(){return this.currentSubView.navigateNext()},t.prototype.weekSmallWindowResizeCheck=function(e,t){return h.fSmall&&this.currentSubView===this.weekView?this.switchToMonthViewFromWeek():void 0},t}(p)},{}],348:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},f={}.hasOwnProperty;n=e("jquery"),i=e(66),s=e(455),a=e(458),u=e(109),c=e(441),l=e("underscore"),h=e(438),p=e("moment"),d=e(82),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.events={sortreceive:"sortReceive",sortstop:"sortStop","click .js-expand-day:not(.active)":"expand","click .js-toggle-day":"clickToggleDay"},t.prototype.initialize=function(e){return this.data=e.data,this.getCardView=e.getCardView,this.$el.attr("name",i.getMidnightInt(this.data.day)),this.cardsDue=this.data.cardsDueOnDate},t.prototype.remove=function(){return delete this.getCardView,t.__super__.remove.apply(this,arguments)},t.prototype.render=function(e){var t,r,n;return null==e&&(e={}),t=this.data.day,r=i.isFirstOfMonth(t)||i.isLastOfMonth(t),n={date:p(t).format(r?"llll":"D"),isToday:p().isSame(t,"day")},l.extend(e,n),this.$el.html(h.fill("calendar_day",e,{editable:this.model.editable()})),this.renderCardsAndHeaders(),this},t.prototype.renderCardsAndHeaders=function(){return this.updateHeader(),this.renderCardsAndListHeaders()},t.prototype.cardListMap=function(){return l.groupBy(this.cardsDue,function(e){return e.getList().id})},t.prototype.updateHeader=function(){var e;return e=this.cardsDue.length,this.$(".day-cards-header").empty(),e>0?this.$(".day-cards-header").text(d("cards",e)):void 0},t.prototype.renderCardsAndListHeaders=function(){var e,t,r,o,i,a,u,c,l,d,p,m;e=this.$(".calendar-day-list"),e.empty(),a=[],m=this.cardListMap();for(p in m)if(f.call(m,p))for(i=m[p],u={listID:p,listName:this.model.getList(p).get("name")},c=h.fill("calendar_day_list_header",u),a.push(c),l=0,d=i.length;d>l;l++)t=i[l],r=this.getCardView(t),r.$el.hasClass("ui-sortable-helper")||(o=r.render().el,n(o).attr("name",t.cid),r.delegateEvents(),a.push(o));return e.append(a),this.model.editable()?s.refreshIfInitialized(this.$(".js-calendar-sortable")):void 0},t.prototype.sortReceive=function(e,t){var r;return r=function(e){var t;return t=document.elementFromPoint(e.left,e.top),n(".calendar-drag-area")[0].contains(t)},r(t.offset)?t.item.trigger("moveToCalendarDay",[t,this]):(s.abort(),s.refreshIfInitialized(this.$(".js-calendar-sortable")))},t.prototype.sortStop=function(e,t){return t.item.trigger("moveInCalendarDay",[t,this])},t.prototype.clickToggleDay=function(e){return this.$(".calendar-day").hasClass("active")?this.contract(e):this.expand(e)},t.prototype.expand=function(e){var t;return u.stop(e),s.sorting?void 0:(n(".calendar-day.active").removeClass("active"),t=this.$(".calendar-day").addClass("active"),a.hide())},t.prototype.contract=function(e){return u.stop(e),this.$(".calendar-day").removeClass("active"),a.hide()},t}(c)},{}],349:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;n=e(348),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.tagName="td",t.prototype.className="day-cell",t.prototype.initialize=function(e){return this.scrollIntoView=e.scrollIntoView,t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){return t.__super__.render.call(this,{monthView:!0})},t.prototype.expand=function(){var e;return t.__super__.expand.apply(this,arguments),e=this.$(".calendar-day"),this.scrollIntoView({top:this.$el.prop("offsetTop"),height:e.outerHeight()})},t}(n)},{}],350:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g=function(e,t){function r(){this.constructor=e}for(var n in t)v.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},v={}.hasOwnProperty;n=e("jquery"),o=e(349),s=e(351),a=e(5),u=e(66),c=e(455),l=e(458),d=e(109),p=e(127),h=e("underscore"),f=e(438),m=e("moment"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),t.prototype.className=d.extendParentClassName("calendar-month"),t.prototype.WEEK_WRAPPER_ELEMENT="tr",t.prototype.VIEWSTATE_PREF_STR="month",t.prototype.HEADER_CLASS_NAME="month-view",t.prototype.WEEKS_FROM_EDGE_BEFORE_RENDER_NEW_DAYS=5,t.prototype.WEEKS_TO_RENDER_UPON_SCROLL_THRESHHOLD=5,t.prototype.MINIMUM_WEEKS_KEPT_IN_DOM=20,t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.DAY_VIEW_TYPE=o,this.today=new Date,this.currentMonthCells=[],this.scrollLock=!1,this.weeksKeptInDOM=this.MINIMUM_WEEKS_KEPT_IN_DOM,this.makeDebouncedMethods("shadeDaysUpdateHeader")},t.prototype.render=function(e){var t;return null==e&&(e=this.today),this.$el.html(f.fill("calendar_month")),this.renderBaseWeek(e),this.currentCenterWeek=e,this.currentMonth=u.getFirstOfMonth(e),t=Math.floor(this.weeksKeptInDOM/2),this.renderWeeks(t),this.renderWeeks(-1*t),this.shadeDays(),this.setSubscriptions(),this},t.prototype.getDayView=function(e,r){return t.__super__.getDayView.call(this,e,h.extend({scrollIntoView:this.scrollIntoView.bind(this)},r))},t.prototype.addedToDOM=function(){return t.__super__.addedToDOM.apply(this,arguments),this.calculateVariables(),this.windowResizeCheck(),this.updateHeader(),this.scrollToDay(this.currentCenterWeek)},t.prototype.updateRoute=function(){var e,t,r;return t=u.dateToObj(this.currentMonth),r=t.year,e=t.month,e=d.lpad(e,2,"0"),a.setBoardLocation(this.model.id,"calendar",[r,e],{replace:!0})},t.prototype.setSubscriptions=function(){return this.stopSubscriptions(),n(p).on("windowClassChange."+this.uniqueId(),this.windowClassChangeCheck.bind(this)),n(window).on("resize."+this.uniqueId(),function(e){return function(){return e.windowResizeCheck()}}(this)),n(".calendar-month").on("scroll."+this.uniqueId()+" ",function(e){return function(){return e.scrollCheck()}}(this))},t.prototype.stopSubscriptions=function(){return n(p).off("."+this.uniqueId()),n(window).off("."+this.uniqueId()),n(".calendar-month").off("."+this.uniqueId())},t.prototype.windowClassChangeCheck=function(e,t){var r;return p.fSmall?(n(".calendar-day.active").removeClass("active"),r=new Date(this.currentCenterWeek),this.calculateVariables(),this.windowResizeCheck(),this.scrollCheck(),this.scrollToDay(r)):void 0},t.prototype.calculateVariables=function(){var e;return this.tableSpacing=null!=(e=parseInt(this.$(".calendar-table").css("border-spacing")))?e:5,this.dayCellHeight=this.$(".day-cell").prop("clientHeight")+this.tableSpacing},t.prototype.windowResizeCheck=function(){var e,t,r,o,i;i=n(window).outerHeight(),r=n("#header").outerHeight(),e=n("#board-header").outerHeight(),t=n(".calendar-header").outerHeight(),this.calendarContentHeight=i-(r+e+t),o=Math.ceil(this.calendarContentHeight/this.dayCellHeight),this.weeksKeptInDOM=Math.max(5*o,this.MINIMUM_WEEKS_KEPT_IN_DOM)},t.prototype.updateHeader=function(){var e;return e=""+m(this.currentMonth).format("MMMM YYYY"),n(".js-calendar-header").text(e)},t.prototype.renderBaseWeek=function(e){var t;return t=this.weekRowEl(e),n(".calendar-month").off("."+this.uniqueId()),this.$(".calendar-table").append(t),this.calculateFirstAndLastWeeksFromDOM()},t.prototype.renderWeeks=function(e){var t,r;return e>0&&(t=m(this.lastRenderedSaturday).add(e,"weeks").toDate(),this.renderUpToDay(t)),0>e?(r=m(this.firstRenderedWeek).add(e,"weeks").toDate(),this.renderUpToDay(r)):void 0},t.prototype.renderUpToDay=function(e){var t,r,n,o,i;for(t=this.$(".calendar-table"),r=u.getEndOfWeek(e),o=[];this.lastRenderedSaturday<r;)this.lastRenderedSaturday=m(this.lastRenderedSaturday).add(1,"weeks").toDate(),o.push(this.weekRowEl(this.lastRenderedSaturday));for(t.append(o),n=u.getStartOfWeek(e),i=[];this.firstRenderedWeek>n;)this.firstRenderedWeek=m(this.firstRenderedWeek).subtract(1,"weeks").toDate(),i.unshift(this.weekRowEl(this.firstRenderedWeek));return t.prepend(i),this.scroll(this.dayCellHeight*i.length),this.deleteExcessWeeks(),this.calculateFirstAndLastWeeksFromDOM()},t.prototype.deleteExcessWeeks=function(){var e,t,r,o,i,s,a,u,c,l,d,p,h;if(e=n(".week"),e.length>this.weeksKeptInDOM){if(h=this.$(".calendar-table").outerHeight(),p=n(".calendar-month").prop("scrollTop"),o=h/2>p){for(l=[],r=i=a=e.length-1,u=this.weeksKeptInDOM;u>=a?u>=i:i>=u;r=u>=a?++i:--i)l.push(n(e[r]).remove());return l}for(t=e.length-this.weeksKeptInDOM,this.scroll(-1*this.dayCellHeight*t),d=[],r=s=0,c=t;c>=0?c>s:s>c;r=c>=0?++s:--s)d.push(n(e[r]).remove());return d}},t.prototype.scrollToDay=function(e,t){var r,n,o,i,s,a,c,l;return this.scrollLock?void 0:(i=this.calendarContentHeight/2/this.dayCellHeight,l=m(e).startOf("week"),o=l.clone().subtract(Math.ceil(i),"weeks").toDate(),s=l.clone().add(Math.ceil(i),"weeks").toDate(),this.firstRenderedWeek<=o&&this.lastRenderedWeek>=s?(c=l.clone().subtract(Math.floor(i),"weeks").toDate(),n=u.getMidnightInt(c),r=this.$("[name='"+n+"']"),a=r.prop("offsetTop"),this.scrollTo(a-this.tableSpacing+1,t)):(this.render(e),this.addedToDOM(),this.delegateEvents()),this.updateRoute())},t.prototype.completeAnimatedScroll=function(){return this.enableRenderNewDays()},t.prototype.scrollIntoView=function(e){var t,r,o,i,s,a;return a=e.top,o=e.height,r=a+o,t=n(".calendar-month"),s=t.scrollTop(),i=s+t.height(),s>a?this.scroll(a-s-this.tableSpacing+1,this.SCROLL_ANIMATION_TIME):r>i?this.scroll(r-i+this.tableSpacing+1,this.SCROLL_ANIMATION_TIME):void 0},t.prototype.scroll=function(e,t){var r,o;return r=n(".calendar-month"),o=r.prop("scrollTop"),this.scrollTo(o+e,t)},t.prototype.scrollTo=function(e,t){var r;return r=n(".calendar-month"),t?(this.scrollLock=!0,r.animate({scrollTop:e},{duration:t,complete:function(e){return function(){return e.completeAnimatedScroll()}}(this)})):r.scrollTop(e)},t.prototype.navigatePrevious=function(){return this.scrollMonth(-1)},t.prototype.navigateNext=function(){return this.scrollMonth(1)},t.prototype.scrollMonth=function(e){var t;return this.scrollLock?void 0:(t=m(this.currentMonth).add(e,"months").startOf("month").add(15,"days").toDate(),this.scrollToDay(t,this.SCROLL_ANIMATION_TIME))},t.prototype.enableRenderNewDays=function(){return this.checkRenderDays(),this.scrollLock=!1},t.prototype.scrollCheck=function(){var e,t,r,o,i,s,a,c,d,p,h,f;return l.hide(),e=n(".calendar-month"),r=e.outerHeight(),d=e.prop("scrollTop"),this.scrollLock||this.checkRenderDays(),o=r/2,f=Math.floor((d+o)/this.dayCellHeight),c=m(this.firstRenderedWeek).add(f,"weeks").toDate(),m(this.currentCenterWeek).isSame(c,"day")||(this.currentCenterWeek=c,i=u.getEndOfWeek(this.currentCenterWeek),(this.currentMonth.getMonth()!==this.currentCenterWeek.getMonth()||this.currentMonth.getMonth()!==i)&&(i.getMonth()===this.today.getMonth()?this.currentMonth=u.getFirstOfMonth(i):this.currentMonth=u.getFirstOfMonth(this.currentCenterWeek),this.shadeDaysUpdateHeaderDebounced()),this.updateRoute()),p=u.getMidnightInt(this.today),t=this.$("[name='"+p+"']"),h=t.prop("offsetTop"),s=h<(a=o+d)&&a<h+this.dayCellHeight,n(".today-button").toggleClass("on-today",s)},t.prototype.shadeDaysUpdateHeader=function(){return this.updateHeader(),this.shadeDays()},t.prototype.checkRenderDays=function(){var e,t,r,o,i,s,a;return e=n(".calendar-month"),t=e.outerHeight(),s=e.prop("scrollTop"),a=this.$(".calendar-table").outerHeight(),r=a-t-s,i=this.dayCellHeight*this.WEEKS_FROM_EDGE_BEFORE_RENDER_NEW_DAYS,i>r&&(o=!0,this.renderWeeks(this.WEEKS_TO_RENDER_UPON_SCROLL_THRESHHOLD)),i>s&&(o=!0,this.renderWeeks(-1*this.WEEKS_TO_RENDER_UPON_SCROLL_THRESHHOLD)),o&&this.model.editable()?this.defer(function(){return c.refreshCalendarCardSortable()}):void 0},t.prototype.shadeDays=function(){var e,t,r,o,i,s,a,u,c;for(e=this.$(".day-cell"),a=this.currentMonthCells,r=0,i=a.length;i>r;r++)t=a[r],n(t).removeClass("current-month");for(this.currentMonthCells=h.filter(e,this.cellInCurrentMonth,this),u=this.currentMonthCells,c=[],o=0,s=u.length;s>o;o++)t=u[o],c.push(n(t).addClass("current-month"));return c},t.prototype.cellInCurrentMonth=function(e){var t;return t=parseInt(n(e).attr("name")),new Date(t).getMonth()===this.currentMonth.getMonth()},t}(s)},{}],351:[function(e,t,r){var n,o,i,s,a,u,c,l,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p={}.hasOwnProperty;n=e("jquery"),o=e(346),s=e(66),a=e(455),u=e(441),c=e("underscore"),l=e("moment"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.className="u-fancy-scrollbar calendar-drag-area",t.prototype.SCROLL_ANIMATION_TIME=400,t.prototype.initialize=function(){var e;return e=this.listenToListChanges.bind(this),this.model.listList.each(e),this.listenTo(this.model.listList,"add remove",e)},t.prototype.addedToDOM=function(){return this.model.editable()?this.defer(function(){return a.refreshCalendarCardSortable()}):void 0},t.prototype.delegateEvents=function(){var e,r,n,o,i;for(t.__super__.delegateEvents.apply(this,arguments),o=this.subviewsOfType(this.DAY_VIEW_TYPE),i=[],r=0,n=o.length;n>r;r++)e=o[r],i.push(e.delegateEvents());return i},t.prototype.setSubscriptions=function(){throw new Error("CalendarView::setSubscriptions is an abstract method")},t.prototype.stopSubscriptions=function(){throw new Error("CalendarView::stopSubscriptions is an abstract method")},t.prototype.listenToListChanges=function(e){return this.listenTo(e.cardList,"add remove",function(e){var t;return this.cardsWithDueDates([e]).length>0?(t=new Date(e.get("due")),this.renderCardsOnDates([t])):void 0}),this.listenTo(e.cardList,"change:due",function(e,t){var r,n,o,i,s;return s=e.previousAttributes().due,o=e.get("due"),i=new Date(null!=s?s:null),t=new Date(null!=o?o:null),l(i).isSame(t,"day")?void 0:(n=function(){var e,t,n,i;for(n=[s,o],i=[],e=0,t=n.length;t>e;e++)r=n[e],null!=r&&i.push(new Date(r));return i}(),this.renderCardsOnDates(n))}),this.listenTo(e.cardList,"reset",function(e,t){var r,n,o,i;return o=e.models,i=t.previousModels,n=c.difference(o,i).concat(c.difference(i,o)),this.renderCardsOnDates(function(){var e,t,o;for(o=[],e=0,t=n.length;t>e;e++)r=n[e],o.push(new Date(r.get("due")));return o}())})},t.prototype.navigateToday=function(){return this.scrollToDay(this.today,this.SCROLL_ANIMATION_TIME)},t.prototype.getCardView=function(e){return this.subview(o,e,e.cid)},t.prototype.cardsWithDueDates=function(e){return e.filter(function(e){return null!=e.get("due")})},t.prototype.cardsDueOnDate=function(e,t){return this.cardsWithDueDates(e).filter(function(e){return l(e.get("due")).isSame(t,"day")})},t.prototype.cardSubviews=function(){var e,t,r;return r=this.subviewsOfType(this.DAY_VIEW_TYPE),e=c.flatten(function(){var e,n,i;for(i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push(t.subviewsOfType(o));return i}())},t.prototype.calculateFirstAndLastWeeksFromDOM=function(){var e;return e=this.$(".week"),this.firstRenderedWeek=new Date(parseInt(e.first().attr("name"))),this.lastRenderedWeek=new Date(parseInt(e.last().attr("name"))),this.lastRenderedSaturday=s.getEndOfWeek(this.lastRenderedWeek)},t.prototype.renderCardsOnDates=function(e){var t,r,n,o,i,a,u;if(this.$(".week").length>0){for(u=[],i=0,a=e.length;a>i;i++)r=e[i],this.firstRenderedWeek<r&&r<this.lastRenderedSaturday&&(t=this.cardsDueOnDate(this.model.openCards(),r),n=s.getMidnightInt(r),o=this.existingSubview(this.DAY_VIEW_TYPE,this.model,n),o.cardsDue=t,u.push(o.renderCardsAndHeaders()));return u}},t.prototype.renderDayViews=function(e){var t,r,n,o;for(o=[],r=0,n=e.length;n>r;r++)t=e[r],o.push(this.getDayView(t).render().el);return o},t.prototype.getDayView=function(e,t){var r;return r={day:e,cardsDueOnDate:this.cardsDueOnDate(this.model.openCards(),e)},this.subview(this.DAY_VIEW_TYPE,this.model,c.extend({data:r,getCardView:this.getCardView.bind(this)},t),s.getMidnightInt(e))},t.prototype.weekRowEl=function(e){var t,r;return r=this.renderDayViews(s.getDaysOfWeek(e)),t=n(document.createElement(this.WEEK_WRAPPER_ELEMENT)),t.attr("name",s.getMidnightInt(s.getStartOfWeek(e))).addClass("week").append(r),t},t}(u)},{}],352:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;n=e(348),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.className="day-column",t}(n)},{}],353:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h=function(e,t){function r(){this.constructor=e}for(var n in t)m.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},m={}.hasOwnProperty;n=e("jquery"),o=e(351),i=e(352),a=e(5),u=e(66),c=e(455),l=e(109),p=e(438),d=e("moment"),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className=l.extendParentClassName("calendar-week"),t.prototype.WEEK_WRAPPER_ELEMENT="div",t.prototype.VIEWSTATE_PREF_STR="week",t.prototype.HEADER_CLASS_NAME="week-view",t.prototype.WEEKS_KEPT_IN_DOM=5,t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.DAY_VIEW_TYPE=i,this.today=new Date,this.scrollLock=!1},t.prototype.render=function(e){return null==e&&(e=this.today),this.$el.html(p.fill("calendar_week")),this.currentWeek=u.getStartOfWeek(e),this.appendWeekEl(this.currentWeek),this.prependWeekEl(d(this.currentWeek).subtract(1,"weeks").toDate()),this.appendWeekEl(d(this.currentWeek).add(1,"weeks").toDate()),this},t.prototype.addedToDOM=function(){return t.__super__.addedToDOM.apply(this,arguments),this.weekWidth=n(".calendar-content").outerWidth(),this.resizeWeekCanvas(),this.scrollToDay(this.currentWeek),this.updateToolbar()},t.prototype.updateRoute=function(){var e,t,r,n;return r=u.dateToObj(this.currentWeek),n=r.year,t=r.month,e=r.day,t=l.lpad(t,2,"0"),e=l.lpad(e,2,"0"),a.setBoardLocation(this.model.id,"calendar",[n,t,e],{replace:!0})},t.prototype.setSubscriptions=function(){return n(window).on("resize."+this.uniqueId(),function(e){return function(){return e.resizeCheck()}}(this)),n(".board-menu").on("transitionend."+this.uniqueId()+" webkitTransitionEnd."+this.uniqueId(),function(e){return function(){return e.resizeCheck()}}(this))},t.prototype.stopSubscriptions=function(){return n(window).off("."+this.uniqueId()),n(".board-menu").off("."+this.uniqueId())},t.prototype.resizeCheck=function(){return this.weekWidth=n(".calendar-content").outerWidth(),this.resizeWeekCanvas(),this.scrollToDay(this.currentWeek)},t.prototype.resizeWeekCanvas=function(){var e;return e=this.$(".week").length,n(".week-horizontal-canvas").width(this.weekWidth*e),n(".week").width(this.weekWidth)},t.prototype.updateToolbar=function(){var e,t,r,o,i;return i=d(u.getEndOfWeek(this.currentWeek)),t=d(this.currentWeek),r=t.format("LL")+" - "+i.format("LL"),n(".js-calendar-header").text(r),e=n(".today-button"),o=d(this.today).isSame(this.currentWeek,"week"),e.toggleClass("on-today",o)},t.prototype.appendWeekEl=function(e){var t,r;return r=this.$(".week-horizontal-canvas"),r.append(this.weekRowEl(e)),this.resizeWeekCanvas(),t=this.$(".week"),t.length>this.WEEKS_KEPT_IN_DOM&&(t.first().remove(),this.scrollLeft(-1*this.weekWidth)),this.calculateFirstAndLastWeeksFromDOM()},t.prototype.prependWeekEl=function(e){var t,r;return r=this.$(".week-horizontal-canvas"),r.prepend(this.weekRowEl(e)),t=this.$(".week"),t.length>this.WEEKS_KEPT_IN_DOM&&t.last().remove(),this.resizeWeekCanvas(),this.scrollLeft(this.weekWidth),this.calculateFirstAndLastWeeksFromDOM()},t.prototype.navigatePrevious=function(){return this.navigateWeek({backwards:!0})},t.prototype.navigateNext=function(){return this.navigateWeek({backwards:!1})},t.prototype.navigateWeek=function(e){var t,r,n,o,i;return r=(null!=e?e:{}).backwards,this.scrollLock?void 0:(i=r?-1:1,t=r?this.$(".week").first():this.$(".week").last(),this.currentWeek=d(this.currentWeek).add(i,"weeks"),o=t.attr("name"),n=new Date(parseInt(o)),d(this.currentWeek).isSame(n,"day")&&(r?this.prependWeekEl(d(this.currentWeek).subtract(1,"weeks").toDate()):this.appendWeekEl(d(this.currentWeek).add(1,"weeks").toDate()),this.model.editable()&&this.defer(function(){return c.refreshCalendarCardSortable()})),this.scrollToDay(this.currentWeek,this.SCROLL_ANIMATION_TIME))},t.prototype.scrollLeft=function(e,t){var r,o;return r=n(".calendar-week"),o=r.prop("scrollLeft"),this.scrollLeftTo(o+e,t)},t.prototype.scrollLeftTo=function(e,t){var r;return r=n(".calendar-week"),t?(this.scrollLock=!0,r.animate({scrollLeft:e},{duration:t,complete:function(e){return function(){return e.completeAnimatedScroll()}}(this)})):r.scrollLeft(e)},t.prototype.scrollToDay=function(e,t){var r,n,o;return this.firstRenderedWeek<e&&e<this.lastRenderedSaturday?(o=u.getMidnightInt(u.getStartOfWeek(e)),r=this.$(".week[name='"+o+"']"),n=r.prop("offsetLeft"),this.scrollLeftTo(n,t),this.currentWeek=new Date(o),this.updateToolbar()):(this.render(e),this.addedToDOM(),this.delegateEvents()),this.updateRoute()},t.prototype.completeAnimatedScroll=function(){return this.scrollLock=!1},t}(o)},{}],354:[function(e,t,r){var n,o;o=null!=(n=window.URL)?n:window.webkitURL,t.exports=new(function(){function e(){this.stream=null}return e.prototype.supportsGetUserMedia=function(){return null!=navigator.getUserMedia||null!=navigator.webkitGetUserMedia},e.prototype.connected=function(){return null!=this.stream},e.prototype.getStream=function(){return this.stream},e.prototype.getError=function(){return this.error},e.prototype.connect=function(e){var t,r;return null!=this.stream?e(null,this.stream):(this.error=null,t=function(t){return function(r){return t.error=r,t.stream=null,e("Could not connect")}}(this),r={video:!0},null!=navigator.getUserMedia?navigator.getUserMedia(r,function(t){return function(r){return t._setRawStream(r),t.stream=r,e(null,t.stream)}}(this),t):null!=navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(r,function(t){return function(r){return t._setRawStream(r),t.stream=o.createObjectURL(r),e(null,t.stream)}}(this),t):void 0)},e.prototype._setRawStream=function(e){return this.stop(),this.rawStream=e},e.prototype.stop=function(){var e,t,r,n;return null!=this.rawStream&&("function"==typeof(e=this.rawStream).stop&&e.stop(),"function"==typeof(t=this.rawStream).getTracks&&null!=(r=t.getTracks())&&null!=(n=r[0])&&"function"==typeof n.stop&&n.stop()),this.stream=null,this.rawStream=null},e}())},{}],355:[function(e,t,r){var n,o,i,s,a,u=function(e,t){
function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;n=e("jquery"),i=e(458),s=e(441),a=e(438),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="crop photo",t.prototype.events=function(){return{"click .js-done":"done","click .js-back":"back"}},t.prototype.setImage=function(e){return this.url=e},t.prototype.render=function(){return this.$el.html(a.fill("crop_photo")),this.$(".crop-image").attr("src",this.url).css({"max-width":4096,"max-height":4096}).crop({width:270,height:270}).on("mousewheel",function(e){var t;return t=n(this).data("crop"),e.originalEvent.wheelDelta<0?t.zoomIn():t.zoomOut()}).on("crop",function(e){return function(t){return e.cropX=t.cropX,e.cropY=t.cropY,e.cropW=t.cropW,e.cropH=t.cropH}}(this)),this},t.prototype.done=function(){var e,t,r;return r=this.$(".crop-image")[0],e=n("<canvas>").attr({width:270,height:270}),t=e[0].getContext("2d"),t.drawImage(r,this.cropX,this.cropY,this.cropW,this.cropH,0,0,270,270),i.popView(),this.trigger("done",e[0].toDataURL("image/png"))},t.prototype.back=function(){return i.popView(),this.trigger("back")},t}(s)},{}],356:[function(e,t,r){var n,o,i,s,a,u,c,l,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p={}.hasOwnProperty;n=e("jquery"),o=e(354),i=e(355),s=e(458),u=e(441),l=e(438),c=e(84),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.events={"click .js-connect-camera":"connectCamera","click .js-snap":"snap"},t.prototype.willBePopped=function(){return o.stop()},t.prototype.viewTitleKey="take a photo",t.prototype.render=function(){var e,t,r;return e={connected:o.connected()},r=o.getError(),null!=r&&("PermissionDeniedError"===r.name?e.error=c(["member profile error","could not connect to camera"]):null!=r.name?e.error=r.name:e.error=r),this.$el.html(l.fill("take_photo",e)),o.connected()&&(t=this.$(".video")[0],t.src=o.getStream(),t.play()),this},t.prototype.getData=function(){return this.connectCamera()},t.prototype.connectCamera=function(){return o.connect(function(e){return function(t){return e.render()}}(this))},t.prototype.snap=function(){var e,t,r,a;return a=this.$(".video")[0],e=n("<canvas>").attr({width:640,height:480}),t=e[0].getContext("2d"),t.drawImage(a,0,0,640,480),r=new i({model:this.model,modelCache:this.modelCache}),r.setImage(e[0].toDataURL("image/png")),o.stop(),s.pushView({view:r}),this.listenTo(r,"done",function(e){return function(t){return s.popView(),e.trigger("done",t)}}(this)),this.listenTo(r,"back",function(e){return function(){return e.render(),e.connectCamera()}}(this))},t}(u)},{}],357:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h=function(e,t){function r(){this.constructor=e}for(var n in t)m.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},m={}.hasOwnProperty;n=e("jquery"),i=e(80),s=e(16),a=e(458),u=e(109),c=e(441),l=e("underscore"),p=e(438),d=e(84),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className="calendar-card-composer",t.prototype.initialize=function(){return this.board=this.model.getBoard()},t.prototype.events={"change .js-select-list":"updatePositionList","change .js-select-position":"renderValues","click .js-add-card":"addCard",keydown:"keydownEvent"},t.prototype.viewTitleKey="add card",t.prototype.setDate=function(e){return this.date=e,this.date.setHours(12)},t.prototype.remove=function(){var e;return e={title:this.$(".js-card-title").val(),idList:this.$(".js-select-list").val(),pos:this.$(".js-select-position").val()},this.model.set(e).save(),t.__super__.remove.apply(this,arguments)},t.prototype.render=function(){var e;return e={title:this.model.get("title")},this.$el.html(p.fill("popover_card_from_calendar",e)),this.updateListList(),this.updatePositionList(),this.defer(function(e){return function(){return u.setCaretAtEnd(e.$(".js-card-title")[0])}}(this)),this},t.prototype.keydownEvent=function(e){i.getKey(e)===s.Enter&&this.addCard(e)},t.prototype.addCard=function(e){var t,r,o,i;return u.stop(e),(r=n.trim(this.$(".js-card-title").val()))?(a.hide(),this.model.clearItems(),this.model.set("pos","bottom"),o=this.selectedList(),i=parseInt(this.$(".js-select-position").val()),t={closed:!1,dateLastActivity:new Date,due:this.date.toString(),idList:o.id,pos:o.calcPos(i),name:r},o.cardList.create(t)):void 0},t.prototype.updateListList=function(){var e,t;return e=this.$(".js-select-list"),e.empty(),t=this.board.listList.models,l.each(t,function(t){return n("<option>").val(t.id).text(t.get("name")).appendTo(e)}),e.val(this.model.get("idList")),e.val()||e.find("option").first().prop("selected",!0),this.renderValues()},t.prototype.updatePositionList=function(){var e,t,r,o,i;return e=this.$(".js-select-position"),r=this.selectedList(),e.empty(),null!=r&&(o=r.cardList.length,t=function(){i=[];for(var e=0;o>=0?o>=e:e>=o;o>=0?e++:e--)i.push(e);return i}.apply(this),l.each(t,function(r){var o;return o=function(){switch(r){case 0:return" (Top)";case t.length-1:return" (Bottom)";default:return""}}(),n("<option>").val(r).text(r+1+o).appendTo(e)}),e.val(this.model.get("pos")),e.val()||e.find("option").last().prop("selected",!0)),this.renderValues()},t.prototype.selectedList=function(){var e;return e=this.$(".js-select-list").val(),l.findWhere(this.board.listList.models,{id:e})},t.prototype.renderValues=function(){var e,t,r,o;r=this.selectedList(),e=this.$(".js-list-value"),t=this.$(".js-pos-value"),null!=r?(e.text(r.get("name")),o=parseInt(this.$(".js-select-position").val()),t.text(o+1)):(e.empty().append(n("<i></i>").text(d("no lists"))),t.empty().append(n("<i></i>").text(d("n/a")))),this.$(".js-add-card,.js-card-title").prop("disabled",null==r)},t}(c)},{}],358:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x=function(e,t){function r(){this.constructor=e}for(var n in t)j.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},j={}.hasOwnProperty;n=e("jquery"),o=e(65),a=e(359),u=e(360),c=e(361),l=e(362),d=e(452),p=e(5),h=e(80),m=e(16),_=e(85),f=e(458),g=e("bluebird"),v=e(109),y=e(441),b=e("underscore"),k=e(438),C=e(38),w=e(84),i=_("CardComposer",["TooManyCards"]),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.className="card-composer",t.prototype.initialize=function(){return this.listenTo(this.model,"change:idLabels change:idMembers",this.renderSelectedItems),this.listenTo(this.model,"change:vis",this.frameDebounce(this.renderVisibility)),this.listenTo(this.model.labelList,"add remove reset change",this.frameDebounce(this.renderSelectedItems))},t.prototype.events={"click .js-add-card":"submitCard","click .js-cancel":"clearAndHide","click .js-cc-menu":"openMenu",keyup:"keyupEvent",paste:"pasteEvent",keydown:"keydownEvent"},t.prototype.render=function(e,t){var r,n;return n=this,r=this.model.toJSON({board:!0}),this.renderVisibility(),this.$el.html(k.fill("card_composer_inline",r)),this.renderSelectedItems(),this.defer(function(e){return function(){return v.setCaretAtEnd(e.$(".js-card-title")[0]),"function"==typeof t?t():void 0}}(this)),this.$(".js-card-title").autosize(),this},t.prototype.renderVisibility=function(){return this.$el.toggleClass("hide",!this.model.get("vis")),this},t.prototype.clearTextField=function(){return this.model.save("title",""),this.$(".js-card-title").val("").trigger("autosize.resize")},t.prototype.submitCard=function(e){var t,r,o,s;return e&&v.preventDefault(e),f.hide(),s=n.trim(this.$(".js-card-title").val()),""===s?void this.$el.find(".js-card-title").focus().select():(t=b.compact(s.split(/\r\n|\r|\n/)),r=t.length,o=r.toString(),void g.try(function(t){return function(){if(r>100)throw new i.TooManyCards;return r>1?new g(function(t){return d.toggle("create many cards",{elem:n(e.target),text:w("confirm.create many cards.text",{count:o}),confirmText:w("confirm.create many cards.confirm",{count:o}),fxConfirm:function(e){return function(e){return t(!0)}}(this),fxCancel:function(e){return function(e){return t(!1)}}(this)})}):!1}}(this)).then(function(r){return function(n){var o;return r.clearTextField(),o=e.shiftKey===!0,n?r.createMultipleCards(t,o):r.createCard(s,{openCard:o,selectCard:!1,removeNewLines:!0}),r.clearItems()}}(this)).catch(i.TooManyCards,function(t){return function(){return d.toggle("too many cards",{elem:n(e.target),text:w("confirm.too many cards.text",{count:o}),fxConfirm:function(e){return f.hide()}})}}(this)).done())},t.prototype.createCard=function(e,t){var r,n,o,i,s,a,u,c,l,d;c=null!=t?t:{},u=c.openCard,d=c.selectCard,l=c.removeNewLines,e=e.trim(),this.$el.trigger("prevent-scroll-selection"),l&&(e=e.replace(/(\r\n|\n|\r)/gm," ")),s=b.clone(this.model.get("idMembers")),i=b.pluck(this.model.labelList.models,"id"),""!==e&&(a={name:e,pos:this.model.getList().calcPos(this.model.get("index")),closed:!1,idLabels:i,idMembers:s,dateLastActivity:Date.now()},this.model.moveToNext(),r=i.length>0,o=this.model.getList().cardList.create(a,{success:function(e){return function(e){r&&s.length>0?C("Card Composer","Card Added","With Members and Labels"):s.length>0?C("Card Composer","Card Added","With Members"):r?C("Card Composer","Card Added","With Labels"):C("Card Composer","Card Added","No items included")}}(this),modelCache:this.modelCache}),n=this.model.getBoard(),n.filter.addNewCard(o),d&&n.viewState.selectCard(o),u&&p.showCardDetail(o))},t.prototype.createMultipleCards=function(e,t){var r,n,o,i,s;for(i=e.length,r=n=0,o=e.length;o>n;r=++n)s=e[r],e.length-1===r?this.createCard(s,{openCard:t,selectCard:!0}):this.createCard(s);C("Card Composer","Added Mulitple Cards",i)},t.prototype.pasteEvent=function(){this.$(".js-card-title").focus().keyup().trigger("autosize.resize")},t.prototype.keydownEvent=function(e){var t,r,o,i,s,l,d,p;return s=h.getKey(e),t=this.$(".js-card-title"),i=n(e.target).closest(".js-card-title").hasClass("js-card-title"),o=n(e.target).closest(".js-add-card").hasClass("js-add-card"),!i&&!o||f.isVisible||s!==m.Enter?void((s===m.Tab||s===m.Enter)&&(t.focus(),p=v.getWordFromCaret(t[0]),l=n(null!=(d=f.view)?d.el:void 0),r=!1,f.view instanceof u?(l.find(".js-members-list .item.selected:first .js-select-member").first().click(),r=!0):f.view instanceof a?(l.find(".js-select-label.selected").first().click(),r=!0):f.view instanceof c?l.find(".js-pos-results").length>0&&(l.find(".js-pos-results li.selected:first a").first().click(),r=!0):s===m.Tab&&""===t.val()&&(v.stop(e),this.hide(),e.shiftKey?n(this.el).closest(".js-list").find(".editable:first .current").click():n(this.el).closest(".js-list").next().find(".editable:first .current").click()),r&&(v.stop(e),v.insertSelection(t,"",p.start,p.end),this.model.set("title",t.val())),this.renderSelectedItems(),f.hide())):(v.stop(e),void this.submitCard(e))},t.prototype.keyupEvent=function(e){var t,r,i,s,l,d,p,g,y,w,_,k,C,x,j;if(t=this.$(".js-card-title"),g=h.getKey(e),g!==m.Tab&&g!==m.Enter){if(g===m.Escape)return v.stop(e),f.hide(),void t.focus();if(h.isArrow(g))return v.stop(e),w=n(null!=(k=f.view)?k.el:void 0),void(f.view instanceof u?v.navMenuList(w.find(".js-members-list"),".item",g):f.view instanceof a?v.navMenuList(w,".js-select-label",g):f.view instanceof c&&w.find(".js-pos-results").length>0&&v.navMenuList(w.find(".js-pos-results"),"li",g));if(!o.isTouch()&&n(e.target).closest(".js-card-title").hasClass("js-card-title")){if(j=v.getWordFromCaret(t[0]),d=/^@\S/.test(j.str.substring(0,2)),l=/^\#\S/.test(j.str.substring(0,2)),p=/^\^\S/.test(j.str.substring(0,2)),C=j.str.substring(1).toLowerCase(),!(d||l||p))return this.model.set("title",this.$(".js-card-title").val()),f.hide();if(g===m.Shift||g===m.Alt||g===m.Control);else{if(d)return x=new u({model:this.model,modelCache:this.modelCache}),i=b.pluck(this.model.getBoard().memberList.filterDeactivated({force:!0}).models,"id"),s=v.filterMembers(this.modelCache,C,i),s.length>0?(x.populate(s,!0),f.show({elem:this.$(".js-cc-menu"),view:x}),t.focus(),r=n(x.el).find(".js-members-list .item:first"),v.selectMenuItem(n(x.el).find(".js-members-list"),".item",r)):f.hide();if(l)return x=new a({model:this.model,modelCache:this.modelCache}),y=this.model.getBoard().filterLabels(C),y.length>0?(x.populate(y),f.show({elem:this.$(".js-cc-menu"),view:x}),t.focus(),r=n(x.el).find(".edit-labels-pop-over .js-select-label:first"),v.selectMenuItem(n(x.el).find(".edit-labels-pop-over"),"li",r)):f.hide();if(p)return x=new c({model:this.model,modelCache:this.modelCache}),_=x.filterPos(C),_.hasData?(x.populateResults(_),f.show({elem:this.$(".js-cc-menu"),view:x}),t.focus(),r=n(x.el).find(".js-pos-results li:first"),v.selectMenuItem(n(x.el).find(".js-pos-results"),"li",r)):f.hide()}}}},t.prototype.renderSelectedItems=function(){var e,t,r,n,o,i,s,a,u,c,l,d,p,h;for(o=this.model.get("idMembers"),n=!b.isEmpty(o),t=this.$(".js-list-card-composer-members").empty(),p=this.modelCache.get("Member",o),i=0,c=p.length;c>i;i++)d=p[i],t.append("<div class='member js-remove-member' idMember='"+d+"'>"+k.fill("member",d.toJSON())+"</div>");for(u=this.model.get("labels"),r=!b.isEmpty(u),e=this.$(".js-list-card-composer-labels").empty(),h=this.model.labelList.models,s=0,l=h.length;l>s;s++)a=h[s],b.isEmpty(a.get("color"))||e.append("<div class='card-label card-label-"+a.get("color")+"'></div>");this.$(".js-clear-all-items").toggle(r||n)},t.prototype.openMenu=function(e){return v.stop(e),C("Card Composer","Open Selector Menu"),f.toggle({elem:e.target,view:new l({model:this.model,modelCache:this.modelCache})})},t.prototype.clearItems=function(e){return this.model.clearItems()},t.prototype.hide=function(e){this.model.save("vis",!1)},t.prototype.clearAndHide=function(e){return this.clearItems(),this.hide()},t.prototype.scrollIntoView=function(){var e,t;return t=this.$el.offset().top,e=this.$el.closest(".list-cards"),e.scrollTop(t+this.$el.height())},t}(y)},{}],359:[function(e,t,r){var n,o,i,s,a,u,c,l=function(e,t){function r(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d={}.hasOwnProperty;n=e("jquery"),i=e(109),s=e(441),a=e("underscore"),u=e(438),c=e(38),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="select labels",t.prototype.tagName="ul",t.prototype.className="edit-labels-pop-over",t.prototype.events={"mouseenter .item":"hoverLabelSelect","click .card-label":"addOrRemoveLabel"},t.prototype.populate=function(e){this.populatedLabelList=e},t.prototype.render=function(){var e,t,r,n,o,s,c,l;return l=this,s=[],e=this.model.getLabels(),o=null!=(c=this.populatedLabelList)?c:this.model.getBoard().getLabels(),s=function(){var t,i,s;for(s=[],t=0,i=o.length;i>t;t++)n=o[t],r=a.include(e,n),s.push({id:n.id,color:n.get("color"),name:n.get("name"),isActive:r});return s}(),t={labels:s},this.$el.html(u.fill("select_labels",t)),i.selectMenuItem(this.$(".edit-labels-pop-over"),".js-select-label",this.$(".js-select-label").first()),this},t.prototype.hoverLabelSelect=function(e){return i.selectMenuItem(this.$(".edit-labels-pop-over"),".js-select-label",n(e.target).closest(".js-select-label"))},t.prototype.addOrRemoveLabel=function(e){var t,r;i.stop(e),t=n(e.target).closest(".js-select-label"),t.toggleClass("active"),r=t.attr("data-idlabel"),this.model.toggleLabel(this.modelCache.get("Label",r))?c("Card Composer","Add Label"):c("Card Composer","Remove Label")},t}(s)},{}],360:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},f={}.hasOwnProperty;n=e("jquery"),i=e(80),s=e(16),a=e(509),u=e(109),c=e(441),l=e("underscore"),p=e(438),h=e(38),d=e(84),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="select members",t.prototype.events={"mouseenter .item":"hoverMemberSelect","click .item":"addOrRemoveMember",keyup:"keyupEvent"},t.prototype.populate=function(e,t){return this.data={idMems:null!=e?e:l.pluck(this.model.getBoard().memberList.filterDeactivated({force:!0}).models,"id")},this.data.showSearch=!(this.data.idMems.length<=5||t)},t.prototype.render=function(){var e;return e=this,this.$el.html(p.fill("popover_member_searcher",this.data)),this.fillMems(this.data.idMems),this.$(".js-filter-emoji").length>0&&this.setTimeout(function(e){return function(){return e.$(".js-filter-emoji").focus().select()}}(this),20),this.$(".js-filter-members").length>0&&this.setTimeout(function(e){return function(){return e.$(".js-filter-members").focus().select()}}(this),20),this},t.prototype.fillMems=function(e){var t,r,n,o,i,s;for(t=this.$(".js-members-list"),t.empty(),s=e.slice(0,5),r=0,o=s.length;o>r;r++)n=s[r],i=this.modelCache.get("Member",n),this.appendSubview(this.subview(a,i,{card:this.model}),t)},t.prototype.filterAndFillMembers=function(e){var t,r,n;r=l.pluck(this.model.getBoard().memberList.models,"id"),n=u.filterMembers(this.modelCache,e,r),n.length>0?(this.fillMems(n),t=this.$(".js-members-list .item:first"),u.selectMenuItem(this.$(".js-members-list"),".item",t)):this.$(".js-members-list").html('<li><p class="empty"></p></li>').find("p").text(d("no matched members"))},t.prototype.hoverMemberSelect=function(e){var t;return t=n(e.target).closest(".item"),u.selectMenuItem(this.$(".js-members-list"),".item",t)},t.prototype.keyupEvent=function(e){var t,r;r=i.getKey(e),t=n(".js-filter-members").val().trim().toLowerCase(),r===s.Tab||r===s.Enter?(u.stop(e),this.$(".js-members-list .item.selected:first .js-select-member").first().click()):r===s.ArrowUp||r===s.ArrowDown?(u.stop(e),u.navMenuList(this.$(".js-members-list"),".item",r)):this.filterAndFillMembers(t)},t.prototype.addOrRemoveMember=function(e){var t,r,o;u.stop(e),o=n(e.target).closest(".item"),o.toggleClass("active"),r=o.find(".username").text(),t=o.find("[idMember]").attr("idMember"),this.model.toggle("idMembers",t)?h("Card Composer","Add Member"):h("Card Composer","Remove Member")},t}(c)},{}],361:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h={}.hasOwnProperty;n=e("jquery"),i=e(458),s=e(109),a=e(441),u=e("underscore"),l=e(438),d=e(38),c=e(84),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="select position",t.prototype.events={"change .js-select-list":"changeList","change .js-select-position":"changePosition","mouseenter .js-pos-results li":"hoverPosResultsSelect","click .js-select-pos-keyword":"selectPosResult","click .js-select-pos-pos":"selectPosResult","click .js-select-pos-list":"selectPosResult"},t.prototype.populateResults=function(e){return this.data={filtered:!0,keywordList:e.keywordList.map(function(e){return function(t){return{value:t,indexString:t,listName:e.model.get("list").get("name")}}}(this)),indexList:e.indexList.map(function(e){return function(t){return{value:t,indexString:String(t),listName:e.model.get("list").get("name")}}}(this)),listList:e.listList.map(function(e){return function(t){return{value:t.get("id"),indexString:String(e.model.get("index")+1),listName:t.get("name")}}}(this))}},t.prototype.render=function(){var e;return this.data?this.$el.html(l.fill("popover_filter_pos_results",this.data)):(e={hideBoard:!0},this.$el.html(l.fill("move_card_controls",e)),this.updateListList()),this},t.prototype.hoverPosResultsSelect=function(e){var t;return t=n(e.target).closest("li"),s.selectMenuItem(this.$(".js-pos-results"),"li",t)},t.prototype.selectPosResult=function(e){var t,r,o,a,u,c;s.stop(e),u=n(e.target).closest("a"),c=u.attr("name"),a=this.model.getList(),r=a.openCards().length,t=r+1,u.hasClass("js-select-pos-keyword")?"top"===c?(this.model.set("index",0),d("Card Composer","Select Position in List by Autocomplete",'Top of List - Used "Top"')):"bottom"===c&&(this.model.set("index",t),d("Card Composer","Select Position in List by Autocomplete",'Bottom of List - Used "Bottom"')):u.hasClass("js-select-pos-pos")?(this.model.set("index",parseInt(c,10)-1),d("Card Composer","Select Position in List by Autocomplete","Selected Position - Used Number")):u.hasClass("js-select-pos-list")&&(o=r===this.model.get("pos"),this.model.set("list",this.model.getBoard().getList(c)),o?(this.model.set("index",r),d("Card Composer","Select List by Autocomplete","Bottom")):d("Card Composer","Select List by Autocomplete","Not Bottom")),i.hide()},t.prototype.filterPos=function(e){var t,r,n,o,i,a,c,l,d,p,h;for(h=RegExp("^"+s.escapeForRegex(e)),l=RegExp("^"+s.escapeForRegex(e)+"$"),t=this.model.getList().openCards(),r={keywordList:function(){var e,t,r,n;for(r=["top","bottom"],n=[],e=0,t=r.length;t>e;e++)i=r[e],h.test(i)&&n.push(i);return n}(),indexList:function(){var e,r,o;for(o=[],n=e=1,r=t.length+1;r>=1?r>=e:e>=r;n=r>=1?++e:--e)l.test(String(n))&&o.push(n);return o}(),listList:[]},d=this.model.getBoard().listList.models,o=0,a=d.length;a>o;o++)c=d[o],p=u.compact(c.get("name").toLowerCase().split(/\s+/)),u.find(p,function(e){return h.test(e)})&&r.listList.push(c);return r.hasData=!u.isEmpty(r.keywordList)||!u.isEmpty(r.indexList)||!u.isEmpty(r.listList),r},t.prototype.updateListList=function(){var e,t,r,o,i,s,a,l,d,p;for(l=this.model.getList(),i=l.id,r=this.model.getBoard(),t=this.$(".js-select-list"),t.empty(),p=u.sortBy(r.listList.models,function(e){return e.get("pos")}),s=0,a=p.length;a>s;s++)l=p[s],d=l.get("name"),o=l.id===i?c("selected list",{listName:d}):d,e=n("<option>").val(l.id).text(o),t.append(e),l.id===i&&(e.attr("selected","selected"),this.$(".js-list-value").text(d));return this.updatePositionList()},t.prototype.updatePositionList=function(){var e,t,r,o,i,s,a,u,c,l,d;if(t=this.$(".js-select-list"),r=this.$(".js-select-position"),a=t.find("option:selected").val(),r.empty(),c=this.model.getList(),l=this.model.getBoard().listList.get(a),o=c.cardList,this.model.get("index")>o.length&&this.model.set("index",o.length),0===o.length)return e=n("<option>").val("0").text("1").appendTo(r),void this.$(".js-pos-value").text("1");for(s=u=0,d=o.length;d>=0?d>=u:u>=d;s=d>=0?++u:--u)i=String(s+1),e=n("<option>").val(s).text(i).appendTo(r),s===this.model.get("index")&&e.attr("selected","selected");this.$(".js-pos-value").text(this.model.get("index").toString())},t.prototype.changeList=function(){var e,t,r,n,o,s,a;n=this.model.get("index"),t=this.model.getList().openCards().length,o=t===n,e=this.$(".js-select-list"),r=e.find("option:selected").val(),a=this.model.getBoard().getList(r),this.model.set("list",a),s=a.openCards().length,o?(this.model.set("index",s),d("Card Composer","Change Position by Click","Change List - Bottom")):(this.model.set("index",Math.min(s,n)),d("Card Composer","Change Position by Click","Change List - Not Bottom")),i.hide()},t.prototype.changePosition=function(){var e,t;e=this.$(".js-select-position"),t=parseInt(e.find("option:selected").val(),10),this.model.set("index",t),d("Card Composer","Change Position by Click","Change Position in List"),i.hide()},t}(a)},{}],362:[function(e,t,r){var n,o,i,s,a,u,c,l,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p={}.hasOwnProperty;n=e(445),o=e(369),i=e(361),a=e(458),u=e(109),c=e(441),l=e(438),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="options",t.prototype.events={"click .js-mem-selector":"openMemSelector","click .js-label-selector":"openLabelSelector","click .js-pos-selector":"openPosSelector"},t.prototype.render=function(){var e;return e=this,this.$el.html(l.fill("popover_selector_menu")),this},t.prototype.openMemSelector=function(e){return u.stop(e),a.pushView({view:o,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openLabelSelector=function(e){return u.stop(e),a.pushView({view:n,options:{model:this.model,modelCache:this.modelCache,hideOnSelect:!1}})},t.prototype.openPosSelector=function(e){return u.stop(e),a.pushView({view:i,options:{model:this.model,modelCache:this.modelCache}})},t}(c)},{}],363:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h={}.hasOwnProperty;n=e("jquery"),c=e(228),s=e("bluebird"),i=e(458),a=e(109),u=e(441),l=e(643),d=e("xtend"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.initialize=function(e){var t;return t=e.links,this.links=t,this.listenTo(this.model.attachmentList,"add remove reset",this.render)},t.prototype.viewTitleKey="attach links",t.prototype.events={"click .js-attach:not([disabled])":"attach"},t.prototype.render=function(){var e,t;return e=function(){var e,r,n,o;for(n=this.links,o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(d(t,{domain:c(t.url).host,attached:this.model.attachmentList.any(function(e){return e.get("url")===t.url})}));return o}.call(this),this.$el.html(l(e)),this},t.prototype.attach=function(e){var t,r,o;return t=n(e.currentTarget),o=t.attr("data-url"),r=t.attr("data-text"),t.attr("disabled","disabled"),this.model.uploadUrl({url:o,name:r})},t}(u)},{}],364:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S=function(e,t){function r(){this.constructor=e}for(var n in t)M.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},M={}.hasOwnProperty;n=e("jquery"),o=e(451),i=e(192),a=e(25),c=e(78),l=e(80),d=e(458),p=e("bluebird"),h=e(97),m=e(379),f=e(109),g=e(441),v=e("underscore"),C=e(436)("attachment_type_picker"),j=e(38),w=e(84),_=e(112),b=e(209),y=e(217),k=e(421),u=y("AttachmentTypePickerView::FileTooLarge"),x=C.renderable(function(e){var t,r,n,o,i;r=e.hasLargeAttachments,n=e.id,t=e.googleDriveReady,i=e.tipKey,o=e.tipData,null==i&&(i="tip-you-can-drag-and-drop-files-and-links-onto-cards-to-upload-them"),null==o&&(o={}),C.div(".error.js-file-too-large",{style:"margin: 12px 0 6px; display:none;"},function(){r?C.format("that-file-size-exceeds-the-250mb-limit"):C.div(".gold-promo",function(){C.format("that-file-size-exceeds-the-10mb-limit-but-if-you-upgrade-to"),C.icon("trello-gold","trello-gold-you-can-upload-files-up-to-250mb")})}),C.ul(".pop-over-list",function(){C.li(".uploader",function(){return C.a(".fakefile",{href:"#"},function(){return C.format("computer")}),C.form(".realfile",{action:"/1/card/"+n+"/attachments",method:"post",enctype:"multipart/form-data"},function(){return C.input({type:"hidden",name:"token",value:""}),C.input({type:"hidden",name:"format",value:"http"}),C.input(".js-attach-file",{type:"file",name:"file",tabindex:"-1",multiple:""})})}),C.li(function(){return C.a(".js-google-drive-attachment",{href:"#",class:C.classify({disabled:!t})},function(){return C.format("google-drive")})}),C.li(function(){return C.a(".js-dropbox-attachment",{href:"#"},function(){return C.format("dropbox")})}),C.li(function(){return C.a(".js-box-attachment",{href:"#"},function(){return C.format("box")})}),C.li(function(){return C.a(".js-one-drive-attachment",{href:"#"},function(){return C.format("onedrive")})})}),C.hr(),C.label({for:"addLink"},function(){C.format("attach-a-link")}),C.input(".attachment-add-link-input.js-attachment-url.js-autofocus",{type:"text",id:"addLink",placeholder:C.l("paste-any-link-here-ellipsis")}),C.div(".js-name-link.hide",function(){return C.label({for:"nameLink"},function(){C.format("link-name")}),C.input(".attachment-add-link-input.js-attachment-name",{type:"text",id:"nameLink"})}),C.input(".js-add-attachment-url",{style:"margin: 0;",type:"submit",value:C.l("attach")}),C.hr(),C.p(".quiet.u-bottom",function(){C.format(i,o)})}),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return S(t,e),t.prototype.viewTitleKey="attach from",t.prototype.initialize=function(){return this.listenTo(c,"loaded",this.render)},t.prototype.events={"click .js-google-drive-attachment:not(.disabled)":"openGoogleDriveFilePicker","click .js-dropbox-attachment":"openDropboxFilePicker","click .js-one-drive-attachment":"openOneDriveFilePicker","click .js-box-attachment":"openBoxFilePicker","change .js-attach-file":"startUpload","click .js-add-attachment-url":"addUrl","keydown .js-attachment-url":"keydown","input .js-attachment-url":function(e){return this.$(".js-name-link").toggleClass("hide",!/\S/.test(n(e.currentTarget).val()))},'click a[href^="/gold"]':function(){return j("Attachment","Open Trello Gold Promo - via Attachment Upload Limit")},'click a[href^="/business-class"]':function(){return j("Card Detail","Attachments BC Ad")}},t.prototype._scripts={dropbox:"https://www.dropbox.com/static/api/1/dropbox.js",box:"https://app.box.com/js/static/select.js",oneDrive:"https://js.live.net/v5.0/wl.js"},t.prototype.getData=function(){var e,t,r;t=this._scripts;for(e in t)r=t[e],this._loadOnce(r,function(){})},t.prototype.render=function(){var e,t,r,n;return t=null!=(r=this.model.getBoard())?r.getOrganization():void 0,e={id:this.model.id,hasLargeAttachments:(null!=(n=a.me())?n.isFeatureEnabled("largeAttachments"):void 0)||(null!=t?t.isFeatureEnabled("largeAttachments"):void 0),googleDriveReady:c.loaded},null!=t&&t.isFeatureEnabled("plugins")||(e.tipKey="tip-you-can-attach-other-things-with-bc",e.tipData={url:"/business-class?utm_source=trello&utm_medium=inapp&utm_content=attachments-menu&utm_campaign=bc-upgrade"}),this.$el.html(x(e)),this},t.prototype.startUpload=function(e){var t,r,i,s;return t=n(e.target),r=this.$(".js-file-too-large").hide(),i=v.toArray(t[0].files),s=i.length>0?v.any(i,function(e){return!a.me().canUploadAttachment(e)})?p.reject(u()):p.resolve(i).each(function(e){return function(t){var r;return r=t.name||k(),_(e.model,"upload",t,r)}}(this)):_(f,"uploadFile",a.myToken(),t),s.then(function(){return j("Card Detail","Upload Attachment Complete - Via Picker"),o.show("finished uploading","info","AjaxQueueUpload",2e3),d.hide()}).catch(u,function(){return r.show(),j("Card Detail","Attachment","Upload Error - File Too Large")}).done()},t.prototype._loadOnce=function(e,t){return null==this._loadedScripts&&(this._loadedScripts={}),this._loadedScripts[e]?t():n.getScript(e,function(r){return function(){return r._loadedScripts[e]=!0,t()}}(this))},t.prototype.attachLinks=function(e,t,r){return t?p.resolve(t).call("map",r).each(function(t){return function(r){return i({url:"/1/cards/"+t.model.id+"/attachments",type:"post",data:v.pick(r,"url","mimeType","name")}).then(function(){return j("Card Detail","Upload "+e)}).catch(function(){})}}(this)).then(function(){return d.hide()}).done():void 0},t.prototype.openGoogleDriveFilePicker=function(e){return f.stop(e),_(gapi,"load","picker").then(function(){var e;return e=c.validToken(),_(c,"authorize",e)}).then(function(e){return function(t){var r,o;return r=new google.picker.DocsView,r.setIncludeFolders(!0),o=(new google.picker.PickerBuilder).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).addView(r).setOAuthToken(t).setCallback(function(t){return e.attachLinks("Google drive file",t.docs,b.id)}).build(),o.setVisible(!0),n("iframe.picker-frame[src*=authserviceid]").attr("src",function(){return n(this).attr("src").replace(/authserviceid/g,"fixgoogle")})}}(this)).done()},t.prototype.openDropboxFilePicker=function(e){f.stop(e),this._loadOnce(this._scripts.dropbox,function(e){return function(){Dropbox.init({appKey:window.dropboxClientAppKey
}),Dropbox.choose({linkType:"preview",iframe:!0,success:function(t){return e.attachLinks("Dropbox file",t,function(e){return{url:e.link,name:e.name}})}}),n('iframe[src^="https://www.dropbox.com/chooser"]').parent().css("overflow","auto")}}(this))},t.prototype.openOneDriveFilePicker=function(e){var t,r;f.stop(e),t="one drive csrf key",r=Math.random().toString(),this._loadOnce(this._scripts.oneDrive,function(e){return function(){WL.init({client_id:window.oneDriveClientId,redirect_uri:siteDomain+"/onedrive_callback.html"}),h.set(t,r),WL.login({scope:"wl.skydrive wl.signin",redirect_uri:siteDomain+"/onedrive_callback.html?csrf="+r}).then(function(){return WL.fileDialog({mode:"open",select:"single"})}).then(function(t){var r;return e.attachLinks("OneDrive file",null!=t&&null!=(r=t.data)?r.files:void 0,function(e){return{url:e.link,name:e.name}})})}}(this))},t.prototype.openBoxFilePicker=function(e){return f.stop(e),this._loadOnce(this._scripts.box,function(e){return function(){var t,r;return t=new BoxSelect({clientId:window.boxClientId,linkType:"shared",multiselect:!0}),r=function(n){return t.unregister(t.SUCCESS_EVENT_TYPE,r),e.attachLinks("Box file",n,b.id)},t.success(r),t.launchPopup()}}(this))},t.prototype.keydown=function(e){return l.isSubmitEvent(e)?this.addUrl():void 0},t.prototype.addUrl=function(e){var t,r;r=this.$(".js-attachment-url").val().split(/\s+/),t=this.$(".js-attachment-name").val(),/\S/.test(t)||(t=void 0),r=v.filter(r,function(e){return/\S/.test(e)}),!v.isEmpty(r)&&r.length<10&&(d.pushView({view:m}),this.attachLinks("link",r,function(e){return{url:e,name:t}}))},t}(g)},{}],365:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=function(e,t){function r(){this.constructor=e}for(var n in t)b.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},b={}.hasOwnProperty;n=e(25),i=e(5),s=e(80),a=e(16),u=e(30),c=e(458),l=e(378),d=e(109),p=e(441),m=e(89),g=e(438),v=e(38),f=e(228),h=e(209),t.exports=m(l,o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.viewTitleKey="copy card",t.prototype.initialize=function(e){var t;return this.onCopy=null!=(t=e.onCopy)?t:function(){}},t.prototype.showCurrentPosition=!0,t.prototype.events={"change .js-select-position":"renderValues","change .js-select-list":"updatePositionList","change .js-select-board":"updateBoardData",'keydown textarea[name="name"]':"keydownEvent","click .js-submit":"submit","submit form":"submit"},t.prototype.render=function(){var e,t,r,o,i,s,a,u,c,l,d,p;for(t=this.model.toJSON(),t.numChecklists=this.model.checklistList.length,t.numMembers=t.idMembers.length,t.numLabels=null!=(c=null!=(l=t.idLabels)?l.length:void 0)?c:0,t.numAttachments=t.badges.attachments,t.numComments=t.badges.comments,t.numStickers=t.stickers.length,t.hasChecklists=t.numChecklists>0,t.hasMembers=t.idMembers.length>0,t.hasLabels=t.numLabels>0,t.hasAttachments=t.badges.attachments>0,t.hasComments=t.badges.comments>0,t.hasStickers=t.stickers.length>0,t.hasStuff=t.numChecklists+t.idMembers.length+t.numLabels+t.badges.attachments+t.badges.comments+t.stickers.length>0,t.loading=this.loading,t.organizations=n.me().getOpenBoardsByOrg(!0),d=t.organizations,r=0,i=d.length;i>r;r++)for(a=d[r],p=a.boards,o=0,s=p.length;s>o;o++)e=p[o],e.id===this.model.get("idBoard")&&(e.selected=!0);return u={move_card_controls:g.move_card_controls},this.$el.html(g.fill("card_copy",t,{editable:this.model.editable()},u)),this.updateBoardData(),this},t.prototype.getData=function(){return this.loading=!0,u.loadCardCopyData(this.model.get("idBoard"),this.model.id).finally(function(e){return function(){return e.loading=!1,e.render()}}(this)).done()},t.prototype.keydownEvent=function(e){s.getKey(e)===a.Enter&&(d.stop(e),this.submit(e))},t.prototype.submit=function(e){var t,r,n,o;return d.stop(e),n=this.$('textarea[name="name"]'),""===n.val().trim()?void n.focus().select():(r=["due"],o=this.$("input:checkbox:checked").get().map(h.get("name")),t=r.concat(o),void this.model.copyTo({name:n.val().trim(),idList:this.$(".js-select-list").find("option:selected").val(),pos:this.$(".js-select-position").find("option:selected").val(),keepFromSource:t}).then(function(e){return function(){return c.hide(),e.onCopy(),v("Card","Copy Card")}}(this)))},t}(p))},{}],366:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f=function(e,t){function r(){this.constructor=e}for(var n in t)g.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},g={}.hasOwnProperty;n=e(410),o=e(365),s=e(452),a=e(66),u=e(454),c=e(458),l=e(109),d=e(441),h=e(438),m=e(38),p=e("underscore"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.viewTitleKey="more",t.prototype.events={"click .js-copy-card":"copyCard","click .js-delete":"deleteCard","click .js-short-url, .js-email":function(e){return this.focusUrl(e.currentTarget)},"click .js-print":"printModel","click .js-export-json":"exportJSON"},t.prototype.initialize=function(){return this.listenTo(this.model,"change:shortUrl",this.render)},t.prototype.copyCard=function(e){m("Card Detail","Card Copy Button","Via More Menu"),c.pushView({view:o,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.focusUrl=function(e){return this.$(e).focus().select()},t.prototype.getShortLinkData=function(){null==this.model.get("shortUrl")&&this.model.fetch({fields:["shortUrl"]})},t.prototype.deleteCardConfirm=function(e){s.pushView("delete card",{model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return u.hide(),e.model.destroy(),m("Card","Delete")}}(this)})},t.prototype.render=function(){var e,t;return t={dateAdded:l.idToDate(this.model.id).toISOString(),jsonURL:"/"+this.model.typeName.toLowerCase()+"/"+this.model.id+"/"+l.makeSlug(this.model.get("name"))+".json"},e=this.model.getBoard(),null!=e&&p.extend(t,{pLevelClass:n.getPermLevelIconClassForBoard(e),pLevelAltText:n.getPermLevelAltTextForBoard(e)}),this.$el.html(h.fillFromModel("card_detail_more_menu",this.model,t,{meta:h.card_menu_meta})),this.getShortLinkData(),a.update(this.el),this.focusUrl(this.$(".js-autofocus")[0]),this},t.prototype.deleteCard=function(e){l.stop(e),m("Card Detail","Delete Button","Via More Menu"),this.deleteCardConfirm()},t.prototype.printModel=function(e){l.stop(e),c.hide(),m("Card Detail","Print","Via More Menu"),this.defer(function(){return window.print()})},t.prototype.exportJSON=function(e){return m("Card Detail","Export JSON")},t}(d)},{}],367:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M,B,T,O,L,P,A,E,D,I,V,N,$,z,F,R,U,q,H,K,W,J,G,Q,Y,X,Z,ee,te,re,ne,oe,ie,se,ae,ue,ce,le,de,pe,he,me,fe,ge,ve,ye,be,we,_e,ke=function(e,t){function r(){this.constructor=e}for(var n in t)Ce.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},Ce={}.hasOwnProperty;n=e("jquery"),o=e(241),i=e(380),s=e(451),a=e(259),u=e(364),c=e(402),l=e(25),d=e(403),p=e(404),h=e(65),m=e(365),f=e(366),v=e(445),y=e(369),b=e(370),w=e(371),_=e(383),k=e(406),C=e(452),x=e(5),j=e(374),S=e(66),M=e(454),e(412),B=e(455),T=e(415),O=e(416),L=e(375),P=e("hearsay"),A=e(80),E=e(16),D=e(175),I=e(449),V=e(456),N=e(238),$=e(505),z=e(29),F=e(30),R=e(90),U=e(563),q=e(565),H=e(426),K=e(429),W=e(573),J=e(458),G=e("bluebird"),Q=e(588),Y=e(97),X=e(87),Z=e(109),ee=e(127),te=e("underscore"),ce=e(209),le=e(418),me=e(35),fe=e(89),we=e(38),ge=e("moment"),de=e(84),he=e(82),ye=e(421),_e=e(442),ve=e(112),se=e(646),oe=e(648),ne=e(647),ie=e(650),pe=e(701),ae=e(651),re=e(600),ue=e(669),be=e(113),t.exports=fe(d,k,w,g=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return ke(t,e),t.prototype.className="card-detail-window u-clearfix",t.prototype.defaultActionLimit=50,t.prototype.maxActionLimit=1e3,t.prototype.maximumCommentLength=16384,t.prototype.maxDescLength=1800,t.prototype.addListCloseEventListener=function(){var e,t,r;e=this.model.previous("idList"),e&&(this.stopListening(this.modelCache,"add:List:"+e),r=this.modelCache.get("List",e),this.stopListening(r,"change:closed")),t=function(e){return function(){return e.renderArchivedDebounced(),e.listenTo(e.model.getList(),{"change:closed":e.renderArchivedDebounced})}}(this),this.model.getList()?t():this.listenToOnce(this.modelCache,"add:List:"+this.model.get("idList"),t)},t.prototype.initialize=function(){var e;this.fEditingName=!1,this.makeDebouncedMethods("render","renderCover","renderStickers","renderName","renderDescription","renderArchived","renderLabels","renderList","renderVotes","renderDueDate","renderSubscribe","renderAttachments","renderMembers","renderAging"),this.listenTo(this.model,{"change:name":this.renderNameDebounced,"change:desc":this.renderDescriptionDebounced,"change:closed":this.renderArchivedDebounced,"change:labels":this.renderLabelsDebounced,"change:idList":function(e){return function(){return e.renderListDebounced(),e.addListCloseEventListener()}}(this),"change:idMembersVoted":this.renderVotesDebounced,"change:due":this.renderDueDateDebounced,"change:subscribed":this.renderSubscribeDebounced,"change:dateLastActivity":this.renderAgingDebounced,"change:idAttachmentCover":function(){return this.renderCoverDebounced()},remove:this.closeDialog}),this.addListCloseEventListener(),this.listenTo(this.model.labelList,"add remove reset change",function(e){return function(){return e.renderLabelsDebounced()}}(this)),this.listenTo(this.model.memberList,{"add remove reset":this.renderMembersDebounced}),this.listenTo(this.model.memberVotedList,{"add remove reset":this.renderVotesDebounced}),this.listenTo(this.model.checklistList,{"add reset":this.renderChecklists,remove:this.removeChecklist,sort:this.sortChecklists}),this.listenTo(this.model.attachmentList,{"add remove reset":this.renderAttachmentsDebounced}),this.listenTo(this.model.stickerList,{"add remove reset change sort":this.renderStickersDebounced}),this.listenTo(this.model.memberEditingList,{"add remove reset change:action":this.renderEditing}),this.listenTo(this.model.getBoard(),{"change:labelNames":this.renderLabelsDebounced,"change:labels":this.renderLabelsDebounced,"change:prefs":function(e){var t,r;return t=function(t){var r,n;return(null!=(r=e.get("prefs"))?r[t]:void 0)!==(null!=(n=e.previous("prefs"))?n[t]:void 0)},t("cardCovers")&&this.renderCover(),r=t("cardAging")||t("comments")||t("voting"),r&&0===this.$(".editing").length?this.renderDebounced():void 0}}),this.getData(),this.numAttachmentsProcessing=this.slot(0),this.watch("numAttachmentsProcessing",this.renderProcessingAttachments),this.fHideFullDescription=(null!=(e=this.model.get("desc"))?e.length:void 0)>this.maxDescLength,this.actionListView=this.collectionSubview(o,this.model.actionList,{renderOpts:{context:this.model,compact:!1}}),this.markNotificationsReadOnActive(),this.listenTo(z,"add:Notification",this.markNotificationsReadOnActive),this.listenTo(V,"cancelEdits",this.saveCommentDraft),n(window).on("beforeunload.CardDetailView-"+this.model.cid,ce(this,"saveCommentDraft"))},t.prototype.remove=function(){this.saveCommentDraft(),n(window).off(".CardDetailView-"+this.model.cid),t.__super__.remove.apply(this,arguments)},t.prototype.markNotificationsReadOnActive=function(){"active"!==R.getStatus()||R.getHidden()?this.listenToOnce(R,"setStatus visibilitychange",this.markNotificationsReadOnActive):this.markRelatedNotificationsRead()},t.prototype.markRelatedNotificationsRead=function(){var e,t,r,n,o;for(t=function(e){return function(t){var r,n;return t.get("unread")&&(null!=(r=t.get("data"))&&null!=(n=r.card)?n.id:void 0)===e.model.id}}(this),o=this.modelCache.all("Notification"),e=0,r=o.length;r>e;e++)n=o[e],t(n)&&n.markRead()},t.prototype.events={"click .js-edit-labels":"editLabelsSidebar","click .js-change-card-members":"changeMembersSidebar","click .js-add-checklist-menu":"addChecklistSidebar","click .js-add-due-date":"dueDateSidebar","click .js-attach":"openAttachPicker","click .js-move-card":"moveCard","click .js-copy-card":"copyCard","click .js-subscribe":"subscribeToCard","click .js-unsubscribe":"unsubscribeFromCard","click .js-vote":"vote","click .js-unvote":"unvote","click .js-archive-card":"archiveCard","click .js-unarchive-card":"unarchiveCard","click .js-delete-card":"deleteCardSidebar","click .js-more-menu":"showMoreMenu","keydown  .js-card-detail-title-input":"nameKeyDownEvent","click    .js-card-detail-title-input":"startNameEditing","blur     .js-card-detail-title-input":"stopNameEditing","click .js-open-card-cover-in-viewer":"openCoverInViewer","click .js-open-move-from-header":"openMoveFromHeader","click .js-details-edit-members":"editMembersMain","click .js-details-edit-labels":"editLabelsMain","click .js-edit-label .card-label":"editLabelsMainSingleLabel","click .js-details-edit-due-date":"showDueDateBadgeMenu","click .js-show-votes":"showVotes","click .js-edit-desc":"editDesc","click .js-desc-content.is-hide-full":"showFullDescription","click .js-member-on-card-menu":"openMemberOnCardMenu","click .js-format-help":"openFormatHelp","click .js-view-some-attachments":"showFewerAttachments","click .js-view-all-attachments":"showMoreAttachments","click .js-show-all-actions":"showAllActions","keydown .js-new-comment-input":"keydownCommentEvent","input .js-new-comment-input":"commentInputEvent","mutated .js-new-comment-input":"commentInputEvent","click .js-add-comment:not(:disabled)":"submitComment","click .js-attach-comment":"attachComment","click .js-truncate-comment":"truncateComment","click .js-new-comment":"inputComment","focus .js-new-comment-input":"inputComment","keyup .js-new-comment-input":"keyAutoMention",click:"clickAwayFromComment","click .js-new-comment .js-comment-add-attachment":"commentAddAttachment","click .js-new-comment .js-comment-mention-member":"commentMentionMember","click .js-new-comment .js-comment-add-emoji":"commentAddEmoji","click .js-new-comment .js-comment-add-card":"commentAddCard","click a[href]":"interceptHighlightLink","dd-enter:files":"dragenter","dd-leave:files":"dragleave","dd-drop:files":"dropFiles","dd-enter:url":"dragenter","dd-leave:url":"dragleave","dd-drop:url":"dropUrl","userinput-paste:files":"dropFiles","userinput-paste:url":"dropUrl","sortstop .js-checklist-list":"sortStop",shortcut:"shortcut",replyToAction:"replyToAction"},t.prototype.shortcut=function(e){var t,r,n,o,i,s,a;switch(t=this.model.getBoard(),r=this.model.editable(),o=l.isLoggedIn(),e){case E.Space:if(r)return this.model.toggleMember(l.myId()),["Space - Toggle Assigning Self","Card Detail"];break;case E.A:case E.M:if(r)return this.changeMembersSidebar(),["A - Assign Members","Card Detail"];break;case E.E:if(r)return this.editDesc(),["E - Edit Description","Card Detail"];break;case E.L:if(r)return this._openEditLabelsSidebar({hideOnSelect:!1}),["L - Edit Labels","Card Detail"];break;case E.D:if(r)return null!=this.model.get("due")?this.showDueDateBadgeMenu():this.dueDateSidebar(),["D - Due Dates","Card Detail"];break;case E.C:case E.Delete:if(r)return this.archiveCard(),["C / Delete - Archive Card"];break;case E.T:if(r)return this.editTitle(),"T - Edit Title";break;case E.AngleRight:case E.Period:if(r)return this.model.moveToNextList(),"> - Move to Next List";break;case E.AngleLeft:case E.Comma:if(r)return this.model.moveToPrevList(),"< - Move to Previous List";break;case E._0:case E._1:case E._2:case E._3:case E._4:case E._5:case E._6:case E._7:case E._8:case E._9:if(r)return n=function(e){return function(t){return e._openEditLabelsSidebar({searchInit:t,hideOnSelect:!0})}}(this),I.setLabelFromKey(e,this.model,n),"0-9 - Toggle Specific Label";break;case E.V:if(t.canVote(l.me()))return this.model.toggleVote(),"V - Vote";break;case E.S:if(o)return a=this.model.get("subscribed"),this.model.subscribe(!a),["S - Subscribe",a?"Unsubscribe":"Subscribe"];break;case E.J:if(null!=(i=this.model.nextCard()))return x.showCardDetail(i,{isNavigating:!0}),"J - Down";break;case E.K:if(null!=(s=this.model.prevCard()))return x.showCardDetail(s,{isNavigating:!0}),"K - Up"}},t.prototype.incrementNumAttachmentsProcessing=function(e){return null==e&&(e=1),this.numAttachmentsProcessing.update(ce.add(e))},t.prototype.decrementNumAttachmentsProcessing=function(e){return null==e&&(e=1),this.numAttachmentsProcessing.update(ce.sub(e))},t.prototype.getData=function(){this.loading=!0,this.$(".js-loading-card-actions").show(),this.waitForId(this.model,function(e){return function(){var t;return t=e.fShowAllActions?e.maxActionLimit:e.defaultActionLimit,F.loadCardDetails(e.model.id,t).finally(function(){return e.loading=!1,e.$(".js-loading-card-actions").hide()}).then(function(){return e.renderShowAllActionsButton(),e.scrollToHighlight()}).done()}}(this))},t.prototype.scrollToHighlight=function(){var e,t,r;e=Date.now(),cancelAnimationFrame(this.scrollInterval),t=null,(r=function(n){return function(){var o,i;M.scrolledSince(e)||(null!=(o=n.$(".mod-highlighted")[0])&&(t||(i=o.getBoundingClientRect(),t=i.top<0?"top":i.top+i.height>window.innerHeight?"bottom":null),"top"===t?o.scrollIntoView(!0):"bottom"===t&&o.scrollIntoView(!1),e=Date.now()),n.scrollInterval=n.requestAnimationFrame(r))}}(this))()},t.prototype.render=function(){var e,t;return this.fShowAllAttachments=!1,this.fShowAllActions=!1,e=te.extend(this.model.toJSON(),{canComment:this.model.getBoard().canComment(l.me()),canVote:this.model.getBoard().canVote(l.me()),canSubscribe:l.isLoggedIn(),hasAttachments:this.model.attachmentList.length>0,me:l.me().toJSON(),loading:this.loading,editable:this.model.editable()}),e.showActions=e.canVote||e.canSubscribe,this.$el.html(se(e)),this.actionListView.setElement(this.$(".js-list-actions")[0]),this.commentInput=this.$(".js-new-comment-input")[0],this.renderCover().renderStickers().renderName().renderDescription().renderList().renderActionList().renderMembers().renderArchived().renderChecklists().renderSubscribe().renderVotes().renderDueDate().renderAttachments().renderLabels().renderAging().renderEditing().renderPluginBadges().renderPluginButtons(),e.canComment&&this.recallDrafts(),this.$(".js-card-detail-title-input").autosize({append:!1}),this.$(".js-new-comment-input").autosize(),"chrome"!==(t=h.browserStr)&&this.defer(te.bind(this.fixSidebar,this)),S.update(this.el),this},t.prototype._commentDraftKey=function(){return"draft_"+this.model.id+"_comment"},t.prototype.recallDrafts=function(){var e;return e=Y.get(this._commentDraftKey()),e&&this.$(".js-new-comment-input").val(e),this.renderCommentSubmitAbility(),t.__super__.recallDrafts.apply(this,arguments)},t.prototype.saveCommentDraft=function(){var e,t;e=this.$(".js-new-comment-input"),0!==e.length&&(t=e.val(),t?Y.set(this._commentDraftKey(),t):Y.unset(this._commentDraftKey()))},t.prototype.saveCardName=function(){var e,t,r;e=this.$(".js-card-detail-title-input"),r=e.val(),t=this.model.get("name"),r=r.replace(/\s+/g," ").trim(),r!==t&&(r.length>16384||0!==r.trim().length&&this.model.update("name",r))},t.prototype.nameKeyDownEvent=function(e){A.getKey(e)===E.Enter&&(Z.stop(e),this.stopNameEditing()),A.getKey(e)===E.Escape&&(Z.stop(e),this.stopNameEditing())},t.prototype.startNameEditing=function(e){var t;Z.stop(e),this.fEditingName||(t=this.$(".js-card-detail-title-input"),this.fEditingName=!0,t.addClass("is-editing"),"click"!==(null!=e?e.type:void 0)&&t.focus().select())},t.prototype.stopNameEditing=function(e){var t;this.fEditingName&&(this.fEditingName=!1,t=this.$(".js-card-detail-title-input").removeClass("is-editing"),t.is(":focus")&&t.blur(),be(),this.saveCardName())},t.prototype.setRelativeSidebarPos=function(){return this.fFixed=!1,this.fRelative=!0,this.$(".window-sidebar").css({left:"",top:"",position:"relative"})},t.prototype.setFixedSidebarLeftPos=function(){var e,t;return this.fFixed?(t=parseFloat(n(".window").offset().left),e=t+n(".window").width()-this.$(".window-sidebar").outerWidth(),this.$(".window-sidebar").css({left:e})):void 0},t.prototype.setFixedSidebarPos=function(){return this.fFixed=!0,this.fRelative=!1,this.setFixedSidebarLeftPos(),this.$(".window-sidebar").css({top:0,position:"fixed"})},t.prototype.fixSidebar=function(){var e,t,r,o,i;e=n(".window-overlay").off("scroll.fixSidebar"),this.fFixed=!1,this.fRelative=!1,t=parseInt(n(".window").css("margin-top")),r=parseInt(this.$(".window-sidebar").css("padding-top")),i=function(o){return function(){var i,s,a,u,c,l;a=o.$(".window-header").outerHeight(),s=null!=(u=o.$(".window-cover:visible").outerHeight())?u:0,i=null!=(c=o.$(".window-archive-banner:visible").outerHeight())?c:0,l=t+a+s+i+r,e.scrollTop()<=l||ee.fSmall||o.$(".window-sidebar").height()>n(window).height()?o.fRelative||o.setRelativeSidebarPos():o.fFixed||o.setFixedSidebarPos()}}(this),o=this.throttle(i,32),e.on("scroll.fixSidebar",o)},t.prototype.editDesc=function(e){Z.stop(e),this.showFullDescription(),this.edit("desc")},t.prototype.showFullDescription=function(e){this.fHideFullDescription=!1,n(".js-desc-content").removeClass("is-hide-full")},t.prototype.editTitle=function(e){this.startNameEditing(e)},t.prototype.archiveCard=function(e){this.model.close(),we("Card Detail","Sidebar","Archive Button")},t.prototype.unarchiveCard=function(e){we("Card Detail","Sidebar","Re-Open Button"),this.model.reopen()},t.prototype.deleteCardSidebar=function(e){C.toggle("delete card",{elem:e.target,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return M.hide(),e.model.destroy(),we("Card","Delete")}}(this)}),we("Card Detail","Sidebar","Open Delete Confirm")},t.prototype.showMoreMenu=function(e){Z.stop(e),J.toggle({elem:this.$(".js-more-menu"),view:f,options:{model:this.model,modelCache:this.modelCache}}),we("Card Detail","Sidebar","Open More Menu")},t.prototype.openCoverInViewer=function(e){var t;Z.stop(e),this.showCover()&&(t=this.model.attachmentList.get(this.model.get("idAttachmentCover")),c.isActive()||(c.show({model:this.model,attachmentModel:t}),we("Card Detail","Open Attachment Viewer via Cover",t.getType())))},t.prototype.openMoveMenu=function(e){J.toggle({elem:e,view:b,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openMoveFromHeader=function(e){Z.stop(e),this.openMoveMenu(this.$(".js-open-move-from-header"),20),we("Card Detail","Move Button (via Header)")},t.prototype.moveCard=function(e){Z.stop(e),this.openMoveMenu(this.$(".js-move-card"),35),we("Card Detail","Sidebar","Open Move Menu")},t.prototype.copyCard=function(e){Z.stop(e),J.toggle({elem:this.$(".js-copy-card"),view:m,options:{model:this.model,modelCache:this.modelCache}}),we("Card Detail","Sidebar","Open Copy Menu")},t.prototype.openLabelsPopOver=function(e,t){J.toggle({elem:e,view:v,options:te.extend({model:this.model,modelCache:this.modelCache},t)})},t.prototype.editLabelsMainSingleLabel=function(e){Z.stop(e),this.openLabelsPopOver(this.$(e.target).closest(".card-label")),we("Card Detail","Edit Labels Main Column - Single Label")},t.prototype.editLabelsMain=function(e){Z.stop(e),this.openLabelsPopOver(this.$(".js-details-edit-labels")),we("Card Detail","Edit Labels Main Column - Plus Button")},t.prototype.editLabelsSidebar=function(e){return Z.stop(e),we("Card Detail","Sidebar","Edit Labels Button"),this._openEditLabelsSidebar()},t.prototype._openEditLabelsSidebar=function(e){return this.openLabelsPopOver(this.$(".js-edit-labels"),e)},t.prototype.showVotes=function(e){Z.stop(e),J.toggle({elem:this.$(".js-show-votes"),view:$,options:{model:this.model,modelCache:this.modelCache}}),we("Card Detail","Header Vote Button")},t.prototype.doClicks=function(){return!B.sorting},t.prototype.showCover=function(){return this.model.getBoard().getPref("cardCovers")&&this.model.hasCover()},t.prototype.checkShowCover=function(){var e,t;e=this.showCover(),t=this.model.hasStickers(),e?this.$(".js-card-cover-box").removeClass("hide window-cover-stickers-only").addClass("is-covered"):t?this.$(".js-card-cover-box").removeClass("hide is-covered").addClass("window-cover-stickers-only"):this.$(".js-card-cover-box").addClass("hide")},t.prototype.clearCover=function(){var e;return this.$(".js-card-cover-box").css({"background-color":"","background-image":""}),e=["dialog-close-button-light","dialog-close-button-dark"],n(".dialog-close-button").removeClass(e.join(" "))},t.prototype.renderCover=function(){var e,t,r,o,i,s,a,u,c,l,d,p,m,f,g,v,y,b,w,_;return this.clearCover(),this.showCover()&&(i=this.model.attachmentList.get(this.model.get("idAttachmentCover")),o=40,t=160,r=730,null!=i&&(h.isHighDPI()?(f=2*r,m=2*t):(f=r,m=t),v=i.get("previews"),g=null!=(b=Z.previewBetween(v,0,m,f,1/0))?b:Z.biggestPreview(v),c=null!=g?g.url:i.get("url"),e=this.$(".js-card-cover-box"),null!=(l=i.get("edgeColor"))&&(w=l.match(/[0-9a-f]{2}/gi).map(function(e){return parseInt(e,16)}),y=w[0],d=w[1],a=w[2],e.css("background-color","rgb("+y+", "+d+", "+a+")"),s=(y+d+a)/3,s>150?u="dark":105>s&&(u="light"),null!=u&&n(".dialog-close-button").addClass("dialog-close-button-"+u)),p=Math.max(o,Math.min(null!=(_=null!=g?g.height:void 0)?_:t,t)),this.$(".js-card-cover-box").css({"background-image":'url("'+c+'")',height:p,"background-size":(null!=g?g.height:void 0)<p?"initial":"contain"}))),this.checkShowCover(),this},t.prototype.renderPluginButtons=function(){var e;return e=this.subview(U,this.model),this.appendSubview(e,this.$(".js-plugin-buttons")),this},t.prototype.renderPluginBadges=function(){var e;return e=this.subview(q,this.model),this.appendSubview(e,this.$(".js-plugin-badges")),this},t.prototype.renderStickers=function(){var e,t,r,n,o;return e=this.$(".js-display-stickers").empty(),n=this.model.stickerList.models,t=n.length>0,t&&(o=function(){var e,t,o;for(o=[],e=0,t=n.length;t>e;e++)r=n[e],o.push(this.subview(Q,r,{board:this.model}));return o}.call(this),this.appendSubviews(o,e)),this.checkShowCover(),this},t.prototype.renderName=function(){var e,t;return t=this.model.get("name"),e=this.model.getBoard().get("name"),this.$(".js-title-helper").text(t),this.fEditingName||this.$(".js-card-detail-title-input").val(t).trigger("autosize.resize",!1),x.title(de("card detail title",{cardName:t,boardName:e},{raw:!0})),this},t.prototype.renderDescription=function(){var e,t,r,o;return t=this.model.get("desc"),r=X.description.format(null!=t?t:"",{textData:this.model.get("descData")}).output,e=this.$(".js-card-desc"),e.empty().append(r).data("unmarkeddown",t),le(e[0],this.model.getBoard()),o=!/^\s*$/.test(r),this.$(".js-show-with-desc").toggleClass("hide",!o),this.$(".js-hide-with-desc").toggleClass("hide",o),n(".js-desc-content").toggleClass("is-hide-full",this.fHideFullDescription),this},t.prototype.renderList=function(){var e;return e=this.model.getList(),null!=e&&this.$(".js-current-list").removeClass("hide").html(oe({listName:e.get("name"),editable:this.model.editable()})),this},t.prototype.renderArchived=function(){var e,t,r,n,o;return e=this.model.get("closed")===!0,t=(null!=(r=this.model.getList())?r.get("closed"):void 0)===!0,n=e,o=!e&&t,this.$(".js-archive-banner").toggleClass("hide",!n),this.$(".js-archived-list-banner").toggleClass("hide",!o),this.$(".js-archive-card").toggleClass("hide",e),this.$(".js-unarchive-card").toggleClass("hide",!e),this.$(".js-delete-card").toggleClass("hide",!e),this},t.prototype.showAllActions=function(e){return this.fShowAllActions=!0,this.renderShowAllActionsButton(),this.getData()},t.prototype.renderShowAllActionsButton=function(){var e,t;return t=this.model.actionList.models.length>=this.defaultActionLimit,e=this.fShowAllActions||!t,this.$(".js-show-all-actions").toggleClass("hide",e)},t.prototype.renderActionList=function(){return this.waitForId(this.model,function(e){return function(){return e.actionListView.render()}}(this)),this},t.prototype.renderMembers=function(e){var t,r,n,o;return t=this.$(".js-card-detail-members-list").empty(),o=this.model.memberList.filterDeactivated({model:this.model.getBoard()}).models,n=function(){var e,t,n;for(n=[],e=0,t=o.length;t>e;e++)r=o[e],n.push(this.getMemberOnCardHtml(r));return n}.call(this).join(""),t.html(n),this.model.editable()&&t.append(ne({klass:"js-details-edit-members"})),this.$(".js-card-detail-members").toggleClass("hide",0===o.length),this},t.prototype.renderLabels=function(){var e,t,r,n,o;return t=this.model.getLabels().sort(D.compare),e=this.$(".js-card-detail-labels-list").empty(),o=function(){var e,o,i;for(i=[],e=0,o=t.length;o>e;e++)n=t[e],r=this.model.dataForLabel(n),r.extraClasses=["mod-card-detail"],this.model.editable()&&r.extraClasses.push("mod-clickable"),i.push(pe(r));return i}.call(this),e.append(o),this.model.editable()&&e.append(ne({klass:"js-details-edit-labels"})).addClass("js-edit-label"),this.$(".js-card-detail-labels").toggleClass("hide",0===t.length),this},t.prototype.renderSubscribe=function(){var e,t,r;return e=this.$(".js-subscribe-sidebar-button"),t={subscribed:this.model.get("subscribed")||(null!=(r=this.model.get("badges"))?r.subscribed:void 0)},e.html(ie(t)),this.$(".js-subscribed-indicator-header").toggleClass("hide",!t.subscribed),this},t.prototype.renderAging=function(){var e,t,r,n;return r=this.model.getBoard(),t=r.isPowerUpEnabled("cardAging"),e=this.$(".js-card-detail-age-badge").removeClass(this.model.getAllAgingClasses()),t&&(n=this.model.getAgingData(),e.removeData("date").attr("dt",this.model.get("dateLastActivity")),"pirate"===n.mode&&e.addClass(n.agingClassesToAdd),S.update(this.$(".js-card-detail-age"))),this.$(".js-card-detail-age").toggleClass("hide",!t),this},t.prototype.renderDueDate=function(){var e,t,r,n;return(t=this.model.get("due"))?(n=ge(t).calendar(),r=T.relativeInfoForDueDate(t),null!=r&&(n+=" ("+r+")"),e=[],e.push(T.classForDueDate(t)),this.model.editable()&&e.push("js-details-edit-due-date","is-clickable"),this.$(".js-card-detail-due-date-badge").removeClass(function(e,t){return(t.match(/is-due-\S+/g)||[]).join(" ")}).addClass(e.join(" ")).attr("title",T.titleForDueDate(t)).text(n),this.$(".js-card-detail-due-date").removeClass("hide"),this):(this.$(".js-card-detail-due-date").addClass("hide"),this)},t.prototype.renderVotes=function(){var e,t,r,n,o,i,s;return t={voted:this.model.voted(),canVote:this.model.getBoard().canVote(l.me())},e=this.$(".js-vote-sidebar-button"),e.html(ae(t)),r=null!=(n=null!=(o=this.model.get("badges"))?o.votes:void 0)?n:0,r&&this.$(".js-card-detail-votes-badge").text(he("votes",r)).toggleClass("is-voted",null!=(i=null!=(s=this.model.get("badges"))?s.viewingMemberVoted:void 0)?i:!1),this.$(".js-card-detail-votes").toggleClass("hide",0===r),this},t.prototype.sortChecklists=function(){var e;return e=this.$(".js-checklist-list"),Z.withoutAlteringSelection(function(t){return function(){return t.model.checklistList.forEach(function(r){var n;return n=t.existingSubview(_,r),e.append(n.el)})}}(this)),this},t.prototype.removeChecklist=function(e){return this.deleteSubview(this.existingSubview(_,e))},t.prototype.renderChecklists=function(){var e,t,r,o;return me("render","rendering checklists"),e=this.$(".js-checklist-list").empty(),o=function(){var e,r,n,o;for(n=this.model.checklistList.models,o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(this.subview(_,t,{card:this.model}));return o}.call(this),this.appendSubviews(o,e),B.refreshIfInitialized(e),(null!=(r=this.model)?r.editable():void 0)&&this.$(".js-checklist-list").sortable({axis:"y",handle:".window-module-title",delay:75,distance:7,tolerance:"pointer",placeholder:"checklist placeholder",items:".checklist",start:function(e,t){var r;return r=n(t.helper).outerHeight(),n(t.placeholder).height(r)}}),this},t.prototype.showFewerAttachments=function(e){Z.stop(e),this.fShowAllAttachments=!1,this.renderAttachments()},t.prototype.showMoreAttachments=function(e){Z.stop(e),this.fShowAllAttachments=!0,this.renderAttachments()},t.prototype.renderAttachments=function(){var e,t;return null!=(t=this._renderAttachmentsPromise)&&t.cancel(),e=te.clone(this.model.attachmentList.models),this._renderAttachmentsPromise=G.try(function(t){return function(){return K.all({timeout:1e3,
command:"attachment-sections",card:t.model,board:t.model.getBoard(),options:{entries:H.attachments(e)}})}}(this)).cancellable().then(function(t){return function(r){var n,o,i,s,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k;return d={},k={},u=t.$(".js-plugin-sections"),_=function(){var e,t,n,o,i,s;for(s=[],e=0,n=r.length;n>e;e++){for(y=r[e],i=y.claimed,t=0,o=i.length;o>t;t++)p=i[t],d[p.id]=!0;w=y.id||y.title,(te.isFunction(w)||k[w])&&(w=te.uniqueId("attachment-section_")),k[w]=!0,b=this.subview(W,this.model,{},w),b.updateSection(y),s.push(b)}return s}.call(t),t.ensureSubviews(_,u),v=te.reject(e,function(e){return d[e.id]}),g=4,h=v.length>0,l=v.slice(0,g),m=v.length>g,o=t.$(".js-attachments-section"),n=o.find(".js-attachment-list"),f=(v.length-g).toString(),o.find(".js-view-all-attachments").text(de("view all attachments",{hiddenCount:f})),i=o.find(".js-show-fewer-attachments").addClass("hide"),s=o.find(".js-show-more-attachments").addClass("hide"),o.toggleClass("hide",!h),_=[],h&&(m&&(t.fShowAllAttachments?(i.removeClass("hide"),l=t.model.attachmentList.models):s.removeClass("hide")),_=function(){var e,t,r;for(r=[],e=0,t=l.length;t>e;e++)c=l[e],r.push(this.subview(a,c));return r}.call(t)),t.ensureSubviews(_,n)}}(this)).catch(G.CancellationError,function(){}),this._renderAttachmentsPromise.done(),this},t.prototype.renderProcessingAttachments=function(e){return this.$(".js-attachment-thumb-processing").remove(),te.times(e,this.addProcessingAttachmentElement)},t.prototype.addProcessingAttachmentElement=function(){var e;e=this.$(".js-attachments-section .js-attachment-list"),e.prepend(re())},t.prototype.renderEditing=function(){var e,t,r,n;return n=this.model.memberEditingList.models,e={members:function(){var e,o,i;for(i=[],e=0,o=n.length;o>e;e++)t=n[e],l.isMe(t)||null==t.get("editing")||(r=t.toJSON(),r.icon=function(){switch(t.get("editing").action){case"commenting":return"comment";case"editing":return"edit";default:return"edit"}}(),i.push(r));return i}()},this.$(".js-editing-members").empty().append(ue(e)).toggleClass("hide",0===e.members.length),this},t.prototype.sortStop=function(e,t){Z.stopPropagation(e),t.item.trigger("movechecklist",[t])},t.prototype.keydownEvent=function(e){return t.__super__.keydownEvent.apply(this,arguments),l.me().editing({idBoard:this.model.getBoard().id,idCard:this.model.id,action:"editing"})},t.prototype.keydownCommentEvent=function(e){var t;return l.me().editing({idBoard:this.model.getBoard().id,idCard:this.model.id,action:"commenting"}),t=A.getKey(e),t!==E.Tab||!n(e.target).hasClass("new-comment-input")||!this.model.editable()||J.view instanceof p||""!==n(e.target).val()||(Z.stop(e),this.submitComment(e)),A.isForceSubmitEvent(e)&&!this._isCommentTooLong()?this.submitComment(e):this.checkInsert(e)},t.prototype._isCommentTooLong=function(){return this.$(".js-new-comment-input").val().length>this.maximumCommentLength},t.prototype.renderCommentSubmitAbility=function(e){var t,r;return t=this._isCommentTooLong(),r=0===this.$(".js-new-comment-input").val().length,this.$(".js-add-comment").prop("disabled",r||t),this.$(".comment-too-long-warning").toggleClass("is-shown",t),this.$(".comment-too-long-warning").find(".js-attach-comment").toggle("undefined"!=typeof Blob&&null!==Blob),this},t.prototype._cancelEditing=function(){return l.me().editing({idBoard:this.model.getBoard().id})},t.prototype.commentInputEvent=function(e){return this.renderCommentSubmitAbility(),this},t.prototype.clearComment=function(){var e;return e=n(this.commentInput),e.val("").css("height",""),this.renderCommentSubmitAbility()},t.prototype.submitComment=function(e){var t,r;return we("Card Detail","Comment","Submit Comment"),Z.stop(e),t=n(this.commentInput),r=t.val(),this.clearComment(),this._cancelEditing(),this.model.addComment(r),V.cancelEdits(),this.collapseComment(),this.renderCommentSubmitAbility(),J.hide(),!1},t.prototype.clearEdits=function(){return this._cancelEditing(),t.__super__.clearEdits.apply(this,arguments)},t.prototype.commitEdits=function(){return this._cancelEditing(),t.__super__.commitEdits.apply(this,arguments)},t.prototype.stopEditing=function(){return this._cancelEditing(),t.__super__.stopEditing.apply(this,arguments)},t.prototype.truncateComment=function(e){var t;return t=this.$(".js-new-comment-input"),t.val(t.val().substr(0,this.maximumCommentLength)),this.$(".js-new-comment-input").autosize(),this.renderCommentSubmitAbility()},t.prototype.attachComment=function(e){var t;return t=new Blob([this.$(".js-new-comment-input").val()],{type:"text/plain"}),this.incrementNumAttachmentsProcessing(),this.model.upload(t,"comment.txt",function(e){return function(){return e.decrementNumAttachmentsProcessing()}}(this)),this.clearComment(),V.cancelEdits(),this.collapseComment()},t.prototype.inputComment=function(e){var t;t=this.$(".js-new-comment"),V.cancelEdits(this.commentInput),t.addClass("is-focused")},t.prototype.clickAwayFromComment=function(e){var t,r;if(!J.isVisible&&(r=e.target,t=this.$(".js-new-comment"),!n(r).closest(t).length||0!==r.children.length))return this.collapseComment()},t.prototype.collapseComment=function(){return this.$(".js-new-comment").removeClass("is-focused")},t.prototype.replyToAction=function(e,t){var r,o;o=null!=(r=this.modelCache.get("Member",t.get("idMemberCreator")))?r.get("username"):void 0,null!=o&&(V.cancelEdits(this.commentInput),this.$(".js-new-comment").addClass("is-focused"),RegExp("@"+o+"(\\W|$)").test(n(this.commentInput).val())?n(this.commentInput).focus():Z.insertSelection(this.commentInput,"@"+o+" "))},t.prototype.getCard=function(){return this.model},t.prototype.getTextInput=function(){return this.$(".js-new-comment-input")},t.prototype.getMentionTarget=function(){return this.$(".js-comment-mention-member:visible")[0]},t.prototype.getEmojiTarget=function(){return this.$(".js-comment-add-emoji:visible")[0]},t.prototype.getCardTarget=function(){return this.$(".js-comment-add-card:visible")[0]},t.prototype.openEditMembersPopOver=function(e){J.toggle({elem:e,view:y,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.editMembersMain=function(e){Z.stop(e),this.openEditMembersPopOver(this.$(".js-details-edit-members")),we("Card Detail","Edit Members via Main Column")},t.prototype.changeMembersSidebar=function(e){Z.stop(e),this.openEditMembersPopOver(this.$(".js-change-card-members")),we("Card Detail","Sidebar","Open Manage Member Menu")},t.prototype.addChecklistSidebar=function(e){return Z.preventDefault(e),J.toggle({elem:e.target,view:i,options:{model:this.model,modelCache:this.modelCache,cardView:this}}),we("Card Detail","Add Checklist Button","Open Add Checklist Menu"),!1},t.prototype.showDueDateBadgeMenu=function(e){Z.stop(e),J.toggle({elem:this.$(".js-details-edit-due-date"),view:j,options:{model:this.model,modelCache:this.modelCache}}),we("Card Detail","Due Date Badge","Open Due Date Menu")},t.prototype.openAttachPicker=function(e){var t,r;return Z.stop(e),t=n(e.target).closest(".js-attach"),J.toggle({elem:t,view:u,options:{model:this.model,modelCache:this.modelCache}}),r=n(t).hasClass("inline")?"Inline":"Sidebar",we("Card Detail","Open Attachment Type Picker","Via "+r+" Button"),!1},t.prototype.dueDateSidebar=function(e){return Z.preventDefault(e),J.toggle({elem:this.$(".js-add-due-date"),view:j,options:{model:this.model,modelCache:this.modelCache}}),we("Card Detail","Sidebar","Open Due Date Menu"),!1},t.prototype.subscribeToCard=function(e){return this.model.subscribe(!0),we("Card Detail","Sidebar","Subscribe"),!1},t.prototype.unsubscribeFromCard=function(e){return this.model.subscribe(!1),we("Card Detail","Sidebar","Unsubscribe"),!1},t.prototype.vote=function(e){return Z.preventDefault(e),this.model.vote(!0),we("Card Detail","Sidebar","Vote"),!1},t.prototype.unvote=function(e){return Z.preventDefault(e),we("Card Detail","Sidebar","Unvote"),this.model.vote(!1),!1},t.prototype.openFormatHelp=function(e){return we("Card Detail","Formatting Help"),J.toggle({elem:this.$(".js-format-help"),view:L,options:{model:this.model,modelCache:this.modelCache},keepEdits:!0}),!1},t.prototype.dragenter=function(e){var t;if(this.model.editable())return this.$el.addClass("is-drophover"),t=n(".window-overlay").scrollTop()+200,this.$(".dropzone").css({"padding-top":t+"px"})},t.prototype.dragleave=function(e){return this.$el.removeClass("is-drophover")},t.prototype.dropFiles=function(e){var t;if(this.model.editable()&&(we("Card Detail","Drop Attachment Upload"),t=e.detail,!_e(this.model.getBoard(),t)))return this.incrementNumAttachmentsProcessing(t.length),G.resolve(t).each(function(e){return function(t){var r;return r=t.name||ye(),ve(e.model,"upload",t,r).finally(function(){return e.decrementNumAttachmentsProcessing()})}}(this)).catch(function(){}).done(),e.stopPropagation()},t.prototype.dropUrl=function(e){var t;if(this.model.editable())return we("Card Detail","Drop Attachment Url"),t=e.detail,this.incrementNumAttachmentsProcessing(),this.model.uploadUrl(t,function(e){return function(){return e.decrementNumAttachmentsProcessing()}}(this)),e.stopPropagation()},t.prototype.focusChecklistAdd=function(e){return this.existingSubview(_,e).focusNewTaskInput()},t.prototype.closeDialog=function(){return M.hide()},t.prototype.highlight=function(e,t){var r,n,o,i;if(null!=(o=/^([a-z]+)-([a-f0-9]{24})$/.exec(e)))switch(r=o[0],i=o[1],n=o[2],i){case"action":case"comment":this.actionListView.setHighlight(n),this.model.actionList.get(n)||this.showAllActions(),t&&this.scrollToHighlight()}},t.prototype.interceptHighlightLink=function(e){var t,r,n,o,i;e.target.href&&(i=Z.relativeUrl(e.target.href),r=x.getCardUrl(this.model),null!=(o=RegExp("^"+r+"\\#([^\\#]+)$").exec(i))&&(t=o[0],n=o[1],n&&(Z.stop(e),n===location.hash.substr(1)?(history.replaceState(null,null,location.pathname),this.actionListView.setHighlight(null)):(history.replaceState(null,null,location.pathname+"#"+n),this.highlight(n,!0)))))},t}(O))},{}],368:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f=function(e,t){function r(){this.constructor=e}for(var n in t)g.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},g={}.hasOwnProperty;n=e("jquery"),o=e(65),s=e(373),a=e(411),u=e(455),l=e(441),d=e("underscore"),m=e(35),c=e("bluebird"),h=e(209),p=function(e,t){var r;for(e=d.clone(e),r=[];e.length>0;)r.push(e.splice(0,t));return r},t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.viewType=s,t.prototype.getModels=function(){return this.collection.models},t.prototype.render=function(){return m("render","rendering "+this.getModels().length+" "+this.collection.model.name+"s into "+this.viewType.name),c.resolve(p(this.getModels(),20)).each(function(e){return function(t){var r;return e.appendSubviews(function(){var e,n,o;for(o=[],e=0,n=t.length;n>e;e++)r=t[e],o.push(this.subview(this.viewType,r));return o}.call(e)),new c(h(e,"defer"))}}(this)).tap(function(e){return function(){var t;"chrome"!==(t=o.browserStr)&&"firefox"!==t&&"opera"!==t&&"windows"===o.osStr&&(e.defer(function(){return n("#board").css("bottom",1)}),e.setTimeout(function(){return n("#board").css("bottom",0)},150))}}(this)).done(),this},t.prototype.insertSubview=function(e,t,r){var n;return null==r&&(r=this.$el),m("render","inserting "+e.$el.find("h2").text()+" at position "+t),"number"==typeof t?t=0>=t?r.children().eq(0):t<r.children().length?r.children().eq(t):void 0:t instanceof l&&(t=t.$el),n=e.model,e.$el.is(":empty")?(e.delegateEvents(),e.render()):r.hasClass("hide")||n.getBoard().filter.satisfiesFilter(n)||e.renderFiltered(),(null!=t?t.length:void 0)>0?e.$el.insertBefore(t):r.append(e.$el),u.refreshIfInitialized(this.$el)},t}(a)},{}],369:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function r(){this.constructor=e}for(var n in t)y.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},y={}.hasOwnProperty;n=e("jquery"),o=e(25),s=e(80),a=e(16),u=e(29),c=e(30),l=e("bluebird"),d=e(509),p=e(109),h=e(441),m=e("underscore"),f=e(787),g=e(38),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.viewTitleKey="members",t.prototype.initialize=function(){return this.showAllOrgMembers=!1,this.updateSearch=m.debounce(this.updateSearch,100),this.makeDebouncedMethods("renderMems"),null!=this.model.memberList?this.listenTo(this.model.memberList,"add remove reset",this.renderMemsDebounced):void 0},t.prototype.events={"click .js-select-member":"selectMem","click .js-show-org-members":"showOrgMembers","mouseenter .pop-over-member-list .item":"hoverMemberSelect",input:"updateSearch",keydown:"keydownEvent"},t.prototype.render=function(){var e;return e=this.model.getBoard(),this.$el.html(f({includeOrgMembers:null!=e.getOrganization()&&e.canInviteMembers()})),this.renderMems()},t.prototype.getSearch=function(){return this.$(".js-search-mem").val().trim()},t.prototype.filteredMembers=function(e,t){var r;return r=RegExp("^"+p.escapeForRegex(t.toLowerCase())),m.chain(e).filter(function(e){return function(e){var t;return t=p.getMemNameArray(e),m.find(t,function(e){return r.test(e)})}}(this)).first(8).value()},t.prototype.filteredBoardMembers=function(e){var t,r;return t=this.model.getBoard().memberList.filterDeactivated({force:!0}).models,r=p.sortMembers(t,o.me()),e?this.filteredMembers(r,e):r},t.prototype.filteredOrgMembers=function(e){var t;return this.showOrgSection()?(t=this.model.getBoard().getOrganization(),null==this.orgMembersPromise&&(this.orgMembersPromise=c.loadOrganizationMembersData(t.id)),this.orgMembersPromise.then(function(r){return function(n){var o,i;return o=(i=t.memberList.filterDeactivated({force:!0})).without.apply(i,r.model.getBoard().memberList.models),e?r.filteredMembers(o,e):o}}(this))):[]},t.prototype.hasSearch=function(){return""!==this.getSearch()},t.prototype.showOrgSection=function(){var e;return e=this.model.getBoard().getOrganization(),null!=e&&(this.showAllOrgMembers||this.hasSearch())},t.prototype.renderMems=function(){var e,t,r,n,o,i;return i=this.getSearch(),e=this.filteredBoardMembers(i),t=this.filteredOrgMembers(i),n={".js-board-members":e,".js-org-members":t},o=this.showOrgSection(),this.$(".js-show-org-members").toggleClass("hide",o),this.$(".js-org-members").toggleClass("hide",!o),null!=(r=this._renderMemsPromise)&&r.cancel(),this._renderMemsPromise=l.each(m.keys(n),function(e){return function(t){var r,o,i;return i=e.$(t),0!==i.length?(r=i.find(".js-loading"),o=i.find(".js-no-results"),r.removeClass("hide"),o.addClass("hide"),l.resolve(n[t]).then(function(t){var n,s,a;return r.addClass("hide"),n=i.find(".js-mem-list"),n.toggleClass("collapsed",t.length>9),o.toggleClass("hide",t.length>0),a=function(){var e,r,n;for(n=[],e=0,r=t.length;r>e;e++)s=t[e],n.push(this.subview(d,s,{showUnconfirmed:!0,card:this.model}));return n}.call(e),e.ensureSubviews(a,n)})):void 0}}(this)).cancellable().then(function(e){return function(){var t;return e.hasSearch()&&(t=e.$el.find(".item").first(),t.length>0)?p.selectMenuItem(e.$el,".item",t):void 0}}(this)).done(),this},t.prototype.hoverMemberSelect=function(e){return p.selectMenuItem(this.$el,".item",e.currentTarget)},t.prototype.keydownEvent=function(e){var t;t=s.getKey(e),t===a.Tab||t===a.Enter?(p.stop(e),this.$(".js-mem-list .item.selected:first .js-select-member").first().click(),this.$(".js-search-mem").val(""),this.focusSearch(),this.renderMems()):(t===a.ArrowUp||t===a.ArrowDown)&&(p.stop(e),p.navMenuList(this.$el,".item",t))},t.prototype.updateSearch=function(e){return this.renderMems(),this.focusSearch()},t.prototype.selectMem=function(e){var t,r,o,i,s,a;p.preventDefault(e),a=this.model,r=n(e.currentTarget),t=r.closest(".item"),i=r.attr("idMember"),t.hasClass("active")?(a.removeMember(i),t.removeClass("active"),g("Card","Change Member","Remove Member")):(o=this.model.getBoard(),s=u.get("Member",i),l.try(function(){return o.hasActiveMembership(s)?void 0:l.fromNode(function(e){return o.addMember(s,e),g("Card","Add Member to Board and Card")})}).then(function(){return a.addMember(i),t.addClass("active"),g("Card","Change Member","Add Member")}).done()),this.focusSearch()},t.prototype.focusSearch=function(){this.$(".js-search-mem").focus()},t.prototype.showOrgMembers=function(e){this.showAllOrgMembers=!0,this.renderMems()},t}(h)},{}],370:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},f={}.hasOwnProperty;n=e(190),o=e(25),s=e(454),a=e(26),u=e(458),c=e(378),l=e(441),d=e(89),p=e(438),h=e(38),t.exports=d(c,i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="move card",t.prototype.initialize=function(e){var t;return t=e.onCommit,this.onCommit=null!=t?t:function(){},this.listenTo(o.me().boardList,"add remove reset",this.render)},t.prototype.events={"change .js-select-position":"renderValues","change .js-select-list":"updatePositionList","change .js-select-board":"updateBoardData","click .js-submit":"commitChange"},t.prototype.render=function(){var e,t,r,n,i,s,a,u,c,l;for(t={organizations:o.me().getOpenBoardsByOrg(!0)},c=t.organizations,r=0,i=c.length;i>r;r++)for(a=c[r],l=a.boards,n=0,s=l.length;s>n;n++)e=l[n],e.id===this.model.get("idBoard")&&(e.selected=!0);return u={move_card_controls:p.move_card_controls},this.$el.html(p.fill("popover_move_card",t,{},u)),this.updateBoardData(),this},t.prototype.commitChange=function(e){var t,r,o,i,a,c,l,d;t=this.$(".js-select-board"),r=this.$(".js-select-list"),o=this.$(".js-select-position"),i=t.find("option:selected").val(),a=r.find("option:selected").val(),d=o.find("option:selected").val(),c=parseInt(o.find("option:selected").prop("index"),10),i===this.model.getBoard().id?(l=this.model.getBoard().listList.get(a),this.model.moveToList(l,c),h("Card","Move Menu","Same Board")):null!=i&&null!=a&&null!=d&&(h("Card","Move Menu","Changed Board"),this.model.getList().cardList.remove(this.model),s.hide(),n({url:"/1/cards/"+this.model.id,type:"put",data:{idList:a,idBoard:i,pos:d},success:function(e){return function(t){return e.model.board=null,e.model.set("idBoard",t.idBoard),e.model.set("idList",t.idList),e.model.set("pos",t.pos)}}(this)})),this.onCommit(),u.hide()},t}(l))},{}],371:[function(e,t,r){var n,o,i,s,a;n=e(472),i=e(458),s=e(109),a=e(438),t.exports=o=function(){function e(){}return e.prototype.openMemberOnCardMenu=function(e){var t,r,o,a;s.stop(e),r=this.$(e.target).closest(".member"),o=r.attr("data-idmem"),a=this.modelCache.get("Member",o),t=this.model,i.toggle({elem:r,view:n,options:{model:a,modelCache:this.modelCache,card:t}})},e.prototype.getMemberOnCardHtml=function(e){var t,r,n;return t=e.toJSON(),r=this.model.getBoard().getOrganization(),t.isVirtual=(null!=r?r.isVirtual(e):void 0)||(null!=(n=this.model.getBoard())?n.isVirtual(e):void 0),null!=r&&(t.isDeactivated=r.isDeactivated(e)),a.fill("member_on_card",t,"",{member:a.member})},e}()},{}],372:[function(e,t,r){var n,o,i,s,a,u,c;o=e(65),n=e(263),i=e(175),c=e(438),a=e(265),s=e("underscore"),u=e(701),t.exports={renderCover:function(){var e,t,r,n,i,s,a,u,c,l;return this.showCover()&&(r=this.model.attachmentList.get(this.model.get("idAttachmentCover"))),null!=r?(a=o.isHighDPI()?600:300,u=null!=(c=r.smallestPreviewBiggerThan(a))?c:r.biggestPreview(),i=null!=u?u.url:r.get("url"),e=this.$(".js-card-cover"),e.css({"background-color":null!=(l=r.get("edgeColor"))?l:"transparent","background-image":'url("'+i+'")'}).toggleClass("is-no-preview-size",null==u),null!=u&&(t=this.$(".js-card-stickers"),s=Math.min(u.height,260),n=245*u.height/u.width,s>=n?(e.css({height:n,"background-size":"cover"}),t.css("height",n)):(e.css({height:s,"background-size":"contain"}),t.css("height",s)))):this.$(".js-card-cover").css({"background-image":"","background-color":"",height:""}).removeClass("is-no-preview-size"),this.$el.toggleClass("is-covered",null!=r),this},renderBadges:function(){var e;return e=this.subview(n,this.model,{badges:a}),this.$(".badges").replaceWith(e.render().el),this},renderMembers:function(e){var t,r,n,o;return t="",o=this.model.getBoard().getOrganization(),n=function(){var e,t,n;for(t=this.model.memberList.models,n=[],e=t.length-1;e>=0;e+=-1)r=t[e],n.push(this.getMemberOnCardHtml(r));return n}.call(this),this.$(".js-list-card-members").empty().append(n.join("")),this},labelsData:function(){return s.chain(this.model.getLabels()).sort(i.compare).map(function(e){return function(t){return e.model.dataForLabel(t)}}(this)).filter(function(e){return!s.isEmpty(e.color)}).value()},renderLabels:function(){var e,t,r;return r=function(){var r,n,o,i;for(o=this.labelsData(),i=[],r=0,n=o.length;n>r;r++)t=o[r],e=t,e.extraClasses=["mod-card-front"],i.push(u(e));return i}.call(this),this.$(".js-card-labels").empty().append(r),this}}},{}],373:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M,B,T,O,L,P,A,E,D,I,V,N,$,z=function(e,t){function r(){this.constructor=e}for(var n in t)F.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},F={}.hasOwnProperty;n=e("jquery"),o=e(451),i=e(25),s=e(65),a=e(445),u=e(369),l=e(371),d=e(372),p=e(5),h=e(374),e(412),m=e(455),g=e(16),v=e(449),y=e(458),b=e(459),w=e("bluebird"),k=e(377),_=e("promise-queue"),C=e(588),x=e(439),j=e(109),S=e(441),M=e("underscore"),L=e(35),P=e(89),V=e(438),N=e(38),A=e("moment"),O=e(84),$=e(442),D=e(421),I=e(117),E=e(112),T=e(209),f=new _(1),B=function(e){f.add(function(){return new w(function(t){e.hookDroppable(),M.defer(t)})})},t.exports=P(l,c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return z(t,e),M.extend(t.prototype,d),t.prototype.className="list-card js-member-droppable",t.prototype.filterDeactivated=!0,t.prototype.showMemberStatus=!1,t.prototype.applyBoardCardFilter=!0,t.prototype.events={moveto:"moveTo",movein:"moveIn",moveToCalendarDay:"moveToCalendarDay",moveInCalendarDay:"moveInCalendarDay","click .js-open-quick-card-editor":"openQuickCardEditor","click .js-member-on-card-menu":"openMemberOnCardMenu",click:"showDetail",mouseenter:function(){return this.trigger("mouseEnterCardView")},mousemove:function(){return this.trigger("mouseMoveCardView")},mouseleave:function(){return this.trigger("mouseLeaveCardView")},"dd-enter:files":"dragenter","dd-leave:files":"dragleave","dd-drop:files":"dropFiles","dd-enter:url":"dragenter","dd-leave:url":"dragleave","dd-drop:url":"dropUrl",shortcut:"shortcut","userinput-paste:files":"dropFiles","userinput-paste:url":"dropUrl"},t.prototype.initialize=function(){var e,t,r,n,o;for(o=["filterDeactivated","showMemberStatus","applyBoardCardFilter"],t=0,r=o.length;r>t;t++)n=o[t],null!=this.options[n]&&(this[n]=this.options[n]);this.makeDebouncedMethods("renderName","renderLabels","renderCover","renderFiltered","renderPowerUpEffects","renderStickers"),this.listenTo(this.model,{"change:name":this.renderNameDebounced,"change:labels":this.renderLabelsDebounced,"change:idAttachmentCover":this.renderCoverDebounced,"change:name change:labels change:idLabels change:due":this.renderFilteredDebounced,"change:dateLastActivity":this.renderPowerUpEffectsDebounced}),this.listenTo(this.model.memberList,"add remove reset",this.frameDebounce(function(){return this.renderMembers(),this.renderFiltered()})),this.listenTo(this.model.labelList,"add remove reset change",this.renderLabelsDebounced),this.listenTo(this.model.stickerList,{"add remove reset change sort":this.renderStickersDebounced}),e=this.model.getBoard(),this.listenTo(e,"change:powerUps change:prefs.cardAging",this.renderPowerUpEffectsDebounced),this.listenTo(e.filter,"change",this.renderFilteredDebounced),this.listenTo(e,"change:labels",this.renderLabelsDebounced),b.enqueue("initialize_"+this.cid,function(t){return function(){return t.listenTo(e.viewState,"active-card-changed",t.renderActiveState),t.listenTo(t,"mouseEnterCardView",function(){return B(this)})}}(this))},t.prototype.renderActiveState=function(){var e;null!=this.$el&&(e=this.model.getBoard().viewState.isCardSelected(this.model),this.$el.toggleClass("active-card",e),e?x.addHandler(this,{scope:"card"}):x.removeHandler(this))},t.prototype.shortcut=function(e){var t,r,n,o,s;switch(n=i.isLoggedIn(),t=this.model.editable(),o=this.onCalendar,e){case g.Enter:return this.showDetail(),"Enter - Open Card";case g.E:if(t)return this.openQuickCardEditor(),"E - Open Quick Card Editor";break;case g.T:return p.showCardDetail(this.model,{runMethod:"editTitle"}),"T - Open Card and Edit Title";case g.D:if(t)return this.showPopOver(h),["D - Due Dates","On Board View"];break;case g.L:if(t)return this.showPopOver(a,{hideOnSelect:!1}),["L - Edit Labels","On Board View"];break;case g._0:case g._1:case g._2:case g._3:case g._4:case g._5:case g._6:case g._7:case g._8:case g._9:if(t)return r=function(e){return function(t){return e.showPopOver(a,{searchInit:t,hideOnSelect:!0})}}(this),v.setLabelFromKey(e,this.model,r),"0-9 - Toggle Specific Label";break;case g.A:case g.M:if(t)return this.showPopOver(u),["A - Assign Members","Board View"];break;case g.Space:if(t)return this.model.toggleMember(i.myId()),"Space - Toggle Assigning Self";break;case g.C:case g.Delete:if(t)return this.model.close(),"C / Delete - Archive Card";break;case g.AngleRight:case g.Period:if(t&&!o)return this.model.moveToNextList(),"> - Move to Next List";break;case g.AngleLeft:case g.Comma:if(t&&!o)return this.model.moveToPrevList(),"< - Move to Previous List";break;case g.V:if(n)return this.model.toggleVote(),"V - Vote";break;case g.S:if(n)return s=this.model.get("subscribed"),this.model.subscribe(!s),["S - Subscribe",s?"Unsubscribe":"Subscribe"]}},t.prototype.showPopOver=function(e,t){return null==t&&(t={}),y.toggle({elem:this.$(".js-card-menu"),view:e,options:M.extend({model:this.model,modelCache:this.modelCache,hideOnSelect:!0},t)})},t.prototype.render=function(){var e,t,r,n,o,i,s;for(L("render","rendering card "+this.model.get("name")),e=this.model.toJSON(),e.showCover=this.showCover(),e.showEditor=this.model.editable()&&!this.options.hideMenu,this.model.hasStickers()&&(e.hasStickers=!0),e.labels=this.labelsData(),o=this.model.getBoard().getOrganization(),e.members=[],s=this.model.memberList.models,t=s.length-1;t>=0;t+=-1)r=s[t],n=r.toJSON(),n.isVirtual=(null!=o?o.isVirtual(r):void 0)||this.model.getBoard().isVirtual(r),null!=o&&(n.isDeactivated=o.isDeactivated(r)),e.members.push(n);return this.$el.toggleClass("js-archive-card",this.model.get("closed")),this.showCover()&&this.model.hasCover()&&this.$el.addClass("is-covered"),this.model.hasStickers()&&this.$el.addClass("is-stickered"),i={member_on_card:V.member_on_card,member:V.member},this.el.innerHTML=V.fill("card_in_list",e,{editable:this.model.editable()},i),this.renderActiveState(),this.renderFiltered(),this.renderBadges(),b.enqueue("render_"+this.cid,function(e){return function(){return e.renderCover(),e.renderStickers(),e.renderPowerUpEffects(),e.waitForId(e.model,function(){return e.renderLink()}),e._droppableHookedSinceRender=!1,B(e)}}(this)),this},t.prototype.hookDroppable=function(){var e;s.isTouch()||null!=this.$el&&(this._droppableHookedSinceRender||(this._droppableHookedSinceRender=!0,s.isTouch()||(e=this.throttle(function(){return n(".board-canvas")[0].getBoundingClientRect()},100,{trailing:!1}),this.$el.droppable({refreshPositions:!0,inBounds:function(t){var r,n,o;return r=e(),r.left<=(n=t.pageX)&&n<r.right&&r.top<=(o=t.pageY)&&o<r.bottom},accept:".js-list-draggable-board-members .member, .js-draggable-sticker",hoverClass:"active-card",drop:function(e){return function(t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b;r.draggable.hasClass("member")?(a=r.draggable.data("id"),s=r.draggable.clone(),u=e.model.memberList.detect(function(e){return e.id===a}),u||(e.model.addMember(a),N("Card","Add Member by Board Sidebar"))):r.draggable.hasClass("js-draggable-sticker")&&(h=r.draggable.data("sticker"),i=n=o=1,f=r.helper.offset(),g={top:e.$el.offset().top+i,left:e.$el.offset().left+n},v=e.$el.outerWidth()-n-o,l=f.left-g.left,d=f.top-g.top,c=l/v*100,m=e.$(".js-card-stickers").height(),y=e.$el.hasClass("is-stickered")||e.$el.hasClass("is-covered")?d/m*100:0,y>m&&(y=m),b=j.getElemTransformMatrix(r.helper.find(".sticker-select-fixed")),p=null!=b?j.getMatrixDegrees(b)%360:0,e.addNewStickerToList(h,c,y,p))}}(this)}))))},t.prototype.addNewStickerToList=function(e,t,r,n){var o,i;o=null!=(i=e.id)?i:e.get("image"),N("Card","Sticker",o),this.model.stickerList.create({image:o,left:I(t),top:I(r),rotate:n,zIndex:this.model.stickerList.nextZIndex(),imageUrl:e.get("url"),imageScaled:e.get("scaled")},{modelCache:this.modelCache})},t.prototype.showStickers=function(){return!this.onCalendar},t.prototype.renderStickers=function(e){var t,r,n,o,i;return this.showStickers()?(r=this.$(".list-card-stickers-area"),t=this.$(".js-card-stickers").empty(),n=this.model.hasStickers(),n?(this.$el.addClass("is-stickered"),r.removeClass("hide"),i=function(){var e,t,r,n;for(r=this.model.stickerList.models,n=[],e=0,t=r.length;t>e;e++)o=r[e],n.push(this.subview(C,o));return n}.call(this),this.appendSubviews(i,t)):(this.$el.removeClass("is-stickered"),r.addClass("hide")),this):void this.$el.removeClass("is-stickered")},t.prototype.renderName=function(){var e,t;return e=this.model.toJSON(),t=V.fill("card_title_on_card_front",e),this.$(".js-card-name").html(t),this},t.prototype.renderLink=function(){var e;return e=p.getCardUrl(this.model),this.$(".js-card-name").attr("href",e),this},t.prototype.showCover=function(){return this.model.getBoard().getPref("cardCovers")&&this.model.hasCover()&&!this.onCalendar},t.prototype.renderFiltered=function(e){var t,r;if(null==this.options.dontFilter)return null==this._visible&&(this._visible=!0),t=this.model.getBoard(),r=null==t||!p.onBoardView(t.id)||!this.applyBoardCardFilter||t.filter.satisfiesFilter(this.model),this._visible!==r&&(this.$el.toggleClass("hide",!r).height(r?"":0),this._visible=r),this},t.prototype.renderPowerUpEffects=function(){var e,t;return e=this.model.getBoard(),this.$el.removeClass(this.model.getAllAgingClasses()),e.isPowerUpEnabled("cardAging")&&!this.model.get("closed")?(t=this.model.getAgingData(),this.$el.addClass(t.agingClassesToAdd)):void 0},t.prototype.openQuickCardEditor=function(e){return j.stop(e),y.hide(),k.open(this),N("Card Front","Open Quick Card Editor"),this},t.prototype.moveToCalendarDay=function(e,t,r){var n;return r.getCardView(this.model).delegateEvents(),n=new Date(r.data.day),this.model.changeDueDateMaintainTime(n),r.updateHeader(),r.renderCardsAndListHeaders()},t.prototype.moveInCalendarDay=function(e,t,r){return r.getCardView(this.model).delegateEvents(),r.renderCardsAndListHeaders()},t.prototype.moveTo=function(e,t,r,n){var o,i;return 0===t.item.parents(".js-list").length?void(null!=r&&r.renderCards()):(o=t.item.parents(".js-list").find(".list-card:not(.placeholder,.js-composer)"),i=o.index(t.item),n||t.item.remove(),void this.model.moveToList(r.model,i))},t.prototype.moveIn=function(e,t,r){r.model.id===this.model.get("idList")&&this.moveTo(e,t,r,!0)},t.prototype.showDetail=function(e){return e&&(e.ctrlKey||e.metaKey||e.shiftKey)||!this.doClicks()?void 0:(j.stop(e),p.showCardDetail(this.model))},t.prototype.dragenter=function(e){var t;if(this.model.editable())return t=this.$el.outerHeight(),this.$(".list-card-dropzone").css({height:t+"px","line-height":t+"px"}),this.$el.addClass("is-drophover")},t.prototype.dragleave=function(e){return this.$el.removeClass("is-drophover")},t.prototype.dropFiles=function(e){var t;if(this.model.editable()&&(t=e.detail,!$(this.model.getBoard(),t)))return w.resolve(t).each(function(e){return function(t){var r;return r=t.name||D(),E(e.model,"upload",t,r)}}(this)).catch(function(){}).done(),e.stopPropagation()},t.prototype.dropUrl=function(e){var t;if(this.model.editable())return t=e.detail,this.model.uploadUrl(t),e.stopPropagation();
},t.prototype.doClicks=function(){return!m.sorting},t}(S))},{}],374:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=function(e,t){function r(){this.constructor=e}for(var n in t)b.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},b={}.hasOwnProperty;o=e(66),s=e(458),a=e(109),u=e(441),c=e(127),l=e("underscore"),f=e(666),v=e(38),m=e("moment"),i=e("pikaday"),h=e(84),d=function(){return{previousMonth:h("prev month button text"),nextMonth:h("next month button text"),months:m.months(),weekdays:m.weekdays(),weekdaysShort:m.weekdaysMin()}},g="LT",p=function(e){return m(e,g).isValid()},t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.viewTitleKey="change due date",t.prototype.tagName="form",t.prototype.className="dpicker-widget u-clearfix",t.prototype.events={"click .js-remove-date":"removeDueDate","input .js-dpicker-time-input":"validateTimeInput","change .js-dpicker-time-input":"normalizeTimeInput",submit:function(e){return e.preventDefault(),this.submitDueDate()},"click .js-enable-calendar-powerup":function(e){return e.preventDefault(),this.enableCalendarPowerUp()}},t.prototype.initialize=function(){return this.listenTo(this.model.getBoard(),"change:powerUps",this.renderCalendarPowerUp)},t.prototype.getSelectedDueDateMoment=function(){var e,t;return e=this.picker.getMoment(),e.isValid()?(e.year()<1e3&&e.add(2e3,"years"),t=this.selectedTimeMoment(),e.hour(t.hour()).minute(t.minute())):null},t.prototype.submitDueDate=function(){var e;return e=this.getSelectedDueDateMoment(),null!=e?this.setDueDate(e.toDate()):this.removeDueDate()},t.prototype.setDueDate=function(e){return t.lastDueDate=e,this.model.update("due",e.getTime()),s.hide()},t.prototype.removeDueDate=function(){return this.model.update("due",null),s.hide()},t.prototype.renderCalendarPowerUp=function(){var e,t,r,n,o;t=this.$(".js-cal-enabled").addClass("hide"),e=this.$(".js-enable-cal").addClass("hide"),r=this.model.getBoard(),n=r.isPowerUpEnabled("calendar"),o=r.owned()&&!n,n?t.removeClass("hide"):o&&e.removeClass("hide")},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,r,n,o,s;return e=this.model.getBoard(),s=m().startOf("day").add(1,"days").hour(12).toDate(),r=null!=(n=null!=(o=this.model.getDueDate())?o:t.lastDueDate)?n:s,this.$el.html(f(e.owned())),this.picker=new i({field:this.$(".js-dpicker-date-input")[0],container:this.$(".js-dpicker-cal")[0],bound:!1,format:"l",firstDay:m.localeData().firstDayOfWeek(),i18n:d()}),this.picker.setDate(r),this.$timeInput().val(m(r).format(g)),this.renderCalendarPowerUp(),this},t.prototype.validateTimeInput=function(){return this.$timeInput().toggleClass("input-error",!this.isTimeInputValid())},t.prototype.normalizeTimeInput=function(){return this.$timeInput().val(this.selectedTimeMoment().format(g)),this.validateTimeInput()},t.prototype.selectedTimeMoment=function(){return this.isTimeInputValid()?m(this.$timeInput().val(),g):m().hours(12).minutes(0)},t.prototype.$timeInput=function(){return this.$(".js-dpicker-time-input")},t.prototype.isTimeInputValid=function(){return p(this.$timeInput().val())},t.prototype.enableCalendarPowerUp=function(){this.model.getBoard().addToSet("powerUps","calendar"),v("Card Detail","Enable Calendar via Due Date Menu")},t}(u)},{}],375:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(441),i=e(438),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.viewTitleKey="formatting help",t.prototype.render=function(){return this.$el.html(i.fill("formatting_help")),this},t}(o)},{}],376:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;n=e(373),i=e(441),s=e(438),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.initialize=function(e){return this.showBoard=e.showBoard,this.cardView=this.subview(n,this.model,{filterDeactivated:!1,showMemberStatus:!1})},t.prototype.className="card-grid-container",t.prototype.render=function(){var e;return e={listName:this.model.getList().get("name"),boardName:this.model.getBoard().get("name"),showBoard:this.showBoard},this.$el.html(s.fill("member_cards_card",e)),this.appendSubview(this.cardView,this.$(".js-card")),this},t}(i)},{}],377:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C=function(e,t){function r(){this.constructor=e}for(var n in t)x.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},x={}.hasOwnProperty;n=e("jquery"),o=e(365),i=e(445),s=e(369),a=e(370),u=e(371),c=e(372),l=e(374),d=e(80),p=e(16),h=e(458),f=e(586),g=e(439),v=e(109),y=e(441),b=e("underscore"),_=e(438),k=e(38),w=e(89),t.exports=w(u,m=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return C(t,e),b.extend(t.prototype,c),t.prototype.className="quick-card-editor",t.open=function(e){var r,n,o;return this.close(),r=e.$el,n=r.offset(),o={width:r.width(),left:n.left,top:n.top},this.current=new t({model:e.model,modelCache:e.modelCache}).render(o)},t.close=function(){var e;return null!=(e=this.current)&&e.closeEditor(),this.current=null},t.prototype.initialize=function(){return this.makeDebouncedMethods("renderStickers","renderLabels"),this.listenTo(this.model,{"change:labels":this.renderLabelsDebounced,"change:idLabels":this.renderLabelsDebounced}),this.listenTo(this.model.labelList,"add remove reset change",function(e){return function(){return e.renderLabelsDebounced()}}(this)),this.listenTo(this.model.memberList,"add remove reset",this.frameDebounce(this.renderMembers)),this.listenTo(this.model.stickerList,"add remove reset change sort",function(){return this.renderStickersDebounced()})},t.prototype.events={"keydown .js-edit-card-title":"quickCardEditKeydown","click .js-save-edits":"saveEdits","click .js-stop":"stopCard","click .js-edit-labels":"editLabels","click .js-edit-members":"editMembers","click .js-move-card":"moveCard","click .js-copy-card":"copyCard","click .js-edit-due-date":"editDueDate","click .js-archive":"archive",click:"checkCloseEditor","click .js-close-editor":"closeEditor"},t.prototype.showCover=function(){return this.model.getBoard().getPref("cardCovers")&&this.model.hasCover()},t.prototype.showStickers=function(){return!0},t.prototype.shortcut=function(e){switch(e){case p.Escape:return this.checkCloseEditor(),["Esc - Close Quick Card Editor","Quick Card Editor"];case p.Enter:return this.save(),["Enter - Save Quick Card Edits","Quick Card Editor"]}},t.prototype.render=function(e){var t,r,o,i,s;return r=this.model.toJSON(),r.labels=this.model.getLabels(),r.showCover=this.showCover(),r.hasStickers=this.model.hasStickers(),r.quickEdit=!0,o={card:_.card_in_list,member_on_card:_.member_on_card},r.left=this.cLeft=e.left,r.top=this.cTop=e.top,r.width=this.cWidth=e.width,t=this.cWidth+this.cLeft+160,i=n(window).height(),s=n(window).width(),t>s&&(r.leftButtons=!0,this._usingLeftButtons=!0),this.$el.html(_.fill("quick_card_editor",r,{},o)),this.renderStickers().renderCover().renderLabels().renderBadges().renderMembers().checkShowCover(),n("body").append(this.$el),this.calcHeight(),this.focusInput(),g.addHandler(this,{scope:"quick_card_editor",modal:!0}),this.defer(function(e){return function(){return e.$(".quick-card-editor-buttons").addClass("fade-in")}}(this)),this.$(".js-edit-card-title").autosize(),this},t.prototype.calcHeight=function(){var e,t,r,o,i,s,a;s=n(window).height(),a=n(window).width(),o=this.$(".quick-card-editor-card").outerHeight(),this.cTop+o>s&&(i=s-o-8,this.$(".quick-card-editor-card").css({top:i})),e=this.$(".quick-card-editor-buttons"),t=e.outerHeight(),r=e.offset(),t+r.top>s&&e.css({top:-36})},t.prototype.renderStickers=function(){var e,t,r;return this.$(".sticker.moving, .sticker.rotating").length>0?this:(e=this.$(".js-card-stickers").empty(),r=function(){var e,r,n,o;for(n=this.model.stickerList.models,o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(this.subview(f,t));return o}.call(this),this.appendSubviews(r,e),this.$(".list-card").toggleClass("is-stickered",this.model.hasStickers()),this)},t.prototype.checkShowCover=function(){return this.$(".list-card").toggleClass("is-covered",this.showCover()).toggleClass("is-stickered",this.model.hasStickers()),this},t.prototype.focusInput=function(){return this.$(".js-edit-card-title").focus().select()},t.prototype.showPopOver=function(e,t,r,o){null==o&&(o={}),v.stop(e),h.toggle({elem:n(e.target).closest("a"),view:new t(b.extend({model:this.model,modelCache:this.modelCache},o)),alignRight:this._usingLeftButtons}),k("Quick Card Editor",r)},t.prototype.editLabels=function(e){return this.showPopOver(e,i,"Open Label Edit")},t.prototype.editMembers=function(e){return this.showPopOver(e,s,"Open Member Edit")},t.prototype.copyCard=function(e){return this.showPopOver(e,o,"Open Copy Card",{onCopy:this.closeEditor.bind(this)})},t.prototype.editDueDate=function(e){return this.showPopOver(e,l,"Open Due Date Edit")},t.prototype.moveCard=function(e){var t;return t=this.closeEditor.bind(this),this.showPopOver(e,a,"Open Move Card",{onCommit:t})},t.prototype.archive=function(e){v.stop(e),this.model.close(),this.closeEditor(),k("Quick Card Editor","Archive")},t.prototype.quickCardEditKeydown=function(e){return d.getKey(e)===p.Enter?this.saveEdits(e):void 0},t.prototype.saveEdits=function(e){var t;v.stop(e),t=this.$(".js-edit-card-title").val().trim(),t===this.model.get("name")?this.closeEditor():""!==t?(this.model.update({name:t}),this.closeEditor(),k("Quick Card Editor","Save Name")):this.$(".js-edit-card-title").focus().select()},t.prototype.checkCloseEditor=function(e){h.isVisible?h.hide():this.$(".sticker.editing").length>0?this.stopEditingStickers():this.closeEditor(e)},t.prototype.closeEditor=function(e){this.remove(),h.hide(),k("Quick Card Editor","Close")},t.prototype.stopEditingStickers=function(){var e,t,r,n;for(r=b.clone(this.model.stickerList.models),e=0,t=r.length;t>e;e++)n=r[e],n.trigger("stopEditing")},t.prototype.stopCard=function(e){v.stopPropagation(e),h.hide()},t}(y))},{}],378:[function(e,t,r){var n,o,i,s,a,u,c;n=e("jquery"),o=e(30),i=e(197),a=e(109),u=e("underscore"),c=e(84),t.exports=s=function(){function e(){}return e.prototype.renderValues=function(){var e,t,r,o,i,s,a;r=this.$(".js-select-board option:selected").val(),o=this.$(".js-select-list option:selected").val(),a=parseInt(this.$(".js-select-position option:selected").prop("index"),10)+1,e=this.modelCache.get("Board",r),t=e.get("name"),i=u.find(e.listList.models,function(e){return function(e){return e.id===o}}(this)),this.$(".js-board-value").text(t),null!=i?(s=i.get("name"),a=a.toString(),this.$(".js-list-value").text(s),this.$(".js-pos-value").text(a),this.$(".js-select-list,.js-select-position,.js-commit-position,.js-submit").removeAttr("disabled")):(this.$(".js-list-value").empty().append(n("<i></i>").text(c("no lists"))),this.$(".js-pos-value").empty().append(n("<i></i>").text(c("n/a"))),this.$(".js-select-list,.js-select-position,.js-commit-position,.js-submit").attr("disabled","disabled"))},e.prototype.updateBoardData=function(){var e,t,r,n,s,a,u;if(e=this.$(".js-select-board"),r=e.find("option:selected").val(),t={},r===this.model.getBoard().id){for(this._boardData=this.model.getBoard(),u=this._boardData.listList.models,n=0,s=u.length;s>n;n++)a=u[n],a.cardCount=this._boardData.listList.get(a.id).openCards().length;this.updateListList()}else null!=r&&(this.$(".js-submit").attr("disabled","disabled"),o.loadBoardData(r,i.cardsAndListsMinimal).then(function(e){return function(){return e._boardData=e.modelCache.get("Board",r),e.updateListList()}}(this)).done())},e.prototype.updateListList=function(){var e,t,r,o,i,s,a,u,c,l,d,p;for(t=this.$(".js-select-board"),r=this.$(".js-select-list").empty(),i=t.find("option:selected").val(),s=this.model.getList().id,a=i===this.model.getBoard().id?s:null!=(d=this._boardData.listList.at(0))?d.id:void 0,p=this._boardData.listList.models,u=0,c=p.length;c>u;u++)l=p[u],e=n("<option>").val(l.id).appendTo(r),o=l.id===s?e.format("current list",{listName:l.get("name")}):e.text(l.get("name")),l.id===a&&e.attr("selected","selected");return this.updatePositionList()},e.prototype.updatePositionList=function(){var e,t,r,o,i,s,a,u,l,d,p,h,m,f,g,v;if(t=this.$(".js-select-list"),r=this.$(".js-select-position").empty(),a=t.find("option:selected").val(),null==a)return void this.renderValues();for(d=null!=(m=this._boardData.listList.get(a))?m:this._boardData.listList.at(0),g=(null!=d?d.id:void 0)===this.model.getList().id,p=this._boardData.listList.get(a).cardList.length,g?(o=this.model.getList().openCards().indexOf(this.model),v=o,this.showCurrentPosition||(p-=1)):(o=-1,v=p),s=l=0,f=p;f>=0?f>=l:l>=f;s=f>=0?++l:--l)u=String(s+1),i=s===o?c("current position",{index:u}):u,h=0===s?"top":s===p?"bottom":d.calcPos(s),e=n("<option>").val(h).text(i).appendTo(r),s===v&&e.attr("selected","selected");this.$(".js-pos-value").text(String(v)),this.renderValues()},e}()},{}],379:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(441),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.viewTitleKey="sending links",t.prototype.render=function(){return this.$el.html('<div class="spinner loading"></div>'),this},t}(o)},{}],380:[function(e,t,r){var n,o,i,s,a,u,c,l,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p={}.hasOwnProperty;o=e(458),i=e(109),s=e(441),a=e("underscore"),c=e(657),l=e(38),u=function(e){return function(t,r){return t.get(e).localeCompare(r.get(e))}},t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="add checklist",t.prototype.initialize=function(e){this.cardView=e.cardView},t.prototype.events={"click .js-add-checklist":"addChecklist","submit form":"addChecklist"},t.prototype.render=function(){var e;return e=this.modelCache.find("Card",function(e){return function(t){return t.get("idBoard")===e.model.getBoard().id&&t.isOpen()&&t.checklistList.length>0}}(this)).sort(u("name")).map(function(e){return{name:e.get("name"),checklists:e.checklistList.chain().sort(u("name")).map(function(e){return{id:e.id,name:e.get("name")}}).value()}}),this.$el.html(c({checklistCards:e})),this},t.prototype.addChecklist=function(e){var t,r,n,s,a;return i.stop(e),a=this.$(".js-checklist-title").val(),s=this.$(".js-checklist-copy-source").val(),0===a.length?void this.$(".js-checklist-title").focus().select():(r=""!==s?"Copied Checklist Items":"No Checklist Items Copied",n="Checklist"===a?"Default Title (Checklist), "+r+")":"Renamed Title, "+r+")",l("Checklist","Create",""+n),t=this.model.checklistList.create({name:a,idChecklistSource:s,idCard:this.model.id}),this.cardView.focusChecklistAdd(t),void o.hide())},t}(s)},{}],381:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(382),i=e(411),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.viewType=o,t}(i)},{}],382:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f=function(e,t){function r(){this.constructor=e}for(var n in t)g.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},g={}.hasOwnProperty;n=e(403),i=e(406),s=e(416),a=e(409),u=e(458),c=e(87),l=e(109),d=e(418),p=e(89),h=e(438),m=e(38),t.exports=p(n,i,o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.className="checklist-item",t.prototype.allowNewlines=!1,t.prototype.initialize=function(){return this.listenTo(this.model,{"change:name":this.renderName,"change:state":this.renderState}),t.__super__.initialize.apply(this,arguments)},t.prototype.events={"keyup .js-checkitem-input":"keyAutoMention","click .js-toggle-checklist-item":"toggleState","click .js-delete-item":"delete","click .js-convert-item-to-card":"convertToCard","click .js-open-editing-menu":"openEditingMenu",movecheckitem:"moveCheckItem"},t.prototype.getCard=function(){return this.model.getCard()},t.prototype.render=function(){var e,t;return t=this,e=this.model,this.$el.html(h.fill("checklist_item",{},{editable:this.model.editable()})),this.renderName(),this.renderState(),this.recallDrafts(),this},t.prototype.getTextInput=function(){return this.$(".js-checkitem-input")},t.prototype.getMentionTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},t.prototype.getEmojiTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},t.prototype.getCardTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},t.prototype.renderName=function(e){var t,r;r=c.checkItems.format(this.model.get("name"),{textData:this.model.get("nameData")}).output,t=this.$(".js-checkitem-name"),t.empty().append(r),d(t[0],this.model.getBoard())},t.prototype.renderState=function(e){var t;t=this.model.toJSON(),t.checked="complete"===t.state,this.$el.toggleClass("checklist-item-state-complete",t.checked)},t.prototype.toggleState=function(e){var t,r;this.model.editable()&&(t="complete"===this.model.get("state"),r=t?"incomplete":"complete","complete"===r?(this.$el.addClass("checklist-item-fade-out"),this.setTimeout(function(e){return function(){return e.model.update("state",r),e.$el.removeClass("checklist-item-fade-out")}}(this),200)):(this.$el.removeClass("checklist-item-fade-out"),this.model.update("state",r)),m("Checklist","Toggle Checklist Item State",r))},t.prototype.delete=function(e){l.stop(e),this.model.destroy(),m("Checklist","Delete Single Checklist Item")},t.prototype.convertToCard=function(e){l.stop(e),this.model.run("convertToCard"),this.model.getChecklist().checkItemList.remove(this.model),m("Checklist","Convert Checklist Item to Card")},t.prototype.moveCheckItem=function(e,t,r,n){var o,i,s;if(n||this.model.getChecklist()===r)return o=t.item.parent().children(),i=o.index(t.item),s=r.calcPos(i,this.model),n?(this.model.update({pos:s,idChecklist:r.id}),this.model.collection.remove(this.model),r.checkItemList.add(this.model)):this.model.update("pos",s),r.checkItemList.sort({silent:!0}),m("Checklist","Reorder Checklist Item")},t.prototype.commitEdits=function(e){return u.hide(),t.__super__.commitEdits.apply(this,arguments)},t.prototype.openEditingMenu=function(e){return l.stop(e),u.toggle({elem:e.target,view:a,options:{model:this.model,modelCache:this.modelCache,parent:this},keepEdits:!0})},t}(s))},{}],383:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M,B=function(e,t){function r(){this.constructor=e}for(var n in t)T.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},T={}.hasOwnProperty;n=e("jquery"),o=e(25),i=e(403),s=e(404),a=e(381),c=e(406),l=e(452),d=e(455),p=e(416),h=e(407),m=e(409),f=e(80),g=e(456),v=e(238),y=e(458),b=e("bluebird"),w=e(109),_=e("underscore"),C=e(35),x=e(89),S=e(438),M=e(38),k=e(84),j=e(112),t.exports=x(i,c,u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return B(t,e),t.prototype.className="checklist",t.prototype.initialize=function(){return this.makeDebouncedMethods("renderCheckedState"),this.listenTo(this.model.checkItemList,{"add remove reset change:state":function(){return this.renderProgress(),this.renderCheckedStateDebounced()}}),this.listenTo(v,{"change:idCollapsedChecklists":this.renderCheckedStateDebounced}),this.listenTo(this.model,{"change:name":this.renderName})},t.prototype.events={"keydown .js-new-checklist-item-input":"keydownChecklistEvent","click .js-add-checklist-item":"submitTask","click .js-cancel-checklist-item":"cancelItemEditing","click .js-new-checklist-item-input":"focusNewTaskInput","click :not(.focus) .js-new-checklist-item-input":function(e){return n(e.currentTarget).select()},"click .js-confirm-delete":"confirmDeleteChecklist","click .js-hide-checked-items":"hideCheckedItems","click .js-show-checked-items":"showCheckedItems","sortstop .js-checklist-items-list":"sortStop","sortreceive .js-checklist-items-list":"sortReceive",movechecklist:"moveChecklist","click .js-open-editing-menu":"openEditingMenu","keyup .js-new-checklist-item-input":"keyAutoMention"},t.prototype.render=function(){var e,t;return C("render","rendering checklist state "+this.model.get("name")),this.$el.html(S.fillFromModel("checklist",this.model)),e=this.$(".js-checklist-items-list"),(null!=(t=this.getCard())?t.editable():void 0)&&e.sortable({axis:"y",delay:"75",distance:"7",tolerance:"pointer",placeholder:"checklist-item placeholder",items:".checklist-item",connectWith:".js-checklist-items-list",start:function(e,t){var r;return d.sorting=!0,r=n(t.helper).outerHeight(),n(t.placeholder).height(r)},stop:function(e){return function(){return e.defer(function(){return d.sorting=!1})}}(this)}),this.$newCheckItemInput=this.$(".js-new-checklist-item-input").autosize(),this.renderName(),this.renderCheckItems(),this.renderCheckedState(),this},t.prototype.renderName=function(){return this.$("div.checklist-title[attr=name] .current").text(this.model.get("name")),this},t.prototype.renderProgress=function(){var e,t,r,n;return t=this.model.getCompletedCount(this.getCard()),r=this.model.checkItemList.length,n=r>0?Math.round(100*t/r):0,e=t===r&&r>0,this.$(".js-checklist-progress-bar").width(n+"%"),this.$(".js-checklist-progress-percent").text(n+"%"),this.$(".js-checklist-progress-bar").toggleClass("checklist-progress-bar-current-complete",e),this},t.prototype.renderCheckItems=function(){var e,t;return e=this.$(".js-checklist-items-list"),t=this.collectionSubview(a,this.model.checkItemList,{el:e}),t.render(),d.refreshIfInitialized(e),this.renderProgress(),this},t.prototype.isChecklistCollapsed=function(){return v.inSet("idCollapsedChecklists",this.model.id)},t.prototype.renderCheckedState=function(e){var t,r,n,o;return n=this.model.checkItemList.length,r=this.model.getCompletedCount(this.getCard()),o=n>0,t=n===r&&n>0,this.$(".js-show-checked-items").text(k("show checked items",{count:r.toString()})),this.$(".js-completed-message").addClass("hide"),0!==r&&o?this.isChecklistCollapsed()?(this.$el.addClass("hide-completed-items"),this.$(".js-show-checked-items").removeClass("hide"),this.$(".js-hide-checked-items").addClass("hide"),this.$(".js-completed-message").toggleClass("hide",!t)):(this.$el.removeClass("hide-completed-items"),this.$(".js-show-checked-items").addClass("hide"),this.$(".js-hide-checked-items").removeClass("hide")):(this.$el.removeClass("hide-completed-items"),this.$(".js-show-checked-items").addClass("hide"),this.$(".js-hide-checked-items").addClass("hide")),this},t.prototype.hideCheckedItems=function(e){w.stop(e),v.pushCollapsedChecklist(this.model.id),M("Checklist","Hide Checked Items")},t.prototype.showCheckedItems=function(e){w.stop(e),v.pullCollapsedChecklist(this.model.id),M("Checklist","Show Checked Items")},t.prototype.getCard=function(){return this.options.card},t.prototype.cancelItemEditing=function(e){return n(e.target).closest(".js-new-checklist-item").find(".js-new-checklist-item-input").val(""),g.cancelEdits(),!1},t.prototype.focusNewTaskInput=function(e){g.cancelEdits(this.$newCheckItemInput),this.$newCheckItemInput.focus(),this.$(".js-new-checklist-item").addClass("focus")},t.prototype.keydownChecklistEvent=function(e){if(n(e.target).hasClass("js-new-checklist-item-input")){if(y.view instanceof h||y.view instanceof s)return this.checkInsert(e);if(f.isSubmitEvent(e))return this.submitTask(e)}},t.prototype.getTextInput=function(){return this.$(".js-new-checklist-item-input")},t.prototype.getMentionTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},t.prototype.getEmojiTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},t.prototype.getCardTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},t.prototype.submitTask=function(e){var t,r,n,i;return w.stop(e),n=this.$newCheckItemInput.val().trim(),/^\s*$/.test(n)?(w.stop(e),this.focusNewTaskInput(),!1):(i=_.compact(n.split(/\r\n|\r|\n/)),t=this.model,b.using(t.modelCache.getLock(),function(e){return function(){return b.resolve(i).each(function(e){var r;return r=t.checkItemList.length>0?t.checkItemList.last().get("pos")+w.spacing:w.spacing,r+=Math.floor(1024*Math.random()),j(t.checkItemList,"create",{name:e.trim(),pos:r,nameData:{emoji:o.me().allCustomEmoji()}}).catch(function(){})})}}(this)).done(),this.$newCheckItemInput.val("").trigger("autosize.resize"),this.focusNewTaskInput(),r=1===i.length?"Single Item":"Multiple Items",M("Checklist","Add Checklist Item",r),void y.hide())},t.prototype.sortStop=function(e,t){w.stopPropagation(e),t.item.trigger("movecheckitem",[t,this.model,!1])},t.prototype.sortReceive=function(e,t){w.stopPropagation(e),t.item.trigger("movecheckitem",[t,this.model,!0])},t.prototype.confirmDeleteChecklist=function(e){var t;w.stop(e),t=this.model.get("name"),l.toggle("delete checklist",{elem:this.$(e.target).closest(".js-confirm-delete"),model:this.model,title:k("confirm.delete checklist.title",{checklistName:t}),confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return M("Checklist","Delete Checklist"),e.model.destroy()}}(this)})},t.prototype.moveChecklist=function(e,t){var r,n,o;r=this.model.getCard(),null!=r&&(n=t.item.parent().children(),o=n.index(t.item),this.model.update("pos",r.calcChecklistPos(o,this.model)),this.model.collection.sort({silent:!0}),M("Checklist","Reorder Checklist"))},t.prototype.openEditingMenu=function(e){return w.stop(e),y.toggle({elem:e.target,view:m,options:{model:this.model,modelCache:this.modelCache,parent:this},keepEdits:!0})},t}(p))},{}],384:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},f={}.hasOwnProperty;n=e("jquery"),o=e(129),a=e(97),u=e(441),p=e(679),h=e(38),d=e("moment"),l=e(28).locales,s=e(81),c=e(209),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.initialize=function(){return this.listenTo(o,"add remove reset",this.frameDebounce(this.render))},t.prototype.viewTitleKey="announcements",t.prototype.events={"click .js-blog":"clickBlog","click .js-t":"clickTwitter","click .js-fb":"clickFacebook","click .js-g":"clickGoogle","click a":"openAnnouncementLink"},t.prototype.render=function(){var e,t,r,n;for(t=o.forLocale(l[0]),r=0,n=t.length;n>r;r++)e=t[r],e.isUnread()&&e.markRead();return a.set("tacoShow",d().add(1,"hours").valueOf()),this.$el.html(p(t.map(c.method("toJSON")))),this},t.prototype.clickBlog=function(){return h("Header","Announcements Menu","Trello Blog")},t.prototype.clickTwitter=function(){return h("Header","Announcements Menu","Twitter Link")},t.prototype.clickFacebook=function(){return h("Header","Announcements Menu","Facebook Link")},t.prototype.clickGoogle=function(){return h("Header","Announcements Menu","Google+ Link")},t.prototype.openAnnouncementLink=function(e){return n(e.target).closest("a").is(".js-blog, .js-t, .js-fb, .js-g, .js-close-popover")?void 0:h("Info","Announcements","Open Announcement Link")},t}(u)},{}],385:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=e(452),i=e(511),t.exports=o=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.template="confirm_merge"}return s(t,e),t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.appendSubview(this.subview(i,this.model),this.$(".js-member")),this},t}(n)},{}],386:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;n=e(190),i=e(401),s=e(438),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.initialize=function(){var e,t,r,o;r={gmail:/@(gmail|googlemail).com$/,yahoo:/@(yahoo|ymail).com$/,live:/@(hotmail|live).com$/,mac:/@(me|mac).com$/},e={gmail:"http://gmail.com",yahoo:"http://mail.yahoo.com",live:"http://live.com",mac:"https://www.icloud.com/"};for(t in r)if(o=r[t],o.test(this.model.get("email"))){this.emailInboxUrl=e[t];break}return null==this.emailInboxUrl?n({url:"/checkYourEmail",data:{email:this.model.get("email")},dataType:"json",success:function(e){return function(t){return null==t.error?(e.emailInboxUrl=t.url,e.render()):void 0}}(this)}):void 0},t.prototype.render=function(){var e;return e=this.model.toJSON(),null!=this.emailInboxUrl&&(e.emailInboxUrl=this.emailInboxUrl,e.knownEmailProvider=!0),this.$el.html(s.fill("header_warning_banner",e)),this},t}(i)},{}],387:[function(e,t,r){var n,o,i,s,a,u,c,l,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p={}.hasOwnProperty;n=e(331),o=e(527),s=e(458),a=e(109),u=e(441),c=e(438),l=e(38),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="create",t.prototype.events={"click .js-new-board":"newBoard","click .js-new-org":"newOrg","click .js-new-bc-org":"newBCOrg"},t.prototype.render=function(){return this.$el.html(c.fill("header_add_menu")),this},t.prototype.newBoard=function(e){return l("Header","Add Menu","New Board"),a.stop(e),s.pushView({view:new n({model:this.model,modelCache:this.modelCache})})},t.prototype.newOrg=function(e){return l("Header","Add Menu","New Org"),a.stop(e),s.pushView({view:new o({model:this.model,modelCache:this.modelCache})})},t.prototype.newBCOrg=function(e){var t;return l("Header","Add Menu","New Business Class Org"),t={isBusinessClass:!0},a.stop(e),s.pushView({view:new o({model:this.model,modelCache:this.modelCache,createOpts:t})})},t}(u)},{}],388:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e(240),i=e(109),s=e(441),a=e(438),u=e(38),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.className="header-boards-button",t.prototype.events={"click .js-boards-menu":"toggleBoardsSidebar"},t.prototype.render=function(){return this.$el.html(a.fill("header_boards_menu_button")),this},t.prototype.toggleBoardsSidebar=function(e){i.stop(e),u("Header","Boards Menu","Toggle Boards Menu"),o.getShowSidebar()?o.hideSidebar():o.showSidebar()},t}(s)},{}],389:[function(e,t,r){var n,o,i,s,a,u,c,l,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p={}.hasOwnProperty,h=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};n=e("jquery"),o=e(190),s=e(393),a=e(458),u=e(109),c=e(441),l=e(438),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.CHANNELS=["stable","beta","alpha"],
t.prototype.viewTitleKey="switch channels",t.prototype.events={"click .js-select":"selectChannel","click .js-select-dev":"showDev","click .js-remove-cookie":"removeCookie"},t.prototype.initialize=function(){var e,t,r;return e=this.model.get("channels"),this.channels=function(){var t,n,o,i;for(o=this.CHANNELS,i=[],t=0,n=o.length;n>t;t++)r=o[t],h.call(e.allowed,r)>=0&&i.push({name:r,displayName:u.capitalize(r),active:r===e.active});return i}.call(this),this.isDev=e.dev,t=!!n.cookie("head"),t&&this.isDev?this.defer(function(e){return function(){return e.showDev()}}(this)):void 0},t.prototype.selectChannel=function(e){var t;return t=e.target.name,o({url:"/1/members/me/channels/active",type:"PUT",data:{value:t},success:function(e){return function(){return e.model.get("channels").active=t,a.hide(),document.location.reload()}}(this)})},t.prototype.removeCookie=function(e){return u.stop(e),n.cookie("head",null,{path:"/"}),this.render()},t.prototype.render=function(){var e,t;return e=!!n.cookie("head"),t=window.TrelloVersion,this.$el.html(l.fill("header_channel_picker",{channels:this.channels,cookie:e,version:t,dev:this.isDev})),this},t.prototype.showDev=function(e){return u.stop(e),a.pushView({view:s}),this},t}(c)},{}],390:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e(441),s=e(682),a=e(821),u=e(38),i=e(72),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="information",t.prototype.events={"click .js-new-tip":"newTipEvent","click .js-tip":"clickTip","click .js-meta-page-link":"clickMetaPage","click .js-meta-page-more-link":"showMoreLinks"},t.prototype.initialize=function(){return this.remainingTips=i.slice(0),t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){return this.$el.html(s()),this.newTip(),this},t.prototype.getFreshTip=function(){var e,t;return this.remainingTips.length<1&&(this.remainingTips=i.slice(0)),e=Math.floor(Math.random()*this.remainingTips.length),t=this.remainingTips[e],this.remainingTips.splice(e,1),t},t.prototype.newTipEvent=function(){u("Header Tips","Get a new tip."),this.newTip()},t.prototype.newTip=function(){var e;return e=this.getFreshTip(),this.$(".js-fill-tip").empty().append(a(e)),u("Header Tips",e.id,"Viewed"),this},t.prototype.clickTip=function(e){var t;return t=this.$(e.currentTarget).attr("data-tipid"),u("Header Tips",t,"Clicked")},t.prototype.clickMetaPage=function(e){var t;return t=this.$(e.currentTarget).attr("data-metapagename"),u("Header","Information Menu",t)},t.prototype.showMoreLinks=function(e){return this.$(".js-more-menu-button").addClass("hide"),this.$(".js-more-menu").removeClass("hide"),u("Header","Information Menu","Show More Links")},t}(o)},{}],391:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_=function(e,t){function r(){this.constructor=e}for(var n in t)k.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},k={}.hasOwnProperty,C=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};n=e("jquery"),o=e(25),s=e(482),i=e(480),a=e(5),c=e(395),f=e(84),l=e(458),d=e("react"),p=e(109),h=e(441),v=e(35),m=e(209),y=e(685),g=e(28).locales,b=m(e(38),"Header","User Menu"),w=function(e){return function(){return b(e)}},t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:loginTypes",this.frameDebounce(this.render))},t.prototype.getViewTitle=function(){return this.model.getMemberViewTitle()},t.prototype.events={"click .js-profile":w("Profile"),"click .js-cards":w("Cards"),"click .js-billing":w("Billing"),"click .js-account":w("Settings"),"click .js-help":function(e){return w("Help"),o.isLoggedIn()?(p.stop(e),l.show({getViewTitle:function(){return f(["view title","help"])},maxWidth:500,clientx:n(window).width()-500,clienty:40,elem:e.currentTarget,reactElement:d.createElement(c,{key:"help"})})):void 0},"click .js-shortcuts":w("Shortcuts"),"click .js-change-locale":"changeLocale","click .js-logout":"logout"},t.prototype.render=function(){var e;return v("render","rendering HeaderMemberMenuView"),e={profileUrl:a.getMemberProfileUrl(),cardsUrl:a.getMemberCardsUrl(),billingUrl:a.getMemberBillingUrl(),accountUrl:a.getMemberAccountUrl(),canLogOut:o.canLogIn(),hasAccount:this.model.hasMemberOrOrgAccount(),blogUrl:C.call(g,"pt-BR")>=0?"http://br.blog.trello.com":"http://blog.trello.com"},this.$el.html(y(e)),this},t.prototype.changeLocale=function(e){b("Change Locale"),p.stop(e),l.pushView({view:new i({model:this.model,modelCache:this.modelCache,onChange:function(e,t){return t===e?l.popView():document.location.reload()}})})},t.prototype.logout=function(e){return o.canLogIn()?(o.logoutPost(),b("Log Out")):(l.pushView({view:new s({model:this.model,modelCache:this.modelCache})}),p.stop(e))},t}(h)},{}],392:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S=function(e,t){function r(){this.constructor=e}for(var n in t)M.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},M={}.hasOwnProperty;n=e(25),o=e(5),i=e(453),s=e(454),a=e(387),u=e(389),l=e(391),p=e(515),c=e(390),h=e(30),m=e(180),f=e(458),g=e("bluebird"),v=e("react"),y=e(98),b=e(109),w=e(441),_=e("underscore"),k=e(84),C=e(35),x=e(438),j=e(38),t.exports=d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return S(t,e),t.prototype.className="header-user",t.prototype.initialize=function(){var e;return this.listenTo(this.model,"change:initials change:avatarHash change:avatarSource change:fullName change:username",this.renderAvatar),this.idLastNotification=null!=(e=_.chain(this.modelCache.all("Notification")).pluck("id").compact().sort().last().value())?e:"",this.listenTo(this.modelCache,"add:Notification",this.showDesktopNotification),t.__super__.initialize.apply(this,arguments)},t.prototype.events={"click .js-open-header-info-menu":"viewInfoMenu","click .js-open-header-notifications-menu":"viewNotificationsMenu","click .js-open-header-member-menu":"viewMemberMenu","click .js-open-add-menu":"openAddMenu","click .js-open-channel-picker":"viewChannelPicker"},t.prototype.render=function(){var e;return C("render","rendering header"),e={hasCrown:this.model.isFeatureEnabled("crown"),showChannelPicker:n.isLoggedIn()&&this.model.get("channels").allowed.length>1,escapedReturnUrl:b.escapedReturnUrl()},this.$el.html(x.fill("header_user",e,{},{header_signup_login:x.header_signup_login})),this.renderUnreadNotifications(),this.renderAvatar(),this.renderMemberName(),this},t.prototype.renderMemberName=function(){var e;return this.$(".js-member-name").text(null!=(e=this.model.get("fullName"))?e:this.model.get("username"))},t.prototype.renderAvatar=function(){return C("render","rendering avatar"),this.$(".member").html(x.fill("member",this.model.toJSON())),this},t.prototype.renderUnreadNotifications=function(){var e;return e=m.unreadCount(this.modelCache),this.$(".js-open-header-notifications-menu").toggleClass("new-notifications",e>0),o.title(),this},t.prototype.viewInfoMenu=function(e){j("Header","Information Menu","Open Information Menu"),b.stop(e),f.toggle({elem:this.$(".js-open-header-info-menu"),view:c,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.viewNotificationsMenu=function(e){b.stop(e),j("Header","Notifications Menu","Open Notifications Menu"),this.listenTo(this.modelCache,"add:Notification change:Notification remove:Notification",this.renderUnreadNotifications),f.toggle({elem:this.$(".js-open-header-notifications-menu"),hidden:_.bind(this.model.clearAllNotifications,this.model),maxWidth:450,displayType:"mod-notifications",getViewTitle:function(){return k("view title.notifications")},reactElement:v.createElement(p,{member:this.model,noteUrl:"/"+this.model.get("username")+"/notifications"}),options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openAddMenu=function(e){b.stop(e),j("Header","Add Menu","Open"),f.toggle({elem:this.$(".js-open-add-menu"),view:new a({model:n.me(),modelCache:this.modelCache})})},t.prototype.viewMemberMenu=function(e){var t;b.stop(e),j("Header","User Menu","Open User Menu"),t=new l({model:n.me(),modelCache:this.modelCache}),f.toggle({elem:this.$(".js-open-header-member-menu"),view:t})},t.prototype.viewChannelPicker=function(e){b.stop(e),f.toggle({elem:this.$(".js-open-channel-picker"),view:new u({model:n.me(),modelCache:this.modelCache})})},t.prototype.showDesktopNotification=function(e){return!i.enabled()||e.id<=this.idLastNotification?void 0:(this.idLastNotification=e.id,g.try(function(){var t;return t=Date.now()-y.serverToClient(e.get("date")),t<b.getMs({minutes:1})?e:h.loadNotification(e.id)}).then(function(e){return e.get("unread")?new i(e):void 0}).done())},t}(w)},{}],393:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n=e("jquery"),i=e(109),s=e(441),a=e(438),u=e("xtend"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="select client version",t.prototype.LATEST_VERSION={"0.0":!0},t.prototype.events={"change .js-select-head":"updateHead","change .js-select-version":"updateVersion"},t.prototype.initialize=function(){var e,t;return this.active=function(){try{return JSON.parse(n.cookie("head"))}catch(e){}}()||{},this.active.version&&(this.active.version=[null!=(e=this.active.version)?e:0,null!=(t=this.active.patch)?t:0].join(".")),n.getJSON("/web/deployments").done(function(e){return function(t){return e.deployments=t,e.render()}}(this))},t.prototype.render=function(){return null!=this.deployments?this.$el.html(a.fill("header_version_picker",{active:this.formatActive(),heads:[null].concat(this.listHeads()),versions:[null].concat(this.listVersions())})):this.$el.text("Loading..."),this},t.prototype.formatVersion=function(e){return"0.0"===e?"latest":e},t.prototype.formatActive=function(){return{name:this.active.name,version:this.formatVersion(this.active.version)}},t.prototype.listHeads=function(){var e,t,r,n;t=this.deployments,r=[];for(e in t)n=t[e],r.push({displayName:e,value:e,selected:this.active.name===e});return r},t.prototype.listVersions=function(){var e,t,r,n,o;t=this.deployments[this.active.name],r=u(this.LATEST_VERSION,t),n=[];for(o in r)e=r[o],n.push({displayName:this.formatVersion(o),value:o,selected:this.active.version===o,active:e});return n},t.prototype.updateHead=function(e){return this.active.name=n(e.target).val(),this.active.version=null,this.render()},t.prototype.updateVersion=function(e){var t,r,o,i;return this.active.version=n(e.target).val(),this.render(),o=this.active.version.split("."),i=o[0],r=o[1],t={name:this.active.name,version:i,patch:r},parseInt(i)>=0?(n.cookie("head",JSON.stringify(t),{path:"/"}),document.location.reload()):void 0},t}(s)},{}],394:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b=function(e,t){function r(){this.constructor=e}for(var n in t)w.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},w={}.hasOwnProperty,_=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};n=e(129),o=e(384),i=e(131),s=e(25),c=e(458),l=e(97),d=e(109),p=e(441),h=e("underscore"),v=e(438),y=e(38),f=e(84),g=e(28).locales,u=e(81),m=e(209),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.initialize=function(){return this.makeDebouncedMethods("renderTacoState"),this.listenTo(i,"add remove reset",this.renderTacoStateDebounced),this.listenTo(n,"add remove reset change:unread",this.renderTacoStateDebounced),this.updateAllAnnouncements=h.debounce(this.updateAllAnnouncements,6e4,!0),this.setInterval(function(e){return function(){return e.renderTacoState()}}(this),3e4)},t.prototype.events={click:"openAnnouncement",mouseover:"updateAllAnnouncements"},t.prototype.render=function(){return this.$el.html(v.fill("woof_header")),this.renderTacoState(),this},t.prototype.renderTacoState=function(){var e,t,r,n;r={alert:"woof-alert",unread:"woof-up",recentlyRead:"woof-crouch",none:"woof-hide"},e=this.$(".header-btn");for(n in r)t=r[n],e.removeClass(t);_.call(h.pluck(i.toJSON(),"type"),"downtime")>=0?(e.find(".js-phrase").text(f("announcements.maintenance")),e.addClass(r.alert)):e.find(".js-phrase").text(f("announcements.new stuff")),e.addClass(this.interestingAnnouncementCount()>0?r.unread:l.get("tacoShow")>Date.now()?r.recentlyRead:r.none)},t.prototype.interestingAnnouncementCount=function(){return i.forLocale(g[0]).filter(m.method("isUnread")).length},t.prototype.updateAllAnnouncements=function(){return n.fetch()},t.prototype.openAnnouncement=function(e){d.stop(e),this.updateAllAnnouncements(),c.toggle({elem:this.$(".header-btn"),view:new o({model:s.me(),modelCache:this.modelCache})}),y("Header","Announcement","Unread",this.interestingAnnouncementCount())},t}(p)},{}],395:[function(e,t,r){var n,o;n=e("react"),o=e(433)(),t.exports=n.createClass({displayName:"HelpOverlay",componentDidMount:function(){return window.addEventListener("message",this.receiveMessage)},componentWillUnmount:function(){return window.removeEventListener("message",this.receiveMessage)},receiveMessage:function(e){var t,r,n,o;if(e.source===this.refs.iframe.contentWindow)switch(r=e.data,n=r.type,o=r.value,n){case"resize":if(this.refs.loading.style.display="none",t=parseFloat(this.refs.iframe.style.height),!this.refs.iframe.style.height||o>t&&50>t-o)return this.refs.iframe.style.height=o+"px"}},render:o.renderable(function(){return o.div(function(){return o.div(".spinner.loading",{ref:"loading"}),o.iframe(".help-embedded-iframe",{ref:"iframe",src:"/contact?compact=1&trello=1&url="+encodeURIComponent(location.href)+"&source=from%20in%20app"})})})})},{}],396:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b=function(e,t){function r(){this.constructor=e}for(var n in t)w.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},w={}.hasOwnProperty;n=e("jquery"),o=e(451),i=e(190),s=e(25),a=e(137),u=e(385),c=e(454),d=e(397),p=e(30),h=e(109),m=e(401),f=e("underscore"),v=e(683),y=e(38),g=e(84),t.exports=l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.events={"click .js-join-model":"joinModel","click .js-ignore-invite":"ignoreInvite","click .js-switch-accounts":"switchAccounts","click .js-create-new-account":"createNewAccount"},t.prototype.className="header-banner mod-warning mod-invited",t.prototype.initialize=function(){return this.boardOrOrg=this.options.idBoard?this.modelCache.get("Board",this.options.idBoard):this.modelCache.get("Organization",this.options.idOrganization),p.loadMemberEmail(this.getGhost().id).then(function(e){return function(t){var r;if(null!=(r=t.get("email")))return i({url:"/1/search/members/",type:"get",data:{query:r},dataType:"json",success:function(t){return f.isEmpty(t)||"normal"!==t[0].memberType?void 0:e.hasAccount=!0}})}}(this)).finally(function(e){return function(){return e.render()}}(this)).done()},t.prototype.getInviteToken=function(){return h.inviteTokenFor(this.boardOrOrg.id)},t.prototype.getMemberAdder=function(){var e;return e=this.getInviteToken().split("-")[1],this.modelCache.get("Member",e)},t.prototype.getGhost=function(){var e;return e=this.getInviteToken().split("-")[0],this.modelCache.get("Member",e)},t.prototype.render=function(){var e,t,r;return e=this.model.toJSON(),e.isLoggedIn=s.isLoggedIn(),this.boardOrOrg instanceof a?(e.isBoard=!0,e.modelName=this.boardOrOrg.get("name")):e.modelName=this.boardOrOrg.get("displayName"),e.modelType=this.boardOrOrg.typeName,t=this.getMemberAdder(),null!=t&&(e.memberAdder=t.toJSON(),e.isInviter=s.isMe(t)),e.ghost=null!=(r=this.getGhost())?r.toJSON():void 0,this.$el.html(v(e)),this},t.prototype.joinModel=function(e){var t;return h.stop(e),s.isLoggedIn()?(t=this.getGhost().get("email"),u.toggle("add email",{elem:n(e.target),model:this.model,text:g("confirm.add email.text",{ghostEmail:t}),data:this.model.toJSON(),fxConfirm:function(e){return function(){var t,r,n;return n=e.options.idBoard?"board":"organization",t=null!=(r=e.options.idBoard)?r:e.options.idOrganization,i({url:"/associate-json/"+n+"/"+t+"/"+h.inviteTokenFor(t),dataType:"json",type:"post",success:function(t){var r;return null==t.error?(e.deleteTokenCookie(),e.hideHeader(),r=function(){switch(n){case"board":return"accepted board invite";case"organization":return"accepted org invite"}}(),o.show(r,"info",null,5e3)):void 0}})}}(this)})):this.showLoginOrSignupDialog()},t.prototype.deleteTokenCookie=function(){var e;return n.cookie("invite-token-"+(null!=(e=this.options.idBoard)?e:this.options.idOrganization),null,{path:"/"})},t.prototype.hideHeader=function(){return n(this.el).hide(),h.calcBoardLayout()},t.prototype.ignoreInvite=function(e){var t,r,n,i,s;return h.stop(e),null!=(t=this.getGhost())?(s=this.options.idBoard?"board":"organization",r=null!=(i=this.options.idBoard)?i:this.options.idOrganization,this.boardOrOrg.memberList.remove(this.getGhost(),{invite:!0}),this.hideHeader(),this.deleteTokenCookie(),n=function(){switch(s){case"board":return"rejected board invite";case"organization":return"rejected org invite"}}(),o.show(n,"error",null,5e3)):void 0},t.prototype.createNewAccount=function(e){return h.stop(e),y("Header","Login/Signup Menu","Open Login/Signup Menu: Create New"),this.showLoginOrSignupDialog(!0)},t.prototype.switchAccounts=function(e){return h.stop(e),y("Header","Login/Signup Menu","Open Login/Signup Menu"),this.showLoginOrSignupDialog()},t.prototype.showLoginOrSignupDialog=function(e){var t;return t=e?!1:this.hasAccount,c.show({displayType:"mod-login-signup-dialog",view:new d({model:this.modelCache.get("Member",s.myId()),modelCache:this.modelCache,idGhost:this.getGhost().id,idModel:this.boardOrOrg.id,hasAccount:t,modelType:this.options.idBoard?"board":"organization"})})},t}(m)},{}],397:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h=function(e,t){function r(){this.constructor=e}for(var n in t)m.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},m={}.hasOwnProperty;n=e("jquery"),o=e(190),i=e(25),s=e(65),u=e(460),c=e(109),l=e(441),d=e(438),p=e(38),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className="login-signup-form",t.prototype.remove=function(){return this.$el.remove(),this},t.prototype.events={"mouseenter .js-default-active":"addMouseenterFormPartEvent","click .js-form-part":"clickFormPart","click .js-tabs a":"clickTab","click .js-create-account":"createAccount"},t.prototype.render=function(){var e,t;return t=this.modelCache.get("Member",this.options.idGhost),e=t.toJSON(),e.hasAccount=this.options.hasAccount,e.escapedReturnUrl=c.escapedReturnUrl(),n(this.el).html(d.fill("hybrid_signup_login",e)),this.defer(function(e){return function(){return e.setDefaultActive()}}(this)),this.$(".js-insert-tooltip").html(this.subview(u,i.me()).render().el),this},t.prototype.setDefaultActive=function(){return this.setFocusTo(this.$(".js-default-active")),this.$(".js-active-box").removeClass("start")},t.prototype.addMouseenterFormPartEvent=function(){return this.$(".js-default-active").unbind("mouseenter"),this.$(".js-form-part").bind("mouseenter",this.mouseenterFormPart.bind(this))},t.prototype.disableCreateAccount=function(){return this.createDisabled=!0,this.$(".js-create-account").attr("disabled","disabled")},t.prototype.enableCreateAccount=function(){return this.createDisabled=!1,this.$(".js-create-account").removeAttr("disabled")},t.prototype.createAccount=function(e){var t;return c.stop(e),this.createDisabled?void 0:(p("Invite Header","Create Account"),this.$(".js-bad-password").hide(),this.$(".js-bad-full-name").hide(),this.$(".js-bad-email").hide(),this.$(".js-used-email").hide(),t=n(e.target).closest("form"),this.disableCreateAccount(),o({type:"POST",dataType:"json",url:"/signup-invitation",data:{email:t.find('input[name="email"]').val(),idModel:this.options.idModel,type:this.options.modelType,fullName:t.find('input[name="fullName"]').val(),password:t.find('input[name="password"]').val(),inviteToken:c.inviteTokenFor(this.options.idModel)},success:function(e){return function(t){return t.success?("function"==typeof window.ga&&window.ga("send","pageview","/createAccount"),e.setTimeout(function(){return location.reload()},30)):/invalid invitation/.test(t.error)?location.reload():/password/.test(t.error)?(e.$(".js-bad-password").show(),e.enableCreateAccount()):/fullName/.test(t.error)?(e.$(".js-bad-full-name").show(),e.enableCreateAccount()):/email/.test(t.error)?(e.enableCreateAccount(),/in use/.test(t.error)?e.$(".js-used-email").show():e.$(".js-bad-email").show()):void 0}}(this)}))},t.prototype.mouseenterFormPart=function(e){return s.isTouch()||0!==this.$("*:input:focus").length||0!==this.$(".js-tooltip-content.active").length?void 0:this.setFocusTo(n(e.target).closest(".js-form-part"))},t.prototype.clickFormPart=function(e){return s.isTouch()?void 0:this.setFocusTo(n(e.target).closest(".js-form-part"))},t.prototype.setFocusTo=function(e){var t,r,n,o,i;for(e.siblings(".js-form-part").removeClass("active"),e.addClass("active"),this.$(".js-tab").removeClass("active"),this.$(".js-tab[data-content="+this.$(".js-form-part.active").attr("data-id")+"]").addClass("active"),o=["js-signup-form-pos","js-login-form-pos"],i=[],t=0,r=o.length;r>t;t++)n=o[t],i.push(this.$(".js-active-box").toggleClass(n,e.hasClass(n)));return i},t.prototype.clickTab=function(e){var t;return t=this.$("."+n(e.target).attr("data-content")),this.setFocusTo(t)},t}(l)},{}],398:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h=function(e,t){function r(){this.constructor=e}for(var n in t)m.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},m={}.hasOwnProperty;s=e(62),o=e(401),d=e(436)(),c=e(209),p=c(e(38),"Header","New Locale Banner"),l=e(23),i=e("underscore"),u=e("locale").banners,a=e(63),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.initialize=function(e){this.locale=e.locale},t.prototype.events={"click .js-switch-language":function(){return p("Set locale to "+this.locale),this.setLocale()},"click .js-dismiss":function(){return p("Dismiss "+this.locale),this.dismiss(function(){})}},t.prototype.setLocale=function(){return this.model.setPref("locale",this.locale,function(e){return function(){return e.dismiss(function(){return document.location.reload()})}}(this))},t.prototype.dismiss=function(e){return this.model.dismissLanguageBannerFor(this.locale,function(t){return function(){return t.remove(),e()}}(this))},t.prototype.render=function(){var e,t,r,n;return n=this.locale.replace(/-/,"_"),e=null!=(r=u[n])?r:u[n.substr(0,n.indexOf("_"))],s(null!=e,"Attempt to show a NewLocaleBanner with an unrecognized locale"),t=i.find(l,function(e){return function(t){return t.code===e.locale}}(this)),s(null!=t,"Attempt to show a NewLocaleBanner with an unrecognized language"),this.$el.html(d.render(function(){return d.text(e.mainText.replace("{language}",t.name)),d.text(" "),d.a({href:"#",class:"quiet primary js-switch-language"},e.switchText),d.text(" - "),d.a({href:"#",class:"quiet js-dismiss"},e.dismissText)})),this},t}(o)},{}],399:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;n=e(5),i=e(401),a=e(438),s=e(84),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.frameDebounce(this.render))},t.prototype.render=function(){var e,t,r,o,i,u;return r=this.model.toJSON(),i=this.model.get("prefs"),t="public"===i.voting,e="public"===i.comments,o=t&&e?"subscribe vote comment":t?"subscribe vote":e?"subscribe comment":"subscribe",r.interactionText=s(["public interactions",o]),u=encodeURIComponent(n.getBoardUrl(this.model)),r.signupUrl="/signup?returnUrl="+u+"&source=public-board-banner",r.tourUrl="/tour?board="+u+"&source=public-board-banner",this.$el.html(a.fill("header_public_board",r)),this},t}(i)},{}],400:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h={}.hasOwnProperty;n=e("jquery"),o=e(25),i=e(482),s=e(458),u=e(109),c=e(401),l=e(438),d=e(38),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:loginTypes",function(e){return function(){return e.$el.toggle(!o.canLogIn()),n(window).triggerHandler("resize")}}(this))},t.prototype.events={"click .js-change-password":"changePassword"},t.prototype.render=function(){return this.$el.html(l.fill("header_warning_password",this.model.toJSON())),this},t.prototype.changePassword=function(e){return u.stop(e),s.toggle({elem:this.$(".js-change-password"),view:new i({model:this.model,modelCache:this.modelCache})}),d("Header","Password Banner","Open Change Password Menu")},t}(c)},{}],401:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;n=e(441),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.className="header-banner mod-warning",t}(n)},{}],402:[function(e,t,r){var n,o;n=e("jquery"),o=e(260),t.exports={clear:function(){this.isActive()&&(this.viewer.$el.off("remove.attachment-viewer",this._handleViewRemove),this.viewer.close(),this.viewer=null)},isActive:function(){return null!=this.viewer},_handleViewRemove:function(){return this.viewer=null},show:function(e){this.clear(),this.viewer=new o(e),this.viewer.$el.on("remove.attachment-viewer",this._handleViewRemove.bind(this)),n("body").append(this.viewer.render().el)}}},{}],403:[function(e,t,r){var n,o,i,s,a,u,c,l;n=e("jquery"),i=e(65),s=e(80),a=e(16),u=e(458),c=e(109),l=e("underscore"),t.exports=o=function(){function e(){}return e.prototype.checkInsert=function(e){var t,r,o,l,d,p,h,m;if(d=s.getKey(e),u.isVisible&&!i.isTouch())if(e.shiftKey&&(d===a.ArrowUp||d===a.ArrowDown)||e.altKey&&(d===a.ArrowUp||d===a.ArrowDown));else if(d===a.Escape)c.stop(e),u.hide();else for(r=[{listClass:".js-available-members",itemClass:".js-select-member"},{listClass:".js-available-emoji",itemClass:".js-select-emoji"},{listClass:".js-card-list",itemClass:".js-select-card"}],o=0,p=r.length;p>o;o++)if(m=r[o],h=m.listClass,l=m.itemClass,t=n(".pop-over").find(h),t.length>0){if(d===a.Enter||d===a.Tab)return c.stop(e),t.find(".item:first").hasClass("selected")&&(this.keyAutoMention(e),t=n(".pop-over").find(h)),t.find(".item.selected:first "+l).first().click(),u.hide(),!1;if(d===a.ArrowUp||d===a.ArrowDown)return c.stop(e),c.navMenuList(t,".item",d),!1}},e.prototype.keyAutoMention=function(e){var t,r,n,o,d,p,h;if(!i.isTouch()){if(s.isArrow(s.getKey(e))||s.getKey(e)===a.Enter)return;return s.getKey(e)===a.Escape?void(u.isVisible&&c.stop(e)):(h=c.getWordFromCaret(this.getTextInput()),/^@\S/.test(h.str.substring(0,2))?(t=this.getAutoMentionerView("input"),0===t.filterMentionablesForMatches(h.str.substring(1).toLowerCase()).length?void u.hide():(u.show({elem:this.getMentionTarget(),view:t,keepEdits:!0}),void(this.getTextInput().is(":focus")||this.getTextInput().focus()))):/^:[a-z0-9_]+$/.test(h.str)?(r=this.getEmojiCompleterView("input"),u.show({elem:this.getEmojiTarget(),view:r,keepEdits:!0}),void(this.getTextInput().is(":focus")||this.getTextInput().focus())):(n=c.getLineFromCaret(this.getTextInput()),p=/^(?:.*\s)?\#((?!\s)[^\#\.,;:@]{0,32})$/,null!=(o=null!=(d=p.exec(n.str))?d[1]:void 0)?(null==this.debouncedCardSearch&&(this.debouncedCardSearch=l.debounce(function(e){return function(t){var r,n;return r=e.getInputCardCompleterView(),n=function(){return u.show({elem:e.getCardTarget(),view:r,keepEdits:!0})},e._lastQuery=t,r.search(t,function(r,o){return t===e._lastQuery?r||l.isEmpty(o)?u.hide():n():void 0})}}(this),200)),void this.debouncedCardSearch(o)):this.setTimeout(function(){return u.hide()},5)))}},e}()},{}],404:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function r(){this.constructor=e}for(var n in t)y.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},y={}.hasOwnProperty;n=e("jquery"),o=e(25),s=e(80),a=e(16),m=e(84),u=e(458),l=e(511),c=e(508),d=e(109),p=e(441),h=e("underscore"),f=e(438),g=e(38),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.viewTitleKey="mention",t.prototype.events={"mouseenter .js-select-member":"hoverItem","click .js-select-member":"insertMember","click .js-select-all-card-members":"selectAllCardMembers","mouseenter .js-select-all-card-members":"deselectMember","click .js-select-all-board-members":"selectAllBoardMembers","mouseenter .js-select-all-board-members":"deselectMember","click .js-select-all-commenters":"selectAllCommenters","mouseenter .js-select-all-commenters":"deselectMember",keydown:"keydownEvent","keyup .js-filter-mentionables":"keyupEvent"},t.prototype.render=function(){var e,t,r,n,o,i;return i=this,t=this.getMentionables(),this.cardMentionables=t.cardMentionables,this.boardMentionables=t.boardMentionables,this.commenterMentionables=t.commenterMentionables,this.allMentionables=t.allMentionables,e={},this.options.input&&(e.input=!0),this.options.button&&(e.button=!0),e.showAllCardMembers=0<(r=this.cardMentionables.length)&&12>r,e.showAllBoardMembers=0<(n=this.boardMentionables.length)&&12>n,e.showAllCommenters=0<(o=this.commenterMentionables.length)&&12>o,this.$el.html(f.fill("popover_auto_mentioner",e)),this.$mentionablesList=this.$(".js-available-members"),e.button&&(this.$(".js-select-all-card-members .mem-count").text("("+this.cardMentionables.length+")"),this.$(".js-select-all-board-members .mem-count").text("("+this.boardMentionables.length+")"),this.$(".js-select-all-commenters .mem-count").text("("+this.commenterMentionables.length+")"),(e.showAllCardMembers||e.showAllBoardMembers||e.showAllCommenters)&&this.$(".js-select-multiple-options").removeClass("hide")),this.options.button?this.fillMentionables(this.allMentionables):this.options.input&&this.filterMentionables(),this},t.prototype.getCard=function(){return this.options.card},t.prototype.getTextInput=function(){return n(this.options.target)},t.prototype.getMentionables=function(){var e,t,r,n,i,s,a,u,c;return c=o.myId(),n=this.getCard(),t=n.getBoard(),u=function(e){return function(t){return h.chain(t).without(c).map(function(t){return{id:t,names:d.getMemNameArrayFromId(e.modelCache,t),type:"member"}}).value()}}(this),i=u(n.getIdCardMems()),r=u(t.getIdBoardMems()),s=u(n.getIdCommenters()),a=[{type:"extra",text:"card",names:["all","card"],extraText:m(["automentioner","all-members-on-card"])},{type:"extra",text:"board",names:["all","board"],extraText:m(["automentioner","all-members-on-board"])}],e=h.uniq(i.concat(r,s,a)),{cardMentionables:i,boardMentionables:r,commenterMentionables:s,allMentionables:e}},t.prototype.clearMentionables=function(){return this.$mentionablesList.empty()},t.prototype.keydownEvent=function(e){
var t;((t=s.getKey(e))===a.Enter||t===a.Tab)&&(d.stop(e),this.$mentionablesList.find(".item.selected:first .js-select-member").click())},t.prototype.keyupEvent=function(e){var t;if(t=s.getKey(e),t===a.Enter||t===a.Tab||t===a.ArrowLeft||t===a.ArrowRight);else{if(t!==a.ArrowUp&&t!==a.ArrowDown)return this.filterMentionables();d.stop(e),d.navMenuList(this.$mentionablesList,".item",t)}},t.prototype.filterMentionables=function(e){var t,r,o,i;return this.clearMentionables(),this.options.button?o=n(".js-filter-mentionables").val().trim().toLowerCase():this.options.input&&(t=this.getTextInput(),i=d.getWordFromCaret(t),o=i.str.substring(1).toLowerCase()),r=this.filterMentionablesForMatches(o),this.options.input&&0===r.length?void this.setTimeout(function(){return u.hide()},5):(this.fillMentionables(r),d.selectMenuItem(this.$mentionablesList,".item",this.$mentionablesList.find(".item").first()))},t.prototype.filterMentionablesForMatches=function(e){var t;return t=RegExp("^"+d.escapeForRegex(e)),h.filter(this.getMentionables().allMentionables,function(e){return h.any(e.names,function(e){return t.test(e)})})},t.prototype.hoverItem=function(e){var t;return t=n(e.target).closest(".item"),d.selectMenuItem(this.$mentionablesList,".item",t)},t.prototype.deselectMember=function(e){return this.$mentionablesList.find(".item").removeClass("selected")},t.prototype._membersFromIds=function(e){return h.compact(h.map(e,function(e){return function(t){return e.modelCache.get("Member",t)}}(this)))},t.prototype.fillMentionables=function(e){var t,r,n,o,i,s,a,u;for(e=h.groupBy(e,"type"),a=this._membersFromIds(h.pluck(e.member,"id")).slice(0,6),this.$mentionablesList.empty(),r=0,o=a.length;o>r;r++)s=a[r],this.appendSubview(this.subview(l,s),this.$mentionablesList);if(null!=e.extra)for(u=e.extra,n=0,i=u.length;i>n;n++)t=u[n],this.$mentionablesList.append(new c(t).render().el);this.$(".js-empty-list").toggleClass("hide",h.keys(e).length>0)},t.prototype.insertMember=function(e){var t,r,o,i;d.stop(e),g("Card Detail","Mention Member Autocomplete","Insert"),r=n(e.currentTarget).attr("autocompleteText"),t=this.getTextInput(),this.options.input?(i=d.getWordFromCaret(t),d.insertSelection(t,"@"+r+" ",i.start,i.end)):(o=d.getCaretPosition(t),null!=o&&(i={start:o,end:o}),d.insertSelection(t,"@"+r+" ",null!=i?i.start:void 0,null!=i?i.end:void 0)),u.hide()},t.prototype.selectAllCardMembers=function(e){var t,r;d.stop(e),g("Card Detail","Mention Member Autocomplete","Insert - All Card Members"),t=this.getTextInput().focus(),r="@card ",d.insertSelection(t,r),u.hide()},t.prototype.selectAllBoardMembers=function(e){var t,r;d.stop(e),g("Card Detail","Mention Member Autocomplete","Insert - All Board Members"),t=this.getTextInput().focus(),r="@board ",d.insertSelection(t,r),u.hide()},t.prototype.selectAllCommenters=function(e){var t,r,n,o,i,s,a;for(d.stop(e),g("Card Detail","Mention Member Autocomplete","Insert - All Commenters"),t=this.getTextInput().focus(),n="",s=this._membersFromIds(this.commenterMentionables),r=0,o=s.length;o>r;r++)i=s[r],a=i.get("username"),n+="@"+a+" ";d.insertSelection(t,n),u.hide()},t}(p)},{}],405:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function r(){this.constructor=e}for(var n in t)y.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},y={}.hasOwnProperty;n=e("jquery"),s=e(80),a=e(16),u=e(30),c=e(458),l=e("bluebird"),d=e(109),p=e(441),h=e("underscore"),m=e(112),f=e(438),g=e(38),o=e(191),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.viewTitleKey="add card",t.prototype.events={"mouseenter .js-select-card":"hoverItem","click .js-select-card":"selectCard",keydown:"keydownEvent","keyup .js-search":"keyupEvent","input .js-search":"updateSearch"},t.prototype.initialize=function(){return this.cards=[],this.debouncedSearch=this.debounce(this.search,200).bind(this)},t.prototype.render=function(){var e,t;return t=this,e={},this.options.input&&(e.input=!0),this.options.button&&(e.button=!0,e.hideLoading=!0),this.$el.html(f.fill("popover_card_completer",e)),this.renderCards()},t.prototype.renderCards=function(){var e,t,r,n,o;return e=this.$(".js-card-list").empty(),n=function(){var e,n,i,s;for(i=this.cards,s=[],e=0,n=i.length;n>e;e++)r=i[e],o=r.toJSON(),t=r.getBoard(),null!=t&&(o.boardName=t.get("name")),s.push(f.fill("select_card",o));return s}.call(this),e.append(n),this.$(".js-loading").addClass("hide"),d.selectMenuItem(e,".item",e.find(".item").first()),this},t.prototype.keyupEvent=function(e){var t;t=s.getKey(e),(t===a.ArrowUp||t===a.ArrowDown)&&(d.stop(e),d.navMenuList(this.$(".js-card-list"),".item",t))},t.prototype.updateSearch=function(e){var t;return t=this.$(".js-search").val(),this.debouncedSearch(t)},t.prototype.keydownEvent=function(e){var t,r,n;return t=this.$(".js-card-list"),((n=s.getKey(e))===a.Enter||n===a.Tab)&&(d.stop(e),r=t.find(".item.selected:first .js-select-card"),r.length>0)?r.click():void 0},t.prototype.getTextInput=function(){return n(this.options.target)},t.prototype.search=function(e,t){var r,n,i,s,a;if(null==t&&(t=function(){}),e!==this._lastQuery){if(this._lastQuery=e,""===e)return this.cards=[],this.renderCards(),void t(null,[]);if(d.isShortId(e)&&(n=this.options.card,r=null!=n?n.getBoard():void 0,null!=r))return i=null!=(s=r.getCard(e))?l.resolve(s):u.loadCardData(r.id,e),void i.then(function(e){return[e]}).catch(o.NotFound,o.Unauthorized,function(){return[]}).tap(function(e){return function(t){return e.cards=t}}(this)).nodeify(t).catch(function(){}).done();a={query:e,modelTypes:"cards",partial:!0},u.loadSearchData(a).nodeify(function(r){return function(n,o){return e===r._lastQuery?null==n?(r.cards=h.chain(o.cards).map(function(e){return r.modelCache.get("Card",e.id)}).sortBy(function(e){return e.get("idBoard")===r.model.get("idBoard")?0:1}).value(),r.options.input&&h.isEmpty(r.cards)&&c.hide(),r.renderCards(),t(null,o.cards)):(r.options.input&&c.hide(),t(n)):void 0}}(this))}},t.prototype.hoverItem=function(e){var t,r;return t=this.$(".js-card-list"),r=n(e.target).closest(".item"),d.selectMenuItem(t,".item",r)},t.prototype.selectCard=function(e){var t,r;d.stop(e),r=n(e.target).closest(".js-select-card").attr("id"),t=this.modelCache.get("Card",r),null!=t&&this.insertCard(t),c.hide()},t.prototype.insertCard=function(e){var t,r,n,o,i;return o=e.get("url"),t=this.getTextInput(),this.options.input?(i=d.getLineFromCaret(t),n=i.str.lastIndexOf("#"),-1!==n&&(i.start+=n)):(r=d.getCaretPosition(t),null!=r&&(i={start:r,end:r})),d.insertSelection(t,o+" ",null!=i?i.start:void 0,null!=i?i.end:void 0),g("Card Detail","Comment Box - Added Card",this.options.input?"inline":"via menu")},t}(p)},{}],406:[function(e,t,r){var n,o,i,s,a,u,c,l,d;n=e("jquery"),o=e(364),i=e(404),s=e(405),u=e(407),c=e(458),l=e(109),d=e(38),t.exports=a=function(){function e(){}return e.prototype.openEmojiCompleter=function(e){return l.stop(e),c.pushView({view:this.getEmojiCompleterView("button")})},e.prototype.openAutoMentioner=function(e){return l.stop(e),c.pushView({view:this.getAutoMentionerView("button")}),d("Card Detail","Mention Autocomplete","Open Menu - With Click")},e.prototype.getAutoMentionerView=function(e){var t;return t=this.getCard(),new i({model:t,button:"button"===e,input:"input"===e,target:this.getTextInput(),card:t,modelCache:this.modelCache})},e.prototype.getEmojiCompleterView=function(e){var t;return t=this.getCard(),new u({model:t,button:"button"===e,input:"input"===e,target:this.getTextInput(),card:t,modelCache:this.modelCache})},e.prototype.getCardCompleterView=function(e){var t;return t=this.getCard(),new s({model:t,button:"button"===e,input:"input"===e,target:this.getTextInput(),card:t,modelCache:this.modelCache})},e.prototype.getInputCardCompleterView=function(){var e;return e=this.getCard(),new s({model:e,input:!0,target:this.getTextInput(),card:e,modelCache:this.modelCache})},e.prototype.commentAddAttachment=function(e){var t;e.preventDefault(),t=this.getCard(),c.toggle({elem:n(e.currentTarget),keepEdits:!0,view:o,options:{model:t,modelCache:this.modelCache}}),d("Card Detail","Comment Box - Open Attachment Type Picker")},e.prototype.commentMentionMember=function(e){e.preventDefault(),c.toggle({elem:n(e.currentTarget),keepEdits:!0,view:this.getAutoMentionerView("button")}),d("Card Detail","Comment Box - Mention Members")},e.prototype.commentAddEmoji=function(e){e.preventDefault(),c.toggle({elem:n(e.currentTarget),keepEdits:!0,view:this.getEmojiCompleterView("button")}),d("Card Detail","Comment Box - Add Emoji")},e.prototype.commentAddCard=function(e){e.preventDefault(),c.toggle({elem:n(e.currentTarget),keepEdits:!0,view:this.getCardCompleterView("button")}),d("Card Detail","Comment Box - Add Card")},e}()},{}],407:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=function(e,t){function r(){this.constructor=e}for(var n in t)b.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},b={}.hasOwnProperty,w=[].slice;n=e("jquery"),o=e(25),s=e(408),a=e(80),u=e(16),c=e(30),l=e(458),p=e(109),h=e(441),m=e("underscore"),g=e(438),v=e(38),d=e("emoji-map"),f=e(84),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.viewTitleKey="emoji",t.prototype.events={"mouseenter .js-select-emoji":"hoverItem","click .js-select-emoji":"selectEmoji",keydown:"keydownEvent","keyup .js-filter-emoji":"keyupEvent","click .js-upload-emoji":"openEmojiUploader"},t.prototype.initialize=function(){this._customEmoji={},o.me().isFeatureEnabled("customEmoji")&&(this.listenTo(o.me().customEmojiList,"change add remove reset",this.updateCustomEmoji),this.updateCustomEmoji())},t.prototype.render=function(){var e,t;return t=this,e={},this.options.input&&(e.input=!0),this.options.button&&(e.button=!0),this.$el.html(g.fill("popover_emoji_completer",e)),this.$emojiList=this.$(".js-available-emoji"),this.options.input&&this.filterEmoji(this.getInput()),this.options.button&&this.fillDefaultEmojiList(),this},t.prototype.keyupEvent=function(e){var t,r;return r=a.getKey(e),r===u.ArrowUp||r===u.ArrowDown?(p.stop(e),void p.navMenuList(this.$emojiList,".item",r)):r!==u.Enter&&r!==u.Tab?(t=this.getInput(),this.filterEmoji(t)):void 0},t.prototype.keydownEvent=function(e){var t,r;return((r=a.getKey(e))===u.Enter||r===u.Tab)&&(p.stop(e),t=this.$emojiList.find(".item.selected:first .js-select-emoji"),t.length>0)?t.click():void 0},t.prototype.updateCustomEmoji=function(){return this._customEmoji=m.object(o.me().customEmojiList.map(function(e){return[e.get("name"),e.get("value")]})),this.render()},t.prototype.getTextInput=function(){return n(this.options.target)},t.prototype.getInput=function(){var e,t;return this.options.button?this.$(".js-filter-emoji").val():(e=this.getTextInput(),t=p.getWordFromCaret(e),t.str.substring(1))},t.prototype.filterEmoji=function(e){return this.clearEmojiList(),this.fillEmojiList(e)?p.selectMenuItem(this.$emojiList,".item",this.$emojiList.find(".item").first()):void 0},t.prototype.renderEmojiList=function(e){var t,r,n,o,i;for(n=0,o=e.length;o>n;n++)r=e[n],t={name:r,image:null!=(i=this._customEmoji[r])?i:d[r]},this.$emojiList.append(g.fill("select_emoji",t));return this},t.prototype.fillDefaultEmojiList=function(e){var t;t=["thumbsup","smile","warning","sunglasses","ballot_box_with_check","facepalm"],this.renderEmojiList(t)},t.prototype.fillEmojiList=function(e){var t,r;return r=e.replace(/\W+/g,""),""===e?(this.fillDefaultEmojiList(),!1):/[A-Z]/.test(r)&&this.options.input?(l.hide(),!1):(r=r.toLowerCase(),this.$(".js-upload-emoji").text(f("upload emoji named",{emojiName:r})).attr("data-emojiname",r),this.$(".js-no-matching-emoji-helper").text(f("no matching emoji helper",{emojiName:r})),t=this.getEmojiSuggestions(r).slice(0,6),t.length>0?(this.$(".js-results").removeClass("hide"),this.$(".js-no-results").addClass("hide"),this.renderEmojiList(t)):(this.$(".js-results").addClass("hide"),this.$(".js-no-results").removeClass("hide")),0!==t.length)},t.prototype.clearEmojiList=function(){return this.$emojiList.empty()},t.prototype.getEmojiSuggestions=function(e){var t,r,n,o,i,s,a,u,c;if(a=RegExp("^"+p.escapeForRegex(e)),t=function(){var e;e=[];for(i in this._customEmoji)a.test(i)&&e.push(i);return e}.call(this),c=function(){var e;e=[];for(i in d)a.test(i)&&e.push(i);return e}(),null==this._sortOverride)for(u=["thumbsup","smile","warning","sunglasses","facepalm","question","thumbsdown","wink","smiley","smile_cat","bowtie","heart","laughing","bug","cry","dancer","dancers","clap","shipit","white_check_mark","star","arrow_down","point_down","point_up","point_left","metal"],this._sortOverride={},o=n=0,s=u.length;s>n;o=++n)r=u[o],this._sortOverride[r]=o+1;return m.uniq(w.call(t).concat(w.call(c))).sort(function(e){return function(t,r){var n,o;return n=e._sortOverride[t],o=e._sortOverride[r],n&&!o?-1:o&&!n?1:(n&&o&&(t=n,r=o),r>t?-1:t>r?1:0)}}(this))},t.prototype.hoverItem=function(e){var t;return t=n(e.target).closest(".item"),p.selectMenuItem(this.$emojiList,".item",t)},t.prototype.selectEmoji=function(e){var t;p.stop(e),t=n(e.target).closest(".js-select-emoji").find(".emoji-name").text(),this.insertEmoji(t),l.hide()},t.prototype.insertEmoji=function(e){var t,r,n;return t=this.getTextInput(),this.options.input?n=p.getWordFromCaret(t):(r=p.getCaretPosition(t),null!=r&&(n={start:r,end:r})),p.insertSelection(t,":"+(""+e).trim()+": ",null!=n?n.start:void 0,null!=n?n.end:void 0),v("Emoji Select",e)},t.prototype.openEmojiUploader=function(e){var t;p.stop(e),t=this.$(e.target).attr("data-emojiname"),l.pushView({keepEdits:!0,view:s,options:{model:o.me(),emojiName:t,completerView:this}}),v("Card Detail","Open Custom Emoji Uploader")},t}(h)},{}],408:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h={}.hasOwnProperty;n=e("jquery"),o=e(451),i=e(25),a=e(458),u=e(109),c=e(441),d=e(438),l=e(84),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="upload emoji",t.prototype.events=function(){return{"click .js-upload-emoji":"uploadEmoji","change .js-upload-emoji-file":"fileChange","input .js-emoji-name":"nameChange"}},t.prototype.initialize=function(e){var t,r,n,o,i;for(this.completerView=e.completerView,this.hasGold=this.model.isFeatureEnabled("customEmoji"),this.hasBCGold=!1,o=this.model.organizationList.models,i=[],t=0,r=o.length;r>t&&(n=o[t],this.hasBCGold=n.isFeatureEnabled("goldMembers"),!this.hasBCGold);t++)i.push(void 0);return i},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON(),e.emojiName=this.options.emojiName,e.hasGold=this.hasGold,e.hasBCGold=this.hasBCGold,e.canUpload=this.hasGold||this.hasBCGold,this.$el.html(d.fill("popover_emoji_uploader",e)),this._validate(),this.renderEmoji(),this},t.prototype.getName=function(){return this.$(".js-emoji-name").val().trim().toLowerCase().replace(/\s+/g,"_")},t.prototype.renderEmoji=function(){var e,t,r,n,o;return this.$(".js-emoji-preview-name").text(":"+(this.getName()||"???")+":"),e=this.$(".js-emoji-preview"),t=this.$(".js-upload-emoji-file"),r=null!=(o=t.prop("files"))?o[0]:void 0,/^image\/.*/.test(null!=r?r.type:void 0)?(n=new FileReader,n.onload=function(e){return function(t){return e.$(".js-emoji-conversion").removeClass("hide"),e.$(".js-emoji-preview").attr("src",t.target.result)}}(this),n.readAsDataURL(r)):this.$(".js-emoji-conversion").addClass("hide"),this},t.prototype.fileChange=function(e){var t,r,o,i,s,a,u;return r=this.$(".js-emoji-name"),t=this.$(".js-upload-emoji-file"),""===r.val()&&(i=n(e.target),o=null!=(a=t.prop("files"))?a[0]:void 0,null!=o?s=o.name:t.val()&&(s=null!=(u=/[^\/]+$/.exec(t.val()))?u[0]:void 0),null==s&&(s=""),s=s.split(".")[0],s=s.toLowerCase().replace(/[^a-z0-9_]/g,""),r.val(s),this.$(".js-emoji-name").focus().select()),this.renderEmoji(),this._validate()},t.prototype.nameChange=function(e){return this.renderEmoji(),this._validate()},t.prototype._validate=function(e){var t,r,n,o,i,s;return n=this.getName(),t=this.$(".js-upload-emoji-file"),o=/^[a-z0-9_\s]+$/.test(n),r=(null!=(i=t.prop("files"))?i.length:void 0)>0||t.val(),s=o&&r&&(this.hasGold||this.hasBCGold),this.$(".js-invalid-name").toggleClass("hide",o||""===n),this.$(".js-upload-emoji").toggleClass("disabled",!s)},t.prototype.uploadEmoji=function(e){var t,r,s,c,l,d,p;if(u.stop(e),!n(".js-upload-emoji").hasClass("disabled")){if(this.$(".error").addClass("hide"),t=this.$(".js-upload-emoji-file"),s=null!=(p=t.prop("files"))?p[0]:void 0,c=this.getName(),l=function(e){return function(){return e.completerView.insertEmoji(c),a.hide()}}(this),!s&&t.val())return void u.uploadFile(i.myToken(),t,l);if(null!=s&&!u.validFileSize(s))return void o.flash("file too large","error");if(null!=s&&c)return d=new FileReader,r=new FormData,r.append("token",i.myToken()),r.append("file",s),r.append("name",c),d.onload=function(e){return function(t){return e.model.customEmojiList.create({url:t.target.result,name:c},{data:r,processData:!1,contentType:!1,success:l,error:function(){return this.$(".error").removeClass("hide")}})}}(this),d.readAsDataURL(s)}},t}(c)},{}],409:[function(e,t,r){var n,o,i,s,a,u,c,l,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p={}.hasOwnProperty;n=e(406),i=e(80),s=e(16),a=e(109),u=e(441),c=e(89),l=e(438),t.exports=c(n,o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="options",t.prototype.events=function(){return{"click .js-open-mention-selector":"openAutoMentioner","click .js-open-emoji-selector":"openEmojiCompleter",keydown:"keydownEvent"}},t.prototype.render=function(){return this.$el.html(l.fill("popover_insertion_menu")),this},t.prototype.keydownEvent=function(e){var t;return t=i.getKey(e),t===s.Enter?(a.stop(e),this.$emojiList.find(".item.selected:first .js-select-emoji").click()):t===s.Enter?(a.stop(e),this.$memList.find(".item.selected:first .js-select-member").click()):void 0},t.prototype.getCard=function(){return this.model.getCard()},t.prototype.getTextInput=function(){return this.options.parent.getTextInput()},t}(u))},{}],410:[function(e,t,r){var n,o;o=e(84),n={getPermLevelAltText:function(e){return o(["board perms",e,"short summary"])},getPermLevelAltTextForBoard:function(e){return n.getPermLevelAltText(e.getPermLevel())},getPermLevelIconClass:function(e){return"org"===e?"organization-visible":e},getPermLevelIconClassForBoard:function(e){return n.getPermLevelIconClass(e.getPermLevel())}},t.exports=n},{}],411:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty,l=[].slice;n=e("jquery"),i=e(441),s=e("underscore"),a=e(35),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(){return this.listenPropagators={},this.listenTo(this.collection,{sort:this.sort,add:this.addModel,remove:this.removeModel,reset:this.reset}),t.__super__.initialize.apply(this,arguments)},t.prototype.getModels=function(){return this.collection.models},t.prototype.subview=function(){var e,r,n;return n=t.__super__.subview.apply(this,arguments),null==(e=this.listenPropagators)[r=n.cid]&&(e[r]=this.listenTo(n,"all",function(e){return function(){var t,r;return r=arguments[0],t=2<=arguments.length?l.call(arguments,1):[],e.trigger.apply(e,[r,n].concat(l.call(t)))}}(this))),n},t.prototype.addModel=function(e,t){var r;a("render","adding "+this.collection.model.name+" to "+this.viewType.name),r=this.subview(this.viewType,e),this.el&&this.insertSubview(r,s.indexOf(this.getModels(),e))},t.prototype.removeModel=function(e,t){return a("render","removing "+this.collection.model.name+" from "+this.viewType.name),this.removeSubview(this.viewForModel(e))},t.prototype.reset=function(e,t){var r,n,o,i,s,a,u,c;for(u=t.previousModels,o={},c=e.models,r=0,i=c.length;i>r;r++)a=c[r],o[a.cid]=!0;for(n=0,s=u.length;s>n;n++)a=u[n],o[a.cid]||this.removeModel(a);return this.sort()},t.prototype.sort=function(){var e,t,r,n,o;for(o=this.getModels(),t=e=0,r=o.length;r>e;t=++e)n=o[t],this.moveSubviewToPosition(this.subview(this.viewType,n),t)},t.prototype.render=function(){var e;return a("render","rendering "+this.getModels().length+" "+this.collection.model.name+"s into "+this.viewType.name),this.appendSubviews(function(){var t,r,n,o;for(n=this.getModels(),o=[],t=0,r=n.length;r>t;t++)e=n[t],o.push(this.subview(this.viewType,e));return o}.call(this)),this},t.prototype.viewForModel=function(e){return this.existingSubview(this.viewType,e)},t.prototype.removeSubview=function(e){return this.deleteSubview(e)},t.prototype.insertSubview=function(e,t,r){null==r&&(r=this.$el),a("render","inserting "+e.$el.find("h2").text()+" at position "+t),"number"==typeof t?t=0>=t?r.children().eq(0):t<r.children().length?r.children().eq(t):void 0:t instanceof i&&(t=t.$el),e.$el.is(":empty")&&(e.delegateEvents(),e.render()),(null!=t?t.length:void 0)>0?e.$el.insertBefore(t):r.append(e.$el)},t.prototype.moveSubviewToPosition=function(e,t,r){var o,i,s,u,c;if(null==r&&(r=this.$el),e.$el.is(":empty"))return void this.insertSubview(e,t,r);for(c=r.children(".placeholder,.card-composer"),i=0,u=c.length;u>i;i++)s=c[i],n(s).index()<=t&&t++;o=e.$el.index(),o!==t&&(a("render","moving "+e.$el.find("h2").text()+" into position "+t),0===t?r.prepend(e.$el):t>=r.children().length?r.append(e.$el):e.$el.insertAfter(r.children().eq(t-1)))},t}(i)},{}],412:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m;n=e("underscore"),o=e(103),p=e(108),d=e(413),a=d.getTypes,s=d.getDropped,l=function(e,t){document.addEventListener(e,t)},h=function(e,t,r,n){var o,i,s;for(o=0,i=r.length;i>o;o++)s=r[o],p(e,t+":"+s,n)},i=function(e){var t;return e?(t=i(e.parentElement),t.push(e),t):[]},u=[],c=null,m=function(e,t){var r,n,s,a,l,d,p,m,f;if(clearTimeout(c),!(u.length>0&&u[u.length-1]===e)){for(p=i(e),s=o(p,u,function(e,t){return e===t}),m=u.slice(s),n=0,l=m.length;l>n;n++)r=m[n],h(r,"dd-leave",t,{bubbles:!1});for(f=p.slice(s),a=0,d=f.length;d>a;a++)r=f[a],h(r,"dd-enter",t,{bubbles:!1});return u=p}},l("dragenter",function(e){return m(e.target,a(e.dataTransfer)),e.preventDefault()}),l("dragover",function(e){var t;return t=a(e.dataTransfer),t.length>0&&(e.dataTransfer.dropEffect="copy"),m(e.target,t),e.preventDefault()}),l("dragleave",function(e){var t;return t=a(e.dataTransfer),c=setTimeout(function(){return m(null,t)},200)}),l("dragend",function(e){return m(null,[])}),l("drop",function(e){var t;t=a(e.dataTransfer),s(e).then(function(r){var n,o;for(o in r)n=r[o],p(e.target,"dd-drop:"+o,{detail:n});return m(null,t)}),e.preventDefault()})},{}],413:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w;n=e("bluebird"),o=e("underscore"),w=e(124),p=function(e){var t;return t=function(){switch(e.kind){case"file":return"files";case"string":switch(e.type){case"text/uri-list":return"url";case"text/plain":return"text"}}}(),t||"unknown"},g=function(e){return o.chain(e.items).map(p).compact().uniq().value()},h=function(e){switch(e){case"Files":case"application/x-moz-file":return"files";case"Url":case"text/x-moz-url":case"text/uri-list":return"url";case"Text":case"text/plain":return"text";default:return"unknown"}},v=function(e){return o.chain(e.types).map(h).compact().uniq().value()},f=function(e){return e.files.length>0?["files"]:[]},l=function(e){return n.all(o.toArray(e.items).map(function(e){var t;return t=p(e),"text"===t||"url"===t?new n(function(r){return e.getAsString(function(e){return r({type:t,content:e})})}):"files"===t?{type:t,content:e.getAsFile()}:null}))},u=function(e){return o.map(e.files,function(e){return{type:"files",content:e}})},c=function(e){var t;return t=e.types,null==t&&(t=e.getData("Text")?["Text"]:[]),o.map(t,function(t){var r,n;return n=h(t),"text"!==n&&"url"!==n||!(r=e.getData(t))?null:{type:n,content:r}})},i=function(e){return n.all(s.map(function(t){return t(e)})).then(function(e){return o.chain(e).flatten().compact().each(function(e){"text"===e.type&&w(e.content)&&(e.type="url")}).reject(function(e){return"url"===e.type&&!w(e.content)}).groupBy("type").mapObject(function(e,t){return"files"===t?o.pluck(e,"content"):e[0].content}).value()})},b=function(){return/mac/i.test(navigator.platform)&&/safari/i.test(navigator.userAgent)},y=function(e){var t;return t=window.DataTransfer||window.Clipboard,t?t.prototype.hasOwnProperty(e)||"types"===e&&b()||!window.DataTransfer&&"files"===e&&b():!1},m=y("items")?g:y("types")?v:y("files")?f:function(){return[]},s=y("items")?[l]:o.compact([y("files")?u:void 0,y("getData")&&y("types")?c:void 0]),a=function(e){return i(e.dataTransfer)},d=function(e){return null!=e.clipboardData?i(e.clipboardData):null!=window.clipboardData?i(window.clipboardData):n.resolve({})},t.exports={getTypes:m,getDropped:a,getPasted:d}},{}],414:[function(e,t,r){var n,o;n=e("jquery"),t.exports=o=function(){function e(){}return e.prototype.checkLength=function(e){var t,r,o,i;i=n(e.target).val(),o=this.maxLength||16384,t=0===i.length||/^\s*$/.test(i),r=!t&&i.length>o,null!=this.preventSubmit?this.preventSubmit(r,t):this._preventSubmit(r,t)},e.prototype._preventSubmit=function(e,t){return this.$(".js-too-long-warning").toggleClass("hide",!e),this.$(".js-is-empty-warning").toggleClass("hide",!t),this.$('input[type="submit"]').prop("disabled",t||e)},e}()},{}],415:[function(e,t,r){var n,o,i,s,a;a=e("moment"),n=e("underscore"),i=e(84),o=function(e,t){var r,o,i,s,a;for(i=0,s=t.length;s>i;i++){if(o=t[i],!n.isArray(o))return o;if(r=o[0],a=o[1],r>=e)return a}throw new Error("no matching dispatch value for "+e+"!")},s=function(e){var t;return t=null,function(r){return null==t&&(t=e()),o(a(r).diff(a(),"hours",!0),t)}},t.exports={classForDueDate:s(function(){return[[-36,"is-due-past"],[0,"is-due-now"],[24,"is-due-soon"],"is-due-future"]}),titleForDueDate:s(function(){return[[-36,i("badge.due.overdue")],[0,i("badge.due.recently overdue")],[1,i("badge.due.less than an hour")],[24,i("badge.due.less than a day")],i("badge.due.later")]}),relativeInfoForDueDate:s(function(){return[[-36,i("badge.due.overdue short")],[0,i("badge.due.recently overdue short")],[24,i("badge.due.due soon short")],null]})}},{}],416:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_=function(e,t){function r(){this.constructor=e}for(var n in t)k.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},k={}.hasOwnProperty;n=e("jquery"),o=e(404),i=e(455),a=e(407),v=e(114),u=e(80),c=e(16),l=e(456),d=e(458),p=e(97),h=e(109),m=e(441),f=e("underscore"),b=e(35),w=e(438),y=e(84),g=e(75),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _(t,e),t.prototype.allowNewlines=!0,t.prototype._draftKey=function(e){return"draft_"+this.model.id+"_"+e},t.prototype._saveDraft=function(e,t){return p.set(this._draftKey(e),t)},t.prototype._recallDraft=function(e){return p.get(this._draftKey(e))},t.prototype._discardDraft=function(e){return p.unset(this._draftKey(e))},t.prototype.editField=function(e){var t,r,o;return r=n(e.target).closest("a"),r.length>0&&"#"!==r.attr("href")||i.sorting||v()||(h.stop(e),d.hide(),t=n(e.target).closest(".editable"),0===t.length)?void 0:(o=t.attr("attr"),this.edit(o))},t.prototype.edit=function(e){var t,r,n,o,i,s,a,u,c;e.indexOf(".")>-1&&(c=e.split("."),e=c[1]),t=this.$("[attr="+e+"]"),u=this.$(".js-no-higher-edits [attr="+e+"]"),r=t.not(u),0!==r.length&&(l.cancelEdits(),o=r.find(".edit:first"),0!==o.length&&(i=r.find(".field:first"),a=i.is("textarea"),s=i.parent().is(".card-detail-edit"),n=r.find(".current"),o.append(w.fill("edit_controls")),o.hasClass("delete")||o.find(".delete").remove(),o.hasClass("convert")||o.find(".convert").remove(),o.hasClass("options-menu")||o.find(".options-menu").remove(),r.addClass("editing"),""===i.val()&&i.val(h.traverse(this.model.attributes,null!=c?c:e)),this.waitForId(this.model,function(t){return function(){return i.data("draftKey",t._draftKey(e))}}(this)),b("editable",this.model),i.focus().select().autosize({append:!1})))},t.prototype.recallDrafts=function(){var e,t,r;return r=this,e=this.$("[attr]"),t=this.$(".js-no-higher-edits [attr]"),e.not(t).each(function(e){return function(t,o){var i,s,a,u;i=n(o),a=i.attr("attr"),null!=e.model.id&&(u=r._recallDraft(a),null!=u&&(s=i.find(".field:first"),s.val(u),e.defer(function(){return i.find(".edits-warning").show()})))}}(this))},t.prototype.stopEditing=function(e){return h.stop(e),l.cancelEdits(),!1},t.prototype.clearEdits=function(e){var t,r;return h.stop(e),t=n(e.target).closest(".editable[attr]"),r=t.attr("attr"),null!=r&&this._discardDraft(r),t.find(".field").val(""),t.find(".edits-warning").hide(),t.find(".edits-error").hide(),l.cancelEdits(),!1},t.prototype.validate=function(){var e,t,r,o,i,s,a,u,c;for(a=this.$(".editing.non-empty .field"),r=0,i=a.length;i>r;r++)if(e=a[r],/^\s*$/.test(n(e).val()))return!1;for(u=this.$(".editing .field"),o=0,s=u.length;s>o;o++)if(e=u[o],t=(null!=(c=n(e).val())?c:"").length,t>16384)return n(".editing").find(".edits-error").text(y("text too long",{over:g(t-16384)})).show(),!1;return!0},t.prototype.keydownEvent=function(e){var t;t=u.getKey(e),l.isEditing()&&(d.view instanceof a||d.view instanceof o?"function"==typeof this.checkInsert&&this.checkInsert(e):u.isForceSubmitEvent(e)||t===c.Enter&&(!n(e.target).is("textarea")||n(e.currentTarget).hasClass("single-line"))&&!e.shiftKey?(h.stop(e),this.commitEdits(e)):t!==c.Enter||this.allowNewlines||h.stop(e))},t.prototype.commitEdits=function(e){var t,r,o,i;return h.stop(e),t=n(e.target).closest(".editable.editing[attr]"),t.find(".edits-error").hide(),this.validate()?(i=this,o=this.model,r=this.customSet,t.remove("input[type=submit]"),t.removeClass("editing").each(function(){var e,r;return e=n(this).attr("attr"),r=n(this).find(".field").val(),i.allowNewlines||(r=r.replace(/[\r\n]+/g," ")),0===n.trim(r).length&&(r=""),o.get(e)===r?i._discardDraft(e):o.update(e,r,function(r){null!=r?t.find(".edits-error").text(r.message).show():i._discardDraft(e)})}).find(".field").val(""),t.find(".edits-warning").hide(),!0):void 0},t.prototype.clickSetting=function(e){var t,r,o,i;t=n(e.target),t.hasClass("disabled")||t.closest(".js-disabled").length||(r=t.attr("href"),r&&"#"!==r||(o=t.closest(".pref").attr("name"),o&&(i=t.attr("value"),i=function(){switch(i){case"true":return!0;case"false":return!1;default:return i}}(),this.model.setPref(o,i),this.model.save(),h.stop(e))))},t.prototype.delegateEvents=function(e){var r;return r={"click .current":"editField","click .js-cancel-edit":"clearEdits","click .js-discard-edits":"clearEdits","click .js-view-edits":"editField","click .js-save-edit":"commitEdits","keydown .field":"keydownEvent","click input":h.stopPropagation,"click textarea":h.stopPropagation},null!=this.model.setPref&&(r["click a"]="clickSetting"),t.__super__.delegateEvents.call(this,f.extend(r,e||this.events))},t}(m)},{}],417:[function(e,t,r){var n,o,i,s,a,u,c;u=e(84),o=e(458),i=e("react"),c=e(433)("file_link_handler"),s=e(109),a=e("underscore"),n=i.createClass({displayName:"FileLinkComponent",render:function(){var e;return e=this.props.url,c.render(function(){return c.div(function(){return c.p(function(){return c.format("browsers-prevent-file-links")}),c.input(".js-autofocus",{type:"text",value:e,readOnly:!0,onFocus:function(e){return a.defer(function(){return e.target.select()})}})})})}}),t.exports=function(e){return o.show({elem:e,getViewTitle:function(){return u(["view title","open file link"])},reactElement:i.createElement(n,{key:"FileLinkComponent",url:e.href})})}},{}],418:[function(e,t,r){var n,o,i,s,a,u,c,l;
o=e(27),u=e(85),i=e(429),s=e("bluebird"),c=e(227),a=e("underscore"),n=u("FriendlyLink",["BoardRequired"]),l=c.renderable(function(e){var t,r;return t=e.icon,r=e.text,c.img(".known-service-icon",{src:t}),c.text(r)}),t.exports=function(e,t){var r;if(null==t)throw n.BoardRequired();return r="A"===e.tagName?[e]:a.toArray(e.querySelectorAll("a")),s.map(r,function(e){var r;return r=e.href,e.textContent===r?i.one({command:"format-url",board:t,options:{url:r}}).catch(i.Error.NotHandled,function(){return null}).then(function(r){return null!=(null!=r?r.text:void 0)?r:o.interpret(e.href,t.modelCache)}).then(function(t){return null!=t?(e.classList.add("known-service-link"),e.innerHTML=l(t)):void 0}):void 0}).done()}},{}],419:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m;o=e(25),i=e(5),s=e(417),a=e(456),u=e(29),c=e(458),m=e(116),l=e(240),d=e(109),n=e("jquery"),h=function(e){var t,r;if(e=e.replace(/[\?\#].*$/,""),/\.[a-z]+$/i.test(e))return!1;if(/^([bc]|board|card|org)\//.test(e))return!0;if(/^search(\/|$)/.test(e))return!0;if(o.isLoggedIn()){if(RegExp("^"+o.myUsername()+"(/|$)").test(e))return!0;if("/"===e)return!0}if(/^shortcuts\/?$/.test(e))return!0;if(null!=(t=null!=(r=/^[^\/]+/.exec(e))?r[0]:void 0)){if(o.isLoggedIn()&&("me"===t||"my"===t||"you"===t||"your"===t||"username"===t))return!0;if(/^[a-z0-9_]{3,}$/.test(t)){if(null!=u.findOne("Member","username",t))return!0;if(null!=u.findOne("Organization","name",t))return!0}}return!1},p=function(e){var t,r,o,a;t=n(e.target).closest("a"),r=t.attr("href"),r&&"#"!==r?0===r.indexOf("file://")?(d.preventDefault(e),s(t[0])):(0===r.indexOf("/")||0===r.indexOf(siteDomain+"/"))&&(a=r.replace(RegExp("^"+siteDomain),"").replace(/^\/(?=.)/,""),o=a!==location.pathname.slice(1),h(a)&&null==n(this).attr("target")&&(d.preventDefault(e),o&&i.navigate(a,{trigger:!0}))):d.preventDefault(e)},t.exports=function(e){var t,r,o;return n(e.target).is("input")||n(e.target).is("textarea")||e.target.attributes["data-reactid"]?void d.stopPropagation(e):(r=i.getCurrentBoard(),o=r&&i.getCurrentBoardView(),c.isVisible&&0===n(e.target).closest(".pop-over").length?c.hide():l.get("showBoardsListSidebar")&&0===n(e.target).closest(".boards-drawer").length?l.hideUnpinnedSidebar():n(".new-comment").hasClass("focus")?n(".new-comment").removeClass("focus").find("textarea").blur():(null!=r?r.viewState.get("listComposerOpen"):void 0)?null!=r&&r.viewState.set("listComposerOpen",!1):(null!=r?r.composer.get("vis"):void 0)&&!n(e.target).closest(".card-composer").length>0?r.composer.save("vis",!1):a.isEditing()?a.cancelEdits():i.showingCalendar(o)&&0===n(e.target).closest(".calendar-day").length?n(".calendar-day.active").removeClass("active"):n("input, textarea").blur(),t=n(e.target).closest("a"),void(t.length&&m(e)&&p(e)))}},{}],420:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=e(29),o=e("react"),i=e("xtend"),t.exports=function(e){return function(t){function r(e){r.__super__.constructor.apply(this,arguments),this.listeners=[]}return s(r,t),r.prototype.listenTo=function(e,t){return n.on(e,t),this.listeners.push({events:e,callback:t})},r.prototype.componentWillUnmount=function(){return this.listeners.forEach(function(e){var t,r;return r=e.events,t=e.callback,n.off(r,t)})},r.prototype.render=function(){var t;return t=i(this.props,{listenTo:this.listenTo.bind(this)}),o.createElement(e,t)},r}(o.Component)}},{}],421:[function(e,t,r){var n,o;o=e("moment"),n=e(84),t.exports=function(){var e,t;return t=o(),e=n("pasted file name",{date:t.format("l"),time:t.format("LTS")}),e+".png"}},{}],422:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y;c=e("underscore"),o=e(138),n=e(137),s=e(184),u=e("bluebird"),f=e(85),i=e(29),y=e("xtend"),a=f("PluginHandlerContext",["InvalidType","NotSerializable"]),p={},g=function(e){var t,r,n,o;for(null==e&&(e=16),t=[],r=n=0,o=e;o>=0?o>n:n>o;r=o>=0?++n:--n)t.push(Math.floor(10*Math.random()));return t.join("")},h={},l={card:{type:o,serialize:function(e){return{value:e.id}},deserialize:function(e){return i.get("Card",e)}},board:{type:n,serialize:function(e){return{value:e.id}},deserialize:function(e){return i.get("Board",e)}},plugin:{type:s,serialize:function(e){return{value:e.id}},deserialize:function(e){return i.get("Plugin",e)}},el:{type:Element,serialize:function(e){var t;return t=g(),p[t]=e,{value:t,disposer:function(){return delete p[t]}}},deserialize:function(e){return p[e]}}},m=function(e){return c.isString(e)||c.isNumber(e)||c.isBoolean(e)||c.isNull(e)||c.isUndefined(e)?!0:c.isFunction(e)||c.isRegExp(e)||c.isDate(e)?!1:c.isArray(e)?c.every(e,m):c.isObject(e)?m(c.values(e)):!1},v=function(e){var t;return t=[],u.try(function(){return c.mapObject(e,function(e,r){var n,o,i,s;if(null!=(n=l[r])){if(!(e instanceof n.type)){if(null==e)return null;throw a.InvalidType("value in context did not have the expected type")}return i=n.serialize(e),s=i.value,o=i.disposer,null!=o&&t.push(o),s}if(m(e))return e;throw a.NotSerializable("the value for "+r+" was not serializable")})}).disposer(function(){var e,r,n;for(r=0,n=t.length;n>r;r++)(e=t[r])()})},d=function(e){return c.mapObject(e,function(e,t){var r;return null!=e&&l.hasOwnProperty(t)&&null!=(r=l[t])?r.deserialize(e):e})},t.exports={Error:a,serialize:v,deserialize:d,extend:y}},{}],423:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M,B,T,O;n=e("jquery"),y=e("underscore"),M=e(112),c=e(30),l=e(559),d=e(422),p=e(426),h=e(569),m=e(570),f=e(571),g=e(458),B=e(428),v=e("bluebird"),O=e("xtend"),o="Invalid context, missing board",i="Invalid context, missing card",s="Invalid context, missing el (or attempt to use el after initial request)",a="Invalid context, missing list",u="Invalid context, missing plugin",S=function(e,t){var r,n;return r=t.el,null!=r&&(g.contains(r)||g.toggledBy(r))?!0:null!=(n=j(e))&&g.contains(n)?!0:!1},C=null,w=function(){null!=C&&(C.remove(),C=null)},k=null,_=0,b=function(){n(".js-close-board-bar").off(),n(window).off("resize.plugin-board-bar"),null!=k&&(k.remove(),k=null,T(0))},T=function(e){return null==e&&(e=_),_=e,e>window.innerHeight/2&&(e=window.innerHeight/2),n(".board-wrapper").css("bottom",e+"px"),0===n(".plugin-board-bar").length?b():void 0},x={data:function(e,t){var r,n,i,s,a;if(s=t.context,r=s.board,a=s.plugin,n=s.card,null==r)throw e.NotHandled(o);if(null==a)throw e.NotHandled(u);return i=null!=n?n.getPluginData(a.id):void 0,O(r.getPluginData(a.id),i)},set:function(e,t){var r,n,i,s,a,c,l,d;if(i=t.context,c=t.scope,d=t.visibility,s=t.data,r=i.board,a=i.plugin,n=i.card,null==r)throw e.NotHandled(o);if(null==a)throw e.NotHandled(u);if("private"!==d&&"shared"!==d)throw e.NotHandled("Invalid value for visibility");if(!y.isString(s))throw e.NotHandled("Invalid value for data");l=function(){switch(c){case"card":return n||function(){throw e.NotHandled("Card scope not available without card context")}();case"board":return r;case"organization":return r.getOrganization();default:throw e.NotHandled("Invalid value for scope")}}(),l.setPluginData(a.id,d,s)},popup:function(e,t){var r,n,i,a,u,c,l;if(a=t.context,l=t.title,i=t.content,n=t.callback,r=a.board,u=a.el,null==r)throw e.NotHandled(o);if(c=function(){var t;switch(t={model:r,title:l,content:i,callback:n},i.type){case"iframe":return new m(t);case"list":return new f(t);default:throw e.NotHandled("Uknown type for popup")}},S(e,a))g.pushView({view:c()});else{if(null==u)throw e.NotHandled(s);g.toggle({elem:u,view:c()})}},"close-popup":function(e,t){var r;r=t.context,S(e,r)&&g.hide()},"pop-popup":function(e,t){var r;r=t.context,S(e,r)&&g.popView()},overlay:function(e,t){var r,i,s;if(s=t.context,i=t.content,r=s.board,null==r)throw e.NotHandled(o);w(),C=new h({model:r,content:i}),n("body").append(C.render().el)},"close-overlay":function(e,t){var r;if(r=t.context,null==C)throw e.NotHandled("No overlay is being displayed");w()},"board-bar":function(e,t){var r,i,s,a,u;if(s=t.context,i=t.content,r=s.board,a=s.el,null==r)throw e.NotHandled(o);b(),k=new l({model:r,content:i}),n("#content").append(k.render().el),u=i.height||200,T(u),n(".js-close-board-bar").one("click",function(){return b()}),n(window).on("resize.plugin-board-bar",y.debounce(function(){return T()},300))},"close-board-bar":function(e,t){var r;if(r=t.context,null==k)throw e.NotHandled("No board bar is being displayed");b()},resize:function(e,t){var r,n,o,i;if(r=t.context,i=t.width,n=t.height,o=j(e),!o)throw e.NotHandled("Could not find iframe to resize");null!=i&&(o.style.width=i+"px"),n&&(o.style.height=n+"px",o.parentNode.className.indexOf("plugin-board-bar")>-1&&T(n))},card:function(e,t){var r,n,o;if(n=t.context,o=t.fields,null!=(r=n.card))return p.card(r,o);throw e.NotHandled(i)},cards:function(e,t){var r,n,i;if(n=t.context,i=t.fields,null!=(r=n.board))return p.cards(r.openCards(),i);throw e.NotHandled(o)},list:function(e,t){var r,n;return r=t.context,n=t.fields,v.try(function(){var e,t;return null!=(t=r.list)?t:null!=(e=r.card)?null!=(t=e.getList())?t:c.getCardList(e.id):null}).then(function(t){if(null==t)throw e.NotHandled(a);return p.list(t,n)})},lists:function(e,t){var r,n,i;if(n=t.context,i=t.fields,null!=(r=n.board))return p.lists(r.listList.models,i);throw e.NotHandled(o)},board:function(e,t){var r,n,i;if(n=t.context,i=t.fields,null!=(r=n.board))return p.board(r,i);throw e.NotHandled(o)},"attach-to-card":function(e,t){var r,n,o,s,a;if(n=t.context,a=t.url,s=t.name,o=t.mimeType,null!=(r=n.card))return M(r,"uploadUrl",{url:a,name:s,mimeType:o}).return();throw e.NotHandled(i)}},j=function(e){var t;return t=document.querySelectorAll("iframe.plugin-iframe"),y.find(t,function(t){return t.contentWindow===e.source})},t.exports={handlers:y.mapObject(x,function(e){return function(t,r){var n,o;if(null==(n=null!=r?r.context:void 0))throw t.NotHandled("Missing context");return o=function(e){var r,i,s;return r=e.command,s=e.el,i=e.options,v.using(d.serialize({el:s}),function(e){return t.request(r,O(i,{context:d.extend(n,e)})).then(function(e){return function(e){return B(e,o)}}(this))})},r=B(r,o),e.call(x,t,O(r,{context:d.deserialize(n)}))}})}},{}],424:[function(e,t,r){var n,o,i,s,a,u,c;c=e(85),n=e(184),o=e(423),i=e(425),u=e(431),a=c("PluginCache",["InconsistentUrlForId","InvalidArgument"]),s=function(){function e(){this.pluginFromUrl={},this.pluginFromId={}}return e.prototype.Error=a,e.prototype.get=function(e){var t,r,s;if(!(e instanceof n))throw a.InvalidArgument("expected a plugin");if(r=e.id,s=r===u.id&&null!=u.url?u.url:e.get("url"),null!=(t=this.fromId(r))){if(t.manifestUrl!==s)throw a.InconsistentUrlForId("the cached plugin is using a different url");return t}return e=new i(r,s,o.handlers),this.pluginFromUrl[s]=this.pluginFromId[r]=e,e},e.prototype.fromUrl=function(e){return this.pluginFromUrl[e]},e.prototype.fromId=function(e){return this.pluginFromId[e]},e}(),t.exports=new s},{}],425:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m=[].slice,f=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};n=e("jquery"),u=e("underscore"),c=e(105),l=e(85),o=e(194),d=e(228),a=e("bluebird"),s=l("Plugin",["InvalidManifestUrl","UnableToLoadManifest","NotHandled","Timeout"]),p=function(e,t){return c(t,function(t,r){return"url"===r&&u.isString(t)?t.replace(/^\.\//,e):void 0})},h=function(e){var t;return t=d(e).set("hash",null).set("query",null),t.set("pathname",t.pathname.replace(/[^\/]+$/,"")),t.href},t.exports=i=function(){function e(e,t,r){if(this.id=e,this.manifestUrl=t,this.handlers=r,null==this.manifestUrl)throw s.InvalidManifestUrl("invalid url")}return e.Error=s,e.prototype.readFromManifest=function(){var e,t,r,n,o,i,s;for(o=2<=arguments.length?m.call(arguments,0,t=arguments.length-1):(t=0,[]),e=arguments[t++],s=this._loadManifest(),r=0,i=o.length;i>r;r++)n=o[r],s=s.get(n);return s.then(function(t){return u.isUndefined(t)?e:t})},e.prototype.getName=function(){return this.readFromManifest("name","")},e.prototype.getDescription=function(){return this.readFromManifest("description","")},e.prototype.getDetails=function(){return this.readFromManifest("details","")},e.prototype.getImages=function(){return this.readFromManifest("images",[])},e.prototype.getRecommend=function(){return this.readFromManifest("recommend",{})},e.prototype.getIconUrl=function(){return this.readFromManifest("icon","url",null)},e.prototype._loadManifest=function(){return null!=this._manifest?this._manifest:this._manifest=a.try(function(e){return function(){return new a(function(t,r){return n.getJSON(e.manifestUrl).done(t).fail(function(){return r(s.UnableToLoadManifest())})})}}(this)).then(function(e){return function(t){return p(h(e.manifestUrl),t)}}(this))},e.prototype._getIo=function(){return null!=this._io?this._io:this._io=this.readFromManifest("connectors","iframe","url",null).then(function(e){return function(t){return new o(t,e.handlers)}}(this))},e.prototype.request=function(e,t,r){return this._getIo().call("request",e,t,r).catch(o.Error.NotHandled,function(){throw s.NotHandled()}).catch(o.Error.Timeout,function(e){throw s.Timeout(e.message)})},e.prototype.supports=function(e){return this.readFromManifest("capabilities",[]).then(function(t){return f.call(t,e)>=0}).catch(s.UnableToLoadManifest,function(){return!1})},e}()},{}],426:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e("underscore"),i=e(85),n=i("PluginModelSerializer",["InvalidField"]),s=function(e,t,r,i){return null==i&&(i={}),o.chain(r).map(function(r){var o;if(y.call(t,r)<0)throw n.InvalidField();return o=null!=i[r]?i[r](e,r):e.get(r),[r,o]}).object().value()},a=function(e,t){return null==t&&(t=["id","url","name"]),s(e,["id","url","name"],t)},u=function(e,t){return e.map(o.partial(a,o,t))},c=function(e,t){return null==t&&(t=["id","name"]),s(e,["id","name","url","shortLink"],t)},l=function(e,t){var r;return null==t&&(t=["id","name"]),r=["id","name","desc","due","cover","attachments","members","labels","url","shortLink","idList"],s(e,r,t,{attachments:function(){return u(e.attachmentList)},cover:function(){var t,r;return null!=(r=e.get("idAttachmentCover"))&&null!=(t=e.attachmentList.get(r))?a(t):null},labels:function(){return h(e.labelList)},members:function(){return v(e.memberList)}})},d=function(e,t){return null==t&&(t=["id","name"]),e.map(o.partial(l,o,t))},p=function(e,t){return null==t&&(t=["name","color"]),s(e,["name","color"],t)},h=function(e,t){return e.map(o.partial(p,o,t))},m=function(e,t){return null==t&&(t=["id","name"]),s(e,["id","name","cards"],t,{cards:function(){return d(e.cardList.models,["id","name","desc","due","cover","attachments","members","labels","url","shortLink"])}})},f=function(e,t){return null==t&&(t=["id","name"]),e.map(o.partial(m,o,t))},g=function(e,t){return null==t&&(t=["id","fullName"]),s(e,["id","fullName"],t)},v=function(e,t){return e.map(o.partial(g,o,t))},t.exports={Error:n,attachment:a,attachments:u,board:c,card:l,cards:d,list:m,lists:f}},{}],427:[function(e,t,r){var n;n=e("xtend"),t.exports=function(e){return n(e,{locale:window.locale})}},{}],428:[function(e,t,r){var n,o,i;n=e(105),o=e(427),i=e("xtend"),t.exports=function(e,t){return n(e,function(e){var r,n,s;return null!=e&&null!=(s=e._callback)?(r=function(e,r){return function(n){return null==n&&(n={}),t(i(n,{command:"callback",options:{action:r,callback:e,options:o(n.options)}}))}},n=r(s,"run"),n.retain=r(s,"retain"),n.release=r(s,"release"),n):void 0})}},{}],429:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j;m=e("underscore"),_=e(85),i=e(29),s=e(30),a=e(184),c=e(425),l=e(424),u=e(422),k=e(427),C=e(428),h=e("bluebird"),j=e("xtend"),p=_("PluginRunner",["NotHandled","InvalidPlugin","Timeout"]),o=5e3,n=1e4,f={},b=function(e){return null==f[e]&&(f[e]=s.loadBoardAvailablePlugins(e),f[e].delay(n).then(function(){return delete f[e]})),f[e]},w=function(e,t){return h.try(function(){var r,n;if(t instanceof a)return t;if(!m.isString(t))throw p.InvalidPlugin("invalid plugin specifier");if(n=t,null!=(r=i.get("Plugin",n)))return r;if(null==e)throw p.InvalidPlugin("unable to find plugin");return b(e.id).then(function(){if(null!=(r=i.get("Plugin",n)))return r;throw p.InvalidPlugin("plugin not available to board")})})},y=function(e){var t,r,n;return n=e.plugins,r=e.plugin,t=e.board,n=null!=n?n:null!=r?[r]:null!=t?t.idPluginsEnabled():[],h.map(n,function(e){return function(e){return w(t,e)}}(this))},v=function(e){return m.pick(e,["board","card","command","el","options"])},g=function(e){var t;return t=e.options},x=function(e){if(0===e.length)throw p.NotHandled("no plugin handles this command");return e[0]},d=function(){function e(){}return e.prototype.Error=p,e.prototype.processCallbacks=function(e,t,r){return C(e,function(e){return function(n){return new h(function(e){return window.requestAnimationFrame(e)}).then(function(){var o;return o=j(r,n),e._run([t],v(o),g(o)).then(x).catch(p.NotHandled,function(e){throw p.NotHandled("attempt to run callback on plugin "+t.plugin.id+" failed")})})}}(this))},e.prototype._run=function(e,t,r,n){var i,s,a;return null==n&&(n=o),a=t.command,i=t.board,s=t.card,h.using(u.serialize(t),function(t){return function(o){return h.filter(e,function(e){var t;return t=e.io,t.supports(a)}).map(function(e){var l,d,p;return d=e.plugin,l=e.io,p={plugin:d},h.using(u.serialize(p),function(d){var p;return p=j(r,{context:u.extend(o,d)}),l.request(a,k(p),n).then(function(r){return{response:t.processCallbacks(r,e,{board:i,card:s})}}).catch(c.Error.NotHandled,c.Error.Timeout,function(){return null})})}).filter(function(e){return null!=e}).map(function(e){var t;return t=e.response})}}(this))},e.prototype._runFromOptions=function(e){var t,r,n;return n=y(e),r=v(e),t=g(e),h.resolve(n).map(function(e){return{plugin:e,io:l.get(e)}}).then(function(n){return function(o){return n._run(o,r,t,e.timeout)}}(this))},e.prototype.all=function(e){return this._runFromOptions(e).then(m.flatten)},e.prototype.one=function(e){return this._runFromOptions(e).then(x)},e}(),t.exports=new d},{}],430:[function(e,t,r){var n,o,i,s,a;o=e("underscore"),i=e(104),n=e("hearsay"),a={},s=function(e,t){var r,s,a;return a=e.snoopIdPluginsEnabled().map(function(r){var i;return 0===r.length?n.const({}):(i=r.map(function(r){return t?n.combine(e.snoopPluginData(r),t.snoopPluginData(r)):e.snoopPluginData(r)}),n.combine.apply(n,i).map(function(e){return o.object(r,e)}))}).latest(),s=a.distinct(o.isEqual),r=i(s),r.use(),r},t.exports=function(e,t){var r,n;return t?null!=a[r=e.id+t.cid]?a[r]:a[r]=s(e,t):null!=a[n=e.id]?a[n]:a[n]=s(e)}},{}],431:[function(e,t,r){var n,o;n=e(97),o=n.getRaw("powerUpPreviewUrl"),t.exports=null!=o?{id:"55a5d917446f51777421000d",url:o}:{}},{}],432:[function(e,t,r){var n,o,i,s,a,u;n=e("react-dnd-html5-backend"),o=e(458),i=e("react"),u=e(419),s=e("react-dnd"),a=i.createClass({displayName:"ReactRootComponent",render:function(){return i.createElement("div",{className:"js-react-root",onClick:this.dismissPopover},this.props.children)},dismissPopover:function(e){e.isDefaultPrevented()||u(e)}}),t.exports=s.DragDropContext(n)(a)},{}],433:[function(e,t,r){var n,o,i,s,a,u,c=[].slice;n=e(5),u=e(437),a=e(116),s=e("recup"),i=e(226),o=e("underscore"),t.exports=u(i(s,{b:function(){var e,t,r,n,o,i;if(o=arguments[0],e=2<=arguments.length?c.call(arguments,1):[],i=this.normalizeArgs(e),t=i.attrs,r=i.contents,null!=t.href)throw Error("Can't specify an href on a `b` tag");if(t.href="#",null!=t.onClick)throw Error("onClick must be a positional argument to `b`");return n=t.disabled,t.onClick=function(e){return e.preventDefault(),n?void 0:o(e.currentTarget)},this.a(t,r)},link:function(){var e,t,r,o,i,s;if(s=arguments[0],e=2<=arguments.length?c.call(arguments,1):[],i=this.normalizeArgs(e),t=i.attrs,r=i.contents,null!=t.href)throw Error("Can't specify an href on a `link` tag");return t.href=s,o=t.onClick,t.onClick=function(e){a(e)&&(e.preventDefault(),"function"==typeof o&&o(),n.navigate(s,{trigger:!0}))},this.a(t,r)},radio:function(e,t,r){var n,i;return i=function(n){var o;n.target.checked&&(o={},o[t]=r,e.setState(o))},n=o.isEqual(e.state[t],r),this.input({type:"radio",name:t,value:r,checked:n,onChange:i})}}))},{}],434:[function(e,t,r){var n,o;o=function(){function e(){this.viewsToBeRemoved=[]}return e.prototype.enqueue=function(e){var t,r,n,o;for(n=[],t=0,r=e.length;r>t;t++)o=e[t],o.$el.detach(),n.push(this.viewsToBeRemoved.push(o));return n},e.prototype.processQueue=function(){var e,t,r,n;for(r=Date.now(),e=0,t=[];Date.now()-r<10&&this.viewsToBeRemoved.length>0;)n=this.viewsToBeRemoved.shift(),n.remove(),t.push(e++);return t},e}(),t.exports=n=new o,setInterval(function(){return n.processQueue()},10)},{}],435:[function(e,t,r){var n,o;o=e(38),t.exports=n=function(){function e(){}return e.prototype.switchSection=function(e){return this.$(".js-content").addClass("hide").detach(),this.$(".js-loading-page").removeClass("hide"),this.$(".tabbed-pane-nav-item-button").removeClass("active"),this.$(e.target).addClass("active"),o(this.model.typeName+" View","Tab Navigation","Open "+this.$(e.target).text()+" Page")},e}()},{}],436:[function(e,t,r){var n,o;o=e(437),n=e(58),t.exports=o(n)},{}],437:[function(e,t,r){var n,o,i,s,a,u,c,l={}.hasOwnProperty,d=[].slice;n=e("underscore"),o=e(63),i=e(84),a=e(226),c=e("xtend"),u=function(e){var t,r;return n.object(function(){var n;n=[];for(t in e)l.call(e,t)&&(r=e[t],n.push([t,r.toString()]));return n}())},s={format:function(){this.raw(this.l.apply(this,arguments))},formatText:function(){return this.text(this.l.apply(this,arguments))},classify:function(e){var t,r;return function(){var n;n=[];for(t in e)r=e[t],r&&n.push(t);return n}().join(" ")},urlify:function(e){return e=e.replace("'","\\'").replace('"','\\"').replace("(","\\(").replace(")","\\)"),"url('"+e+"')"},stylify:function(e){var t,r;return function(){var n;n=[];for(t in e)r=e[t],r&&n.push(t+": "+r+";");return n}().join("")},optionSelected:function(e,t,r){return e&&(t=n.extend({selected:"selected"},t)),this.option(t,r)},check:function(e,t){this.format(t),this.text(" "),e&&(this.icon("check"),this.text(" "))},icon:function(e,t,r){var n,o,i;null==r&&(r={}),"object"==typeof t&&(r=t,t=void 0),n=null!=(i=r.class)?i:"",o=c(r,{class:("icon-sm icon-"+e+" "+n).trim()}),this.span(o),null!=t&&(this.text(" "),this.format(t))}},t.exports=function(e){var t;return t=a(e,s),function(e){return a(t,{l:function(t,r){return t=o.normalizeKeyPath(t),i(["templates",e].concat(d.call(t)),u(r))}})}}},{}],438:[function(e,t,r){var n,o,i,s,a;n=e(25),s=e(436)(),a=e(696),o=e("underscore"),i={mustacheRenderWithHelpers:function(e,t,r,i){var a;return null==r&&(r={}),null==i&&(i={}),a=o.extend({__ed:r.editable,__own:r.owned,__loggedIn:n.isLoggedIn(),__siteDomain:siteDomain,__avatarDomain:avatarDomain,__logoDomain:logoDomain},t),s.mustacheRender(e,a,i)},mustacheRenderModel:function(e,t,r,n){var s;return null==n&&(n={}),s={editable:"function"==typeof t.editable?t.editable():void 0,owned:"function"==typeof t.owned?t.owned():void 0},r=o.extend(t.toJSON(),r),i.mustacheRenderWithHelpers(e,r,s,n)},fill:function(e,t,r,n){var o;if(null==t&&(t={}),null==r&&(r={}),null==n&&(n={}),o=a[e],null==o)throw new Error("Could not find template "+e+"!");return i.mustacheRenderWithHelpers(o,t,r,n)},fillFromModel:function(e,t,r,n){var o;if(null==r&&(r={}),null==n&&(n={}),o=a[e],null==o)throw new Error("Could not find template "+e+"!");return i.mustacheRenderModel(o,t,r,n)},fillMenu:function(e,t,r){return i.fill("menu_base",{content:this.fill(e,t,r)})}},t.exports=e(226)(a,i)},{}],439:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=[].slice;n=e("jquery"),o=e(65),i=e(80),s=e(16),a=e(99),c=e(109),l=e("underscore"),m=e(35),g=e(38),f=e(413),h=f.getTypes,p=f.getPasted,v=e(107),d=e(209),t.exports=u=new(function(){function e(){var e,t,r,o;for(this._handlers={},this.clear(),o=["keydown","keypress","paste"],t=0,r=o.length;r>t;t++)e=o[t],n(document).bind(e,this[e].bind(this));a.on("pasteImage",function(e){return function(t){return e.triggerPasted("files",[t])}}(this))}var t;return e.prototype.precedence={global:0,default:1,header:2,board:3,board_sidebar:3,list:4,card:5,search_box:6,dialog:10,dialog_view:12,popover:30,popover_view:32,attachment_viewer:100,quick_card_editor:100},e.prototype._isKeyEligible=function(e){var t;return t=i.getKey(e),!(o.isTouch()||t===s.Unknown||t!==s.Escape&&n(e.target).is("input:visible,textarea:visible,select:visible")||e.ctrlKey||e.altKey||e.metaKey)},e.prototype.addHandler=function(e,t){var r,n,o,i;return i=t.scope,o=t.precedence,n=t.modal,null==o&&(o=this.precedence[i]),null==o&&(m("userinput","Missing precedence for "+i),o=this.precedence.default),null==n&&(n=!1),null==(r=this._handlers)[i]&&(r[i]={}),this._handlers[i]={target:e,scope:i,precedence:o,modal:n},m("userinput","Adding handler for "+i)},e.prototype.removeHandlerScope=function(e){var t,r;t=[];for(r in this._handlers)r===e&&(m("userinput","Removing handlers for "+r),t.push(delete this._handlers[r]));return t},e.prototype.removeHandler=function(e){var t,r,n,o;r=this._handlers,n=[];for(o in r)t=r[o].target,e===t&&(m("userinput","Removing handler for "+o),n.push(delete this._handlers[o]));return n},e.prototype.clear=function(){var e,t;m("userinput","Removing all non-global handlers"),e=[];for(t in this._handlers)"global"!==t&&(m("userinput","Removing handler for "+t),e.push(delete this._handlers[t]));return e},t=function(e,t){var r,n,o,i;for(i=[],r=0,o=e.length;o>r&&(n=e[r],i.push(n),!t(n));r++);return i},e.prototype._sortedHandlers=function(){var e;return e=l.sortBy(l.values(this._handlers),function(e){return-e.precedence}),t(e,d.get("modal"))},e.prototype._triggerOnTargets=function(){var e,t,r,n,o,i,s;for(t=arguments[0],e=2<=arguments.length?y.call(arguments,1):[],i=this._sortedHandlers(),n=0,o=i.length;o>n;n++)if(s=i[n].target,r=null!=(null!=s?s[t]:void 0)?s[t].apply(s,e):null!=(null!=s?s.triggerHandler:void 0)?s.triggerHandler(t,e):void 0)return(l.isString(r)||l.isArray(r))&&this._track(r),!0;return!1},e.prototype.keydown=function(e){var t;t=i.getKey(e),t===s.Escape&&c.stop(e),this._isKeyEligible(e)&&this._triggerOnTargets("shortcut",t)&&c.stop(e)},e.prototype.keypress=function(e){var t;t=i.getKey(e),this._isKeyEligible(e)&&this._triggerOnTargets("shortcut",t)&&c.stop(e)},e.prototype.paste=function(e){p(e.originalEvent).then(function(t){return function(r){var n,o,i,s,u;if(!l.isEmpty(r)&&(!r.text&&!r.url||"INPUT"!==(i=e.target.tagName)&&"TEXTAREA"!==i||a.isClipboard(e.target)))for(s=["url","text","files"],n=0,o=s.length;o>n;n++)if(u=s[n],r[u]){t.triggerPasted(u,r[u]);break}}}(this))},e.prototype.triggerPasted=function(e,t){var r;return r=l.compact(this._sortedHandlers().map(function(e){var t;return null!=(t=e.target)?t.el:void 0})),v(r,"userinput-paste:"+e,{detail:t})},e.prototype._track=function(e){return null!=e?(l.isArray(e)||(e=[e]),g.apply(null,["Keyboard Shortcuts"].concat(y.call(e)))):void 0},e}())},{}],440:[function(e,t,r){var n,o,i;n=e(128),o=e(30),t.exports=i=function(){function e(){}return e.prototype.limit=50,e.prototype.nextPage=1,e.prototype.shortLoad=!1,e.prototype.loading=!1,e.prototype.idModels=null,e.prototype.loadMoreActions=function(){return this.loading?void 0:(this.loading=!0,this.waitForId(this.model,function(e){return function(){var t;return o.loadMoreActionData(e.model.typeName.toLowerCase(),e.model.id,e.nextPage,e.limit,e.idModels,null!=(t="function"==typeof e.getActionsFilter?e.getActionsFilter():void 0)?t:"all").finally(function(){return e.loading=!1}).then(function(t){return e.shortLoad=t.length<e.limit,e.renderActions(),++e.nextPage}).done()}}(this)))},e.prototype.hasMoreActions=function(){return!this.loading&&!this.shortLoad&&this.getActions().length>=this.limit},e.prototype.getActions=function(){var e,t,r;return e=null!=(t="function"==typeof this.getFilteringModels?this.getFilteringModels():void 0)?t:[],(r=this.model).getActions.apply(r,e)},e}()},{}],441:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function r(){this.constructor=e}for(var n in t)y.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},y={}.hasOwnProperty,b=[].slice;n=e("jquery"),o=e(205),i=e(69),s=e("hearsay"),u=e(94),l=e(439),h=e("underscore"),g=e(89),m=e(84),f=e(34),a=e("bluebird"),c=e(434),d={NONE:0,SOME:1,LOTS:2},t.exports=g(i,u,p=function(e){function t(e){this._subviews={},this.modelCache=null!=e?e.modelCache:void 0,this.handleDOMRemove=function(e){return function(){return e._delegated=!1}}(this),t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype._rendered=!1,t.VIGOR=d,t.prototype.vigor=d.LOTS,t.prototype.render=function(){var e;if(e=1<=arguments.length?b.call(arguments,0):[],null==this.renderOnce)return this;if(this._rendered)switch(this.vigor){case d.NONE:return this;case d.SOME:return f(Error("rendered more than once: "+this.constructor.name)),this;default:throw Error("You cannot render me more than once!")}return this._rendered=!0,this.renderOnce.apply(this,e),this},t.prototype.getViewTitle=function(){var e,t,r;return null==this.viewTitleKey?"":(t=h.result(this,"viewTitleKey"),e=null!=(r=h.result(this,"viewTitleArguments"))?r:{},m(["view title",t],e))},t.prototype.subview=function(e,t,r,n){return null==r&&(r={}),null==n&&(n=e.prototype.uniqueId()+"_"+t.cid),n in this._subviews||(this._subviews[n]=new e(h.extend({model:t,modelCache:this.modelCache},r))),this._subviews[n]},t.prototype.existingSubview=function(e,t,r){if(null==r&&(r=e.prototype.uniqueId()+"_"+t.cid),!(r in this._subviews))throw new Error("existingSubview called before subview was created");return this._subviews[r]},t.prototype.existingSubviewOrUndefined=function(e,t,r){return null==r&&(r=e.prototype.uniqueId()+"_"+t.cid),this._subviews[r]},t.prototype.collectionSubview=function(e,t,r,n){var o,i;return null==r&&(r={}),null==n&&(n=e.prototype.uniqueId()),i=null!=(o=this._subviews)[n]?o[n]:o[n]=new e(h.extend({collection:t,modelCache:this.modelCache},r)),null!=r.el&&i.el!==r.el&&i.setElement(r.el),i},t.prototype.subviewsOfType=function(e){var t,r,n,o;r=this._subviews,n=[];for(t in r)y.call(r,t)&&(o=r[t],o instanceof e&&n.push(o));return n},t.prototype.deleteSubview=function(e,t){if(null==t&&(t=e.constructor.prototype.uniqueId()+"_"+e.model.cid),e!==this._subviews[t])throw new Error("incorrect key for subview in deleteSubview");return e.remove(),delete this._subviews[t]},t.prototype.removeSubviews=function(){var e;e=h.values(this._subviews),this._subviews={},c.enqueue(e)},t.prototype.deleteSubviewsOfType=function(e){var t,r,n,o;for(n=this.subviewsOfType(e),t=0,r=n.length;r>t;t++)o=n[t],this.deleteSubview(o)},t.prototype.remove=function(){return this.unsubscribe(),this.stopUsing(),this.removeSubviews(),this.cancelScheduled(),l.removeHandler(this),t.__super__.remove.apply(this,arguments)},t.prototype.frameDebounce=function(e,t){var r;return null==t&&(t=this),r=!1,function(){r||(r=!0,this.requestAnimationFrame(function(){r=!1,e.call(t)}))}},t.prototype.makeDebouncedMethods=function(){var e,t,r,n;for(n=1<=arguments.length?b.call(arguments,0):[],e=0,t=n.length;t>e;e++)r=n[e],this[r+"Debounced"]=this.frameDebounce(this[r])},t.prototype.delegateEvents=function(){var e,r,n;if(!this._delegated){this.$el.on("remove",this.handleDOMRemove),t.__super__.delegateEvents.apply(this,arguments),r=this._subviews;for(e in r)n=r[e],n.delegateEvents();this._delegated=!0}},t.prototype.undelegateEvents=function(){var e,r,n;if(this._delegated){this.$el.off("remove",this.handleDOMRemove),t.__super__.undelegateEvents.apply(this,arguments),r=this._subviews;for(e in r)n=r[e],n.undelegateEvents();this._delegated=!1}},t.prototype.appendSubview=function(e,t){return null==t&&(t=this.$el),this.appendSubviews([e],t)},t.prototype.appendSubviews=function(e,t){var r,n,o;for(null==t&&(t=this.$el),r=0,n=e.length;n>r;r++)o=e[r],o.delegateEvents();return t.append(function(){
var t,r,n;for(n=[],t=0,r=e.length;r>t;t++)o=e[t],n.push(o.render().el);return n}())},t.prototype.ensureSubviews=function(e,t){var r,o,i,s,a,u,c,l,d,p,m,f,g,v,y;for(null==t&&(t=this.$el),o=t[0],i=h.clone(o.childNodes),u=a=0,p=i.length;p>a;u=++a)if(r=i[u],!h.find(e,function(e){return e.el===r})){s=!1,g=this._subviews;for(d in g)y=g[d],y.el!==r||s||(this.deleteSubview(y,d),s=!0);if(!s)throw new Error("Could not find view associated with element to remove")}for(c=0,m=e.length;m>c;c++)v=e[c],h.find(i,function(e){return v.el===e})||(v.delegateEvents(),v.render());for(u=l=0,f=e.length;f>l;u=++l)v=e[u],v.el!==o.childNodes[u]&&(0===u?n(o).prepend(v.el):n(e[u-1].el).after(v.el))},t.prototype.uniqueId=function(){return this.hasOwnProperty("_uniqueId")||(this._uniqueId=h.uniqueId("view")),this._uniqueId},t}(o.View)),h.extend(p.prototype,s.mixin)},{}],442:[function(e,t,r){var n,o,i,s;n=e(451),o=e(25),i=e("underscore"),s=function(e){var t,r,i,s;return t=o.me().isFeatureEnabled("largeAttachments"),i=e.getOrganization(),s=null!=i&&i.isFeatureEnabled("largeAttachments"),r=t||s?"file size exceeds 250mb":"file size exceeds 10mb",n.show(r,"error","upload",5e3)},t.exports=function(e,t){var r,n,a;for(i.isArray(t)||(t=[t]),n=0,a=t.length;a>n;n++)if(r=t[n],!o.me().canUploadAttachment(r))return s(e),!0;return!1}},{}],443:[function(e,t,r){var n,o,i,s,a,u,c,l=function(e,t){function r(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d={}.hasOwnProperty;n=e("jquery"),o=e(191),i=e(192),a=e(109),u=e(441),c=e(38),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype._secretUrl=function(){return this.model.url()+"/invitationSecret"},t.prototype.showInvitationLink=function(e){return this.$(".js-show-invitation-link").addClass("hide"),this.$(".js-invitation-link-container").removeClass("hide"),i({method:"post",url:this._secretUrl()}).get("secret").then(function(e){return function(t){var r;return r=e.model.get("url").replace(/(\/b\/[^\/]+|\/[^\/]+$)(.*)$/,"/invite$1/"+t+"$2"),e.$(".js-invitation-link").val(r).focus().select()}}(this)).done()},t.prototype.clickInvitationLink=function(e){return n(".js-invitation-link").select()},t.prototype.deactivateInvitationLink=function(e){return this.$(".js-show-invitation-link").removeClass("hide"),this.$(".js-invitation-link-container").addClass("hide"),this.$(".js-invitation-link").val(""),i({method:"delete",url:this._secretUrl()}).done()},t}(u)},{}],444:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h={}.hasOwnProperty;n=e(191),o=e(25),u=e(84),s=e("bluebird"),c=e(436)("invitation_link"),a=e(441),d=e("xtend"),l=c.renderable(function(e){var t,r,n,o,i;n=e.isLoggedIn,r=e.isConfirmed,i=e.returnUrl,t=e.inviter,o=e.name,c.div(".invitation-link-description",function(){return c.format("youve-been-invited",{inviterName:t.fullName,name:o})}),n?r?c.div(".invitation-link-options",function(){return c.button(".button.primary.js-join",function(){return c.format("join")})}):c.p(".invitation-link-explanation",function(){return c.format("before-you-can-join-you-ll-need-to-confirm-your-email-address")}):(c.p(".invitation-link-explanation",function(){return c.format("before-you-can-join-you-ll-need-a-trello-account")}),c.div(".invitation-link-options",function(){return c.a(".button.primary",{href:"/signup?returnUrl="+encodeURIComponent(i)},function(){return c.format("sign-up")}),c.a(".button",{href:"/login?returnUrl="+encodeURIComponent(i)},function(){return c.format("log-in")})}),c.div(".invitation-link-options-learn-more",function(){return c.a(".quiet",{href:"/tour",target:"tour"},function(){return c.format("learn-more-about-trello")})})),c.p(".error.js-deactivated.hide",function(){return c.format("unfortunately-this-invitation-link-has-been-deactivated")}),c.p(".error.js-error.hide",function(){})}),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.className="invitation-link",t.prototype.events={"click .js-join":function(e){return this._disableJoin(),this.fxJoin().catch(n.NotFound,function(e){return function(t){return e.$(".js-deactivated").removeClass("hide")}}(this)).catch(n.Unauthorized,function(e){return function(t){return e.$(".js-error").text(t.message).removeClass("hide")}}(this)).done()}},t.prototype._disableJoin=function(){return this.$(".js-join").addClass("disabled").prop("disabled",!0)},t.prototype.initialize=function(e){var t;return this.fxJoin=e.fxJoin,this.inviter=e.inviter,this.name=e.name,null!=(t=o.me())?this.listenTo(t,"change:confirmed",this.render):void 0},t.prototype.render=function(){var e;return this.$el.html(l({inviter:this.inviter,name:this.name,isLoggedIn:o.isLoggedIn(),isConfirmed:null!=(e=o.me())?e.get("confirmed"):void 0,returnUrl:window.location.pathname})),this},t}(a)},{}],445:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e(450),i=e(458),s=e(441),a=e(38),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="labels",t.prototype.el=function(){return this.labelsView=this.subview(o,this.model,{board:this.model.getBoard(),selectLabel:this.toggleLabel.bind(this),renderOn:[{source:this.model.labelList,events:"add remove reset change"},{source:this.model,events:"change:labels, change:idLabels"}],popOverMethod:"pushView",searchInit:this.options.searchInit}),this.labelsView.render().el},t.prototype.toggleLabel=function(e){a(this.model.typeName,"Card Labels Menu","Change Label"),this.model.toggleLabel(this.modelCache.get("Label",e)),this.options.hideOnSelect&&i.popView()},t}(s)},{}],446:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};n=e(175),i=e(447),s=e(458),a=e(441),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="create label",t.prototype.el=function(){var e,t;return e=this.options.color,t=this.options.name,l.call(n.colors,t)>=0&&(e=t,t=""),new i({model:{name:t},submitTextKey:"create",color:e,onSubmit:function(e){return function(t,r){var n;return"function"==typeof(n=e.options).onSubmit&&n.onSubmit(t,r),s.popView()}}(this)}).render().el},t}(a)},{}],447:[function(e,t,r){var n,o,i,s,a,u,c,l=function(e,t){function r(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d={}.hasOwnProperty;n=e(175),i=e(109),s=e(441),a=e("underscore"),c=e(438),u=e(84),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.tagName="form",t.prototype.className="edit-label",t.prototype.events={"click .js-palette-color":"pickColor","click .js-submit":"submit",submit:"submit"},t.prototype.initialize=function(e){return this.accessoryView=e.accessoryView,this.color=e.color,this.onSubmit=e.onSubmit,this.submitTextKey=e.submitTextKey,t.__super__.initialize.apply(this,arguments)},t.prototype.renderOnce=function(){var e,t,r;return t=function(){var t,r,o,i;for(o=n.colors.concat(null),i=[],t=0,r=o.length;r>t;t++)e=o[t],i.push({color:e,selected:e===this.color});return i}.call(this),r={label:{name:this.model.name},colors:t},r.submitText=u(this.submitTextKey),this.$el.html(c.fill("label_edit_component",r)),null!=this.accessoryView&&this.$(".js-accessory-view-holder").append(this.accessoryView.render().el),this},t.prototype.pickColor=function(e){var t;return i.stop(e),this.$(".js-palette-select").hide(),t=this.$(e.target).closest(".js-palette-color"),this.color=t.attr("data-color"),t.find(".js-palette-select").show()},t.prototype.submit=function(e){var t;return i.stop(e),t=this.$(".js-label-name").val().trim(),a.isEmpty(t)&&a.isEmpty(this.color)?void 0:this.onSubmit(t,a.isEmpty(this.color)?null:this.color)},t}(s)},{}],448:[function(e,t,r){var n,o,i,s,a,u,c,l,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p={}.hasOwnProperty;n=e(452),o=e(447),s=e(458),a=e(109),u=e(441),l=e(38),c=e(84),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var r;return d(t,e),r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.tagName="input",t.prototype.className="negate",t.prototype.attributes=function(){return{type:"submit",value:c("delete")}},t.prototype.events={click:function(e){return a.stop(e),this.options.onClick()}},t}(u),t.prototype.viewTitleKey="change label",t.prototype.el=function(){return new o({model:this.model.toJSON(),submitTextKey:"save",onSubmit:function(e){return function(t,r){var n;return e.model.update({color:r,name:t}),"function"==typeof(n=e.options).onSubmit&&n.onSubmit(),s.popView()}}(this),color:this.model.get("color"),accessoryView:new r({onClick:this.confirmDeleteLabel.bind(this)})}).render().el},t.prototype.confirmDeleteLabel=function(){return n.pushView("delete label",{model:this.model,confirmBtnClass:"negate",popOnClick:!0,fxConfirm:function(e){return function(t){var r;return e.model.destroy(),"function"==typeof(r=e.options).onSubmit&&r.onSubmit(),s.popView(),l("Label","Delete")}}(this)})},t}(u)},{}],449:[function(e,t,r){var n,o,i,s;n=e(16),o=e(175),s=e("underscore"),t.exports=i=function(){function e(){}return e.keyboardIndex=[s.last(o.colors)].concat(s.initial(o.colors)),e.keyNumberForColor=function(e){var t;return t=this.keyboardIndex.indexOf(e),t>=0?""+t:null},e.colorForKey=function(e){var t;return t=e-n._0,this.keyboardIndex[t]},e.setLabelFromKey=function(e,t,r){var n,o;o=this.colorForKey(e),n=t.getBoard().labelsForColors()[o],1===(null!=n?n.length:void 0)?t.toggleLabelColor(o):"function"==typeof r&&r(o)},e}()},{}],450:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b=function(e,t){function r(){this.constructor=e}for(var n in t)w.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},w={}.hasOwnProperty;n=e("jquery"),o=e(25),i=e(80),s=e(16),a=e(175),u=e(446),c=e(448),l=e(449),p=e(458),h=e(109),m=e(441),f=e("underscore"),v=e(438),y=e(38),g=e(84),t.exports=d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var r;return b(t,e),r=12,t.prototype.labelsToShow=r,t.prototype.events={"click .js-select-label":"clickLabel","click .js-toggle-color-blind-mode":"toggleColorBlindMode","click .js-edit-label":"clickEditLabel","click .js-add-label":"clickAddLabel","click .js-show-more":"showMore","input .js-label-search":"renderLabels","keyup .js-label-search":"keyUp","mouseover .card-label":"hoverLabel"},t.prototype.initialize=function(e){var r,n,i,s,a;for(this.selectLabel=e.selectLabel,this.board=e.board,this.modelCache=e.modelCache,this.renderOn=e.renderOn,this.popOverMethod=e.popOverMethod,this.searchInit=e.searchInit,this.makeDebouncedMethods("render","renderLabels"),this.listenTo(o.me(),{"change:prefs":this.renderDebounced}),this.listenTo(this.board.labelList,{"add remove reset change":this.renderLabelsDebounced}),s=null!=(i=this.renderOn)?i:[],r=0,n=s.length;n>r;r++)a=s[r],this.listenTo(a.source,a.events,this.renderLabelsDebounced);return t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){var e,t,r,n;return t=this.board.labelColors(),r={editable:this.board.editable()},e={colors:t,isColorBlindEnabled:o.me().get("prefs").colorBlind,searchInit:null!=(n=this.searchInit)?n:""},this.searchInit=null,this.$el.html(v.fill("popover_change_labels",e,r)),this.renderLabels()},t.prototype.renderLabels=function(){var e,t,r,n,o,i,s;return n=this.board.labelsForColors(),t=this._filteredLabels(),r=f.chain(t).map(function(e){return function(t){return e.model.dataForLabel(t)}}(this)).tap(function(e){return function(t){return e.$(".js-show-more").toggleClass("hide",t.length<=e.labelsToShow)}}(this)).first(this.labelsToShow).value(),e={labels:r},o={editable:this.board.editable()},this.$(".js-labels-list").empty().append(v.fill("select_labels",e,o)),i=this._searchVal(),s=f.isEmpty(i)||t.length>0?g("create new label.unnamed"):g("create new label.named",{name:i}),this.$(".js-add-label").text(s),!f.isEmpty(i)&&t.length>0&&this.selectFirstLabelInList(),this},t.prototype.highlightElement=function(e){return h.selectMenuItem(this.$(".js-labels-list"),".card-label",e)},t.prototype.getHighlightedElement=function(){return this.$(".js-labels-list .card-label.selected").first()},t.prototype.selectFirstLabelInList=function(e){this.highlightElement(this.$(".js-labels-list .card-label").first())},t.prototype.toggleColorBlindMode=function(e){var t;t=o.me(),t.toggleColorBlindMode(),y(this.model.typeName,"Labels Menu","Toggle Color Blind Friendly Mode.")},t.prototype.clickEditLabel=function(e){var t,r;return h.stop(e),t=n(e.target).closest(".js-edit-label"),r=t.attr("data-idLabel"),this.editLabel(r)},t.prototype.selectLabelViaElem=function(e){return this.selectLabel(e.attr("data-idLabel"))},t.prototype.clickLabel=function(e){var t;return h.stop(e),t=n(e.target).closest(".js-select-label"),this.selectLabelViaElem(t)},t.prototype.findElementForLabel=function(e){return this.$(".js-edit-label").filter(function(t){return function(t,r){return n(r).attr("data-idLabel")===e}}(this))},t.prototype.editLabel=function(e){var t,r;return t=this.findElementForLabel(e),r=this.modelCache.get("Label",e),p[this.popOverMethod]({elem:t,view:c,options:{model:r,board:this.board,modelCache:this.modelCache}})},t.prototype.clickAddLabel=function(e){var t;h.stop(e),t=this._searchVal(),p[this.popOverMethod]({elem:this.$(".js-add-label"),view:u,options:{board:this.board,name:t,color:this._nextColor(),onSubmit:function(e){return function(t,r){return e.model.createLabel(t,r),e.clearSearch()}}(this)}})},t.prototype.showMore=function(){return this.labelsToShow+=r,this.renderLabels()},t.prototype.hoverLabel=function(e){this.highlightElement(n(e.target).closest(".card-label"))},t.prototype.keyUp=function(e){var t,r,n;return r=i.getKey(e),r===s.ArrowUp||r===s.ArrowDown?(h.stop(e),void h.navMenuList(this.$(".js-labels-list"),".card-label",r)):r===s.Enter?(n=this._filteredLabels(),n.length>0?(t=this.getHighlightedElement(),t.length>0&&(this.selectLabelViaElem(t),this.clearSearch()),y(this.model.typeName,"Labels Menu","Add By Filter")):this.clickAddLabel()):void 0},t.prototype.clearSearch=function(){return this.$(".js-label-search").val(""),this.renderLabels()},t.prototype._nextColor=function(){var e,t;return t=f.chain(this.board.getLabels()).map(function(e){return e.get("color")}).uniq().value(),null!=(e=f.difference(a.colors,t)[0])?e:""},t.prototype._searchVal=function(){var e,t;return null!=(e=null!=(t=this.$(".js-label-search").val())?t.trim():void 0)?e:""},t.prototype._filteredLabels=function(){var e;return e=this._searchVal().toLowerCase(),f.chain(this.board.getLabels()).filter(function(t){var r,n;return f.isEmpty(e)||(null!=(r=t.get("name"))?r.toLowerCase().indexOf(e):void 0)>-1||0===(null!=(n=t.get("color"))?n.toLowerCase().indexOf(e):void 0)||t.get("color")===l.keyboardIndex[parseInt(e)]}).value()},t}(m)},{}],451:[function(e,t,r){var n,o,i,s,a,u,c=[].slice;n=e("jquery"),o=e("underscore"),s=e(35),a=e(201),u=e(438),i=e(84),t.exports=new(function(){function e(){var e,t,r,n;n=null,r=function(e){return function(){var t;return clearTimeout(n),e.hide("connection"),t=i("alerts.could not connect"),e.showHtml(u.fill("connect_failed",{msg:t}),"error","connectionDead")}}(this),a.on("connect_failed",r),a.on("reconnect_failed",r),t=function(e){return function(){return clearTimeout(n),e.hide("connection")}}(this),e=function(e){return function(){return clearTimeout(n),n=setTimeout(function(){return n=null,e.show("reconnecting","error","connection")},500)}}(this),a.on("reconnect",t),a.on("connecting",e)}return e.prototype._alerts={},e.prototype._hide=function(e){var t;return t=this._alerts[e],(null!=t?t.timeout:void 0)&&clearTimeout(t.timeout),delete this._alerts[e],n("#notification_"+e).remove(),this._showHideContainer()},e.prototype._show=function(e,t,r,o,i){var a,u;return s("alerts","show",e,t,r,o,i),this._hide(o),i&&(u=setTimeout(function(e){return function(){return e.hide(o)}}(this),i)),this._alerts[o]={timeout:u},a=n("<div>").attr("id","notification_"+o).addClass("app-alert-item mod-"+r).appendTo("#notification"),t?a.html(e):a.text(e),this._showHideContainer()},e.prototype._showHideContainer=function(){return n("#notification").toggle(!o.isEmpty(this._alerts))},e.prototype.show=function(){var e,t,r,n;return r=arguments[0],e=2<=arguments.length?c.call(arguments,1):[],Array.isArray(r)?(n=r,r=n[0],t=n[1]):t={},this.showLiteralText.apply(this,[i(["alerts",r],t)].concat(c.call(e)))},e.prototype.showLiteralText=function(e,t,r,n){return this._show(e,!1,t,r,n)},e.prototype.showHtml=function(e,t,r,n){return this._show(e,!0,t,r,n)},e.prototype.flash=function(e,t,r){return this.show(e,t,r,2e3)},e.prototype.hide=function(e){return s("alerts","hide",e),this._hide(e)},e.prototype.hideAll=function(){var e,t;t=[];for(e in this._alerts)t.push(this.hide(e));return t},e}())},{}],452:[function(e,t,r){var n,o,i,s,a,u,c,l=function(e,t){function r(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d={}.hasOwnProperty;o=e(458),i=e(109),s=e(441),a=e("underscore"),c=e(438),u=e(84),t.exports=n=function(e){function t(e){var r,n,o,i,s,u,c;this.model=e.model,c=e.text,this.elem=e.elem,this.top=e.top,o=e.confirmText,n=e.confirmBtnClass,r=e.cancelText,this.title=e.title,this.template=e.template,i=e.data,u=e.fxConfirm,s=e.fxCancel,this.popOnClick=e.popOnClick,null==this.template&&(this.template="confirm"),this.confirm=this._handleClick(u),this.cancel=s?this._handleClick(s):function(){},this.data=a.extend({text:c,confirmText:o,confirmBtnClass:n,cancelText:r},null!=i?i:{}),t.__super__.constructor.apply(this,arguments)}var r,n;return l(t,e),r=function(e,t){var r,n,o;n=a.clone(e);for(r in t)d.call(t,r)&&(o=t[r],r in n||(n[r]=o()));return n},n=function(e,t){var n;return n=r(t,{title:function(){return u(["confirm",e,"title"])},text:function(){return u(["confirm",e,"text"])},confirmText:function(){return u(["confirm",e,"confirm"])}}),"fxCancel"in n&&!("cancelText"in n)&&(n.cancelText=u(["confirm",e,"cancel"])),n},t.toggle=function(e,t){return t=1===arguments.length?e:n(e,t),o.toggle({elem:t.elem,top:t.top,view:this,options:t})},t.pushView=function(e,t){return t=1===arguments.length?e:n(e,t),o.pushView({view:this,options:t})},t.prototype.getViewTitle=function(){return this.title},t.prototype.events={"click .js-confirm":"confirm","click .js-cancel":"cancel"},t.prototype.render=function(){return this.$el.html(c.fill(this.template,this.data,{},{member:c.member})),this},t.prototype._handleClick=function(e){return function(t){return function(r){return i.stop(r),t.popOnClick?o.popView():o.hide(),"function"==typeof e&&e(r),t.remove(),!1}}(this)},t}(s)},{}],453:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p;n=e(5),i=e(67),a=e("bluebird"),u=e(97),c=e(87),l=e("underscore"),p=e("xtend"),s=null!=(d=window.Notification)?d:{permission:"denied"},t.exports=o=function(){function e(t){this.model=t,(e.enabled()||window.fluid)&&this.model.get("unread")&&(this.localNotification()?this.show():setTimeout(this.show.bind(this),o))}var t,r,o,c;return r=100,o=1e3,t=1e4,e.enabled=function(){return"granted"===s.permission},e.denied=function(){return"denied"===s.permission},e.notEnabled=function(){return"default"===s.permission},e.requestPermission=function(){return new a(function(e,t){var r;return r=s.requestPermission,r?r(function(r){return"denied"===r?t(r):e(r)}):t("denied")})},e.prototype.show=function(){return this.getLock(function(e){return function(){var r,n,o,i,a,u;return i=e.render(),u=i.title,r=i.body,n=i.icon,a=i.tag,window.fluid?window.fluid.showGrowlNotification({title:u,priority:1,sticky:!1,description:r,icon:n}):(o=new s(u,{body:r,icon:n,tag:a}),o.model=e.model,o.addEventListener("click",e.clickHandler.bind(e)),setTimeout(function(){return o.close()},t))}}(this))},c=function(e){switch(e.type){case"relDate":return e.current;case"comment":case"attachmentPreview":return"";default:return e.text}},e.prototype.render=function(){var e,t,r,n,o,s,a;return r=new i("notification").getEntities(this.model.get("display")),a=l.chain(r).map(c).compact().value().join("").trim(),t=l.find(r,function(e){return"comment"===e.type}),e=null!=t?t.text:"",o=this.model.getMember(),n="/favicon.ico",(null!=o?o.avatarHash:void 0)&&(n=[window.avatarDomain,o.avatarHash,"50.png"].join("/")),s=this.model.id,{title:a,body:e,icon:n,tag:s}},e.prototype.clickHandler=function(e){var t,r,o;return t=this.model.get("data"),this.model.markRead(),e.target.close(),this.localNotification()?(this.model.navigateToView()||n.memberNotificationsView(),window.focus()):(o=this.model.getUrlOfTarget(),r=window.open(o),null!=r?r.focus():window.location=o)},e.prototype.localNotification=function(){var e;return e=this.model.get("data"),l.any(l.invoke([function(){var t;return n.onBoardView(null!=(t=e.board)?t.id:void 0)},function(){var t;return n.onOrganizationView(null!=(t=e.organization)?t.id:void 0)},function(){return 0===location.pathname.indexOf(n.getMemberNotificationsUrl())}],"call"))},e.prototype.getLock=function(e){var n,o;return n="notification_lock_"+this.model.id,u.get(n)?void 0:(o=Math.random(),u.set(n,o),setTimeout(function(t){return function(){return u.get(n)===o?e():void 0}}(this),r),setTimeout(function(e){return function(){return u.unset(n)}}(this),t))},e}()},{}],454:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m;n=e("jquery"),o=e(5),s=e(16),a=e(456),u=e(458),c=e(240),l=e(439),d=e(109),p=e(127),h=e("underscore"),m=e(438),t.exports=i=new(function(){function e(){}var t,r,f,g;return g=e,r=null,t=null,f=null,e.prototype.shortcut=function(e){switch(e){case s.Escape:return this.hide(),["Esc - Hide Dialog","Dialog"]}},e.prototype.init=function(){r=n(".window"),t=r.find(".window-wrapper"),t.addClass("js-tab-parent"),this.scrolltop=0,this.isVisible=!1,this.displayType=null,this.lastScroll=0,n(".window-overlay").on("scroll mousedown keydown",function(e){return function(t){return e.lastScroll=Date.now()}}(this))},e.prototype.scrolledSince=function(e){return this.lastScroll>e},e.prototype.calcPos=function(e){var t,n;n=p.fSmall?"auto":e,r.css({width:n}),null!=(null!=(t=this.view)?t.setFixedSidebarLeftPos:void 0)&&i.isVisible&&this.view.setFixedSidebarLeftPos(),i.isVisible||r.show()},e.prototype.show=function(e){var s;this.isVisible&&this.hide(e.isNavigating),a.cancelEdits(),u.hide(),c.hideUnpinnedSidebar(),f=e.hide,this.scrolltop=n(window).scrollTop(),n("body").addClass("window-up"),null!=(s=o.getCurrentBoard())&&s.composer.save("vis",!1),n("body").find(".js-disable-on-dialog:not([disabled])").addClass("disabled-for-dialog").attr("disabled","disabled"),null!=e.displayType&&(r.addClass(e.displayType),this.displayType=e.displayType),t.empty().append(m.fill("dialog_close_button")),null!=e.maxWidth?this.calcPos(e.maxWidth):this.calcPos(""),e.view?(this.view=e.view,t.append(this.view.el),this.view.render(),this.view.delegateEvents(),l.addHandler(this.view,{scope:"dialog_view"})):e.html&&(this.view=null,t.append(e.html)),this.isVisible=!0,this.lastScroll=0,h.defer(function(e){return function(){return n(".window").css({height:1e5}),n(".window-overlay").scrollTop(1),n(".window-overlay").scrollTop(0),n(".window").css({height:""})}}(this)),r.find(".js-autofocus:first,.focus-dummy").focus().select(),r.find("input[type=submit]").click(function(e){d.preventDefault(e)}),r.find(".js-close-window").click(function(e){d.stop(e),i.hide(null,!0)}),l.addHandler(this,{scope:"dialog",modal:!0})},e.prototype.hide=function(e,t){(this.isVisible&&!a.isEditing()&&!n(".new-comment").hasClass("focus")||t)&&("function"==typeof f&&f(e),f=null,null!=this.view&&(l.removeHandler(this.view),r.removeClass(this.displayType),this.displayType=null,this.view.remove(),this.view=null),l.removeHandler(this),r.hide(),n("body").removeClass("window-up"),h.defer(function(e){return function(){return n(window).scrollTop(e.scrolltop),e.scrolltop=0}}(this)),this.isVisible=!1,n(".window-overlay").off("scroll.fixSidebar"),n(".disabled-for-dialog").removeAttr("disabled"),u.hide(),this.clear())},e.prototype.clear=function(){t.width(""),t.empty()},e}()),n(function(){return i.init()})},{}],455:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x=[].slice;n=e("jquery"),o=e(65),i=e(5),u=e(458),c=e(459),l=e(240),d=e(109),p=e("underscore"),C=e(38),_=function(e,t){var r,n,o;return o=e.x,r=t.left,n=t.right,o>=r&&n>o},b=function(e,t,r){var n,o,i,s;return s=e.top,o=e.left,n=e.bottom,i=e.right,{top:s+r,bottom:n-r,left:o+t,right:i-t}},g=function(e){return{x:e.pageX,y:e.pageY}},h=function(){var e;return e=1<=arguments.length?x.call(arguments,0):[],function(){var t,r,n;for(r=0,n=e.length;n>r;r++)t=e[r],null!=t&&t.apply(this,arguments)}},k=function(e,t){return h(t,e)},s=function(){function e(e){this.scrollBoard=e.scrollBoard,this.scrollLists=e.scrollLists,this.commitEvent=e.commitEvent,this.cancelMethod=e.cancelMethod,this._queue=[]}return e.prototype.hasMousedLeft=!1,e.prototype.hasMousedRight=!1,e.prototype.stopped=!1,e.prototype.aborted=!1,e.prototype.start=function(e,t){this.$helper=t.helper,this.$target=n(e.target),this.initialMousePosition=g(e),this.lockModelCache(),l.hideSidebar(),this.startTrackingMouse(),this.hidePopoversForSomeReason(),this.boardElement=n("#board")[0],this.boardCanvasElement=n(".board-canvas")[0],this.cachedHoveredList=this.getHoveredListForPoint(this.initialMousePosition),(this.scrollLists||this.scrollBoard)&&this.startAutoscrolling(),a.sorting=!0,this.onStop(function(){return p.defer(function(){return a.sorting=!1})})},e.prototype.lockModelCache=function(){var e,t;if(t=i.getCurrentModelCache(),null==t)throw new Error("Attempt to use DragInfo on a page with no modelCache!");return e=t.lock("DragSort.startSort"),this.onStop(function(){return t.unlock(e)})},e.prototype.hidePopoversForSomeReason=function(){0===this.$target.closest(".pop-over").length&&u.hide()},e.prototype.startAutoscrolling=function(){var e,t;return e=Math.floor(1e3/60),t=setInterval(this.autoscroll.bind(this),e),this.onStop(function(){return clearInterval(t)})},e.prototype.getHoveredListForPoint=function(e){var t,r,o,i;for(i=n(".js-list"),r=0,o=i.length;o>r;r++)if(t=i[r],_(e,t.getBoundingClientRect()))return n(t).find(".list-cards")[0];return null},e.prototype.startTrackingMouse=function(){var e,t;return t=p.throttle(function(e){return function(t){return e.stopped?void 0:e.cachedHoveredList=e.getHoveredListForPoint(t)}}(this),100),e=20,n(document).on("mousemove.dragsort",function(r){return function(n){var o;o=g(n),o.x<r.initialMousePosition.x-e&&(r.hasMousedLeft=!0),o.x>r.initialMousePosition.x+e&&(r.hasMousedRight=!0),t(o)}}(this)),this.onStop(function(){return n(document).off("mousemove.dragsort")})},e.prototype.onStop=function(e){return this._queue.push(e)},e.prototype.stop=function(e,t){var r,n,o,i;for(this.stopped=!0,i=this._queue,n=0,o=i.length;o>n;n++)r=i[n],r.call(this);delete this._queue,this.aborted||this.$target.trigger(this.commitEvent,t)},e.prototype.scrollDeltaForOverhang=function(e){return.1*e},e.prototype.autoscrollBoard=function(){var e,t,r,n,o,i;r=this.$helper[0].getBoundingClientRect(),e=r.left,n=r.right,i=b(this.boardCanvasElement.getBoundingClientRect(),100,0),t=i.left-e,t>0&&this.hasMousedLeft&&(this.boardElement.scrollLeft-=this.scrollDeltaForOverhang(t)),o=n-i.right,o>0&&this.hasMousedRight&&(this.boardElement.scrollLeft+=this.scrollDeltaForOverhang(o))},e.prototype.autoscrollLists=function(){var e,t,r,n,o,i;r=this.$helper[0].getBoundingClientRect(),o=r.top,e=r.bottom,n=b(this.cachedHoveredList.getBoundingClientRect(),0,50),i=n.top-o,i>0&&(this.cachedHoveredList.scrollTop-=this.scrollDeltaForOverhang(i)),t=e-n.bottom,t>0&&(this.cachedHoveredList.scrollTop+=this.scrollDeltaForOverhang(t))},e.prototype.autoscroll=function(){this.scrollBoard&&this.autoscrollBoard(),this.scrollLists&&null!=this.cachedHoveredList&&this.autoscrollLists()},e.prototype.abort=function(){var e;return this.aborted=!0,null!=(e=n.ui.ddmanager.current)&&(e.currentContainer=e),this.$target[this.cancelMethod]("cancel")},e}(),m=null,w=function(e,t){return t=p.defaults({},t,{distance:7,scroll:!1}),e.scrollLists&&(t.custom={refreshContainers:function(){var e,t,r,o;this.containers=function(){var i,s,a,u,c,l,d;for(c=this.containers,d=[],i=0,a=c.length;a>i;i++)if(e=c[i],n.contains(document,e.element[0])){for(t=e.element.closest(".js-list")[0],o=t.getBoundingClientRect(),l=["left","top","width","height"],s=0,u=l.length;u>s;s++)r=l[s],e.containerCache[r]=o[r];d.push(e)}return d}.call(this)}}),t.start=k(t.start,function(t,r){if(null!=m)throw new Error("Attempt to start a drag event while another is in progress!");m=new s(e),m.start(t,r)}),t.stop=k(t.stop,function(e,t){d.stopPropagation(e),m.stop(e,t),m=null}),t},f=function(e){return{width:e.outerWidth(),height:e.outerHeight()}},y=function(e,t,r){var i,s;o.isTouch()||(i=null,s=!("helper"in r)||"original"===r.helper,r.start=k(r.start,function(e,n){var o,a,u,c;s&&"appendTo"in r&&(n.helper.appendTo(r.appendTo),i.sortable("refreshPositions",!0)),u=(null!=(a=t.calcSize)?a:f)(n.item),c=u.width,o=u.height,n.placeholder.width(c),n.placeholder.height(o)}),t=p.extend({commitEvent:"sortcommit",cancelMethod:"sortable"},t),r=w(t,r),c.enqueue(function(){return i=n(e),i.sortable(r)}))},v=function(e,t,r){o.isTouch()||(t=p.extend({commitEvent:"dragcommit",cancelMethod:"draggable"},t),r=w(t,r),c.enqueue(function(){return n(e).draggable(r)}))},t.exports=a={refreshListSortable:function(){return y(".js-list-sortable",{scrollBoard:!0,scrollLists:!1,calcSize:function(e){var t;return t=e.children(".list"),{width:t.outerWidth(),height:t.outerHeight()}}},{handle:".list-header",tolerance:"pointer",placeholder:"list-wrapper placeholder",items:".js-list",appendTo:"body"})},refreshCalendarCardSortable:function(){return y(".js-calendar-sortable",{scrollBoard:!1,scrollLists:!1},{connectWith:".js-calendar-sortable",placeholder:"list-card placeholder-none",items:".list-card:not(.placeholder-none, .hide, .js-composer)",appendTo:".calendar-drag-area",over:function(e,t){return n(e.target).closest(".calendar-day").addClass("drop")},out:function(e,t){return n(e.target).closest(".calendar-day").removeClass("drop")}})},refreshListCardSortable:function(){return y(".js-sortable",{scrollBoard:!0,scrollLists:!0},{connectWith:".js-sortable",placeholder:"list-card placeholder",items:".list-card:not(.placeholder, .hide, .js-composer)",appendTo:"body"})},refreshDraggableSidebarMembers:function(){return v(".js-list-draggable-board-members .member:not(.js-member-deactivated)",{scrollBoard:!0,scrollLists:!0},{revert:"invalid",revertDuration:150,appendTo:"body",zIndex:100,helper:"clone",start:function(e,t){C("Board Menu","Drag Member from Sidebar"),n(".list-card.active-card").removeClass("active-card")}})},refreshDraggableStickers:function(){return v(".js-draggable-sticker:not(.disabled)",{scrollBoard:!0,scrollLists:!0},{revert:"invalid",revertDuration:150,appendTo:"body",zIndex:100,helper:"clone",start:function(e,t){var r;C("Board Menu","Drag Sticker from Sidebar"),r=20*Math.random()-10,t.helper.find(".sticker-select-fixed").css({transform:"rotate("+r+"deg)","-webkit-transform":"rotate("+r+"deg)"})}})},
abort:function(){if(null==m)throw new Error("Abort called while not dragging!");return m.abort()},refreshIfInitialized:function(e){return(null!=e?e.hasClass("ui-sortable"):void 0)?e.sortable("refresh"):void 0}}},{}],456:[function(e,t,r){var n,o,i,s;n=e("jquery"),o=e(205),i=e(97),s=e("underscore"),t.exports=new(function(){function e(){}return s.extend(e.prototype,o.Events),e.prototype.cancelEdits=function(e){var t;return n(".edit-controls:not(.keep)").remove(),n(".editing").removeClass("editing"),n(".is-editing").removeClass("is-editing"),n(".is-focused").removeClass("is-focused"),n(".checklist-new-item").removeClass("focus"),n("input").not(e||"none").blur(),n("textarea").not(e||"none").blur(),this.trigger("cancelEdits"),t=n(".editable"),t.length>0?t.each(function(e){var t,r,o,s,a,u,c;return o=n(".editable")[e],c=n(o).find(".edits-warning:first"),t=n(o).find(".current:first"),s=n(o).find(".field:first"),r=s.data("draftKey"),a=null!=(u=t.data("unmarkeddown"))?u!==s.val():s.val()!==t.text(),a&&""!==s.val()&&null!=r?(i.set(r,s.val()),c.show()):void 0}):void 0},e.prototype.isEditing=function(){return n(".editing").length+n(".checklist-new-item.focus").length+n(".is-focused").length>0},e}())},{}],457:[function(e,t,r){var n,o,i,s,a,u;s=e(209),o=e("react"),n=e("bluebird"),a=e(433)("popover"),u=e("xtend"),i=e("underscore"),t.exports=o.createClass({displayName:"Popover",getInitialState:function(){return{title:""}},componentDidMount:function(){return this.updateTitle(this.props)},componentWillReceiveProps:function(e){var t;return null!=(t=this._titlePromise)&&t.cancel(),this.updateTitle(e)},updateTitle:function(e){return this._titlePromise=n.resolve(e.getViewTitle()).cancellable().then(function(e){return function(t){return e.isMounted()?e.setState({title:t}):void 0}}(this)).catch(n.CancellationError,function(){})},componentWillUnmount:function(){var e;return null!=(e=this._titlePromise)?e.cancel():void 0},render:a.renderable(function(){var e,t,r,n,u;return u=this.props,t=u.hideHeader,r=u.onBack,n=u.onClose,e=u.children,a.div(function(u){return function(){return t||a.div(".pop-over-header.js-pop-over-header",function(){return null!=r&&a.a(".pop-over-header-back-btn.icon-sm.icon-back.is-shown",{onClick:r,href:"#"}),a.span(".pop-over-header-title",function(){return a.text(u.state.title)}),a.a(".pop-over-header-close-btn.icon-sm.icon-close",{onClick:n,href:"#"})}),a.div(function(){var t,r,n;return n={className:"pop-over-content js-pop-over-content u-fancy-scrollbar js-tab-parent"},t=function(e,t){return i.chain(null!=t?t.split(" "):void 0).union(e.split(" ")).value().join(" ")},r=function(e,r){return o.cloneElement(r,{className:t("js-popover-pushed hide",r.props.classNames)})},e=i.chain(e).initial().map(s(r,"js-popover-pushed hide")).value().concat(i.last(e)),a.addElement(o.createElement("div",n,e))})}}(this))})})},{}],458:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y;n=e("jquery"),o=e(65),v=e(209),i=e(16),s=e(456),a=e(457),u=e("bluebird"),m=e(441),c=e("react"),l=e("react-dom"),p=e(439),h=e(109),f=e(127),d=e(91),y=e("xtend"),g=e("underscore"),t.exports=new(function(){function e(){this.argsStack=[],this.position={},this.isVisible=!1,n(function(e){return function(){return t=n(".pop-over")}}(this))}var t,r,u,h;return t=null,r=null,u=null,h=null,e.prototype.shortcut=function(e){switch(e){case i.Escape:return this.popView(),["Esc - Pop Pop-over View","Pop Over"]}},e.prototype.contains=function(e){return n.contains(t[0],e)},e.prototype.toggledBy=function(e){return g.any(this.argsStack,function(t){return t.elem===e})},e.prototype.onWindowResize=function(){return this.isVisible?this.load(this.argsStack.pop()):void 0},e.prototype.calcPos=function(e){var r,o,i,s,a,u,c,l,d,p,h,m,v,y,b;return b=n(window).width(),y=n(window).height(),null!=e.maxWidth?e.maxWidth>b?t.width(b-16):t.width(e.maxWidth):t.width(""),s=b,v=y,p=t.outerWidth(),null!=e.elem&&n(e.elem).is(":visible")?(m=null!=e.top?e.top:null!=e.elem?n(e.elem).outerHeight()+6:35,r=e.alignRight?n(e.elem).offset().left+n(e.elem).outerWidth()-p:n(e.elem).offset().left,i=n(e.elem).offset().top+m):null!=e.clientx&&null!=e.clienty&&(r=e.clientx,i=e.clienty),a=v-68,e.hideHeader||(a-=t.find(".js-pop-over-header").outerHeight()),null!=e.clientx&&null!=e.clienty||g.include(["block","inline-block","inline","table-cell"],n(null!=e?e.elem:void 0).css("display"))?(d=i>0?i:5,c=t.outerHeight(),u=d+c,(f.fLarge||f.fExtraLarge)&&(h=y+n(window).scrollTop(),u>h&&(d=h-c-8),c>h-44&&(d=44)),l=r>0?r:5,o=l+p+16,o>s&&(l=s-(p+5)),{left:l,top:d,contentHeight:a}):void 0},e.prototype.load=function(e){var r,n,o,i;if(this.view=e.view,t.addClass(e.displayType),!c.isValidElement(e.reactElement))throw new Error("PopOver args.reactElement has to be a react element");return r=(null!=(i=g.last(this.argsStack))?i.keepInDOM:void 0)?(n=g.chain(this.argsStack).filter(function(e){return e.keepInDOM}).pluck("reactElement").value(),n.concat(e.reactElement)):[e.reactElement],o={key:"PopOver",onBack:this.argsStack.length>0?v(this,"popView"):null,onClose:v(this,"hide"),getViewTitle:e.getViewTitle,hideHeader:e.hideHeader},this.por=l.render(c.createElement(a,o,r),t[0]),g.defer(function(r){return function(){var n;return r.position=null!=(n=r.calcPos(e))?n:r.position,t.css({left:r.position.left,top:r.position.top}),t.find(".js-pop-over-content").css({maxHeight:r.position.contentHeight}),t.addClass("is-shown")}}(this)),this.argsStack.push(e)},e.prototype.extractViewArgs=function(e){var t,r;if(null!=e.reactElement)return e;if(null==e.view&&(e={view:e}),g.isFunction(e.view)&&(e.view=new e.view(null!=(r=e.options)?r:{})),!(e.view instanceof m))throw new Error("PopOver args.view has to be a backbone instance");return t=function(e,t){return g.isFunction(e[t])?v(e,t):void 0},e.reactElement=c.createElement(d,{key:e.view.cid,view:e.view}),y({maxWidth:e.view.maxWidth,displayType:e.view.displayType,keepInDOM:e.view.keepInDOM,hideHeader:e.view.hideHeader,getViewTitle:t(e.view,"getViewTitle"),willBePushedDown:t(e.view,"willBePushedDown"),willBePopped:t(e.view,"willBePopped")},e)},e.prototype.show=function(e){e.keepEdits||s.cancelEdits(e.elActive),this.reset(),this.load(this.extractViewArgs(e)),g.defer(function(e){return function(){if(t.find(".js-autofocus").length>0){if(o.isTouch()&&t.find(".js-autofocus:first").hasClass("js-no-touch-autofocus"))return;return t.find(".js-autofocus:first").focus().select()}}}(this)),this.isVisible=!0,"function"==typeof e.shown&&e.shown(t),u=e.hidden,this.positionInterval=setInterval(this.checkPosition.bind(this),150),p.addHandler(this,{scope:"popover",modal:!0})},e.prototype.checkPosition=function(){var e,r,o,i,s;return this.isVisible?(o=t.offset().top,s=n(window).scrollTop(),o!==s?(i=n(window).height(),r=t.outerHeight(),s>o&&i>=r?void t.css({top:s}):o+r>s+i&&(e=s+Math.max(0,i-r),e!==o)?t.css({top:e}):void 0):void 0):void clearInterval(this.positionInterval)},e.prototype.pushView=function(e){var r;if(this.clearDisplayTypes(),r=g.last(this.argsStack),null!=r&&"function"==typeof r.willBePushedDown&&r.willBePushedDown(),this.load(this.extractViewArgs(e)),t.find(".js-autofocus").length>0){if(o.isTouch()&&t.find(".js-autofocus:first").hasClass("js-no-touch-autofocus"))return;return setTimeout(function(e){return function(){return t.find(".js-autofocus:first").focus().select()}}(this),10)}},e.prototype.popView=function(){var e,r,n;if(e=g.last(this.argsStack),null!=e&&"function"==typeof e.willBePopped&&e.willBePopped(),null!=e&&null!=(r=e.reactElement.props)&&null!=(n=r.view)&&n.remove(),this.argsStack.pop(),null==g.last(this.argsStack))return void this.hide();if(this.load(this.argsStack.pop()),t.find(".js-autofocus").length>0){if(o.isTouch()&&t.find(".js-autofocus:first").hasClass("js-no-touch-autofocus"))return;return setTimeout(function(e){return function(){return t.find(".js-autofocus:first").focus().select()}}(this),10)}},e.prototype.toggle=function(e){var t;return t=function(e,t){return e&&t&&n(e)[0]===n(t)[0]},g.last(this.argsStack)&&t(g.last(this.argsStack).elem,e.elem)?this.hide():this.show(e)},e.prototype.hide=function(){return clearInterval(this.positionInterval),t.removeClass("is-shown"),this.reset(),l.unmountComponentAtNode(t[0])},e.prototype.reset=function(){var e,r,n,o,i;for(this.clearDisplayTypes(),n=this.argsStack,r=n.length-1;r>=0;r+=-1)e=n[r],"function"==typeof e.willBePopped&&e.willBePopped(),null!=(o=e.reactElement.props)&&null!=(i=o.view)&&i.remove();return p.removeHandlerScope("popover_view"),p.removeHandler(this),this.view=null,this.argsStack=[],this.isVisible=!1,"function"==typeof u&&u(t),u=null},e.prototype.clearDisplayTypes=function(){return t.removeClass("mod-mini-profile mod-avdetail mod-search-over mod-notifications")},e}())},{}],459:[function(e,t,r){var n,o=[].slice;n=e("underscore"),t.exports=new(function(){function e(){this.holding=!1,this.fxs={},this._unnamed=0}return e.prototype.hold=function(){return this.holding=!0},e.prototype.enqueue=function(){var e,t,r,n;e=2<=arguments.length?o.call(arguments,0,r=arguments.length-1):(r=0,[]),t=arguments[r++],n=e[0],null==n&&(n="unnamed_"+this._unnamed++),this.holding?this.fxs[n]=t:t()},e.prototype.release=function(){var e;this.holding=!1,e=this.fxs,this.fxs={},n.defer(function(){var t,r;for(r in e)(t=e[r])()})},e}())},{}],460:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(461),i=e(84),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.getLinkText=function(){return i("prefilled info tooltip.title")},t.prototype.getTooltipText=function(){return i("prefilled info tooltip.text")},t.prototype.isActive=function(){return 0!==this.$el.closest(".active").length},t}(o)},{}],461:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;n=e(462),i=e(109),s=e(441),a=e(822),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.className="tooltip",t.prototype.events={"click .js-tooltip-trigger":"toggleTooltip"},t.prototype.getTooltipText=function(){return""},t.prototype.getLinkText=function(){return""},t.prototype.render=function(){return this.$el.html(a(this.getLinkText())),this},t.prototype.isActive=function(){return!0},t.prototype.toggleTooltip=function(e){i.stop(e),this.isActive()&&n.toggle(this.getTooltipText(),this.$(".js-tooltip-anchor"))},t}(s)},{}],462:[function(e,t,r){var n,o;n=e("jquery"),o=e(438),t.exports=new(function(){function e(){this.tooltip=null,n(window).bind("click",function(e){return function(t){return e.windowClick(t)}}(this))}return e.prototype.show=function(e,t){var r,i,s,a,u,c;return r=n(o.fill("tooltip_content",{tooltipText:e})),i=n(".tooltip-container"),i.html(r),this.tooltip={tooltipText:e,$anchor:t,$elem:r},c=t.offset(),a=c.left,u=c.top,s=t.outerHeight(),i.css({left:a-5,top:u+s}),r.addClass("active")},e.prototype.toggle=function(e,t){var r;return t.is(null!=(r=this.tooltip)?r.$anchor:void 0)?this.hide():this.show(e,t)},e.prototype.windowClick=function(e){return 0===n(e.target).closest(".js-tooltip-content").length||0!==n(e.target).closest(".js-tooltip-close-button").length?this.hide():void 0},e.prototype.hide=function(){var e;return this.tooltip=null,e=n(".tooltip-container"),e.find(".tooltip-content").removeClass("active"),setTimeout(function(t){return function(){return e.empty()}}(this),300)},e}())},{}],463:[function(e,t,r){var n,o,i,s,a,u,c,l=function(e,t){function r(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d={}.hasOwnProperty;n=e("jquery"),i=e(458),s=e(109),a=e(441),u=e(438),c=e(38),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.className="js-add-list list-wrapper mod-add is-idle",t.prototype.initialize=function(){return this.listenTo(this.model.viewState,"change:listComposerOpen",this.frameDebounce(this.renderListComposer))},t.prototype.events={"click .js-open-add-list":"setOpen","click .js-cancel-edit":"setClose",submit:"addList"},t.prototype.render=function(){var e;return e=this.model.toJSON({board:!0}),this.$el.html(u.fill("list_add",e)),this.renderListComposer(),this.model.editable()&&this.$el.removeClass("fade hide"),this},t.prototype.setOpen=function(e){s.stop(e),this.model.viewState.set("listComposerOpen",!0)},t.prototype.setClose=function(e){s.stop(e),this.model.viewState.set("listComposerOpen",!1)},t.prototype.renderListComposer=function(){return this.model.viewState.get("listComposerOpen")?this.renderOpen():this.renderClose()},t.prototype.renderOpen=function(e){s.stop(e),this.$el.hasClass("is-idle")&&(this.$el.removeClass("is-idle"),n(".list-area-wrapper").scrollLeft(n(".list-area").outerWidth()+100)),this.defer(function(e){return function(){return e.$(".list-name-input").focus().select()}}(this)),i.hide()},t.prototype.renderClose=function(e){s.stop(e),this.$el.addClass("is-idle")},t.prototype.addList=function(e){var t,r,n,o;return s.stop(e),t=this.$(".list-name-input"),n=this.model.listList,o=n.length+1,r=t.val().trim(),""===r?void t.focus().select():(this.model.listList.create({name:r,pos:this.model.calcPos(o),closed:!1},{success:function(e){return function(e){return c("Board View","Add List - via Inline List Composer")}}(this)}),void this.renderOpen())},t}(a)},{}],464:[function(e,t,r){var n,o,i,s,a,u,c,l=function(e,t){function r(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d={}.hasOwnProperty;n=e("jquery"),i=e(458),s=e(441),a=e("underscore"),u=e(438),c=e(38),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="move all cards in list",t.prototype.events={"click .js-select-list":"selectList"},t.prototype.render=function(){var e,t,r,n,o,i;for(t=this.model.toJSON(),t.lists=[],i=this.model.getBoard().listList.models,r=0,n=i.length;n>r;r++)o=i[r],e=a.clone(o.toJSON()),e.id===this.model.id&&(e.current=!0),t.lists.push(e);return this.$el.html(u.fill("list_bulk_card_move",t)),this},t.prototype.selectList=function(e){var t,r,o,s,u,l,d;if(t=n(e.target).closest(".js-select-list"),d=t.attr("name"),!t.hasClass("disabled")){for(l=this.modelCache.get("List",d),c("Card","Moved in Bulk via List Menu"),o=a.clone(this.model.openCards().models),s=0,u=o.length;u>s;s++)r=o[s],r.moveToList(l,1e3);i.hide()}},t}(s)},{}],465:[function(e,t,r){var n,o,i,s,a,u,c,l,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p={}.hasOwnProperty;n=e(80),o=e(16),s=e(458),a=e(109),u=e(441),c=e(438),l=e(38),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="copy list",t.prototype.tagName="form",t.prototype.events={"click .js-submit":"submit",submit:"submit",'keydown textarea[name="name"]':"keydownEvent"},t.prototype.render=function(){var e;return e=this.model.toJSON(),this.$el.html(c.fill("list_copy",e,{editable:this.model.editable()})),this},t.prototype.keydownEvent=function(e){n.getKey(e)===o.Enter&&(a.stop(e),this.submit(e))},t.prototype.submit=function(e){var t,r,n,o;return a.stop(e),n=this.$('textarea[name="name"]'),""===n.val().trim()?void n.focus().select():(t=this.model.getBoard(),r=t.listList.calcPos(this.model.getIndexInList()+1,this.model,!0),o={idListSource:this.model.id,idBoard:this.model.get("idBoard"),pos:r,name:n.val().trim(),closed:!1},t.listList.create(o),s.hide(),void l("List","Copy List"))},t}(u)},{}],466:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;n=e(411),o=e(455),s=e(469),a=e(62),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewType=s,t.prototype.initialize=function(e){return this.resetCallback=e.resetCallback,t.__super__.initialize.apply(this,arguments),a(null!=this.resetCallback),this.listenTo(this.collection,{reset:this.resetCallback,"change:idBoard":this.boardChange})},t.prototype.boardChange=function(e,t){return t!==this.collection.board.get("id")?(this.collection.remove(e),o.refreshIfInitialized(this.$el)):void 0},t.prototype.addModel=function(){return t.__super__.addModel.apply(this,arguments),this.resetCallback()},t.prototype.removeSubview=function(){t.__super__.removeSubview.apply(this,arguments),o.refreshListCardSortable()},t.prototype.insertSubview=function(e){t.__super__.insertSubview.apply(this,arguments),e.$el.find(".ui-sortable").length>0?o.refreshIfInitialized(this.$el):o.refreshListCardSortable()},t}(n)},{}],467:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},f={}.hasOwnProperty;n=e(452),o=e(464),i=e(465),a=e(468),u=e(458),c=e(109),l=e(441),p=e(438),h=e(38),d=e("underscore"),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="list actions",t.prototype.initialize=function(){return this.listenTo(this.model,"change:subscribed",this.frameDebounce(this.render))},t.prototype.events={"click .js-add-card":"addCard","click .js-move-list":"moveList","click .js-copy-list":"copyList","click .js-list-subscribe":"toggleSubscribe","click .js-move-cards":"moveCards","click .js-archive-cards":"archiveCards","click .js-close-list":"closeList"},t.prototype.render=function(){var e;return e=this.model.toJSON(),this.$el.html(p.fill("list_menu",e,{editable:this.model.editable()})),this},t.prototype.addCard=function(e){c.stop(e),u.hide(),this.model.getBoard().composer.save({list:this.model,index:0,vis:!0}),h("List Menu","Add Card"),h("Card Composer","Open","Via List Menu")},t.prototype.moveList=function(e){c.stop(e),h("List Menu","Open Move List Popover"),u.pushView({view:new a({model:this.model,modelCache:this.modelCache})})},t.prototype.copyList=function(e){c.stop(e),h("List Menu","Open Copy List Popover"),u.pushView({view:new i({model:this.model,modelCache:this.modelCache})})},t.prototype.toggleSubscribe=function(e){c.preventDefault(e),this.model.get("subscribed")?(this.model.subscribe(!1),h("List Menu","Subscribe","Unsubscribe")):(this.model.subscribe(!0),h("List Menu","Subscribe","Subscribe"))},t.prototype.moveCards=function(e){c.stop(e),h("List Menu","Open Move All Cards in List"),u.pushView({view:new o({model:this.model,modelCache:this.modelCache})})},t.prototype.archiveCards=function(e){c.stop(e),h("List Menu","Open Archive All Cards in List"),n.pushView("archive all cards",{model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){var r,n,o,i;for(u.hide(),i=d.clone(e.model.cardList.models),n=0,o=i.length;o>n;n++)r=i[n],r.set({closed:!0});return e.model.run("archiveAllCards",{},e.listViewListen)}}(this)})},t.prototype.closeList=function(e){var t,r;return c.stop(e),r=this,t=this.model,h("List Menu","Archive List"),u.hide(),t.close(),!1},t}(l)},{}],468:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f=function(e,t){function r(){this.constructor=e}for(var n in t)g.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},g={}.hasOwnProperty;n=e("jquery"),o=e(25),s=e(30),a=e(197),u=e(458),c=e(109),l=e(441),d=e("underscore"),h=e(438),m=e(38),p=e(84),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.viewTitleKey="move list",t.prototype.tagName="form",t.prototype.events={"change .js-select-list-pos":"renderValues","change .js-select-board":"updateBoardData","click .js-commit-position":"commitChange",submit:"commitChange"},t.prototype.render=function(){var e,t,r,n,i,s,a,u,c,l,d;for(d=this,a=d.model,t={organizations:o.me().getOpenBoardsByOrg(!0)},c=t.organizations,r=0,i=c.length;i>r;r++)for(u=c[r],l=u.boards,n=0,s=l.length;s>n;n++)e=l[n],e.id===a.get("idBoard")&&(e.selected=!0);return this.$el.html(h.fill("popover_move_list",t)),this.updateBoardData(),this},t.prototype.renderValues=function(){var e,t,r,o,i;e=n(this.el),o=e.find(".js-select-board option:selected").val(),i=parseInt(e.find(".js-select-list-pos option:selected").text(),10),t=this.modelCache.get("Board",o),r=t.get("name"),e.find(".js-board-value").text(r),e.find(".js-pos-value").text(String(i))},t.prototype.updateBoardData=function(){var e,t,r,o,i,u,c,l;if(e=n(this.el),r=e.find(".js-select-board"),o=r.find("option:selected").val(),o===this.model.getBoard().id){for(this._boardData=this.model.getBoard(),l=this._boardData.listList.models,i=0,u=l.length;u>i;i++)c=l[i],c.cardCount=this._boardData.listList.get(c.id).openCards().length;this.updateListList()}else t=e.find(".select-list,.select-position"),t.attr("disabled","disabled"),s.loadBoardData(o,a.listsMinimal).then(function(e){return function(){return e._boardData=e.modelCache.get("Board",o),e.updateListList(),t.removeAttr("disabled")}}(this)).done()},t.prototype.updateListList=function(){var e,t,r,o,i,s,a,u,c,l,h,m,f,g;for(g=this,l=g.model,t=this.$(".js-select-list-pos"),t.empty(),h=this._boardData.listList.models,u=this._boardData.id===this.model.getBoard().id,u?(o=d.indexOf(h,this.model),r=h.length):(o=-1,r=h.length+1),s=c=0,f=r;f>=0?f>c:c>f;s=f>=0?++c:--c)a=String(s+1),i=s===o?p("current position",{index:a}):a,m=this._boardData.listList.calcPos(s,l),e=n("<option>").val(m).text(i).appendTo(t),s===o&&e.attr("selected","selected");return this.renderValues()},t.prototype.commitChange=function(e){var t,r,n;c.stop(e),t=this.$(".js-select-list-pos"),n=parseInt(t.find("option:selected").val(),10),r=this.$(".js-select-board option:selected").val(),this.model.getBoard().composer.save("vis",!1),r===this.model.getBoard().id?(this.model.update({pos:n}),m("List Menu","Move Menu","Successfully Moved")):null!=r&&null!=n&&(this.model.update({idBoard:r,pos:n}),m("List Menu","Move Menu","Changed Board")),u.hide()},t}(l)},{}],469:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M,B,T,O,L,P,A,E,D=function(e,t){function r(){this.constructor=e}for(var n in t)I.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},I={}.hasOwnProperty;n=e("jquery"),o=e(25),i=e(65),s=e(358),a=e(368),u=e(5),e(412),c=e(455),w=e(441),p=e(467),f=e(458),v=e(99),m=e(429),g=e("bluebird"),y=e(439),b=e(109),_=e("underscore"),S=e(35),M=e(89),P=e(438),x=e(703),A=e(38),j=e(82),T=e(228),E=e(442),O=e(421),l=e(80),d=e(16),C=e(84),k=e(209),B=e(112),L=e(113),t.exports=h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return D(t,e),t.prototype.className="js-list list-wrapper",t.prototype.events={"click .js-open-list-menu":"openMenu","mousedown .list-cards":"eventStopPropagation","click .js-open-card-composer":"openCardComposer","keydown  .js-list-name-input":"keyDownEvent","blur     .js-list-name-input":"stopEditing","click  .js-editing-target":"startEditing",movelist:"moveList",sortreceive:"sortReceive",sortcommit:"sortCommit","dd-drop:files":"dropFiles","dd-drop:text":"dropText","dd-drop:url":"dropUrl",mouseenter:"mouseenter",mouseleave:"mouseleave","userinput-paste:text":"dropText","userinput-paste:files":"dropFiles","userinput-paste:url":"dropUrl"},t.prototype.initialize=function(){var e,r,o,i,s;for(t.__super__.initialize.apply(this,arguments),this.fEditingName=!1,this.makeDebouncedMethods("toggleComposerLink","renderComposer","renderCardCount","renderName"),this.listenTo(this.model,{"change:name":this.renderNameDebounced,"change:subscribed":this.renderSubscribed}),this.listenTo(this.model.cardList,{"add remove change:idList change:closed reset":this.renderCardCountDebounced}),this.listenTo(this.model.getBoard(),"permChange",this.renderEditable),this.listenTo(this.model.getBoard().composer,{"change:list change:index change:vis":this.renderComposerDebounced,"change:list change:vis":this.toggleComposerLinkDebounced}),this.cardListView=this.collectionSubview(a,this.model.cardList,{className:"list-cards u-fancy-scrollbar u-clearfix js-list-cards"}),n(window).on("resize."+this.uniqueId(),k(this,"hackFlexboxForSadBrowsers")),s=["mouseEnterCardView","mouseLeaveCardView","mouseMoveCardView"],r=function(e){return function(t){return e.listenTo(e.cardListView,t,function(e){return this.trigger(t,e)})}}(this),o=0,i=s.length;i>o;o++)e=s[o],r(e)},t.prototype.render=function(){return S("render","rendering list "+this.model.get("name")),this.cardListView.$el.detach(),this.$el.html(x({name:this.model.get("name"),subscribed:this.model.get("subscribed"),loggedIn:o.isLoggedIn()})),this.cardListView.$el.insertAfter(this.$(".js-list-header")),this.cardListView.render(),this.cardListView.$el.toggleClass("js-sortable",this.model.editable()),this.toggleComposerLinkDebounced(),this.renderComposerDebounced(),this.renderCardCount(),this.renderEditable(),this.hackFlexboxForSadBrowsers(),_.defer(function(e){return function(){return e.$(".js-list-name-input").autosize({append:!1})}}(this)),this},t.prototype.remove=function(){return n(window).off("."+this.uniqueId()),t.__super__.remove.apply(this,arguments)},t.prototype.renderName=function(){return this.$(".js-list-name-assist").text(this.model.get("name")),this.fEditingName||this.$(".js-list-name-input").val(this.model.get("name")).trigger("autosize.resize",!1),this},t.prototype.renderSubscribed=function(){return this.$(".js-list-subscribed").toggleClass("hide",!this.model.get("subscribed")),this.$(".js-list-header").toggleClass("is-subscribe-shown",this.model.get("subscribed")),this.$(".js-list-name-input").trigger("autosize.resize",!1),this},t.prototype.renderEditable=function(){var e;return e=this.model.editable(),this.$(".js-list-cards").toggleClass("js-sortable",e),e?this.$(".js-list-name-input").removeAttr("disabled"):this.$(".js-list-name-input").attr("disabled","disabled"),this.$(".js-open-card-composer").toggleClass("hide",!e),this},t.prototype.hackFlexboxForSadBrowsers=function(){var e;("explorer-10"===(e=i.browserVersionStr)||"explorer-11"===e)&&this.defer(function(e){return function(){var t,r,o,i,s;return t=e.$el,s=e.$(".list-header").outerHeight(),o=e.$(".open-card-composer").outerHeight(),r=n("#board").height(),i=r-s-o-20,e.$(".list-cards").css({"max-height":i})}}(this))},t.prototype.saveListName=function(e){var t,r,n;t=this.$(".js-list-name-input"),r=this.model.get("name"),n=t.val(),n=n.replace(/\s+/g," ").trim(),n!==r&&(n.length>16384||0!==n.trim().length&&this.model.update("name",n))},t.prototype.keyDownEvent=function(e){return l.getKey(e)===d.Enter?(b.stop(e),void this.stopEditing()):l.getKey(e)===d.Escape?void this.stopEditing():void 0},t.prototype.startEditing=function(e){b.stop(e),this.fEditingName||(console.log("start editing"),this.fEditingName=!0,this.$(".js-editing-target").addClass("is-hidden"),_.defer(function(e){return function(){return e.$(".js-list-name-input").focus().select().addClass("is-editing")}}(this)))},t.prototype.stopEditing=function(e){var t;this.fEditingName&&(console.log("stop editing"),this.$(".js-editing-target").removeClass("is-hidden"),t=this.$(".js-list-name-input").removeClass("is-editing"),t.is(":focus")&&t.blur(),L(),this.fEditingName=!1,this.saveListName())},t.prototype.toggleComposerLink=function(){return this.$(".js-open-card-composer").toggleClass("hide",this.composerOpen()||!this.model.editable())},t.prototype.composerOpen=function(){var e,t;return e=null!=(t=this.model.getBoard())?t.composer:void 0,null!=e&&e.get("vis")&&e.get("list")===this.model},t.prototype.renderComposer=function(){var e,t;return this.composerOpen()&&(e=this.model.getBoard().composer,t=u.getCurrentBoardView().subview(s,e),this.insertComposerAtIndex(e.get("index"),t),t.scrollIntoView(),_.debounce(t.delegateEvents(),150)),this},t.prototype.insertComposerAtIndex=function(e,t){var r,n;0===e?this.$(".list-cards").prepend(t.render().el):(n=e-1,r=this.$(".list-card").not(".js-composer"),n>=r.length&&(n=r.length-1),r.eq(n).after(t.render().el))},t.prototype.renderCardCount=function(){return this.$(".js-num-cards").text(j("cards",this.model.openCards().length))},t.prototype.openCardComposer=function(e){var t;b.stop(e),f.hide(),t=this.model.getBoard(),t.composer.save({list:this.model,index:this.model.openCards().length,vis:!0}),A("Card Composer","Open","Via Bottom of List")},t.prototype.triggerOnItem=function(e,t,r){b.stopPropagation(e),this.defer(function(e){return function(){return t.item.trigger(r,[t,e])}}(this))},t.prototype.sortReceive=function(e,t){this.triggerOnItem(e,t,"moveto")},t.prototype.sortCommit=function(e,t){this.triggerOnItem(e,t,"movein")},t.prototype.openMenu=function(e){var t;return t=this,c.sorting?void 0:(b.preventDefault(e),A("List Menu","Open List Menu"),f.toggle({elem:e.currentTarget,view:new p({model:this.model,modelCache:this.modelCache})}),!1)},t.prototype.moveList=function(e,t){var r,n;b.stop(e),r=t.item.parent().children(),n=r.index(t.item),this.model.move(n)},t.prototype.eventStopPropagation=function(e){b.stopPropagation(e)},t.prototype.scrollToCard=function(e){var t;t=this.cardListView.viewForModel(e),b.scrollElementIntoView(this.$(".js-list-cards")[0],t.el,{vertical:!0,animated:!0})},t.prototype.mouseenter=function(e){return y.addHandler(this,{scope:"list"})},t.prototype.mouseleave=function(e){return y.removeHandler(this,{scope:"list"})},t.prototype.dropText=function(e){var t;if(this.model.editable())return t=e.detail,this.model.uploadText(t)},t.prototype.dropUrl=function(e){var t,r,n,o,i,s;if(this.model.editable())return e.stopPropagation(),s=e.detail,o=T(s),b.isExternalURL(s)||null==(t=null!=(i=/^\/c\/([^\/]+)/.exec(o.pathname))?i[1]:void 0)?void(null!=(r=o.host)&&m.one({timeout:2e3,command:"card-from-url",list:this.model,board:this.model.getBoard(),options:{url:s}}).catch(m.Error.NotHandled,function(){return{}}).then(function(e){return function(t){var n,o;return o=C("loading from domain",{domain:r}),n=_.pick(t,"name","desc"),B(e.model,"uploadUrl",s,n,o)}}(this)).done()):(n=v.isCut(s)?"moveCard":"copyCard",void this.trigger(n,{shortLink:t,idList:this.model.id}))},t.prototype.dropFiles=function(e){var t;if(this.model.editable()&&(t=e.detail,!E(this.model.getBoard(),t)))return g.resolve(t).each(function(e){return function(t){var r;return r=t.name||O(),B(e.model,"upload",t,r)}}(this)).catch(function(){}).done()},t}(w)},{}],470:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(474),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.renderMenu=function(){},t}(o)},{}],471:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h=function(e,t){function r(){this.constructor=e}for(var n in t)m.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},m={}.hasOwnProperty;o=e(481),i=e(452),s=e(5),a=e(474),u=e(458),c=e(109),l=e("underscore"),p=e(438),d=e(84),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className="board-member-menu",t.prototype.initialize=function(){return this.board=this.options.board,this.listenTo(this.board,"change:prefs",this.render),t.__super__.initialize.apply(this,arguments)},t.prototype.events={"click .js-remove-member":"removeMember","click .js-change-role":"changeRole"},t.prototype.renderMenu=function(){
var e,t,r;return t=l.extend(this.model.toJSON(),"function"==typeof(e=this.board).premiumFeatures?e.premiumFeatures():void 0,this.model.getMembershipData(this.board)),t.boardProfileUrl=s.getMemberBoardProfileUrl(this.model.get("username"),this.board.id),r=this.board.getMemberType(this.model),t.type=d(["member types",r]),t.isGhost="virtual"===r,("superadmin"===r||"deactivated"===r)&&(t.canChangeRole=!1),this.$el.append(p.fillMenu("member_on_board_menu",t,{editable:this.board.editable(),owned:this.board.owned()})),this},t.prototype.changeRole=function(e){c.stop(e),u.pushView({view:new o({model:this.model,parent:this.board,modelCache:this.modelCache})})},t.prototype.removeMember=function(e,t){c.stop(e),i.pushView(this.model.removeMembershipConfirmationKey(this.board),{confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.board.removeMember(e.model),u.hide()}}(this)})},t}(a)},{}],472:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(474),i=e(458),s=e(438),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.events={"click .js-remove-member":"removeMember"},t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.card=this.options.card},t.prototype.renderMenu=function(){return this.$el.append(s.fillMenu("member_on_card_menu",this.model.toJSON(),{editable:this.card.editable()})),this},t.prototype.removeMember=function(e){var t;i.hide(),t=this.model.id,this.card.removeMember(t)},t}(o)},{}],473:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e(458),i=e(441),s=e(729),a=e(38),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.getViewTitle=function(){return this.model.get("fullName")},t.prototype.displayType="mod-avdetail",t.prototype.events={"click .js-profile":"showProfile"},t.prototype.render=function(){var e;return e=this.model.toJSON(),this.$el.html(s(e)),this},t.prototype.showProfile=function(){a("Mini Profile","Large Avatar - Click Profile")},t}(i)},{}],474:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f=function(e,t){function r(){this.constructor=e}for(var n in t)g.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},g={}.hasOwnProperty;n=e(25),o=e(478),i=e(483),s=e(473),u=e(30),c=e(458),l=e(109),d=e(441),p=e("underscore"),h=e(742),m=e(38),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change",this.frameDebounce(this.render))},t.prototype.getViewTitle=function(){return this.model.getMemberViewTitle()},t.prototype.displayType="mod-mini-profile",t.prototype.delegateEvents=function(e){var r;return r={"click .js-profile":"showProfile","click .js-edit-profile":"editProfile","click .js-view-large":"viewLarge","click .js-change-av":"changeAvatar"},t.__super__.delegateEvents.call(this,p.extend(r,e||this.events))},t.prototype.render=function(){var e;return e=this.model.toJSON(),e.isMe=n.isMe(this.model),e.showEmail=null!=e.email&&!e.isMe,null!=e.email||"ghost"!==this.model.get("memberType")||this.loaded||this.loadEmail(),this.$el.html(h(e)),this.renderMenu(),this},t.prototype.loadEmail=function(){return u.loadMemberEmail(this.model.id).then(function(e){return function(){return e.loaded=!0}}(this)).done()},t.prototype.showProfile=function(){m("Mini Profile","Click Profile")},t.prototype.editProfile=function(e){l.stop(e),m("Mini Profile","Click Edit Profile"),c.pushView({view:new i({model:this.model,modelCache:this.modelCache})})},t.prototype.viewLarge=function(e){l.stop(e),m("Mini Profile","View Large Avatar"),c.pushView({view:new s({model:this.model,modelCache:this.modelCache})})},t.prototype.changeAvatar=function(e){l.stop(e),m("Mini Profile","Change Avatar"),c.pushView({view:new o({model:this.model,modelCache:this.modelCache})})},t}(d)},{}],475:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h=function(e,t){function r(){this.constructor=e}for(var n in t)m.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},m={}.hasOwnProperty;n=e("jquery"),o=e(471),i=e(455),a=e(458),u=e(109),c=e(441),l=e(62),d=e(35),p=e(438),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className="member",t.prototype.events={click:"showMenu"},t.prototype.initialize=function(e){this.board=e.board,l(null!=this.model,"You cannot have a deleted member as a board member!"),this.listenTo(this.model,"change",this.render),this.listenTo(this.board,"change:memberships",this.render)},t.prototype.render=function(){var e,t,r;return d("render","rendering "+this.constructor.name+" "+this.model.get("fullName")),e=this.model.toJSON(),t=function(e){return function(t){var r;return r=t.getMembershipFor(e.model),"admin"===(null!=r?r.memberType:void 0)}}(this),e.isBoardAdmin=t(this.board)||(null!=(r=this.board.getOrganization())?r.isPremOrgAdmin(this.model):void 0),e.isGhost="ghost"===this.model.get("memberType"),this.board.isDeactivated(this.model)&&(e.isDeactivated=!0),this.$el.html(p.fill("member",e)),this.model.isFeatureEnabled("crown")&&this.$el.addClass("has-crown"),e.isDeactivated&&this.$el.addClass("member-deactivated js-member-deactivated"),e.isGhost&&this.$el.addClass("member-virtual"),this.$el.data("id",this.model.id),this},t.prototype.showMenu=function(e){this.doClicks()&&(u.stop(e),a.toggle({elem:e.currentTarget,view:new o({board:this.board,model:this.model,modelCache:this.modelCache})}))},t.prototype.doClicks=function(){return!i.sorting},t}(c)},{}],476:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h={}.hasOwnProperty;o=e(451),i=e(458),s=e(109),a=e(441),l=e(438),d=e(38),u=e(84),c=e(34),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="add email",t.prototype.events={"click .js-save-changes":"saveChanges"},t.prototype.render=function(){return this.$el.html(l.fill("popover_add_email")),this},t.prototype.showError=function(e){var t;return t=function(){switch(e.trim().toLowerCase()){case"the email address is already in use":return"address in use";case"this email is already on this account":return"on account";case"invalid email address":return"invalid email address";default:return c(new Error("Unknown server error message '"+e+"'")),"unknown"}}(),this.$("#account-error").text(u(["email error",t])).show()},t.prototype.saveChanges=function(e){var t;return s.preventDefault(e),t=this.$('[name="email"]').val(),this.model.run("logins",{email:t},function(e){return function(t){t?e.showError(t.message):(i.popView(),o.flash("email sent","confirm"),d("Member","Added Email Address"))}}(this))},t}(a)},{}],477:[function(e,t,r){var n,o;n=e("react"),o=e(433)("boards_page_add_org_button"),t.exports=n.createClass({displayName:"MemberBoardsAddOrgComponent",render:o.renderable(function(){var e;return e=this.props.onClick,o.div(".boards-page-board-section.u-clearfix",function(){return o.b(e,".quiet-button.u-float-left",function(){return o.format("create-a-new-organization-ellipsis")})})})})},{}],478:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function r(){this.constructor=e}for(var n in t)y.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},y={}.hasOwnProperty,b=[].slice;n=e("jquery"),o=e(190),i=e(25),s=e(354),m=e(83),u=e(458),c=e(356),l=e(109),d=e(441),f=e(438),g=e(38),h=e(84),p=e(121),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.viewTitleKey="change avatar",t.prototype.initialize=function(){return this.listenTo(this.model,"change:avatarSource change:uploadedAvatarHash",this.frameDebounce(this.render))},t.prototype.events={"change .js-upload-avatar":"startUpload","click .js-use-gravatar":"useGravatar","click .js-use-uploaded-avatar":"useUploadedAvatar","click .js-take-photo":"takePhoto","click .js-no-avatar":"clearAvatar"},t.prototype.render=function(){var e,t,r,n,o;return o=this,t=this.model.toJSON({prefs:!0}),t["avatarSource_"+t.avatarSource]=!0,t.canTakePhoto=s.supportsGetUserMedia(),this.$el.html(f.fill("avatar_change",t)),r=this.$(".js-grav"),e=r.find("img"),n="https://secure.gravatar.com/avatar/"+(this.model.get("gravatarHash")+".png?s=50&r=PG&d=404")+("&_="+Math.random()),l.waitForImageLoad(n,function(){return r.show()}),this},t.prototype.startUpload=function(e){var t,r,s,a,u,c,d;return u=this.model,a=n(e.target),s=null!=(c=a[0])&&null!=(d=c.files)?d[0]:void 0,t=this.$(".js-error").hide(),null==s||l.validFileSize(s)?(g("Member","Avatar","Use Uploaded - New"),!s&&a.val()?l.uploadFile(i.myToken(),a,this.uploadResult.bind(this)):null!=s?(r=new FormData,r.append("token",i.myToken()),r.append("file",s),o({url:a.closest("form").attr("action"),data:r,type:"post",processData:!1,contentType:!1,error:function(e){return function(t){return e.uploadResult(new Error(m(t)))}}(this),success:function(e){return function(){return e.uploadResult.apply(e,[null].concat(b.call(arguments)))}}(this),timeout:12e4})):void 0):(t.text(h("images can not be larger than 10mb")).show(),void g("Member","Avatar","Upload Error - File Too Large"))},t.prototype.uploadResult=function(e){var t;return t=this.$(".js-error").hide(),e?t.show().text(e):void 0},t.prototype.useUploadedAvatar=function(e){return g("Member","Avatar","Use Uploaded - Existing"),this.model.update("avatarSource","upload"),u.popView()},t.prototype.useGravatar=function(e){return g("Member","Avatar","Use Gravatar"),this.model.update("avatarSource","gravatar"),u.popView()},t.prototype.clearAvatar=function(e){return g("Member","Avatar","Use Initials"),this.model.update("avatarSource","none"),u.popView()},t.prototype.takePhoto=function(e){var t;return t=new c({model:this.model,modelCache:this.modelCache}),u.pushView({view:t}),g("Member","Avatar","Take Photo"),this.listenTo(t,"done",function(e){return function(t){var r,n;return r=p(t),n=new FormData,n.append("token",i.myToken()),n.append("file",r,"avatar.png"),o({url:"/1/member/"+e.model.id+"/avatar",data:n,type:"post",processData:!1,contentType:!1,error:function(e,t,r,n){var o,i;return i=e.status,o=e.responseText,413!==i?n():void 0},timeout:6e4})}}(this))},t}(d)},{}],479:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n=e("jquery"),i=e(458),s=e(441),a=e(438),u=e(38),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="send emails",t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.frameDebounce(this.render))},t.prototype.events={"click li a":"changeFreq"},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON({prefs:!0}),this.$el.html(a.fill("popover_set_email_freq",e)),this},t.prototype.changeFreq=function(e){var t;u("Member","Changed Email Frequency"),t=parseInt(n(e.target).closest("a").attr("value")),this.model.setPref("minutesBetweenSummaries",t).save(),i.popView()},t}(s)},{}],480:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e(81),s=e(23),a=e(436)(),i=e(441),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="change locale",t.prototype.events={"click .js-select-locale":function(e){return this.selectLocale(e.currentTarget.getAttribute("data-locale"))}},t.prototype.initialize=function(e){return this.onChange=e.onChange,this.listenTo(this.model,"change:prefs.locale",this.render)},t.prototype.selectLocale=function(e){var t;t=this.model.getPref("locale"),this.model.setPref("locale",e,function(r){return function(){return r.onChange(e,t)}}(this))},t.prototype.render=function(){var e,t;return e=this.model.getLocale(),t=function(t,r){a.li(function(){a.a(".js-select-locale",{href:"#","data-locale":t},function(){a.text(r),t===e&&(a.text(" "),a.icon("check"))})})},this.$el.html(a.render(function(){return a.ul(".pop-over-list",function(){var e,r,n,i,a,u;for(r=0,n=s.length;n>r;r++)u=s[r],e=u.code,i=u.name,a=o.normalizeLocale(e),t(a,i)})})),this},t}(i)},{}],481:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f=function(e,t){function r(){this.constructor=e}for(var n in t)g.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},g={}.hasOwnProperty;n=e("jquery"),o=e(190),i=e(25),a=e(452),u=e(458),c=e(109),l=e(441),d=e("underscore"),h=e(438),m=e(38),p=e(84),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.viewTitleKey="change permissions",t.prototype.initialize=function(){this.parent=this.options.parent,this.listenTo(this.parent,"change:memberships",this.render)},t.prototype.events={"click .js-make-admin":"makeAdmin","click .js-make-member":"makeMember","click .js-make-observer":"makeObserver"},t.prototype.render=function(){var e,t,r,n,o,i,s;for(s=this,e=this.model.getMembershipData(this.parent),e.showObserver=this.parent.hasObservers(),n=function(){if("Organization"===this.parent.typeName)return"org roles";if("Board"===this.parent.typeName)return"board roles";throw new Error("A fragile abstraction has broken")}.call(this),o=this.parent.getAvailableRoles(),t=0,r=o.length;r>t;t++)i=o[t],e["roleText_"+i]=p([n,i,"text"]);return null==e.roleText_admin&&(e.roleText_admin=e.roleText_superadmin),this.$el.html(h.fill("popover_change_roles",e)),this},t.prototype.apiChangeRole=function(e){this.$el.find("ul a").addClass("disabled"),this.parent.changeMemberRole(this.model,{type:e}).done(),u.hide()},t.prototype.getMemberType=function(){return this.parent.getExplicitMemberType(this.model)},t.prototype.isAdminAndMe=function(){return"admin"===this.getMemberType()&&i.isMe(this.model)},t.prototype.makeAdmin=function(e){c.stop(e),n(e.target).closest("a").hasClass("disabled")||"admin"!==this.getMemberType()&&this.apiChangeRole("admin")},t.prototype.makeMember=function(e){c.stop(e),n(e.target).closest("a").hasClass("disabled")||"normal"!==this.getMemberType()&&(this.isAdminAndMe()?a.pushView("demote admin to normal member",{fxConfirm:function(e){return function(t){return e.apiChangeRole("normal")}}(this)}):this.apiChangeRole("normal"))},t.prototype.makeObserver=function(e){c.stop(e),n(e.target).closest("a").hasClass("disabled")||"observer"!==this.getMemberType()&&(this.isAdminAndMe()?a.pushView("demote admin to observer",{fxConfirm:function(e){return function(t){return e.apiChangeRole("observer")}}(this)}):this.apiChangeRole("observer"))},t}(l)},{}],482:[function(e,t,r){var n,o,i,s,a,u,c,l=function(e,t){function r(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d={}.hasOwnProperty,p=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(458),i=e(109),s=e(441),u=e(438),c=e(38),a=e(84),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:loginTypes",this.frameDebounce(this.render))},t.prototype.viewTitleKey=function(){return p.call(this.model.get("loginTypes"),"password")<0?"set password":"change password"},t.prototype.events={"click .js-save-changes":"saveChanges"},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON({prefs:!0,hasPassword:!0}),this.$el.html(u.fill("popover_change_set_password",e)),this},t.prototype.getValue=function(e){return this.$("[name="+e+"]").val()},t.prototype.showPasswordError=function(e){return this.$("#password-error").text(a(["password error",e])).show()},t.prototype.saveChanges=function(e){var t,r,n;return i.preventDefault(e),this.$("#password-error").hide(),n=this.getValue("oldpassword"),t=this.getValue("password"),r=this.getValue("password2"),t||r?void(t!==r?this.showPasswordError("must match"):this.model.run("updatePassword",{oldPassword:n,newPassword:t},function(e){return function(t){return null==t?(c("Member","Changed Password"),void o.popView()):void e.showPasswordError(function(){switch(t.message.trim()){case"invalid value for newPassword":return"not long enough";case"The old password was incorrect":return"old password";default:return"unknown"}}())}}(this))):void 0},t}(s)},{}],483:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h=function(e,t){function r(){this.constructor=e}for(var n in t)m.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},m={}.hasOwnProperty;n=e("jquery"),i=e(5),s=e(458),a=e(109),u=e(441),d=e(438),p=e(38),c=e(84),l=e(34),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.viewTitleKey="change name and bio",t.prototype.events={"click .js-save-changes":"saveChanges"},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON({prefs:!0}),this.$el.html(d.fill("popover_change_user_info",e)),this},t.prototype.getValue=function(e){return this.$("[name="+e+"]").val()},t.prototype.showError=function(e){var t;return t=function(){switch(e.trim().toLowerCase()){case"username is taken":return"username taken";case"username must be at least 3 characters":return"username too short";case"username is invalid: only lowercase letters, underscores, and numbers are allowed":return"username invalid";case"full name must be at least 1 character":return"full name too short";case"initials must contain 1-4 characters":return"initials wrong length";default:return l(new Error("Unknown server error message '"+e+"'")),"unknown"}}(),this.$("#account-error").text(c(["member profile error",t])).show()},t.prototype.saveChanges=function(e){var t,r,o,u,c,l,d;for(l=this,a.preventDefault(e),t={},this.$("#account-error").hide(),c=["fullName","initials","username","bio"],r=0,o=c.length;o>r;r++)u=c[r],t[u]=n.trim(this.getValue(u));t.username=t.username.toLowerCase().replace(/[^a-z0-9_]/g,""),t.initials=t.initials.toUpperCase(),d=i.getMemberProfileUrl(this.model.get("username"))===i.location,this.model.update(t,{waitForServer:!0},function(e){return function(t){t?e.showError(t.message):(s.popView(),d&&i.setLocation({location:i.getMemberProfileUrl(e.model.get("username"))}),p("Member","Successfully Change User Info"))}}(this))},t}(u)},{}],484:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h={}.hasOwnProperty;n=e(190),o=e(452),i=e(66),a=e(109),u=e(441),c=e("underscore"),d=e(438),l=e(84),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.className="member-login",t.prototype.events={"click .js-primary":"setPrimary","click .js-remove":"confirmDeleteLogin"},t.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render)},t.prototype.render=function(){var e;return e=this.model.toJSON(),e.dateAdded=a.idToDate(e.id).toISOString(),this.$el.html(d.fill("member_login",e)),i.update(this.el),this},t.prototype.setPrimary=function(e){return n({url:"/1/members/me/logins/"+this.model.id+"/primary",type:"put",success:function(e){return function(t){return e.model.set("primary",!0)}}(this)})},t.prototype.confirmDeleteLogin=function(e){return a.stop(e),this.model.hasConflict()?void this.trigger("requestSetPassword"):o.toggle("delete credential",this.popover({text:l("confirm.delete credential.text",{email:this.model.get("email")}),confirmBtnClass:"negate",fxConfirm:function(e){return function(){return e.deleteLogin()}}(this)}))},t.prototype.popover=function(e){return c.extend({elem:this.$(".js-remove")},e)},t.prototype.deleteLogin=function(){return n({url:"/1/members/me/logins/"+this.model.id,type:"delete",success:function(e){return function(t){return e.model.trigger("destroy",e.model,e.model.collection)}}(this)})},t}(u)},{}],485:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j=function(e,t){function r(){this.constructor=e}for(var n in t)S.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},S={}.hasOwnProperty;k=e("underscore"),n=e("jquery"),o=e(476),i=e(25),s=e(478),a=e(479),u=e(480),c=e(482),l=e(483),d=e(453),h=e(487),m=e(497),f=e(498),g=e(499),v=e(503),y=e(504),b=e(506),w=e(458),_=e(109),C=e(438),x=e(38),t.exports=p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:loginTypes change:prefs change:tokens change:credentials",this.frameDebounce(this.renderMainContent))},t.prototype.events={"click .js-change-avatar":"changeAvatar","click .js-change-name-and-bio":"changeUserInfo","click .js-change-password":"changePassword","click .js-change-locale":"changeLocale","click .js-configure-2fa":"configure2FA","click .js-change-email-freq":"changeEmailFreq","click .js-allow-desktop-notifications":"allowDesktopNote","click .js-toggle-cb-mode":"toggleCB","click .js-confirm-delete-member":"deleteConfirm","click .js-add-email":"addEmail","click .js-mobile-temp-password":"mobileTempPassword"},t.prototype.renderMainContent=function(){var e,t,r,n;return r=this.model.toJSON({prefs:!0,hasPassword:!0}),r["avatarSource_"+r.avatarSource]=!0,r.canAllowDesktopNotifications=d.notEnabled(),r.cbEnabled=this.model.get("prefs").colorBlind,r.showMobileLoginPassword=k.any(this.model.get("credentials"),function(e){return"saml"===e.type}),this.$(".js-content").html(C.fill("member_account",r,{editable:i.isMe(this.model)})),this.$(".js-member-applications").html(this.subview(h,this.model).render().el),this.$(".js-member-sessions").html(this.subview(v,this.model).render().el),t=this.$(".js-credentials-section"),e=this.$(".js-credentials-list"),e.empty(),this.model.get("logins").length>0&&(n=this.collectionSubview(g,this.model.loginList,{model:this.model}),this.appendSubview(n,e)),this.$(".js-content").prepend(this.subview(f,this.model,{allowDismiss:!1}).render().el),this.setActiveView(".js-member-account"),this},t.prototype.changeUserInfo=function(e){return _.stop(e),x("Member View","Settings Page","Open Change User Info Menu"),w.toggle({elem:this.$(".js-change-name-and-bio"),view:new l({model:this.model,modelCache:this.modelCache})})},t.prototype.addEmail=function(e){return _.stop(e),x("Member View","Settings Page","Open Add Email Menu"),w.toggle({elem:n(e.target),view:new o({model:this.model,modelCache:this.modelCache})})},t.prototype.mobileTempPassword=function(e){return _.stop(e),x("Member View","Settings Page","Generate Temporary Mobile Password"),this.model.getMobileTempPassword(function(t){return w.toggle({elem:n(e.target),view:new b({tempPassword:t})})})},t.prototype.changeAvatar=function(e){return _.stop(e),x("Member View","Settings Page","Open Change Avatar Menu"),w.toggle({elem:this.$(".js-change-avatar"),view:new s({model:this.model,modelCache:this.modelCache})})},t.prototype.changePassword=function(e){return _.stop(e),x("Member View","Settings Page","Open Change Password Menu"),w.toggle({elem:this.$(".js-change-password"),view:new c({model:this.model,modelCache:this.modelCache})})},t.prototype.configure2FA=function(e){return x("Member View","Settings Page","Configure 2FA")},t.prototype.changeLocale=function(e){var t;return _.stop(e),x("Member View","Settings Page","Change Language"),t=function(e,t){return e!==t?document.location.reload():void 0},w.toggle({elem:this.$(".js-change-locale"),view:new u({model:this.model,modelCache:this.modelCache,onChange:t})})},t.prototype.changeEmailFreq=function(e){return _.stop(e),x("Member View","Settings Page","Open Change Frequency Menu"),w.toggle({elem:this.$(".js-change-email-freq"),view:new a({model:this.model,modelCache:this.modelCache})})},t.prototype.allowDesktopNote=function(e){_.stop(e),x("Member View","Settings Page","Allow Desktop Notifications"),d.requestPermission().finally(function(e){return function(){return e.render()}}(this))},t.prototype.toggleCB=function(e){_.stop(e),x("Member View","Settings Page","Toggle Color Blind Mode"),this.model.toggleColorBlindMode()},t.prototype.deleteConfirm=function(e){_.stop(e),x("Member View","Settings Page","Open Delete Account Confirmation Menu"),w.toggle({elem:this.$(".js-confirm-delete-member"),view:new m({model:this.model,modelCache:this.modelCache})})},t}(y)},{}],486:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h={}.hasOwnProperty;n=e("jquery"),o=e(25),s=e(458),a=e(510),u=e(512),c=e(109),l=e(441),d=e(38),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.hoverMember=function(e){var t;return t=n(e.target).closest(".item"),c.selectMenuItem(this.$(".pop-over-member-list"),".item",t)},t.prototype.openOption=function(e){var t,r,i,l;c.stop(e),d("Invitations","Open Role Selector"),l=n(e.target).closest(".js-select-member").find(".username").text(),i=this.modelCache.findOne("Member","username",l),r=!1,n(e.target).closest(".item.js-email-invite").length>0&&(r=!0,t=n(e.target).closest(".js-email-invite").find(".full-name").attr("name")),i?s.pushView({view:new a({modelCache:this.modelCache,model:i,parent:this.model,onSendInvite:this.willBePopped.bind(this)})}):s.pushView({view:new u({model:o.me(),modelCache:this.modelCache,parent:this.model,email:t,onSendInvite:this.willBePopped.bind(this)})})},t}(l)},{}],487:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(514),i=e(441),s=e(438),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.render=function(){var e,t,r,n,i;return e=this.model.toJSON({prefs:!0}),i=null!=(t=e.tokens)?t:[],e.hasTokens=i.length>0,this.$el.html(s.fill("member_application_list",e)),n=function(){var e,t,n;for(n=[],e=0,t=i.length;t>e;e++)r=i[e],n.push(this.subview(o,this.model,r,r.id));return n}.call(this),this.appendSubviews(n,this.$(".js-list-member-applications")),this},t}(i)},{}],488:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;i=e(111),o=e("react"),s=e(433)("member"),t.exports=n=function(e){function t(e){t.__super__.constructor.call(this,e)}return a(t,e),t.prototype.displayName="MemberAvatar",t.prototype.shouldComponentUpdate=i,t.prototype.render=s.renderable(function(){var e,t,r,n,o,i,a,u,c;return u=this.props,e=u.avatarHash,c=u.username,t=u.fullName,r=u.initials,o=u.isDeactivated,n=u.isBoardAdmin,i=u.isOrganizationAdmin,a=u.onClick,s.div(function(){var a,u,l;return l=t+" ("+c+")",e?(a=[window.avatarDomain,e,"30.png"].join("/"),u=[window.avatarDomain,e,"50.png"].join("/"),s.img({class:"member-avatar",height:"30",width:"30",src:a,srcSet:a+" 1x, "+u+" 2x",alt:l,title:l})):null!=r&&s.span(".member-initials",{title:l},function(){return s.text(r)}),o||(n&&s.span(".member-type.admin",{title:s.l("this-member-is-an-admin-of-this-board")}),i&&s.span(".member-type.admin",{title:s.l("this-member-is-an-admin-of-this-organization")})),s.span(".member-gold-badge",{title:s.l("this-member-has-trello-gold")})})}),t}(o.Component)},{}],489:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M,B,T,O,L,P,A,E=function(e,t){function r(){this.constructor=e}for(var n in t)D.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},D={}.hasOwnProperty;n=e("jquery"),o=e(57),s=e(188),a=e(25),c=e(271),l=e(452),d=e(5),h=e(272),p=e(274),i=e(273),j=e(279),_=e(278),f=e(17),g=e(504),v=e(30),y=e(196),b=e(250),w=e(458),u=e(268),k=e("react"),C=e("react-dom"),x=e(432),S=e(280),B=e(84),M=e(209),T=e("moment"),O=e(93),P=e(438),A=e(38),L=e("recup"),t.exports=m=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return E(t,e),t.prototype.renderMainContent=function(){return this.$(".js-content").empty(),null==this.$reactRoot&&(this.$reactRoot=n("<div></div>")),this.$(".js-content").append(this.$reactRoot),this.renderReactSection(),this.setActiveView(".js-billing"),this.renderBanner(),this},t.prototype.renderReactSection=function(){return C.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.getReactRoot=function(){var e;return k.createElement(x,{},o.hasAccount(null!=(e=this.model.get("paidAccount"))?e.standing:void 0)?this.getBillingComponent():this.getSignUpForGoldComponent())},t.prototype.getBillingComponent=function(){var e;return e=S(this.model,f,{productName:B("products.gold"),productIconClass:"trello-gold",detailsUrl:"/gold",onRenewClick:M(this,"renew"),cancelProduct:M(this,"cancel"),onSwitchToYearly:M(this,"switchToYearly"),didntGetAuthStatus:function(e){return function(){return v.loadMemberAccountData(e.model.get("username")).done()}}(this),didGetAuthStatus:function(e){return function(){return v.loadMemberAccountData(e.model.get("username")).done()}}(this),onChangeBillingContactClick:M(this,"changeBillingContactPopover"),reactivateProduct:M(y,"reactivate",this.model),changeCreditCard:M(y,"changeCreditCard",this.model),createPaidAccount:M(y,"createAccount",this.model),paidAccountPoll:M(s,{url:this.model.urlRoot+"/"+this.model.id+"?paid_account=true"})}),k.createElement(u,e)},t.prototype.getSignUpForGoldComponent=function(){return L.render(function(e){return function(){return L.div(function(){var t,r,n,o,u,c,l;return L.createElement(b,{stringsKey:"gold",subtitleCount:1,infoUrl:"/gold",epilogueCount:0,icon:"trello-gold"}),t=f.currentPriceObjectForModel(e.model),L.createElement(h,{onSubmit:M(y,"createAccount",e.model),doPoll:M(s,{url:e.model.urlRoot+"/"+e.model.id+"?paid_account=true"}),buttonKey:"upgrade-me",contentBuilders:[O(_,{productName:"Trello Gold",monthlyProduct:t.monthly,yearlyProduct:t.yearly,defaultProduct:t.monthly.productNumber,billingStrategy:t.billingStrategy}),O(p),O(i),O(j)],extraData:{billingContactFullName:null!=(r=null!=(n=e.model.get("paidAccount"))?n.contactFullName:void 0)?r:a.me().get("fullName"),billingContactEmail:null!=(o=null!=(u=e.model.get("paidAccount"))?u.contactEmail:void 0)?o:a.me().get("email"),billingContactLocale:null!=(c=null!=(l=e.model.get("paidAccount"))?l.contactLocale:void 0)?c:a.me().getPref("locale")},didntGetAuthStatus:function(){return v.loadMemberAccountData(e.model.get("username")).done()},didGetAuthStatus:function(){return d.memberBoardsView()}})})}}(this))},t.prototype.renderBanner=function(){var e,t,r,n,o,i;if(this.model.get("idPremOrgsAdmin").length>0)for(t=P.fill("member_billing_org_link_list"),this.$(".js-content").prepend(t),i=this.model.organizationList.models,r=0,n=i.length;n>r;r++)o=i[r],e=o.toJSON(),o.isPremium()&&o.owned()&&(e.billingLink=d.getOrganizationBillingUrl(o),
this.$(".js-org-link-list").append(P.fill("member_billing_org_link",e)));return this},t.prototype.cancel=function(){return A("Member View","Billing Page","Cancel Gold"),y.cancel(this.model).then(function(e){return function(t){return A("Member","Successfully Canceled Paid Account"),e.model.set(t)}}(this))},t.prototype.renew=function(){return A("Member View","Billing Page","Renew Expiring Gold Subscription"),y.renew(this.model).then(function(e){return function(t){return A("Member","Successfully Renewed Expiring Yearly Gold Subscription"),e.model.set(t)}}(this)).done()},t.prototype.switchToYearly=function(e){return l.toggle("yearly billing switch",{elem:e,model:this.model,confirmBtnClass:"primary",fxConfirm:function(e){return function(t){return y.changeProduct(e.model,f.currentProducts.yearly).then(function(t){return A("Organization","Successfully Switched Business Class to Yearly Billing"),e.model.set(t)}).done()}}(this)})},t.prototype.changeBillingContactPopover=function(e){return A("Member View","Billing Page","Open Change Billing Contact Info"),w.toggle({elem:e,view:new c({model:this.model,modelCache:this.modelCache})})},t.prototype.remove=function(){return C.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}(g)},{}],490:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h={}.hasOwnProperty;n=e(128),o=e(141),i=e(241),a=e(197),c=e(440),u=e(441),l=e(89),d=e(438),t.exports=l(c,s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.events={"click .js-more-actions":"loadMoreActions"},t.prototype.initialize=function(){return this.board=this.options.board,this.listenTo(this.board.memberList,"add remove reset",this.frameDebounce(this.render)),this.actionListView=this.collectionSubview(i,new o(this.model.getActions(this.board),{modelCache:this.modelCache}),{renderOpts:{context:this.model,readOnly:!0}}),this.listenTo(this.modelCache,"add:Action:"+this.model.id+" remove:Action:"+this.model.id,function(e){return function(){return e.actionListView.collection.reset(e.model.getActions(e.board),{silent:!0}),e.renderActions()}}(this)),this.idModels=[this.board.id],this.nextPage=0,this.loadMoreActions()},t.prototype.render=function(){return this.$el.html(d.fill("board_member_profile",this.model.toJSON())),this.actionListView.setElement(this.$(".list-actions")[0]),this.renderActions()},t.prototype.renderActions=function(){return this.actionListView.render(),this.$(".js-more-actions").toggle(this.hasMoreActions()),this},t.prototype.getActionsFilter=function(){return a.memberActions},t}(u))},{}],491:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M,B,T,O,L,P,A=function(e,t){function r(){this.constructor=e}for(var n in t)E.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},E={}.hasOwnProperty,D=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};S=e("underscore"),n=e("jquery"),o=e(25),i=e(288),s=e(289),a=e(290),u=e(294),c=e(295),l=e(296),d=e(297),p=e(477),h=e(5),m=e(331),f=e(527),M=e(209),B=e(84),v=e(498),b=e(458),w=e("bluebird"),_=e("react"),k=e("react-dom"),C=e(432),O=e("recup"),L=e(438),P=e(38),x=e(109),j=e(441),y=e(29),T=e(112),t.exports=g=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,e),t.prototype.initialize=function(){return this.listenTo(this.model.organizationList,"add remove reset change:name change:displayName change:logoHash",this.frameDebounce(this.renderReactSection)),this.listenTo(this.model.boardList,"add remove reset change:name change:idOrganization change:dateLastActivity change:dateLastView",this.frameDebounce(this.renderReactSection)),this.listenTo(this.model.boardStarList,"add remove reset change:pos",this.renderReactSection)},t.prototype.className="member-boards-view",t.prototype.getReactRoot=function(){return _.createElement(C,{},this.getMemberBoardsElements())},t.prototype.renderReactSection=function(){return k.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.render=function(){return this.$el.empty().prepend(this.subview(v,this.model,{allowDismiss:!0}).render().el),null==this.$reactRoot&&(this.$reactRoot=n("<div></div>")),this.$el.append(this.$reactRoot),this.renderReactSection(),this},t.prototype.getMemberBoardsElements=function(){return O.render(function(e){return function(){return O.div(function(){var t,r,n,o,s;for(o={items:e.getStarredBoards().map(M(e,"boardToBoardItemDndElement")),header:e.getStarredBoardsHeader(),noSidebarMod:!0,isStarredSection:!0},O.createElement(c,o),o={items:e.getMyBoards().map(M(e,"boardToBoardItemElement")),header:e.getMyBoardsHeader(),mayBeSorted:!0,noSidebarMod:!0,createNewItem:_.createElement(i,{newBoard:M(e,"newBoard",null)})},O.createElement(u,o),s=e.model.getSortedOrgs(),t=0,r=s.length;r>t;t++)n=s[t],o={items:e.getOrgBoards(n).map(M(e,"boardToBoardItemElement")),header:e.getOrgHeader(n),mayBeSorted:!0,noSidebarMod:!0,createNewItem:_.createElement(i,{newBoard:M(e,"newBoard",n)})},O.createElement(u,o);return O.addElement(e.getAddOrgButtonElement())})}}(this))},t.prototype.backgroundObjForBoard=function(e){var t,r,n,o;return S.extend({brightness:e.getPref("backgroundBrightness")},e.getPref("backgroundTile")?{image:e.getPref("backgroundImage"),tiled:!0}:(t=null!=(r=null!=(n=x.smallestPreviewBiggerThan(e.getPref("backgroundImageScaled"),400,200))?n.url:void 0)?r:e.getPref("backgroundImage"))?{image:t,tiled:!1}:{color:null!=(o=e.getPref("backgroundColor"))?o:e.getClientBackgroundColor("blue")})},t.prototype.boardToBoardItemDndElement=function(e){var t,r;return t=this.boardToBoardItemProps(e),t.onDragHover=function(t){return function(t){var r,n,i,s;return n=o.me().boardStarList,r=n.getBoardStar(t),i=n.getBoardIndex(e.id),s=n.getNewPos(r,i),r.set({pos:s})}}(this),t.onDragEnd=function(){var t,r;r=o.me().boardStarList,t=r.getBoardStar(e.id),w.using(y.getLock(),function(){return T(t,"update",{pos:t.get("pos")}).catch(function(){})}).done()},t.orgname=null!=(r=e.getOrganization())?r.get("displayName"):void 0,t.isDraggable=!0,_.createElement(a,t)},t.prototype.boardToBoardItemElement=function(e){return _.createElement(s,this.boardToBoardItemProps(e))},t.prototype.boardToBoardItemProps=function(e){var t;return{id:e.id,name:e.get("name"),hasUnseenActivity:e.hasUnseenActivity(),dateLastActivity:new Date(null!=(t=e.get("dateLastActivity"))?t:x.idToDate(e.id)),isLessActive:e.isLessActive(),background:this.backgroundObjForBoard(e),showOptions:o.isLoggedIn(),isStarred:null!=o.me().boardStarList.getBoardStar(e.id),relUrl:e.getUrl(),onStarClick:function(e){return function(e){var t;t=o.me().boardStarList,w.using(y.getLock(),function(){return null==t.getBoardStar(e)?t.starBoard(e):t.unstarBoard(e)}).done()}}(this),badgeComponents:[],tagComponents:[],key:e.id}},t.prototype.newBoard=function(e,t){b.toggle({elem:t,top:0,view:m,options:{model:this.model,modelCache:this.modelCache,organization:e}}),P("Boards View","Clicked 'Create new board' Button")},t.prototype.getAddOrgButtonElement=function(){var e;return e={onClick:M(this,"showAddOrgPopOver")},_.createElement(p,e)},t.prototype.showAddOrgPopOver=function(e){return P("Boards View","Clicked Add Org Button"),b.toggle({elem:e,top:0,view:f,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.getMyBoardsHeader=function(){return _.createElement(l,{title:B("board section title.my boards"),iconClass:"member"})},t.prototype.getMyBoards=function(){var e;return e=function(e){return function(t){var r,n;return r=null!=(n=t.getOrganization())?n.id:void 0,null!=r&&D.call(e.model.get("idOrganizations"),r)>=0}}(this),S.filter(this.model.boardList.models,function(t){return!e(t)&&t.isOpen()})},t.prototype.getOrgHeader=function(e){var t;return t={title:e.get("displayName"),iconClass:"organization",logoHash:e.get("logoHash"),linkElements:[{url:h.getOrganizationUrl(e),iconClass:"board",titleKey:"boards"},{url:h.getOrganizationMembersUrl(e),iconClass:"member",titleKey:"members"},{url:h.getOrganizationAccountUrl(e),iconClass:"gear",titleKey:"settings"}].map(M.choke(1,_,"createElement",d))},e.isEnterprise()?(t.smallIconClass="enterprise",t.smallIconTitleKey="enterprise"):e.isPremium()&&(t.smallIconClass="business-class",t.smallIconTitleKey="business-class"),_.createElement(l,t)},t.prototype.getOrgBoards=function(e){return S.filter(this.model.boardList.models,function(t){return function(t){var r;return(null!=(r=t.getOrganization())?r.id:void 0)===e.id&&t.isOpen()}}(this))},t.prototype.getStarredBoardsHeader=function(){return _.createElement(l,{title:B("board section title.starred boards"),iconClass:"star"})},t.prototype.getStarredBoards=function(){return S.filter(this.model.boardStarList.getBoards(),function(e){return e.isOpen()})},t.prototype.remove=function(){return k.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}(j)},{}],492:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(376),i=e(441),s=e(438),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.render=function(e){var t,r;return this.cards=e,t=this.model.toJSON({prefs:!0}),t.boardUrl=this.model.getUrl(),t.permissionLevel_org&&(t.permissionLevel="organization-visible"),t.idOrganization&&!this.options.hideOrg&&(t.org=null!=(r=this.modelCache.get("Organization",t.idOrganization))?r.toJSON():void 0),this.cards.length>0?(this.$el.html(s.fill("member_cards_board",t)),this.renderCards()):this.$el.empty(),this},t.prototype.renderCards=function(){var e;return e=this.cards.map(function(e){return function(t){return e.subview(o,t,{showBoard:!0})}}(this)),this.appendSubviews(e,this.$(".js-list")),this},t}(i)},{}],493:[function(e,t,r){var n,o,i,s,a,u,c,l=function(e,t){function r(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d={}.hasOwnProperty;o=e(376),i=e(109),s=e(441),a=e("underscore"),c=e(438),u=e(62),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.className="window-module",t.prototype.initialize=function(e){return this.cards=e.cards,u(this.cards.length>0)},t.prototype.render=function(){var e,t;return e=this.model.toJSON({prefs:!0}),e.boardUrl=this.model.getUrl(),e.permissionLevel_org&&(e.permissionLevel="organization-visible"),e.idOrganization&&!this.options.hideOrg&&(e.org=null!=(t=this.modelCache.get("Organization",e.idOrganization))?t.toJSON():void 0),this.$el.html(c.fill("member_cards_board",e)),this.renderCards(),this},t.prototype.renderCards=function(){var e;return e=this.cards.map(function(e){return function(t){return e.subview(o,t,{showBoard:!1})}}(this)),this.appendSubviews(e,this.$(".js-list")),this},t}(s)},{}],494:[function(e,t,r){var n,o,i,s,a,u,c,l=function(e,t){function r(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d={}.hasOwnProperty;n=e(66),o=e(376),s=e(109),a=e(441),u=e("underscore"),c=e(438),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.className="window-module",t.prototype.initialize=function(e){this.templateData=e.templateData},t.prototype.render=function(){var e;return e={iconType:"clock",isOverdue:!1,isDueSoon:!1},u.extend(e,this.templateData),this.groupedCards.length>0?(this.$el.html(c.fill("member_cards_date",e)),this.renderCards()):this.$el.empty(),this},t.prototype.renderCards=function(){var e;return e=this.groupedCards.map(function(e){return function(t){return e.subview(o,t,{showBoard:!0})}}(this)),this.appendSubviews(e,this.$(".js-list"))},t}(a)},{}],495:[function(e,t,r){var n,o,i,s,a,u,c,l=function(e,t){function r(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d={}.hasOwnProperty;o=e(238),i=e(458),s=e(109),a=e(441),u=e(438),c=e(38),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="sort cards",t.prototype.initialize=function(){return this.listenTo(o,"change:cardsPageSortType",function(){return this.render()})},t.prototype.events={"click .js-sort-by-board":"sortByBoard","click .js-sort-by-due-date":"sortByDueDate"},t.prototype.render=function(){var e;return e={},e[o.getCardsPageSortType()]=!0,this.$el.html(u.fill("member_cards_filter",e)),this},t.prototype.sortByBoard=function(e){s.stop(e),o.sortCardsPageByBoard(),i.hide(),c("Member View","Cards Page","Sort by Board")},t.prototype.sortByDueDate=function(e){s.stop(e),o.sortCardsPageByDate(),i.hide(),c("Member View","Cards Page","Sort by Due Date")},t}(a)},{}],496:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=function(e,t){function r(){this.constructor=e}for(var n in t)b.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},b={}.hasOwnProperty;n=e(25),o=e(66),i=e(493),s=e(494),a=e(495),c=e(238),l=e(504),d=e(458),p=e(109),h=e("underscore"),g=e(438),v=e(38),f=e("moment"),m=e(84),t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardList,"add remove reset",this.frameDebounce(this.renderMainContent)),this.listenTo(c,"change:cardsPageSortType",function(){return this.renderCardsSection()})},t.prototype.events={"click .js-toggle-sort":"toggleSort"},t.prototype.renderMainContent=function(){return this.setActiveView(".js-member-cards"),this.$(".js-content").html(g.fill("member_cards_base")),this.renderCardsSection(),this},t.prototype.getCards=function(){return this.modelCache.find("Card",function(e){return function(t){return t.isOpen()&&t.hasMember(e.model)&&t.getBoard().isOpen()}}(this))},t.prototype.getSortType=function(){return c.getCardsPageSortType()},t.prototype.renderFilterText=function(){this.$(".js-sort-text").html(m(["sorting cards by",this.getSortType()]))},t.prototype.toggleSort=function(e){p.stop(e),v("Member View","Cards Page","Open Sorting and Filtering Options"),d.toggle({elem:this.$(".js-toggle-sort"),view:new a({model:this.model,modelCache:this.modelCache})})},t.prototype.clearContent=function(){return this.$(".js-cards-content").empty()},t.prototype.renderCardsSection=function(){switch(this.getSortType()){case"board":this.renderBoardSort();break;case"date":this.renderDateSort()}},t.prototype._appendNoVisibleCards=function(){var e,t;t=m(n.isMe(this.model)?"no assigned cards.at all":"no assigned cards.that you can see"),e={message:t,classes:"gutter",style:"padding: 60px 10px;"},this.$(".js-cards-content").append(g.fill("empty_list",e))},t.prototype.renderBoardSort=function(){var e,t,r,n,o,s,a,u;for(this.clearContent(),this.renderFilterText(),r=this.getCards(),n=!1,a=this.model.boardList.models,o=0,s=a.length;s>o;o++)e=a[o],e.isOpen()&&(t=h.filter(r,function(t){return function(t){return t.get("idBoard")===e.id}}(this)),h.isEmpty(t)||(n=!0,u=this.subview(i,e,{cards:t}),this.appendSubview(u,this.$(".js-cards-content"))));return n||this._appendNoVisibleCards(),this},t.prototype.renderDateSort=function(){var e,t,r,i,a,u,c,l,d,p,g,v;this.clearContent(),this.renderFilterText(),r=function(e,t){var r,n;return n=f().add(e,"days"),r=f().add(t,"days"),function(e){return f(e).isBetween(n,r)}},e=function(e){var t;return t=e.get("due"),null!=t?o.parse(t):null},u={"due in the next day":{fxTest:r(0,1),data:{isDueSoon:!0}},"due in the next 7 days":{fxTest:r(1,7)},"due in the next month":{fxTest:r(7,28)},"due later":{fxTest:function(e){return f(e).isAfter(f().add(28,"days"))}},"overdue cards":{fxTest:function(e){return f(e).isBefore(f())},data:{isOverdue:!0}},"cards with no due date":{fxTest:function(e){return null==e},data:{iconType:"card"}}},g=h.sortBy(this.getCards(),function(e){return function(e){var t;return null!=(t=e.get("due"))?t:""}}(this)),c=!1;for(l in u)d=u[l],i=d.fxTest,t=d.data,a=g.filter(function(t){return function(t){return i(e(t))}}(this)),h.isEmpty(a)||(c=!0,v=h.extend({header:m(["card group headers",l])},t),p=this.subview(s,n.me(),{templateData:v},"datesectionview-"+l),p.groupedCards=a,this.appendSubview(p,this.$(".js-cards-content")));return c||this._appendNoVisibleCards(),this},t}(l)},{}],497:[function(e,t,r){var n,o,i,s,a,u,c,l,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p={}.hasOwnProperty;n=e(451),i=e(458),s=e(109),a=e(441),c=e(438),l=e(38),u=e(84),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="delete account",t.prototype.events={"click .js-delete-member":"deleteMember","click .js-cancel-delete":"cancelDeleteMember"},t.prototype.render=function(){var e;return e=this,this.$el.html(c.fill("popover_confirm_member_delete",this.model.toJSON())),this},t.prototype.deleteMember=function(e){s.stop(e),this.$(".js-delete-member").attr("disabled","disabled"),this.model.run("deleteAccount",{msg:"troodbye!"},function(){i.hide(),n.flash("email sent","confirm"),l("Member","Sent Account Delete Email")})},t.prototype.cancelDeleteMember=function(e){s.stop(e),i.hide()},t}(a)},{}],498:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},f={}.hasOwnProperty;n=e(451),o=e(25),i=e(17),a=e(30),u=e(109),c=e(441),l=e("underscore"),h=e(438),d=e(84),p=e(82),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.initialize=function(){return this.makeDebouncedMethods("render"),this.listenTo(this.model,"change:oneTimeMessagesDismissed",this.renderDebounced),this.listenTo(this.model,"change:paidAccount",this.renderDebounced)},t.prototype.events={"click .js-close-modal":"closeGoldEarned","click .js-close-intro-helper":"closeGoldIntro","click .js-start-using-gold":"startUsingGold"},t.prototype.render=function(){var e,t,r,n,i,s;return this.$el.empty(),o.isMe(this.model)?(s=this.viewShown,this.model.isGold()&&!this.model.isDismissed("GoldIntro")?(this.viewShown="intro",this.$el.append(h.fill("member_gold_intro"))):this.model.isDismissed("GoldEarned")&&this.options.allowDismiss||this.activating||(this.viewShown="earned",t=this.model.get("credits"),i=l.filter(t,function(e){var t;return!e.applied&&e.count>0&&("invitation"===(t=e.type)||"promoCode"===t)}),e=l.reduce(i,function(e,t){return e+t.count},0),e&&(e>12&&(e=12),n=l.chain(i).filter(function(e){return"invitation"===e.type&&null!=e.memberInvited}).pluck("memberInvited").pluck("fullName").value(),r={hasInvitations:n.length>0,joinedNames:n,localizedCongratulations:p("months of trello gold",e),showClose:this.options.allowDismiss,hasGold:this.model.isGold()},this.$el.append(h.fill("member_gold_earned",r)))),null!=s&&s!==this.viewShown&&this.delegateEvents(),this):this},t.prototype.refreshPaidAccount=function(){return null==this.startedPolling&&(this.startedPolling=Date.now()),this.startedPolling+u.getMs({minutes:1})<Date.now()?(n.hide("activating"),void n.show("activating gold timeout","error","activating-failed")):a.loadMemberPaidAccount(this.model.id).then(function(e){return function(){e.model.isGold()?(delete e.startedPolling,e.activating=!1,n.hide("activating")):e.setTimeout(l.bind(e.refreshPaidAccount,e),u.getMs({seconds:1}))}}(this)).done()},t.prototype.startUsingGold=function(e){return u.stop(e),this.activating=!0,n.show("activating gold","info","activating"),this.render(),this.model.run("unpaidAccount",{products:[i.productShortNames.trelloGoldMonthly]},function(e){return function(t,r){return null==t&&r?e.refreshPaidAccount():void 0}}(this))},t.prototype.closeGoldEarned=function(e){return u.stop(e),this.model.dismiss("GoldEarned")},t.prototype.closeGoldIntro=function(e){return u.stop(e),this.model.dismiss("GoldIntro")},t}(c)},{}],499:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n=e(482),o=e(411),i=e(452),s=e(484),u=e(458),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewType=s,t.prototype.initialize=function(){return this.listenTo(this,"requestSetPassword",this.showSetPassword),t.__super__.initialize.apply(this,arguments)},t.prototype.showSetPassword=function(e){return i.toggle("cant remove credential",e.popover({confirmBtnClass:"confirm",fxConfirm:function(t){return function(r){return u.show(e.popover({view:n,options:{model:t.model,modelCache:t.modelCache}}))}}(this)}))},t}(o)},{}],500:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h={}.hasOwnProperty;o=e(29),i=e(420),s=e(30),a=e(180),u=e(516),c=e("react"),d=e(433)("member_notifications"),l=e("underscore"),n=function(e){function t(e){t.__super__.constructor.apply(this,arguments),this.loadMore=this.loadMore.bind(this),this.updateNotifications=this.updateNotifications.bind(this),this.state={nextPage:1,isMore:!1,notifications:[]}}return p(t,e),t.prototype.displayName="MemberNotifications",t.prototype.componentDidMount=function(){return this.props.listenTo("add:Notification remove:Notification change:Notification",this.updateNotifications),this.updateNotifications()},t.prototype.updateNotifications=function(){return this.setState({notifications:a.sortedByDateDescending(o),isMore:!0})},t.prototype.loadMore=function(){return s.loadMoreNotificationData(this.props.member.get("username"),this.state.nextPage).then(function(e){return function(t){return e.setState({nextPage:e.state.nextPage+1,isMore:t.length>9,notifications:a.sortedByDateDescending(o)})}}(this)).done()},t.prototype.render=d.renderable(function(){return d.div(function(e){return function(){return d.div(".window-module-title",function(){return d.span(".window-module-title-icon.icon-lg.icon-notification"),d.h3(function(){return d.format("notifications")})}),0===e.state.notifications.length&&d.div(".empty-list",function(){return d.format("no-notifications")}),d.div(".js-list-notifications",function(){return d.createElement(u,{notifications:e.state.notifications,context:"notifications-page"})}),d.a(".show-more.js-more-notifications",{onClick:e.loadMore,class:d.classify({hide:!e.state.isMore})},function(){return d.format("load-more-notifications")})}}(this))}),t}(c.Component),t.exports=i(n)},{}],501:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h={}.hasOwnProperty;s=e(30),o=e(500),a=e("react"),u=e("react-dom"),c=e(432),d=e("recup"),l=e(441),n=e("jquery"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.className="member-notifications-view",t.prototype.renderOnce=function(){return null==this.reactRoot&&(this.reactRoot=document.createElement("div")),this.$el.prepend(this.reactRoot),this.renderReactSection(),this},t.prototype.getReactRoot=function(){return a.createElement(c,{},this.getNotificationListComponent())},t.prototype.renderReactSection=function(){return u.render(this.getReactRoot(),this.reactRoot),this},t.prototype.getNotificationListComponent=function(){return d.render(function(e){return function(){return d.div(function(){return d.createElement(o,{member:e.model})})}}(this))},t}(l)},{}],502:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h={}.hasOwnProperty;n=e(141),o=e(241),s=e(504),a=e(543),u=e(197),c=e(440),l=e(89),d=e(438),t.exports=l(c,i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.events={"click .js-more-actions":"loadMoreActionsAndRemoveDateLimit"},t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.limit=10,this.daysBack=u.memberProfile_daysBack,this.actionListView=this.collectionSubview(o,new n(this.getActions(),{modelCache:this.modelCache}),{renderOpts:{context:this.model,showBoard:!0,showOrganization:!0,readOnly:!0}}),this.listenTo(this.model.organizationList,"add remove reset",this.frameDebounce(this.renderMainContent)),this.listenTo(this.modelCache,"add:Action:"+this.model.id,function(e){return function(){return e.actionListView.collection.reset(e.getActions(),{silent:!0}),e.renderActions()}}(this))},t.prototype.renderMainContent=function(){var e;return e=this.model.toJSON(),this.setActiveView(".js-member-profile"),this.$(".js-content").html(d.fill("member_profile",e)),this.defer(function(e){return function(){var t,r;return e.model.organizationList.length>0?(r=e.subview(a,e.model),t=e.$(".js-list-orgs").empty(),e.appendSubview(r,t)):e.$(".js-list-orgs").closest(".window-module").hide(),e.actionListView.setElement(e.$(".list-actions")[0]),e.renderActions()}}(this)),this},t.prototype.renderActions=function(){return 0===this.actionListView.collection.length?this.actionListView.$el.html(d.fill("actions_empty",{daysBack:this.daysBack})):this.actionListView.render(),this.$(".js-more-actions").toggleClass("hide",!this.hasMoreActionsOrDateLimited()),this},t.prototype.hasMoreActionsOrDateLimited=function(){return null!=this.daysBack||this.hasMoreActions()},t.prototype.loadMoreActionsAndRemoveDateLimit=function(){return this.daysBack=null,this.loadMoreActions()},t.prototype.getActionsFilter=function(){return u.memberActions},t}(s))},{}],503:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e(513),i=e(109),s=e(441),a=e("underscore"),u=e(438),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:sessions",this.frameDebounce(this.render))},t.prototype.events={"click .js-log-out-other":"logOutOther"},t.prototype.render=function(){var e,t,r;return e=this.model.toJSON(),this.$el.html(u.fill("member_session_list",e)),r=function(){var r,n,i,s,a;for(s=null!=(i=e.sessions)?i:[],a=[],r=0,n=s.length;n>r;r++)t=s[r],a.push(this.subview(o,this.model,t,t.id));return a}.call(this),this.ensureSubviews(r,this.$(".js-sessions")),this},t.prototype.logOutOther=function(e){return i.stop(e),this.model.run("logoutOtherSessions"),this.model.set("sessions",a.filter(this.model.get("sessions"),function(e){return function(e){return e.isCurrent}}(this))),this.render()},t}(s)},{}],504:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function r(){this.constructor=e}for(var n in t)y.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},y={}.hasOwnProperty;n=e(57),o=e(25),i=e(478),s=e(86),u=e(458),c=e(435),l=e(109),d=e(441),h=e(89),m=e(438),f=e(38),g=e("xtend"),p=e(723),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),h(c,t),t.prototype.initialize=function(){this.listenTo(this.model,"change:initials change:avatarHash change:avatarSource change:fullName change:username change:bio change:prefs change:paidAccount",this.render),this.listenTo(this.model,"change:initials change:fullName change:username change:bio",this.renderDetails)},t.prototype.events={"click .js-change-avatar-profile":"changeAvInProfile","click .js-edit-profile":"editProfile","click .js-submit-profile":"submitProfile","submit .js-profile-form":"submitProfile","click .js-cancel-edit-profile":"cancelEditProfile","click .tabbed-pane-nav-item-button:not(.active)":"switchSection"},t.prototype.delegateEvents=function(e){return t.__super__.delegateEvents.call(this,g(t.prototype.events,e||this.events))},t.prototype.render=function(){var e,t,r,i;return t=o.isMe(this.model),e=this.model.toJSON(),this.model.organizationList.models.length>0&&(e.showOrgs=!0),t&&(i=null!=(r=e.paidAccount)?r.standing:void 0,e.hasAccount=this.model.hasMemberOrOrgAccount(),e.accountProblem=n.isProblem(i),e.isMe=!0),e.hasCrown=this.model.isFeatureEnabled("crown"),e.editable=t,this.$el.html(p(e)),this.renderDetails(),this.renderMainContent(),this},t.prototype.renderDetails=function(){var e,t;return t=o.isMe(this.model),e=this.model.toJSON(),e.bioHtml=s.markdownAsHtml(e.bio,{textData:e.bioData}),e.hasCrown=this.model.isFeatureEnabled("crown"),this.$(".js-current-details").empty().append(m.fill("member_detail_profile_info",e,{editable:t})),t&&this.$(".js-profile-form").empty().append(m.fill("member_detail_profile_edit",e,{editable:t})),this},t.prototype.setActiveView=function(e){this.$(".tabbed-pane-nav-item-button").removeClass("active"),this.$(e).addClass("active")},t.prototype.changeAvInProfile=function(e){l.stop(e),f("Member View","Header","Change Avatar Menu"),u.toggle({elem:this.$(".js-change-avatar-profile"),view:new i({model:this.model,modelCache:this.modelCache})})},t.prototype.editProfile=function(e){l.stop(e),this.$(".js-current-details").addClass("hide"),this.$(".js-profile-form").removeClass("hide"),f("Member View","Click Edit Profile")},t.prototype.cancelEditProfile=function(e){l.stop(e),this.$(".js-current-details").removeClass("hide"),this.$(".js-profile-form").addClass("hide"),this.$(".js-profile-form")[0].reset()},t.prototype.submitProfile=function(e){var t,r,n,o,i;if(l.stop(e),!this.disabled){for(t={},i=["fullName","username","bio","initials"],n=0,o=i.length;o>n;n++)r=i[n],t[r]=this.$(".js-profile-form [name="+r+"]").val();t.username=t.username.toLowerCase().replace(/[^a-z0-9_]/g,""),t.initials=t.initials.toUpperCase(),this.disableSubmit(),this.model.update(t,{waitForServer:!0},function(e){return function(t){e.disabled=!1,e.$(".js-submit-profile").removeAttr("disabled"),t?e.$(".js-profile-form-error").removeClass("hide").text(t.message):(e.$(".js-profile-form-error").addClass("hide"),e.cancelEditProfile(),f("Member","Successfully Change User Info"))}}(this))}},t.prototype.disableSubmit=function(){this.disabled=!0,this.$(".js-submit-profile").attr("disabled","disabled")},t}(d)},{}],505:[function(e,t,r){var n,o,i,s,a,u,c,l,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p={}.hasOwnProperty;n=e(25),i=e(30),s=e(458),a=e(109),u=e(441),c=e("underscore"),l=e(438),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="voters",t.prototype.events={"click .js-more-members-voted":"showAll","click .js-vote":"vote","click .js-unvote":"unvote"},t.prototype.initialize=function(){return i.loadCardVoters(this.model.id).done(),this.listenTo(this.model.memberVotedList,"add remove reset",this.frameDebounce(this.render))},t.prototype.showAll=function(){return this.render(!0)},t.prototype.render=function(e){var t,r,o;return o=this.model.memberVotedList,t={members:function(){var e,t,n,i;for(n=o.models,i=[],e=0,t=n.length;t>e;e++)r=n[e],i.push(r.toJSON());
return i}()},e!==!0&&(t.members=t.members.slice(0,48),t.loading=0===o.length,t.fewMembers=o.length<14,t.moreMembers=o.length>48,t.lengthDiff=o.length-48,t.canVote=this.model.getBoard().canVote(n.me()),t.voted=c.include(this.model.get("idMembersVoted"),n.myId())),this.$el.html(l.fill("members_voted",t,{},{member:l.member})),this},t.prototype.vote=function(e){return a.preventDefault(e),this.model.vote(!0),!1},t.prototype.unvote=function(e){return a.preventDefault(e),this.model.vote(!1),0===this.model.get("idMembersVoted").length&&s.hide(),!1},t}(u)},{}],506:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(441),i=e(436)("member_account"),s=i.renderable(function(e){var t;return t=e.tempPassword,i.p(function(){return i.format("temporary-mobile-password")}),i.p(".u-text-align-center",function(){return i.strong(function(){return i.text(t)})})}),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.viewTitleKey="temporary mobile password",t.prototype.render=function(){return this.$el.html(s({tempPassword:this.options.tempPassword})),this},t}(o)},{}],507:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=e(481),o=e(5),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.apiChangeRole=function(e){return t.__super__.apiChangeRole.apply(this,arguments),"admin"!==e&&this.isAdminAndMe()?o.navigate(o.getOrganizationUrl(this.parent),{trigger:!0}):void 0},t}(n)},{}],508:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;a=e(438),o=e(441),i=e(436)("select_member"),s=i.renderable(function(e){var t,r;return r=e.text,t=e.extraText,i.li({class:"item js-member-item"},function(){return i.a({href:"#",class:"js-select-member ",title:r,autocompleteText:r},function(){return i.span(".text",{title:"card"},function(){return i.text(t)})})})}),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.render=function(){return this.$el.html(s(this.options)),this},t}(o)},{}],509:[function(e,t,r){var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty,a=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(511),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.initialize=function(){return this.listenTo(this.options.card,"change:idMembers",this.renderActive)},t.prototype.renderActive=function(){var e;return this.$(".js-member-item").toggleClass("active",(e=this.model.id,a.call(this.options.card.get("idMembers"),e)>=0))},t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.renderActive(),this},t}(o)},{}],510:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function r(){this.constructor=e}for(var n in t)y.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},y={}.hasOwnProperty;n=e("jquery"),o=e(451),i=e(190),s=e(137),a=e(182),u=e(458),l=e(109),d=e(441),p=e("underscore"),f=e(438),g=e(38),h=e(84),m=e(83),t.exports=c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.viewTitleKey="add as",t.prototype.initialize=function(){if(this.parent=this.options.parent,this.member=this.model,this.isBoard=this.isOrg=!1,this.objText="",this.didSendInvite=!0,this.parent instanceof s)this.isBoard=!0,this.objText="Board",this.invitationList=this.parent.invitationList;else{if(!(this.parent instanceof a))throw new Error("A fragile abstraction has broken");this.isOrg=!0,this.objText="Org"}return this.invitationList=this.parent.invitationList},t.prototype.events={"click .js-invite":"invite"},t.prototype.render=function(){var e,t,r,n,o,i;for(e={showAdmin:this.parent.owned(this.member),showObserver:this.parent.hasObservers()},n=function(){if(this.isBoard)return"board roles";if(this.isOrg)return"org roles";throw new Error("A fragile abstraction has broken")}.call(this),o=this.parent.getAvailableRoles(),t=0,r=o.length;r>t;t++)i=o[t],e["roleText_"+i]=h([n,i,"text"]);return null==e.roleText_admin&&(e.roleText_admin=e.roleText_superadmin),this.$el.html(f.fill("manage_members_select_role",e)),this},t.prototype.invite=function(e){var t,r,s;l.stop(e),t=n(e.target).closest(".js-invite"),s=t.hasClass("js-select-admin")?"admin":t.hasClass("js-select-member")?"normal":t.hasClass("js-select-observer")?"observer":void 0,i({url:"/1/"+this.parent.typeName.toLowerCase()+"/"+this.parent.id+"/members/"+this.member.id,type:"put",data:{type:s},dataType:"json",success:function(e){return function(e){return g("Invitations","Add Member to Board","Role: "+s)}}(this),error:function(e){return function(e,t){var r;r=m(e),o.showLiteralText(r,"error","alert",3e3),g("Invitations","Error: "+e.responseText)}}(this)}),"function"==typeof(r=this.options).onSendInvite&&r.onSendInvite(),this.options.onSendInvite=null,u.hide()},t}(d)},{}],511:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e(438),o=e(441),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.initialize=function(){},t.prototype.render=function(){var e;return e=this.model.toJSON(),"ghost"===this.model.get("memberType")&&(e.isVirtual=!0),e.unconfirmed=this.options.showUnconfirmed&&!e.isVirtual&&!e.confirmed,e.inactive=this.options.showInactive&&!e.active,e.isKnownMember=this.options.isKnownMember,e.extraText=this.options.extraText,this.options.linkName?e.url="/"+this.model.get("username"):delete e.url,this.$el.html(i.fill("select_member",e,{},{member:i.member})),this.$(".js-member").data("id",this.model.id),this},t}(o)},{}],512:[function(e,t,r){var n,o,i,s,a,u,c,l=function(e,t){function r(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d={}.hasOwnProperty;n=e("jquery"),o=e(174),i=e(458),s=e(510),u=e(109),c=e(38),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.invite=function(e){var t,r;u.stop(e),t=n(e.target).closest(".js-invite"),r=t.hasClass("js-select-admin")?"admin":t.hasClass("js-select-member")?"normal":t.hasClass("js-select-observer")?"observer":void 0,o.prototype.create.call(this,{model:this.parent,data:{type:r,email:this.options.email},success:function(e){return function(t){return c("Invitations","Send Email "+e.objText+" Invite to New Member","Role: "+r)}}(this)}),i.popView()},t}(s)},{}],513:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n=e("jquery"),o=e(66),s=e(441),a=e("underscore"),u=e(438),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.className="member-account-session",t.prototype.events={"click .js-revoke":"revoke"},t.prototype.render=function(){var e,t;return e=this.options,e["type_"+this.options.type]=!0,t=e.ipAddress,this.$el.html(u.fill("member_session",e)),o.update(this.el),this},t.prototype.revoke=function(e){return n.get("/login/revoke",{id:this.options.id},function(e){return function(){return e.model.set("sessions",a.filter(e.model.get("sessions"),function(t){return t.id!==e.options.id}))}}(this))},t}(s)},{}],514:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h=function(e,t){function r(){this.constructor=e}for(var n in t)m.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},m={}.hasOwnProperty;n=e(452),o=e(66),s=e(109),a=e(441),u=e("underscore"),d=e(438),p=e(38),l=e("moment"),c=e(84),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className="member-applications-list-item",t.prototype.events={"click .js-revoke":"revoke"},t.prototype.render=function(){var e,t,r,n,i,s;return s=this.options,r=s.dateExpires,i=s.permissions,n=s.identifier,t=s.dateCreated,e={identifier:n,dateApproved:l(o.parse(t)).calendar(),dateExpires:r?l(o.parse(r)).calendar():null,neverExpires:null==r},e.permissions=u.isEmpty(i)?[c("token perms.none")]:i.map(function(e){var t,r,n;return r=e.write?"readwrite":"read",t="*"===e.idModel?"general":"specific",n=e.modelType.toLowerCase(),c(["token perms",r,t,n])}),this.$el.html(d.fill("member_application",e)),this},t.prototype.revoke=function(e){return s.stop(e),n.toggle("revoke token",{elem:e.currentTarget,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.set("tokens",u.filter(e.model.get("tokens"),function(t){return t.id!==e.options.id})),e.model.pull("tokens",e.options.id,function(){return p("Member","Applications","Revoke App")})}}(this)})},t}(a)},{}],515:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function r(){this.constructor=e}for(var n in t)y.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},y={}.hasOwnProperty;n=e(479),o=e(453),s=e(29),a=e(420),c=e(180),l=e(516),d=e(458),p=e("react"),h=e(109),f=e(433)("header_notification_list_menu"),g=e(38),m=e("underscore"),u=10,i=function(e){function t(e){this.state={canAllowDesktopNotifications:o.notEnabled(),notifications:[],remainingUnread:0}}return v(t,e),t.prototype.displayName="HeaderNotifications",t.prototype.componentDidMount=function(){return this.props.listenTo("add:Notification remove:Notification change:Notification",this.updateNotifications.bind(this)),this.updateNotifications()},t.prototype.componentWillUnmount=function(){var e;return null!=(e=this._notificationPermissionPromise)?e.cancel():void 0},t.prototype.updateNotifications=function(){var e,t;return e=c.sortedByDateDescending(s),t=e.slice(u).filter(function(e){return e.get("unread")}),this.setState({notifications:e.slice(0,u),remainingUnread:t.length})},t.prototype.render=f.renderable(function(){var e,t,r,n;return r=this.state,e=r.canAllowDesktopNotifications,t=r.notifications,n=r.remainingUnread,0===t.length?f.p(".empty",{style:{padding:"24px 6px"}},function(){return f.format("no-notifications")}):f.div(function(r){return function(){return f.createElement(l,{notifications:t,context:"header"}),f.ul(".pop-over-list.mod-add-top-margin",function(){return f.li(function(){return f.a(".js-view-all-notifications",{href:r.props.noteUrl,onClick:r.viewAllNotifications},function(){return n>0?f.format("see-all-notifications-remainingunread-more-unread",{remainingUnread:n}):f.format("see-all-notifications")})}),f.li(function(){return f.a(".js-change-email-frequency",{onClick:r.changeEmailFrequency.bind(r)},function(){return f.format("change-notification-email-frequency")})}),e?f.li(function(){return f.a(".js-allow-desktop-notifications",{onClick:r.allowDesktopNote.bind(r)},function(){return f.format("allow-desktop-notifications")})}):void 0})}}(this))}),t.prototype.viewAllNotifications=function(){return g("Header","Notifications Menu","See All Notifications")},t.prototype.changeEmailFrequency=function(e){h.stop(e),g("Header","Notifications Menu","Change Email Frequency"),d.pushView({view:new n({model:this.props.member,modelCache:s})})},t.prototype.allowDesktopNote=function(e){h.stop(e),g("Header","Notifications Menu","Allow Desktop Notifications"),this._notificationPermissionPromise=o.requestPermission().then(function(e){return function(t){return e.setState({canAllowDesktopNotifications:o.notEnabled()})}}(this)).catch(function(e){return function(){return e.setState({canAllowDesktopNotifications:!1})}}(this)).cancellable()},t}(p.Component),t.exports=a(i)},{}],516:[function(e,t,r){var n,o,i,s,a,u,c,l;n=e(67),o=e(517),i=e("react"),c=e("recup"),l=e(436)(""),s=e(87),a=e("underscore"),u=new n("notification"),t.exports=i.createClass({displayName:"NotificationsList",getInitialState:function(){return{now:new Date}},componentDidMount:function(){return this.interval=setInterval(this.updateNow,1e4)},componentWillUnmount:function(){return clearInterval(this.interval)},updateNow:function(){return this.setState({now:new Date})},render:function(){var e,t,r,n;return n=this.props,t=n.notifications,e=n.context,r=this.state.now,t=a.map(t,function(t){var n,a,c,l,d,p;for(l=t.getExpandedData(),l.entities=u.getEntities(t.get("display")),d=l.entities,a=0,c=d.length;c>a;a++)n=d[a],"comment"===n.type?n.textHtml=s.comments.format(n.text).output:"relDate"===n.type&&(n.text=u.relDateText(n.date,r));return"cardDueSoon"===t.get("type")?l.isDueDateNotification=!0:("declinedInvitationToBoard"===(p=t.get("type"))||"declinedInvitationToOrganization"===p)&&(l.isDeclinedInvitationNotification=!0),l.isDueSoon="cardDueSoon "===t.get("type"),l.isCommentLike=t.isCommentLike(),l.isAddAttachment=t.isAddAttachment(),l.idMemberCreator=t.get("idMemberCreator"),l.markRead=t.markRead.bind(t),l.navigateToView=t.navigateToView.bind(t),l.context=e,l.member=t.getMember(),l.key=t.id,i.createElement(o,l)}),i.createElement("div",null,t)}})},{}],517:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function r(){this.constructor=e}for(var n in t)y.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},y={}.hasOwnProperty;o=e(470),i=e(66),s=e(672),m=e(35),a=e(488),u=e(29),l=e(458),d=e("react"),f=e(433)("notification"),g=e(38),p=e(109),h=e("underscore"),n=e("jquery"),t.exports=c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.displayName="Notification",t.prototype.render=f.renderable(function(){var e,t,r,n,o,u,c,l,d,p;return l=this.props,n=l.isCommentLike,r=l.isAddAttachment,p=l.unread,d=l.type,c=l.member,u=l.isDueDateNotification,e=l.date,o=l.isDeclinedInvitationNotification,t=l.entities,c=l.member,f.div({class:f.classify({"mod-comment-type":n,"mod-attachment-type":r,"mod-unread":p,"mod-due-soon":"cardDueSoon"===d,phenom:!0}),ref:function(e){return i.update(e)},onClick:this.clickedNotification.bind(this)},function(r){return function(){return f.div(".phenom-creator",function(){c?f.div(".member.js-show-mem-menu",{idmember:c.id,onClick:r.viewMemberActionMenu.bind(r)},function(){return f.createElement(a,c)}):u?f.span(".icon-lg.icon-clock"):o?f.span(".icon-lg.icon-close"):f.span(".icon-lg.icon-member")}),f.div(".phenom-desc",function(){return h.forEach(t,function(e){return f.createElement(s,{entity:e,context:{},options:{}})})}),f.p(".phenom-meta.quiet",function(){return e?f.span(".date",{"data-date":e}):void 0})}}(this)),m("notifications",this.props)}),t.prototype.clickedNotification=function(e){return this.props.markRead(),"header"===this.props.context?g("Header","Notifications Menu","Clicked Notification"):"notifications-page"===this.props.context&&g("Member View","Notifications Page","Clicked Notification"),n(e.target).is("a")?void 0:(this.props.navigateToView(),p.stop(e))},t.prototype.viewMemberActionMenu=function(e){var t,r;p.stop(e),t=u.get("Member",null!=(r=n(e.target).closest("[idmember]").attr("idmember"))?r:this.props.idMemberCreator),n(e.target).closest(".pop-over").length>0?l.pushView({view:o,options:{model:t,modelCache:u}}):l.toggle({elem:this.$(".js-show-mem-menu"),view:o,options:{model:t,modelCache:u}})},t}(d.Component)},{}],518:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e(554),o=e(458),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.onSubmit=function(e){e&&(this.model.tagList.create({name:e},{wait:!0}),o.popView())},t.prototype.viewTitleKey="add tag",t}(i)},{}],519:[function(e,t,r){var n,o,i,s,a;n=e(191),o=e("react"),a=e(433)("bc_info"),i=e(209),s=e(73),t.exports=o.createClass({displayName:"BC3UpgradeComponent",getInitialState:function(){return{showingYearly:!1,upgradeDisabled:!1,error:null}},render:a.renderable(function(){var e,t,r,o,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k;return l=this.props,k=l.yearlyDiscountAmount,_=l.yearlyDiscount,r=l.isMonthly,w=l.userCount,o=l.onUpgradeClick,d=this.state,f=d.showingYearly,b=d.upgradeDisabled,e=d.error,m=r&&!f,t=!(r||0===_),v=i.choke(0,i(this,"setState",{showingYearly:!0})),g=i.choke(0,i(this,"setState",{showingYearly:!1})),p=m?this.props.monthly:this.props.yearly,u=p.price,y=p.totalPrice,c=p.productNumber,h=function(e){return function(t){return e.setState({upgradeDisabled:!0}),o(c,t).catch(n.BadRequest,n.Unauthorized,function(t){return e.setState({error:t.message,upgradeDisabled:!1})}).done()}}(this),k=s.number(k),u=s.number(u),y=s.number(y),a.div(".business-class-upgrade-box.u-gutter",function(){return a.p(function(){return a.format("were also introducing smart billing…")}),a.p(function(){return a.format("theres also new pricing")}),a.p(function(){return m?a.format("when paid monthly",{price:u}):a.format("when paid annually",{price:u})}),a.p(function(){return a.format("your new price per month",{totalPrice:y,userCount:w})}),t&&a.p(function(){return a.format("discount upgrade to yearly",{yearlyDiscountAmount:k,yearlyDiscountPercent:s.percentage(_)})}),e&&a.p(function(){return a.text(e)}),a.button({onClick:h,class:"primary",disabled:b},function(){return a.format("upgrade my team")}),a.p(".quiet.business-class-upgrade-box-spaced-item",function(){return t?a.format("youll be charged…minus your discount…",{totalPrice:y,yearlyDiscountAmount:k}):a.format("youll be charged…",{totalPrice:y})}),r?a.p(function(){return f?a.b(g,function(){return a.format("or go back to monthly pricing")}):(_>0&&(a.format("or switch to paying annually…",{yearlyDiscountPercent:s.percentage(_)}),a.text(" ")),a.b(v,function(){return a.format("see annual pricing")}))}):void 0})})})},{}],520:[function(e,t,r){var n,o;n=e("react"),o=e(433)("bc_info"),t.exports=n.createClass({displayName:"BC3UpgradeContactUsComponent",render:o.renderable(function(){return o.div(".business-class-upgrade-box.u-gutter",function(){return o.p(function(){return o.format("contact us to upgrade")}),o.p(".business-class-upgrade-box-header",function(){return o.format("contact options",{phoneNumber:"1 (844) 873-5561",emailAddress:"sales@trello.com"})})})})})},{}],521:[function(e,t,r){var n,o,i,s;n=e("react"),i=e(433)("org_account"),s=e(38),o=e(84),t.exports=n.createClass({displayName:"BoardCreateVisibilityRestrictionsComponent",render:i.renderable(function(){var e,t,r,n,o;return n=this.props,e=n.canChange,r=n.isAdmin,t=n.hasBC,o=n.restrictions,i.div(".setting-item-detail",function(){return i.div(".markeddown",function(){var e,t,r,n,s;for(r=["public","org","private"],n=[],e=0,t=r.length;t>e;e++)s=r[e],n.push(i.p(function(){return i.format(["board create visibility",s,o[s]])}));return n}),e?void 0:i.p(".helper.u-float-left",function(){var e;return r?i.format("you-need-business-class-to-change-this-setting"):t?i.format("you-need-to-be-an-admin-to-change-this-setting"):i.format("you-need-to-be-an-admin-with-business-class-to-change-this-setting"),t?void 0:(i.text(" "),e=function(){return s("Organization View","Settings Page","Inline Business Class Ad Link")},i.a({href:"/business-class",target:"_blank",onClick:e},function(){return i.format("check-out-business-class")}))})})})})},{}],522:[function(e,t,r){var n,o,i,s;n=e("react"),i=e(433)("org_account"),s=e(38),o=e(84),t.exports=n.createClass({displayName:"BoardInviteRestrictionsComponent",render:i.renderable(function(){var e,t,r,n,o;return n=this.props,e=n.canChange,r=n.isAdmin,t=n.hasBC,o=n.restricted,i.div(".setting-item-detail",function(){return i.div(function(){return o?i.p(function(){return i.format("only-members-inside-your-organization-will-be-able-to-join-your-organization-s-boards")}):i.p(function(){return i.format("anyone-from-inside-or-outside-of-the-organization-can-be-added-to-a-board-inside-your-organization")})}),e?void 0:i.p(".helper.u-float-left",function(){var e;return r?i.format("you-need-business-class-to-change-this-setting"):t?i.format("you-need-to-be-an-admin-to-change-this-setting"):i.format("you-need-to-be-an-admin-with-business-class-to-change-this-setting"),t?void 0:(i.text(" "),e=function(){return s("Organization View","Settings Page","Inline Business Class Ad Link")},i.a({href:"/business-class",target:"_blank",onClick:e},function(){return i.format("check-out-business-class")}))})})})})},{}],523:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1},m=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},f={}.hasOwnProperty;o=e(518),s=e(529),a=e(458),u=e(109),c=e(441),n=e("jquery"),d=e(436)("org_filtering"),p=d.renderable(function(e,t){return e.tagList.models.length||d.p(function(){return d.format("tags-explanation")}),d.ul(".select-tags-list",function(){var r,n,o,i;for(o=e.tagList.models,r=0,n=o.length;n>r;r++)i=o[r],d.li(".select-tags-list-item.js-tag-item",{"data-id-tag":i.id},function(){return d.a(".select-tags-list-item-name-link.js-toggle-tag",function(){var e;return e=i.id,h.call(t.getIdTags(),e)>=0&&d.icon("check",{class:"select-tags-list-item-name-link-check-icon"}),d.text(i.get("name"))}),d.a(".select-tags-list-item-edit-button.icon-sm.icon-edit.js-edit-tag",{href:"#"})})}),d.div(function(){return d.a(".quiet-button.full.js-add-tag",{href:"#"},function(){return d.format("create-tag")})})}),l=function(e){return n(e.target).closest(".js-tag-item")[0].dataset.idTag},t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:idTags",this.render),this.listenTo(this.options.org.tagList,"add remove reset change",this.render),t.__super__.initialize.apply(this,arguments)},t.prototype.events={"click .js-add-tag":"addTag","click .js-toggle-tag":function(e){return this.toggleTag(l(e))},"click .js-edit-tag":function(e){return this.editTag(e,l(e))}},t.prototype.viewTitleKey="pick tags",t.prototype.addTag=function(){return a.pushView({view:o,options:{model:this.options.org,modelCache:this.modelCache}})},t.prototype.toggleTag=function(e){return this.model.toggleTag(e)},t.prototype.editTag=function(e,t){return u.stop(e),a.pushView({view:s,options:{modelCache:this.modelCache,model:this.options.org.tagList.get(t)}})},t.prototype.render=function(){return this.$el.html(p(this.options.org,this.model)),this},t}(c)},{}],524:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h={}.hasOwnProperty;n=e("jquery"),i=e(527),s=e(458),a=e(109),u=e(441),c=e("underscore"),l=e(438),d=e(38),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.events={"click .js-select-org":"chooseOrg","click .js-disabled":"stop","click .js-create-org":"createOrg"},t.prototype.render=function(){var e;return e={},this.model.organizationList.length>0&&(e.orgs=this.model.organizationList.map(function(e){return function(e){var t,r,n,o,i,s;return t=e.owned(),n=e.isPremium(),i=e.needsBCUpgrade(),r=!i||!t,s=!t||n&&!i?"#":"/"+e.get("name")+"/billing",o=e.get("memberships").length,c.extend(e.toJSON(),{memberCount:o,isAdmin:t,isPremium:n,needsBCUpgrade:i,orgUrl:s,isDisabled:r})}}(this))),this.$el.html(l.fill("select_org_to_upgrade",e)),this},t.prototype.chooseOrg=function(e){return d("Business Class Choose Org Page","Choose Org")},t.prototype.stop=function(e){return a.stop(e)},t.prototype.createOrg=function(e){a.stop(e),s.toggle({elem:n(e.target),top:20,view:i,options:{model:this.model,modelCache:this.modelCache}}),d("Business Class Choose Org Page","Create New Org")},t}(u)},{}],525:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h=function(e,t){function r(){this.constructor=e}for(var n in t)m.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},m={}.hasOwnProperty,f=[].slice;n=e("jquery"),o=e(190),i=e(25),a=e(458),u=e(109),c=e(441),d=e(438),p=e(38),l=e(84),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.viewTitleKey="change logo",t.prototype.initialize=function(){return this.listenTo(this.model,"change:logoHash",this.frameDebounce(this.render))},t.prototype.events={"change .js-upload-logo":"startUpload","click .js-remove-logo":"removeLogo"},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON({prefs:!0}),this.$el.html(d.fill("popover_org_logo",e)),this},t.prototype.startUpload=function(e){var t,r,s,a,c,d,h;return c=this.model,a=n(e.target),t=this.$(".js-error").hide(),s=null!=(d=a[0])&&null!=(h=d.files)?h[0]:void 0,null==s||u.validFileSize(s)?!s&&a.val()?u.uploadFile(i.myToken(),a,this.uploadResult.bind(this)):null!=s?(r=new FormData,r.append("token",i.myToken()),r.append("file",s),o({url:a.closest("form").attr("action"),data:r,type:"post",processData:!1,contentType:!1,error:function(e){return function(t){var r,n;return n=t.status,r=t.responseText,e.uploadResult(Error(r))}}(this),success:function(e){return function(){return e.uploadResult.apply(e,[null].concat(f.call(arguments)))}}(this),timeout:12e4})):void 0:(t.text(l("images can not be larger than 10mb")).show(),void p("Organization","Logo","Upload Error - File Too Large"))},t.prototype.uploadResult=function(e){var t;return t=this.$(".js-error").hide(),e?(p("Organization","Logo","Error - "+e),t.show().text(e)):(p("Organization","Logo","Use Uploaded - New"),a.hide())},t.prototype.removeLogo=function(e){u.stop(e),o({url:"/1/organizations/"+this.model.id+"/logo",type:"DELETE",success:function(e){return function(){return p("Organization","Logo","Remove Logo"),a.hide()}}(this)})},t}(c)},{}],526:[function(e,t,r){var n,o,i,s,a,u,c,l,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p={}.hasOwnProperty;o=e(182),i=e(458),s=e(109),a=e(441),c=e(438),l=e(38),u=e(84),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="select visibility",t.prototype.tagName="ul",t.prototype.className="pop-over-list",t.setVisibility=function(e){return function(t){return s.stop(t),l("Organization","Changed Visibility"),this.model.setPref("permissionLevel",e),i.hide()}},t.prototype.events={"click .js-select-members":t.setVisibility("private"),"click .js-select-public":t.setVisibility("public")},t.prototype.render=function(){var e;return e=this.model.toJSON({prefs:!0}),e["permissionLevel_"+this.model.get("prefs").permissionLevel]=!0,e.publicText=u("org perms.public.text"),e.privateText=u("org perms.private.text"),this.$el.html(c.fill("change_org_vis",e)),this},t}(a)},{}],527:[function(e,t,r){var n,o,i,s,a,u,c,l,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p={}.hasOwnProperty;n=e(25),o=e(5),s=e(458),a=e(109),u=e(441),c=e(438),l=e(38),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="create organization",t.prototype.initialize=function(e){return this.createOpts=e.createOpts,null!=this.createOpts?this.createOpts:this.createOpts={isBusinessClass:!1}},t.prototype.events={"click .js-save":"submit","submit form":"submit","click .js-business-class":"clickBusinessClassMore","input .js-display-name":function(){return this.updateSubmitButton()}},t.prototype.getValue=function(e){var t;return null!=(t=this.$("[name="+e+"]").val())?t.trim():void 0},t.prototype.render=function(){return this.$el.html(c.fill("org_create")),this.updateSubmitButton(),this},t.prototype.updateSubmitButton=function(){return this.$(".js-save").prop("disabled",0===this.getValue("displayName").length)},t.prototype.submit=function(e){var t,r,i,u,c;for(a.stop(e),t={},c=["displayName","desc"],r=0,i=c.length;i>r;r++)u=c[r],t[u]=this.getValue(u);n.me().organizationList.create(t,{modelCache:this.modelCache,silent:!0,success:function(e){return function(t){e.createOpts.isBusinessClass?o.organizationBillingView(t.get("name")):o.organizationBoardsView(t.get("name"),t.id),s.hide(),l("New Org","Create")}}(this)})},t.prototype.clickBusinessClassMore=function(){return l("New Org","Click Business Class Link")},t}(u)},{}],528:[function(e,t,r){var n,o,i;n=e("react"),i=e(433)("org_account"),o=e(84),t.exports=n.createClass({displayName:"DeleteOrgButtonComponent",render:i.renderable(function(){var e;return e=this.props.onClick,i.div(".window-module.u-gutter",function(){return i.b(e,".quiet-button",{style:{padding:"6px 11px",marginTop:"32px"}},function(){return i.format("delete-this-organization")})})})})},{}],529:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(458),s=e(441),i=e(554),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.getName=function(){return this.model.get("name")},t.prototype.onSubmit=function(e){e&&(this.model.update({name:e}),o.popView())},t.prototype.onDelete=function(){return this.model.destroy(),o.popView()},t.prototype.viewTitleKey="edit tag",t}(i)},{}],530:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M,B=function(e,t){function r(){this.constructor=e}for(var n in t)T.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},T={}.hasOwnProperty;n=e("jquery"),o=e(245),i=e(451),s=e(190),a=e(191),u=e(25),c=e(443),l=e(174),d=e(80),p=e(16),C=e(83),x=e(708),m=e(178),f=e(486),g=e(581),v=e(18),y=e(458),b=e(109),w=e(441),_=e("underscore"),j=e(89),S=e(438),k=e(698),M=e(38),t.exports=h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return B(t,e),j(g,f,c,t),t.prototype.viewTitleKey="members",t.prototype.initialize=function(){this.savedSearch=""},t.prototype.events={"click .js-search-results .js-select-member":"addMember","paste .js-search-input":"searchPaste","click .js-remove-invitation":"removeInvitation","click .js-send-email-invite":"sendEmailInvite","submit .js-email-data":"sendEmailInvite","click .js-open-option":"openOption","mouseenter .js-select-member":"hoverMember","click .js-show-invitation-link":"showInvitationLink","click .js-invitation-link":"clickInvitationLink","click .js-deactivate-link":"deactivateInvitationLink"},t.prototype.render=function(){var e,t;return t={},t.canInviteMembers=!0,t.canAddMembers=!0,t.isPerUser=v.isPerUser(this.model.get("products")),t.perUserPrice=v.getPrice(this.model.get("products")),t.isYearly="yearly"===v.getInterval(this.model.get("products")),t.isMonthly="monthly"===v.getInterval(this.model.get("products")),this.$el.html(x(t)),null!=(e=o.addMemberToOrganizationAd(u.me(),this.model))&&this.$(".js-ad").html(this.subview(e,this.model).render().el),
this.setTimeout(function(e){return function(){return e.input=e.$(".js-search-input"),e.input.click(function(e){return b.stop(e)}).keyup(e.debounce(e.search,500).bind(e)).keydown(e.keydownEvent.bind(e)).focus(),e.savedSearch?(e.input.val(e.savedSearch),e.search(),e.savedSearch=""):void 0}}(this),10),this.lastSearch="",this.loadingEl=this.$(".js-loading"),this.helperEl=this.$(".js-helper"),this},t.prototype.searchPaste=function(){return this.loadingEl.show(),this.input.keyup()},t.prototype.search=function(e){var t;if(null==this.lastSearch||this.lastSearch!==this.input.val()){if(this.lastSearch=this.input.val(),t=this.input.val().toLowerCase().trim(),""===t)return void this.clearSearchResults();this.loadingEl.show(),s({url:"/1/search/members/",type:"get",data:{idOrganization:this.model.id,query:t},dataType:"json",success:function(e){return function(r){return e.renderSearchResults(t,r)}}(this)})}},t.prototype.keydownEvent=function(e){var t;t=d.getKey(e),t===p.Enter?this.$(".js-search-results .js-list .selected .js-select-member").length>0?(b.stop(e),this.$(".js-search-results .js-list .selected:first .js-select-member").click()):this.$(".js-search-results .js-list .email-invite").length>0&&(b.stop(e),this.$(".email-invite:first").click()):(t===p.ArrowUp||t===p.ArrowDown)&&(b.stop(e),b.navMenuList(this.$(".js-search-results .js-list"),"li",t))},t.prototype._handleError=function(e){var t;return t=C(e),i.showLiteralText(t,"error","alert",3e3),M("Invitations","Error: "+t),this.input.focus().select()},t.prototype.addMember=function(e){var t,r;b.stop(e),n(e.target).closest(".item.disabled").length>0||(this.clearSearchResults(),t=n(e.target).closest(".js-select-member").attr("idMember"),r=this.modelCache.get("Member",t),s({url:"/1/organization/"+this.model.id+"/members/"+t,type:"put",data:{type:"normal"},dataType:"json",success:function(e){return function(n){return null!=n.token||e.model.memberList.find(function(e){return e.id===t})?void 0:(e.model.memberList.add(r),M("Invitations","Add Member to Organization","Role: Member"))}}(this),error:this._handleError.bind(this)}))},t.prototype.renderEmailInviteToSearchResults=function(e){var t,r,n;return n=/[\s\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,r=/[\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,t=_.compact(b.removeDomainFromEmailAddress(e.email).split(n)).join(" ").replace(r,""),e.fullName=b.toTitleCase(t),e.modelType="Organization",this.$(".js-uninvited-search-results").append(k(e)).show()},t.prototype.sendEmailInvite=function(e){var t,r,o,i;if(b.stop(e),r=this.$(".js-send-email-invite"),null==r.attr("disabled")){if(t=this.$(".js-email-data .js-full-name"),i=t.val().trim(),!b.validName(i))return b.setCaretAtEnd(t),void n(".js-name-error").show();o={fullName:i,email:this.$(".js-email-data .js-email").val().trim(),type:"normal"},r.attr("disabled","disabled"),s({url:"/1/organizations/"+this.model.id+"/members",type:"put",dataType:"json",data:o,success:function(e){return function(t){var n;return n=new m(t,{modelCache:e.modelCache}),e.model.memberList.get(n.id)||e.model.memberList.add(n),M("Invitations","Send Email Org Invite to New Member","Role: "+t.type),r.removeAttr("disabled"),y.hide()}}(this),error:this._handleError.bind(this)})}},t.prototype.clearSearchResults=function(){return this.helperEl.show(),this.lastSearch="",this.input.val("").focus().select(),this.$(".js-uninvited-search-results").hide().empty(),n(".js-search-results").hide()},t.prototype.removeInvitation=function(e){var t;t=n(e.currentTarget).closest(".invitation").data("id"),l.prototype.delete({model:this.model,idInvitation:t,success:function(e){return function(){return M("Invitations","Delete Organization Invite"),e.search}}(this)}),b.setCaretAtEnd(this.input[0])},t.prototype.canRemoveInvitation=function(e){return e.get("idMemberInviter")===u.myId()||this.model.owned()},t.prototype.willBePushedDown=function(){return this.savedSearch=this.input.val()},t.prototype.willBePopped=function(){return this.savedSearch=""},t}(w)},{}],531:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},f={}.hasOwnProperty,g=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};n=e(5),o=e(66),s=e(538),a=e(458),u=e(109),c=e(441),l=e("underscore"),p=e(438),h=e(38),d=e(82),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="org activity for member",t.prototype.viewTitleArguments=function(){return{memberName:this.model.get("fullName")}},t.prototype.initialize=function(){return this.org=this.options.org},t.prototype.events={"click .js-view-org-boards-for-member":"viewBoards","click .js-view-member-org-cards":"viewCards"},t.prototype.render=function(e){var t,r,i,s,a,u,c;for(i=this.model.toJSON(),r=0,u=l.filter(this.org.boardList.models,function(e){return function(e){return e.isOpen()}}(this)),s=0,a=u.length;a>s;s++)t=u[s],c=this.model,g.call(t.memberList.models,c)>=0&&r++;return i.boardCount=d("boards",r),i.hasBoards=r>0,this.org.isFeatureEnabled("orgCards")&&(i.orgCardsUrl=n.getOrganizationMemberCardsUrl(this.org.get("name"),i.username)),this.$el.html(p.fill("org_member_activity",i)),o.update(this.el),this},t.prototype.viewCards=function(){return h("Organization View","Members Page","Activity - View Org Cards")},t.prototype.viewBoards=function(e){u.stop(e),h("Organization View","Members Page","Activity - View Boards"),a.pushView({view:new s({model:this.model,parent:this.org,modelCache:this.modelCache})})},t}(c)},{}],532:[function(e,t,r){var n,o,i;n=e("react"),o=e(433)("org_account"),i=e(38),t.exports=n.createClass({displayName:"OrgInviteRestrictionsContentsComponent",render:o.renderable(function(){var e,t,r,n,s;return n=this.props,e=n.canChange,r=n.isAdmin,t=n.hasBC,s=n.restrictions,o.div(".setting-item-detail",function(){return o.div(".markeddown",function(){return s.length?(o.p(function(){return o.format("only-people-with-these-email-domains-can-join-your-organization")}),o.ul(function(){var e,t,r,n;for(n=[],e=0,t=s.length;t>e;e++)r=s[e],n.push(o.li(function(){return o.strong(function(){return o.text(r)})}));return n})):o.p(function(){return o.format("anyone-with-any-email-domain-can-be-added-to-your-organization")})}),e?void 0:o.p(".helper.u-float-left",function(){var e;return r?o.format("you-need-business-class-to-change-this-setting"):t?o.format("you-need-to-be-an-admin-to-change-this-setting"):o.format("you-need-to-be-an-admin-with-business-class-to-change-this-setting"),t?void 0:(o.text(" "),e=function(){return i("Organization View","Settings Page","Inline Business Class Ad Link")},o.a({href:"/business-class",target:"_blank",onClick:e},function(){return o.format("check-out-business-class")}))})})})})},{}],533:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M,B,T,O,L,P,A,E,D=function(e,t){function r(){this.constructor=e}for(var n in t)I.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},I={}.hasOwnProperty;n=e("jquery"),o=e(57),i=e(25),s=e(521),a=e(522),u=e(270),c=e(526),l=e(452),d=e(5),p=e(528),m=e(532),h=e(18),g=e(534),v=e(550),y=e(551),b=e(552),w=e(196),_=e(458),k=e("bluebird"),C=e("react"),x=e("react-dom"),j=e(432),S=e(555),M=e(109),B=e(556),T=e("underscore"),A=e(38),E=e(37),L=e(84),P=e(433)("org_account"),O=e(209),t.exports=f=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return D(t,e),t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:prefs",this.renderMainContent)},t.prototype.renderMainContent=function(){return null==this.$reactRoot&&(this.$reactRoot=n("<div></div>")),this.$(".js-content").append(this.$reactRoot),this.renderReactSection(),this.setActiveView(".js-org-account"),this},t.prototype.renderReactSection=function(){return x.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.getReactRoot=function(){return C.createElement(j,{},P.render(function(e){return function(){return P.div(function(){return P.addElement(e.getVisibilitySection()),P.addElement(e.getOrgInviteRestrictionsSection()),P.addElement(e.getBoardCreateVisibilityRestrictionsSection()),P.addElement(e.getBoardInviteRestrictionsSection()),e.model.owned()?P.createElement(p,{onClick:O(e,"orgDeleteConfirm")}):void 0})}}(this)))},t.prototype.getVisibilitySection=function(){var e;return e=this.model.owned(),C.createElement(S,{header:P.render(function(){return P.format("visibility")}),contents:C.createElement(B,{canChange:e,visibility:this.model.getPermLevel()}),onChange:O(this,"openChangeOrgVis"),canChange:e})},t.prototype.getOrgInviteRestrictionsSection=function(){var e,t;return e=this.model.owned()&&this.model.isFeatureEnabled("prefs"),C.createElement(S,{header:P.render(function(){return P.span(function(){return P.format("membership-restrictions"),P.icon("business-class",{class:"icon-business-class-color"})})}),contents:C.createElement(m,{canChange:e,isAdmin:this.model.owned(),hasBC:this.model.isPremium(),restrictions:null!=(t=this.model.get("prefs").orgInviteRestrict)?t:[]}),onChange:O(this,"openChangeOrgInviteRestrictions"),canChange:e})},t.prototype.getBoardCreateVisibilityRestrictionsSection=function(){var e;return e=this.model.owned()&&this.model.isFeatureEnabled("prefs"),C.createElement(S,{header:P.render(function(){return P.span(function(){return P.format("board-creation-restrictions"),P.icon("business-class",{class:"icon-business-class-color"})})}),contents:C.createElement(s,{canChange:e,isAdmin:this.model.owned(),hasBC:this.model.isPremium(),restrictions:this.model.get("prefs").boardVisibilityRestrict}),onChange:O(this,"openChangeBoardVisRestrictions"),canChange:e})},t.prototype.getBoardInviteRestrictionsSection=function(){var e;return e=this.model.owned()&&this.model.isFeatureEnabled("prefs"),C.createElement(S,{header:P.render(function(){return P.span(function(){return P.format("inviting-non-org-members-to-boards"),P.icon("business-class",{class:"icon-business-class-color"})})}),contents:C.createElement(a,{canChange:e,hasBC:this.model.isPremium(),isAdmin:this.model.owned(),restricted:this.model.get("prefs").externalMembersDisabled}),onChange:O(this,"openChangeNonOrgMemberBoardInvites"),canChange:e})},t.prototype.openChangeOrgVis=function(e){_.toggle({elem:e,view:new c({model:this.model,modelCache:this.modelCache})}),A("Organization View","Settings Page","Open Change Org Visibility")},t.prototype.openChangeOrgInviteRestrictions=function(e){_.toggle({elem:e,view:new y({model:this.model,modelCache:this.modelCache})}),A("Organization View","Settings Page","Open Restrict Org Invites by Email Domain")},t.prototype.openChangeNonOrgMemberBoardInvites=function(e){_.toggle({elem:e,view:new g({model:this.model,modelCache:this.modelCache})}),A("Organization View","Settings Page","Toggle Allow Inviting Non-Org Members to Boards")},t.prototype.openChangeBoardVisRestrictions=function(e){_.toggle({elem:e,view:new v({model:this.model,modelCache:this.modelCache})}),A("Organization View","Settings Page","Open Change Board Visibility")},t.prototype.bcAdLink=function(){return A("Organization View","Settings Page","Inline Business Class Ad Link")},t.prototype.orgDeleteConfirm=function(e){var t;A("Organization View","Settings Page","Open Delete Org Dialog"),t=function(e){return function(){return new k(function(t,r){return e.model.destroy({success:function(){return A("Organization","Successfully Delete"),t()},error:r})}).then(function(){return _.hide(),d.navigate("/",{trigger:!0})})}}(this),this.model.isPremium()&&!o.willExpire(this.model.get("paidAccount"))?(A("Organization View","Settings Page","Open Cancel Business Class and Delete Team Dialog"),_.toggle({elem:e,getViewTitle:function(){return L(["view title","delete team"])},maxWidth:600,reactElement:C.createElement(u,{key:"cancel bc",initialIsCancelling:!0,isDeleting:!0,productName:L("products.bc"),cancelProduct:function(e){return function(r){var n,o;return o=r.reason,n=r.details,E(e.model,o,n),w.cancel(e.model).then(function(t){return A("Organization","Successfully Canceled Paid Account"),e.model.set(t)}).then(function(){return t()})}}(this)})})):l.toggle("delete organization",{elem:e,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(e){return t().done()}}(this)})},t.prototype.remove=function(){return x.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}(b)},{}],534:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(109),i=e(441),s=e(438),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.viewTitleKey="inviting non-org members",t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.render)},t.prototype.events={"click a":"togglePref"},t.prototype.render=function(){var e;return e=this.model.toJSON({prefs:!0,url:!0,premium:!0}),e.externalMembersDisabled=e.prefs.externalMembersDisabled,this.$el.html(s.fill("org_prefs_nonorg_invites",e,{editable:this.model.editable()})),this},t.prototype.togglePref=function(e){o.stop(e),this.model.setPref("externalMembersDisabled",!this.model.getPref("externalMembersDisabled"))},t}(i)},{}],535:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M,B,T,O,L,P,A,E,D,I,V,N,$=function(e,t){function r(){this.constructor=e}for(var n in t)z.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},z={}.hasOwnProperty,F=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};n=e("jquery"),o=e(57),s=e(188),a=e(25),u=e(519),c=e(520),d=e(271),p=e(452),h=e(5),f=e(272),m=e(274),i=e(273),M=e(279),C=e(278),g=e(30),v=e(18),l=e(268),b=e(552),w=e(196),_=e(250),k=e(458),x=e("react"),j=e("react-dom"),S=e(432),B=e(109),T=e("underscore"),O=e(280),P=e(84),L=e(209),I=e(38),V=e(37),A=e("moment"),E=e(93),N=e("xtend"),D=e("recup"),t.exports=y=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $(t,e),t.prototype.renderMainContent=function(){return this.$(".js-content").empty(),null==this.$reactRoot&&(this.$reactRoot=n("<div></div>")),this.$(".js-content").append(this.$reactRoot),this.renderReactSection(),this.setActiveView(".js-billing"),this},t.prototype.renderReactSection=function(){return j.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.getReactRoot=function(){var e;return x.createElement(S,{},o.hasAccount(null!=(e=this.model.get("paidAccount"))?e.standing:void 0)?this.getBillingComponent():this.getSignUpComponent())},t.prototype.getBillingComponent=function(){var e;return e=O(this.model,v,{productName:P("products.bc"),productIconClass:"business-class",detailsUrl:"/business-class",onRenewClick:L(this,"renew"),cancelProduct:L(this,"cancel"),onSwitchToYearly:L(this,"switchToYearly"),didntGetAuthStatus:function(e){return function(){return g.loadOrganizationData(e.model.get("name")).done()}}(this),didGetAuthStatus:function(e){return function(){return g.loadOrganizationData(e.model.get("name")).done()}}(this),onChangeBillingContactClick:L(this,"changeBillingContactPopover"),reactivateProduct:L(w,"reactivate",this.model),changeCreditCard:L(w,"changeCreditCard",this.model),createPaidAccount:L(w,"createAccount",this.model),paidAccountPoll:L(s,{url:this.model.urlRoot+"/"+this.model.id+"?paid_account=true"})}),D.render(function(t){return function(){return D.div(function(){var r,o,i,s,a,d;return o=null!=(i=e.paidAccount)&&null!=(s=i.products)?s[0]:void 0,null!=o&&o!==e.current.monthly.productNumber&&o!==e.current.yearly.productNumber&&(a=t.model.get("activeBillableMemberCount"),r=F.call(v.BC1Products,o)>=0&&a>=10&&!n.cookie("upgrade-bc")||t.model.isEnterprise(),D.createElement(_,{stringsKey:"business-class-upgrade",subtitleCount:2,infoUrl:"/business-class",epilogueCount:r?2:1,icon:"business-class"}),r?D.createElement(c):(d=0,D.createElement(u,N(v.currentPriceObjectForModel(t.model),{isMonthly:v.isMonthly(o),yearlyDiscount:d,yearlyDiscountAmount:e.current.yearly.totalPrice*d,userCount:a,onUpgradeClick:function(e){return w.changeProduct(t.model,e).then(function(e){return I("Organization","Successfully Upgraded to BC3"),t.model.set(e)})}})))),D.createElement(l,e)})}}(this))},t.prototype.getSignUpComponent=D.renderable(function(){return D.div(function(e){return function(){var t,r,n,o,u,c,l;return D.createElement(_,{stringsKey:"business-class",subtitleCount:1,infoUrl:"/business-class",epilogueCount:0,icon:"business-class"}),t=v.currentPriceObjectForModel(e.model),D.createElement(f,{onSubmit:L(w,"createAccount",e.model),doPoll:L(s,{url:e.model.urlRoot+"/"+e.model.id+"?paid_account=true"}),buttonKey:"upgrade-team",contentBuilders:[E(C,{productName:"Business Class",monthlyProduct:t.monthly,yearlyProduct:t.yearly,defaultProduct:t.yearly.productNumber,billingStrategy:t.billingStrategy}),E(m),E(i),E(M)],extraData:{billingContactFullName:null!=(r=null!=(n=e.model.get("paidAccount"))?n.contactFullName:void 0)?r:a.me().get("fullName"),billingContactEmail:null!=(o=null!=(u=e.model.get("paidAccount"))?u.contactEmail:void 0)?o:a.me().get("email"),billingContactLocale:null!=(c=null!=(l=e.model.get("paidAccount"))?l.contactLocale:void 0)?c:a.me().getPref("locale")},didntGetAuthStatus:function(){return g.loadOrganizationData(e.model.get("name")).done()},didGetAuthStatus:function(){return h.organizationBoardsView(e.model.get("name"),e.model.id)}})}}(this))}),t.prototype.cancel=function(e){var t,r;return r=e.reason,t=e.details,I("Organization View","Billing Page","Open Cancel Business Class Dialog"),V(this.model,r,t),w.cancel(this.model).then(function(e){return function(t){return I(e.model.typeName,"Successfully Canceled Paid Account"),e.model.set(t)}}(this))},t.prototype.renew=function(){return I("Organization View","Billing Page","Renew Expiring Business Class Subscription"),w.renew(this.model).then(function(e){return function(t){return I("Organization","Successfully Renewed Expiring Yearly Business Class Subscription"),e.model.set(t)}}(this)).done()},t.prototype.switchToYearly=function(e){return p.toggle("yearly billing switch",{elem:e,model:this.model,confirmBtnClass:"primary",fxConfirm:function(e){return function(t){return w.changeProduct(e.model,v.currentProducts.yearly).then(function(t){return I("Organization","Successfully Switched Business Class to Yearly Billing"),e.model.set(t)}).done()}}(this)})},t.prototype.changeBillingContactPopover=function(e){return I("Organization View","Billing Page","Open Change Billing Contact Info"),k.toggle({elem:e,view:new d({model:this.model,modelCache:this.modelCache})})},t.prototype.remove=function(){return j.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}(b)},{}],536:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};l=e("underscore"),o=e(289),n=e(288),i=e(292),s=e(294),a=e(537),u=e("react"),c=e(109),v=e(433)("org_filtering"),h=e(84),d=e(209),p=e(75),m=e(111),b=e("xtend"),y=e(38),g=["active","members","stars","alphabetical"],f=["tagFilter","sort"],t.exports=u.createClass({displayName:"OrganizationBoardsComponent",getInitialState:function(){var e;return l.defaults(null!=(e=this.props.initialFilterState)?e:{},{filter:"",tagFilter:null,sort:g[0],showOtherPrivateBoards:!1})},render:v.renderable(function(){return v.div(".boards-page-layout",function(e){return function(){return v.div(".boards-page-layout-sidebar",function(){return v.addElement(e.getFilterComponent())}),v.div(".boards-page-layout-list",function(){return v.addElement(e.getBoardsComponent())})}}(this))}),componentWillUpdate:function(e,t){return l.isEqual(l.pick(t,f),l.pick(this.state,f))?void 0:this.props.onFilterChange(l.pick(t,f))},shouldComponentUpdate:m,toggleTagFilter:function(e){return e===this.state.tagFilter?this.setState({tagFilter:null}):this.setState({tagFilter:e})},toggleShowOtherPrivateBoards:function(){return this.setState({showOtherPrivateBoards:!this.state.showOtherPrivateBoards})},isVisibleBoard:function(e){var t;return(!this.state.tagFilter||(t=this.state.tagFilter,w.call(e.idTags,t)>=0))&&(!this.state.filter||c.buildFuzzyMatcher(this.state.filter)(e.name))&&(this.state.showOtherPrivateBoards||!e.isOtherPrivate)},getBoardsComponent:function(){var e;return e={items:l.chain(this.props.boards.slice().sort(function(e,t){return e.name.localeCompare(t.name)})).sortBy(function(e){return function(t){switch(e.state.sort){case"alphabetical":return 0;case"active":return-t.dateLastActivity.valueOf();case"members":return-t.membershipCount;case"stars":return-t.starCount}}}(this)).map(function(e){return function(t){return b(t,{hidden:!e.isVisibleBoard(t),tagComponents:t.tags.map(function(t){return u.createElement(i,{text:t.name,key:t.id,selected:t.id===e.state.tagFilter,onClick:function(){return y("Organization View","Boards Page","Click Tag Under Board"),e.toggleTagFilter(t.id)}})}).concat(t.extraTagComponents)})}}(this)).map(function(e){return u.createElement(o,e)}).value(),createNewItem:null!=this.props.newBoard?u.createElement(n,{newBoard:this.props.newBoard}):void 0},u.createElement(s,e)},getFilterComponent:function(){var e,t,r;return e=function(e,t){var r,n,o,i,s,a,u,c;for(u={},n=0,s=e.length;s>n;n++)for(o=e[n],c=t(o),i=0,a=c.length;a>i;i++)r=c[i],Object.hasOwnProperty.call(u,r)||(u[r]=0),u[r]++;return u},t=e(this.props.boards,d.get("idTags")),r={tags:this.props.tags.map(function(e){return function(r){var n;return{html:v.l("tag-with-count",{name:r.name,count:p(null!=(n=t[r.id])?n:0)}),onClick:e.toggleTagFilter.bind(e,r.id),selected:r.id===e.state.tagFilter}}}(this)),sorts:g.map(function(e){return function(t){return{html:h(["org sort",t]),onClick:function(){return y("Organization View","Boards Page","Select Sort",t),e.setState({sort:t})},selected:t===e.state.sort}}}(this)),onFilterChange:function(e){return function(t){return e.setState({filter:t})}}(this),onAddTag:this.props.addTag,filter:this.state.filter,showOtherPrivateBoards:this.state.showOtherPrivateBoards,canShowOtherPrivateBoards:l.find(this.props.boards,"isOtherPrivate"),toggleOtherPrivateBoards:d(this,"toggleShowOtherPrivateBoards"),key:this.id},u.createElement(a,r)}})},{}],537:[function(e,t,r){var n,o,i,s;n=e("react"),s=e(433)("org_filtering"),i={alphabetical:"Alphabetical",active:"Most Active",members:"Number of Members",stars:"Number of Stars"},o=function(e,t,r){var n,o,i;return i=null!=r?r:{},n=i.hasCloseableItems,o=i.onAddTag,s.ul(".boards-page-navigation-list",function(){var r,i,a,u,c,l;for(s.li(".boards-page-navigation-list-header",function(){return s.text(t)}),i=0,a=e.length;a>i;i++)c=e[i],r=c.html,l=c.selected,u=c.onClick,s.li(".boards-page-navigation-list-item",function(){var e;return e={"boards-page-navigation-list-item-link":!0,"mod-closeable":n,"is-active":l},s.b(u,{class:s.classify(e)},function(){return s.raw(r),n&&l?s.icon("close",{class:"boards-page-navigation-list-item-link-icon"}):void 0})});null!=o&&s.li(".boards-page-navigation-list-item",function(){return s.b(o,{class:"boards-page-navigation-list-item-link mod-quiet"},function(){return s.format("create-tag")})})})},t.exports=n.createClass({displayName:"OrganizationBoardsFilterComponent",render:s.renderable(function(){var e,t,r,n,i,a,u,c,l;return i=this.props,t=i.filter,u=i.sorts,c=i.tags,n=i.onFilterChange,r=i.onAddTag,a=i.showOtherPrivateBoards,e=i.canShowOtherPrivateBoards,l=i.toggleOtherPrivateBoards,s.div(".boards-page-navigation",function(){return s.input(".boards-page-navigation-input",{type:"text",placeholder:s.l("search-for-boards"),value:t,onChange:function(e){return n(e.target.value)}}),o(u,s.l("sort")),c.length?o(c,s.l("filter-by-tag"),{hasCloseableItems:!0,onAddTag:r}):(s.p(".quiet.boards-page-navigation-explainer",function(){return s.format("tags-explanation")}),s.b(r,{class:"quiet-button"},function(){return s.format("create-tag")})),e?s.ul(".boards-page-navigation-list",function(){s.li(".boards-page-navigation-list-header",function(){return s.format("visibility")}),s.li(".boards-page-navigation-list-item",function(){var e;return e={"boards-page-navigation-list-item-link":!0,"mod-closeable":!0,"is-active":a},s.b(l,{class:s.classify(e)},function(){return s.format("show other private boards"),a?s.icon("close",{class:"boards-page-navigation-list-item-link-icon"}):void 0})})}):void 0})})})},{}],538:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e(109),i=e(441),s=e("underscore"),u=e(438),a=e(84),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="boards for member",t.prototype.viewTitleArguments=function(){return{memberName:this.model.get("fullName")}},t.prototype.initialize=function(){this.org=this.options.parent},t.prototype.render=function(){var e;return e=this.model.toJSON(),e.boards=this.org.boardList.models.filter(function(e){return function(t){return s.contains(t.memberList.models,e.model)&&t.isOpen()}}(this)).map(function(e){return function(t){var r;return r=t.toJSON(),r.memberType=a(["member types",t.getMemberType(e.model)]),r.url=t.getUrl(),r}}(this)),this.$el.html(u.fill("org_boards_for_member",e)),this},t}(i)},{}],539:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M,B,T,O,L,P=function(e,t){function r(){this.constructor=e}for(var n in t)A.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},A={}.hasOwnProperty,E=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};x=e("underscore"),n=e("jquery"),o=e(518),i=e(25),c=e(289),a=e(288),u=e(264),l=e(291),d=e(294),p=e(523),s=e(410),h=e(331),m=e(66),f=e(536),v=e(552),y=e(458),b=e("react"),w=e("react-dom"),_=e(432),k=e(97),C=e(109),T=e(438),M=e(84),j=e(209),O=e(38),B=e(433)("org_filtering"),S=e(75),L=e("xtend"),t.exports=g=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return P(t,e),t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change",this.renderReactSection),this.listenTo(this.model.boardList,"change:idTags change:name",this.renderReactSection),this.listenTo(this.model.tagList,"add remove reset change",this.renderReactSection),this.listenTo(i.me().boardStarList,"add remove reset",this.frameDebounce(this.renderReactSection))},t.prototype.events={"click .js-close-intro-helper":"closeBCIntro"},t.prototype.isFullWidth=function(){return this.model.isFeatureEnabled("tags")},t.prototype.boardToModelForBoardItem=function(e){var t,r;return t={id:e.id,name:e.get("name"),idTags:e.getIdTags(),isOtherPrivate:null==i.me().boardList.get(e.id)&&"private"===e.getPref("permissionLevel"),membershipCount:e.getMembershipCount(),starCount:e.getStarCount("organization"),dateLastActivity:new Date(null!=(r=e.get("dateLastActivity"))?r:C.idToDate(e.id)),background:this.backgroundObjForBoard(e),showOptions:i.isLoggedIn(),isStarred:null!=i.me().boardStarList.getBoardStar(e.id),relUrl:e.getUrl(),onStarClick:function(e){return function(e){var t;t=i.me().boardStarList,null==t.getBoardStar(e)?t.starBoard(e):t.unstarBoard(e)}}(this),badgeComponents:this.model.isFeatureEnabled("tags")?this.badgeComponentsForBoard(e):[],key:e.id}},t.prototype.boardToModelForBoardItemWithTags=function(e){return L(this.boardToModelForBoardItem(e),{tags:this.tagsForBoard(e),extraTagComponents:[b.createElement(l,{onClick:this.addTagToBoard.bind(this,e),key:e.id,id:e.id})]})},t.prototype.boardToModelForBoardItemWithNoTags=function(e){return L(this.boardToModelForBoardItem(e),{tagComponents:[]})},t.prototype.backgroundObjForBoard=function(e){var t,r,n,o;return x.extend({brightness:e.getPref("backgroundBrightness")},e.getPref("backgroundTile")?{image:e.getPref("backgroundImage"),tiled:!0}:(t=null!=(r=null!=(n=C.smallestPreviewBiggerThan(e.getPref("backgroundImageScaled"),400,200))?n.url:void 0)?r:e.getPref("backgroundImage"))?{image:t,tiled:!1}:{color:null!=(o=e.getPref("backgroundColor"))?o:e.getClientBackgroundColor("blue")})},t.prototype.tagsForBoard=function(e){return this.model.tagList.models.filter(function(t){var r;return r=t.id,E.call(e.getIdTags(),r)>=0}).map(function(e){return{id:e.id,name:e.get("name")}})},t.prototype.addTagToBoard=function(e,t){return O("Organization View","Boards Page","Open Tag Select Menu"),y.toggle({elem:t,view:p,options:{model:e,org:this.model,modelCache:this.modelCache}})},t.prototype.badgeComponentsForBoard=function(e){var t,r,n,o,i,a;return o=e.getStarCount("organization"),r=e.getMembershipCount(),t=null!=(n=e.get("dateLastActivity"))?n:C.idToDate(e.id),i=s.getPermLevelIconClassForBoard(e),a=s.getPermLevelAltTextForBoard(e),x.compact([b.createElement(u,{icon:i,title:a,iconClass:"is-vis-color",key:["vis",e.id].join("-")}),b.createElement(u,{icon:"member",text:S(r),title:B.l("members"),key:["member",e.id].join("-")}),o?b.createElement(u,{icon:"star",text:S(o),title:B.l("members-who-starred-board"),key:["star",e.id].join("-")}):void 0,b.createElement(u,{icon:"activity",text:m.toDateString(t),title:B.l("last-activity"),key:["activity",e.id].join("-")})])},t.prototype.renderMainContent=function(){var e;return e=this.model.toJSON(),e.hasCSVExport=this.model.isFeatureEnabled("csvExport"),e.hasGoldMembers=this.model.isFeatureEnabled("goldMembers"),e.hasBusinessClass=this.model.isPremium(),e.isBusinessClassAdmin=this.model.isPremium()&&this.model.owned(),this.$(".js-content").empty(),e.isBusinessClassAdmin&&!i.me().isDismissed("BCIntro-"+this.model.id)&&this.$(".js-content").append(T.fill("org_bc_intro",e)),null==this.$reactRoot&&(this.$reactRoot=n("<div></div>")),this.$(".js-content").append(this.$reactRoot),this.renderReactSection(),this.setActiveView(".js-org-profile"),this},t.prototype.renderReactSection=function(){return w.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.localStorageKey=function(){return"orgFilteringState-"+this.model.id},t.prototype.saveFilter=function(e){return k.set(this.localStorageKey(),e)},t.prototype.getReactRoot=function(){return b.createElement(_,{},this.model.isFeatureEnabled("tags")?this.getFilterableBoardsComponent():this.getBoardsComponent())},t.prototype.getFilterableBoardsComponent=function(){var e;return e={key:this.model.id,id:this.model.id,tags:this.model.tagList.toJSON(),boards:this.getBoardItemsWithTags(),newBoard:i.me().canAddBoardsTo(this.model)?this.newBoard.bind(this):void 0,addTag:j(this,"addTag"),onFilterChange:j(this,"saveFilter"),initialFilterState:k.get(this.localStorageKey())},b.createElement(f,e)},t.prototype.getBoardsComponent=function(){var e;return e={items:this.getBoardItemsWithNoTags().map(j.choke(1,b,"createElement",c))},i.me().canAddBoardsTo(this.model)&&(e.createNewItem=b.createElement(a,{newBoard:j(this,"newBoard")})),b.createElement(d,e)},t.prototype.addTag=function(e){return O("Organization View","Boards Page","Open Create Tag Menu"),y.toggle({elem:e,view:o,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.newBoard=function(e){return O("Organization View","Boards Page","Open Create Board Menu"),y.toggle({elem:e,view:h,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.getVisibleBoards=function(){return this.model.boardList.models.filter(function(e){return e.isOpen()})},t.prototype.getBoardItemsWithTags=function(){return this.getVisibleBoards().map(j(this,"boardToModelForBoardItemWithTags"))},t.prototype.getBoardItemsWithNoTags=function(){
return this.getVisibleBoards().map(j(this,"boardToModelForBoardItemWithNoTags"))},t.prototype.remove=function(){return w.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t.prototype.closeBCIntro=function(){i.me().dismiss("BCIntro-"+this.model.id),O("Organization View","Profile Page","Dismiss BC Intro Helper"),this.renderMainContent(),C.scrollToTop()},t}(v)},{}],540:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function r(){this.constructor=e}for(var n in t)y.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},y={}.hasOwnProperty;n=e(451),o=e(190),i=e(66),s=e(86),u=e(552),c=e(109),l=e("underscore"),d=e(34),h=e(438),m=e(38),p=e("moment"),f=e(100),g=e("xtend"),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:exports",this.renderExports)},t.prototype.events={"click .js-create-new-export":"clickCreateNewExport","click .js-download-export":"downloadExport"},t.prototype.renderMainContent=function(){var e;return e={},e.hasCSV=this.model.isFeatureEnabled("csvExport"),this.$(".js-content").html(h.fill("org_export",e,{editable:this.model.editable()})),this.renderExports(),this.setActiveView(".js-org-export"),this},t.prototype.renderExports=function(){var e,t,r,n,o,a,u,c;if(t=this.model.toJSON({prefs:!0}),e=this.$(".js-list-exports").empty(),l.isEmpty(t.exports))n=h.fill("org_export_empty");else for(n="",u=t.exports,o=0,a=u.length;a>o;o++)r=u[o],t=l.clone(r),t.size=s.bytes(t.size),t.time=p(i.parse(t.startedAt)).calendar(),t.generating=null==t.exportUrl,c=f(["exports",t.status.stage]),null!=c?t.status=g(t.status,{stage:c}):d(new Error("Missing export stage for "+t.status.stage)),n+=h.fill("org_export_item",t);return e.append(n),this},t.prototype.export=function(e){return o({url:"/1/organizations/"+this.model.get("name")+"/exports",method:"post",data:{attachments:e},success:function(t){return function(r){return m("Organization","Export",e?"With Attachments":"Without Attachments"),null!=r?(t.model.get("exports").unshift(r),t.model.trigger("change:exports")):void 0}}(this),error:function(e){return function(e,t,r,o){return e.responseText.indexOf("in progress")>-1?n.show("ongoing org export","error","alert",5e3):o()}}(this)})},t.prototype.clickCreateNewExport=function(e){return c.stop(e),this.$("#includeAttachments").is(":checked")?this.export(!0):this.export(!1)},t.prototype.downloadExport=function(e){m("Organization","Download Export")},t}(u)},{}],541:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e(97),i=e(441),s=e(438),a=e(38),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="link google apps domain",t.prototype.events={"click .js-link":"link"},t.prototype.render=function(){var e;return e=this.model.toJSON(),this.$el.html(s.fill("org_link_ga_helper",e,{editable:this.model.editable()})),this},t.prototype.link=function(){a("Organization View","Members Page","Google Apps Marketplace link"),o.enabled()&&o.set("idOrganizationLinking",this.model.id)},t}(i)},{}],542:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(441),i=e(438),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.tagName="li",t.prototype.render=function(){var e;return e=this.model.toJSON({prefs:!0,url:!0}),e.visIconClass=this.model.getPermLevel(),e.hasBusinessClass=this.model.isPremium(),this.$el.html(i.fill("organization_list_item",e)),this},t}(o)},{}],543:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;n=e("jquery"),o=e(542),s=e(441),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.tagName="ul",t.prototype.className="org-list",t.prototype.initialize=function(e){this.listenTo(this.model.organizationList,{"add remove reset change:closed":this.frameDebounce(this.render)})},t.prototype.render=function(){var e;return this.$el.empty(),e=this.model.getSortedOrgs().map(function(e){return function(t){return e.subview(o,t)}}(this)),this.appendSubviews(e),this},t}(s)},{}],544:[function(e,t,r){var n,o,i,s,a,u,c,l,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p={}.hasOwnProperty,h=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};n=e(25),o=e(5),i=e(86),s=e(492),u=e(552),l=e(438),c=e(84),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.renderMainContent=function(){var e,t;return this.model.isFeatureEnabled("orgCards")?(e=this.model.toJSON({prefs:!0}),t=e.name,e.memberData=this.options.member.toJSON(),e.memberData.bioHtml=i.markdownAsHtml(this.options.member.get("bio"),{textData:this.options.member.get("bioData")}),this.setActiveView(".js-org-members"),e.members=[],this.$(".js-content").html(l.fill("org_member_cards",e,{editable:this.model.editable()},{member:l.member,member_profile:l.member_profile_info})),this.defer(function(e){return function(){return e.renderCards()}}(this)),this):o.displayErrorPage({errorType:"notFound"})},t.prototype.renderCards=function(){var e,t,r,o,i,a,u,d;for(t=this.modelCache.find("Board",function(e){return function(t){var r;return t.idOrganization===(null!=(r=e.model)?r.idOrganization:void 0)&&t.isOpen()}}(this)),i=!1,a=0,u=t.length;u>a;a++)e=t[a],r=this.modelCache.find("Card",function(t){return function(r){var n;return r.get("idBoard")===e.id&&r.isOpen()&&(n=t.options.member.id,h.call(r.get("idMembers"),n)>=0)}}(this)),r.length&&(i=!0,this.$(".js-cards").append(this.subview(s,e,{hideOrg:!0}).render(r).el));return i||(d=c(this.model.isPremOrgAdmin(n.me())?"no assigned org cards.at all":"no assigned org cards.that you can see"),o={message:d,classes:"gutter",style:"padding: 60px 10px;"},this.$(".js-content").append(l.fill("empty_list",o))),this},t}(u)},{}],545:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w=function(e,t){function r(){this.constructor=e}for(var n in t)_.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},_={}.hasOwnProperty;m=e("underscore"),f=e(209),n=e(531),o=e(507),s=e(546),a=e(547),u=e(548),p=e(553),c=e("react"),l=e("react-dom"),d=e(432),g=e("recup"),v=e(433)("org_members"),y=e(38),h=e(109),b=e("xtend"),t.exports=i=function(e){function t(e){t.__super__.constructor.apply(this,arguments),this.state={filter:"",showAll:!1}}return w(t,e),t.prototype.render=v.renderable(function(){return v.div(".org-members-page-layout",function(e){return function(){return v.div(".org-members-page-layout-sidebar",function(){return v.addElement(e.orgSidebarPropsToElement())}),v.div(".org-members-page-layout-list",function(){return v.addElement(e.getMemberListElement())})}}(this))}),t.prototype.orgSidebarPropsToElement=function(){var e;return e=b(this.props.sidebar,{filter:this.state.filter,onFilterChange:function(e){return function(t){return e.setState({filter:t})}}(this),onShowAllChange:function(e){return function(t){return e.setState({showAll:t})}}(this)}),c.createElement(u,e)},t.prototype.getMemberListElement=function(){var e;return e={items:this.props.memberModels.map(f(this,"memberModelToMemberItemElement"))},c.createElement(a,e)},t.prototype.isVisibleMember=function(e){return(!e.hidden||this.state.showAll)&&(!this.state.filter||h.buildFuzzyMatcher(this.state.filter)(e.fullName))},t.prototype.memberModelToMemberItemElement=function(e){var t;return t=m.extend({isFilterMatch:this.isVisibleMember(e)},e),c.createElement(s,t)},t}(c.Component)},{}],546:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e("react"),i=e(433)("member_list_item_detail"),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.render=i.renderable(function(){var e,t,r,n,o,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M,B,T;return S=this.props,f=S.isVirtual,l=S.isDeactivated,s=S.fullName,T=S.username,B=S.showGoogleApps,a=S.gMail,h=S.isOrgMember,M=S.showActivity,t=S.allowTypeChange,x=S.orgMemberType,e=S.allowReactivate,p=S.isMe,o=S.canRemove,C=S.orgIsBC,j=S.ownsOrg,u=S.hidden,k=S.onViewActivity,w=S.onRoleChange,b=S.onRemoveOrDeactivate,n=S.avatarHash,r=S.avatarDomain,c=S.initials,m=S.isOrganizationAdmin,y=S.onReactivateClick,_=S.onUnhideMember,g=S.onHideMember,v=S.onInviteMember,d=S.isFilterMatch,i.div({class:i.classify({"member-list-item-detail":!0,hide:!d})},function(){return i.div({class:i.classify({member:!0,"member-no-menu":!0,"member-virtual":f,"member-deactivated":l})},function(){return n?i.img(".member-avatar",{height:"30",width:"30",src:[r,n,"30.png"].join("/"),srcSet:[r,n,"30.png 1x"].join("/")+", "+[r,n,"50.png 2x"].join("/"),alt:s+" ("+T+")",title:s+" ("+T+")"}):i.span(".member-initials",{title:s+" ("+T+")"},function(){return i.text(c)}),l||m&&i.span(".member-type.admin",{title:i.l("this-member-is-an-admin-of-this-organization")}),i.span(".member-gold-badge",{title:i.l("this-member-has-trello-gold")})}),i.div(".details",function(){return i.p(".name-line",function(){return i.span(".full-name",function(){return i.text(s)})}),i.p(".u-bottom.quiet",function(){return T&&i.span(".quiet.u-inline-block",function(){return i.format("at-username",{username:T})}),B&&a?(T&&i.text("- "),i.icon("google"),i.text(a)):void 0})}),i.div(".options",function(){if(h){if(M&&i.b(k,".option.quiet-button",function(){return i.format("activity")}),t?i.b(w,".option.button-link.role-button",function(){return i.text(x),i.icon("dropdown-menu")}):i.p(".option.status.quiet",function(){return i.text(x)}),e&&i.b(y,".option.quiet-button",function(){return i.format("reactivate")}),p)return i.b(b,{class:i.classify({option:!0,"button-link":!0,"remove-button":!0,disabled:!o})},function(){return C?i.icon("close","leave-ellipsis"):i.icon("close","leave")});if(j)return i.b(b,{class:i.classify({option:!0,"button-link":!0,"remove-button":!0,disabled:!o})},function(){return i.icon("close","remove-ellipsis")})}else if(B)return u?i.b(_,".option.quiet-button",function(){return i.format("always-show")}):i.b(g,".option.quiet-button",function(){return i.format("dismiss")}),i.b(v,".option.button-link.primary",function(){return i.icon("add","add-member")})})})}),t}(o.Component)},{}],547:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e("react"),i=e(433)("org_members"),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.render=i.renderable(function(){var e;return e=this.props.items,i.div(function(){e.forEach(i.addElement)})}),t}(o.Component)},{}],548:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e("react"),i=e(433)("org_members"),t.exports=n=function(e){function t(e){t.__super__.constructor.apply(this,arguments),this.state={showingAll:!1}}return s(t,e),t.prototype.render=i.renderable(function(){var e,t,r,n,o,s,a,u,c,l,d;return c=this.props,t=c.canManageMembers,e=c.canLinkGoogleApps,r=c.canShowAll,s=c.onLinkGoogleApps,u=c.openManageMembers,n=c.filter,o=c.onFilterChange,a=c.onShowAllChange,l=this.state.showingAll,d=function(e){return function(){return l=!e.state.showingAll,e.setState({showingAll:l}),a(l)}}(this),i.div(function(){return i.input(".u-float-left",{style:{marginBottom:"8px"},type:"text",placeholder:i.l("find-members-by-name-ellipsis"),value:n,onChange:function(e){return o(e.target.value)}}),i.div(".org-members-options",function(){return t&&i.b(u,{class:"button-link"},function(){return i.icon("member","add-members")}),e&&i.div(function(){return i.b(s,{class:"primary button-link"},function(){return i.icon("google","link-to-google-apps-domain")})}),r?i.b(d,".quiet-button",function(){return i.format(l?"hide-dismissed":"show-dismissed-accounts")}):void 0}),i.hr()})}),t}(o.Component)},{}],549:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M,B,T,O,L=function(e,t){function r(){this.constructor=e}for(var n in t)P.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},P={}.hasOwnProperty,A=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};n=e("jquery"),j=e("underscore"),o=e(451),i=e(191),s=e(25),S=e(209),M=e(84),a=e(530),u=e(178),c=e(531),l=e(507),d=e(541),p=e(545),h=e(546),m=e(547),f=e(548),v=e(552),b=e("bluebird"),y=e(458),w=e("react"),_=e("react-dom"),k=e(432),B=e("recup"),C=e(553),T=e(433)("org_members"),O=e(38),x=e(109),t.exports=g=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return L(t,e),t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.getGoogleAppsData(),this.listenTo(this.model,{"change:memberships":this.frameDebounce(this.renderReactSection)})},t.prototype.isFullWidth=function(){return!0},t.prototype.renderMainContent=function(){return null==this.reactRoot&&(this.reactRoot=document.createElement("div")),this.$(".js-content").append(this.reactRoot),this.renderReactSection(),this.setActiveView(".js-org-members"),this},t.prototype.renderReactSection=function(){return _.render(this.getReactRoot(),this.reactRoot),this},t.prototype.getReactRoot=function(){return w.createElement(k,{},this.getOrgMembersComponent())},t.prototype.getOrgMembersComponent=function(){var e;return e={memberModels:this.getMembers().map(S(this,"memberToModelForMemberItemElement")),sidebar:this.orgToOrgSidebarProps(),orgMemberList:this.getMembers()},w.createElement(p,e)},t.prototype.orgToOrgSidebarProps=function(){var e;return e={canManageMembers:this.model.editable(),canLinkGoogleApps:this.model.isFeatureEnabled("googleApps")&&(!this.model.get("prefs").associatedDomain||this.googleAppsFetchFailed)&&this.model.editable(),canShowAll:this.model.isFeatureEnabled("googleApps")&&j.any(this.mappingsData,function(e){return function(t){var r;return(null!=(r=e.modelCache.findOne("Member","gMail",t.gMail))?r.get("hidden"):void 0)||t.hidden}}(this)),onLinkGoogleApps:this.startLinkingGoogleApps.bind(this),openManageMembers:this.openManageMembers.bind(this)}},t.prototype.getGoogleAppsData=function(){return this.model.isLinkedToGoogleApps()&&this.model.editable()?this.model.getGoogleAppsMappings().then(function(e){return function(t){return e.mappingsData=t}}(this)).catch(function(e){return function(t){return e.googleAppsFetchFailed=!0}}(this)).finally(function(e){return function(){return e.renderMainContent()}}(this)).done():void 0},t.prototype.startLinkingGoogleApps=function(e){return O("Organization View","Members Page","Start Linking Google Apps Domain"),y.toggle({elem:e,view:d,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openManageMembers=function(e){O("Organization View","Members Page","Open Manage Members"),y.toggle({elem:e,view:a,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.memberToModelForMemberItemElement=function(e){var t,r;return t=this.model.getMemberType(e),r={isVirtual:"virtual"===t,isDeactivated:"deactivated"===t,fullName:e.get("fullName"),username:e.get("username"),showGoogleApps:this.model.isLinkedToGoogleApps()&&this.model.editable()&&null!=this.mappingsData,gMail:e.get("gMail"),isOrgMember:"public"!==t,showActivity:this.model.owned()&&"virtual"!==t,allowTypeChange:this.model.owned()&&"deactivated"!==t&&"unconfirmed"!==t&&"virtual"!==t,orgMemberType:M(["member types",t]),allowReactivate:this.model.owned()&&"deactivated"===t,isMe:s.isMe(e),canRemove:e.getMembershipData(this.model).canRemove,orgIsBC:this.model.isPremium(),ownsOrg:this.model.owned(),hidden:e.get("hidden"),onViewActivity:this.viewMemberActivity.bind(this,e),onRoleChange:this.changeRole.bind(this,e),onRemoveOrDeactivate:this.removeOrDeactivate.bind(this,e),avatarHash:e.get("avatarHash"),avatarDomain:window.avatarDomain,initials:e.get("initials"),isOrganizationAdmin:"admin"===t,onReactivateClick:this.reactivateMember.bind(this,e),onUnhideMember:this.unhideMember.bind(this,e),onHideMember:this.hideMember.bind(this,e),onInviteMember:this.inviteToOrg.bind(this,e)}},t.prototype.getMembers=function(){var e,t,r,n,o,i,s,a,c,l,d,p,h,m,f;if(p=j.clone(this.model.memberList.models),null!=this.mappingsData)for(m=this.mappingsData,n=0,s=m.length;s>n;n++)f=m[n],null!=f.idMember?(d=this.modelCache.get("Member",f.idMember),null==d?d=new u({id:f.idMember,fullName:f.fullName,gMail:f.gMail,initials:f.initials,hidden:f.hidden},{modelCache:this.modelCache}):d.set("gMail",f.gMail)):(d=this.modelCache.findOne("Member","gMail",f.gMail),null==d&&(d=new u({fullName:f.fullName,gMail:f.gMail,initials:f.initials,hidden:f.hidden},{modelCache:this.modelCache}),f.idMember=d.cid)),A.call(p,d)<0&&p.push(d);for(h=j.sortBy(p,function(e){return e.get("fullName")}),t=[],o=0,a=h.length;a>o;o++)l=h[o],"deactivated"===this.model.getMemberType(l)&&t.push(l);for(r=[],i=0,c=h.length;c>i;i++)l=h[i],"virtual"===this.model.getMemberType(l)&&r.push(l);return e=j.difference(h,r,t),e.concat(t).concat(r)},t.prototype.inviteToOrg=function(e){return O("Organization View","Members Page","Add Google Apps Member"),b.try(function(t){return function(){return e.id?t.model.changeMemberRole(e,{type:"normal"}):t.model.addMemberRole({fullName:e.get("fullName"),email:e.get("gMail"),type:"normal"}).then(function(){return o.show("invitation sent","info","alert",3e3)})}}(this)).catch(i,function(e){o.showLiteralText(e.message,"error","alert",3e3),O("Invitations","Error: "+e.message)}).done()},t.prototype.hideMember=function(e){return e.get("gMail")?(e.set("hidden",!0),this.model.toggleMemberHidden(e,{type:"post"}),this.renderReactSection()):void 0},t.prototype.unhideMember=function(e){return e.get("gMail")?(e.set("hidden",!1),this.model.toggleMemberHidden(e,{type:"delete"}),this.renderReactSection()):void 0},t.prototype.reactivateMember=function(e,t){O("Organization View","Members Page","Reactivate"),this.model.reactivateMember(e)},t.prototype.removeOrDeactivate=function(e,t){O("Organization View","Members Page","Remove or Deactivate Member Button"),y.toggle({elem:t,view:C,options:{model:e,org:this.model,modelCache:this.modelCache}})},t.prototype.viewMemberActivity=function(e,t){O("Organization View","Members Page","View Member Activity"),y.toggle({elem:t,view:c,options:{model:e,org:this.model,modelCache:this.modelCache}})},t.prototype.changeRole=function(e,t){O("Organization View","Members Page","Change Role Button"),y.toggle({elem:t,view:l,options:{model:e,parent:this.model,modelCache:this.modelCache}})},t}(v)},{}],550:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;n=e("jquery"),i=e(441),s=e(438),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.viewTitleKey="board creation restriction",t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.frameDebounce(this.render))},t.prototype.events={"click a":"changeRestriction"},t.prototype.render=function(){var e;return e=this.model.toJSON({prefs:!0}),this.$el.html(s.fill("org_prefs_vis",e)),this},t.prototype.changeRestriction=function(e){var t,r,o;return t=n(e.target),r="boardVisibilityRestrict/"+t.closest("ul").attr("data-vis"),o=t.attr("data-restriction"),this.model.setPref(r,o)},t}(i)},{}],551:[function(e,t,r){var n,o,i,s,a,u,c,l=function(e,t){function r(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d={}.hasOwnProperty;n=e("jquery"),o=e(190),i=e(16),u=e(441),c=e(438),a=e(109),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="org membership restrictions",t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.frameDebounce(this.renderRestrictions))},t.prototype.events={"click .js-form-submit-input":"addRestriction","submit .js-form":"addRestriction","click .js-restricted-address":"removeRestriction"},t.prototype.render=function(){var e,t;return e=this.model.toJSON({prefs:!0}),e.hasRestrictions=(null!=(t=this.model.get("prefs").orgInviteRestrict)?t.length:void 0)>0,this.$el.html(c.fill("org_prefs_restrict_invites",e)),this.renderRestrictions(),this},t.prototype.renderRestrictions=function(){var e,t,r,n,o,i;if(e=this.$(".js-list").empty(),(null!=(n=this.model.get("prefs").orgInviteRestrict)?n.length:void 0)>0){for(o=this.model.get("prefs").orgInviteRestrict,t=0,r=o.length;r>t;t++)i=o[t],e.append(c.fill("org_pref_restriction",{restriction:i}));return this.$(".js-restriction-list").show()}return this.$(".js-restriction-list").hide()},t.prototype.addRestriction=function(e){var t;return a.stop(e),t=this.$(".js-input-restricted").val(),/^@/.test(t)?t="*"+t:-1===t.indexOf("@")&&t.indexOf(".")>0&&(t="*@"+t),this.$(".js-loading").removeClass("hide"),o({url:"/1/organizations/"+this.model.id+"/prefs/orgInviteRestrict",type:"put",data:{value:t},dataType:"json",success:function(e){return function(){return e.$(".js-input-restricted").val("").select().focus(),e.$(".js-loading").addClass("hide"),e.$(".js-errors").hide()}}(this),error:function(e){return function(t){return e.$(".js-loading").addClass("hide"),e.$(".js-errors").text(t.responseText).show()}}(this)})},t.prototype.removeRestriction=function(e){var t;return t=n(e.target).closest("a").attr("data-pattern"),n(e.target).closest("li").remove(),o({url:"/1/organizations/"+this.model.id+"/prefs/orgInviteRestrict",type:"delete",data:{value:t},dataType:"json",success:function(e){return function(){return e.$(".js-input-restricted").select().focus(),e.$(".js-errors").hide()}}(this)})},t}(u)},{}],552:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w=function(e,t){function r(){this.constructor=e}for(var n in t)_.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},_={}.hasOwnProperty;o=e(25),i=e(525),s=e(86),n=e(57),u=e(458),c=e(435),l=e(109),d=e(441),m=e(89),f=e(750),v=e(438),y=e(38),p=e(84),h=e(34),b=e("xtend"),g=e(748),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),m(c,t),t.prototype.initialize=function(){this.makeDebouncedMethods("render"),this.listenTo(this.model,"change:logoHash change:products change:paidAccount change:prefs change:name",this.render),this.listenTo(this.model,"change:name change:displayName change:website change:desc",this.renderDetails),this.listenTo(this.model,"change:memberships",this.membershipChange),this.listenTo(this.model.memberList,"add remove reset",this.renderDebounced),this.listenTo(this.model,"change:name",function(e){return function(){var t;return t=location.pathname.replace(/[^\/]+/,e.model.get("name")),history.replaceState(null,null,t)}}(this)),this.memberTypeMe=this.model.getMemberType(o.me())},t.prototype.events={"click .js-change-org-logo":"changeLogoInProfile","click .js-edit-profile":"editProfile","click .js-submit-profile":"submitProfile","submit .js-profile-form":"submitProfile","click .js-cancel-edit-profile":"cancelEditProfile","click .tabbed-pane-nav-item-button:not(.active)":"switchSection"},t.prototype.isFullWidth=function(){return!1},t.prototype.render=function(){var e,t,r;return e=this.model.toJSON({prefs:!0,url:!0,premium:!0}),this.model.editable()&&(r=null!=(t=e.paidAccount)?t.standing:void 0,e.hasAccount=n.hasAccount(r),e.accountActive=n.isActive(e.paidAccount),e.accountProblem=n.isProblem(r),e.accountInactive=n.isInactive(r)),e.isInOrg=this.model.isMember(o.me()),e.hasBusinessClass=this.model.isPremium(),e.isEnterprise=this.model.isEnterprise(),e.paysWithPurchaseOrder=this.model.paysWithPurchaseOrder(),e.isOrgAdmin=this.model.owned(),e.isBusinessClassAdmin=this.model.isPremium()&&this.model.owned(),e.pLevelAltText=p(["org perms",this.model.getPermLevel(),"text"]),e.pLevelDisplayText=p(["org perms",this.model.getPermLevel(),"name"]),e.websiteHref=l.sanitizeWebAddress(e.website),e.descriptionHtml=s.markdownAsHtml(e.desc,{textData:e.descData}),e.isFullWidth=this.isFullWidth(),e.editable=this.model.editable(),this.$el.html(g(e)),this.renderDetails(),this.renderMainContent(),this},t.prototype.renderDetails=function(){var e;return e=this.model.toJSON({prefs:!0,url:!0,premium:!0}),e.isEnterprise=this.model.isEnterprise(),e.isBusinessClass=this.model.isPremium(),e.isOrgAdmin=this.model.owned(),e.pLevelAltText=p(["org perms",this.model.getPermLevel(),"text"]),e.pLevelDisplayText=p(["org perms",this.model.getPermLevel(),"name"]),e.websiteHref=l.sanitizeWebAddress(e.website),e.descriptionHtml=s.markdownAsHtml(e.desc,{textData:e.descData}),e.canEdit=this.model.owned(),this.$(".js-current-details").html(f(e)),this.model.editable()&&this.$(".js-profile-form").empty().append(v.fill("org_detail_profile_edit",e,{editable:this.model.editable()})),this},t.prototype.delegateEvents=function(e){return t.__super__.delegateEvents.call(this,b(t.prototype.events,e||this.events))},t.prototype.membershipChange=function(){var e;return e=this.model.getMemberType(o.me()),e!==this.memberTypeMe?(this.memberTypeMe=e,this.render()):void 0},t.prototype.setActiveView=function(e){this.$(".tabbed-pane-nav-item-button").removeClass("active"),this.$(e).addClass("active")},t.prototype.changeLogoInProfile=function(e){l.stop(e),y("Organization View","Open Change Logo Menu from Profile Image"),u.toggle({elem:this.$(".js-change-org-logo"),view:new i({model:this.model,modelCache:this.modelCache})})},t.prototype.editProfile=function(e){l.stop(e),this.$(".js-current-details").addClass("hide"),this.$(".js-profile-form").removeClass("hide"),y("Organization View","Click Edit Profile")},t.prototype.cancelEditProfile=function(e){l.stop(e),this.$(".js-current-details").removeClass("hide"),this.$(".js-profile-form").addClass("hide"),this.$(".js-profile-form")[0].reset(),y("Organization View","Cancel Edit Profile")},t.prototype.errorText=function(e){var t;return t=function(){switch(e.trim().toLowerCase()){case"organization short name is taken":return"orgname taken";case"organization short name must be at least 3 characters":return"orgname too short";case"organization short name is invalid: only lowercase letters, underscores, and numbers are allowed":return"orgname invalid";case"display name must be at least 1 character":return"display name too short";default:return h(new Error("Unknown server error message '"+e+"'")),"unknown"}}(),p(["org profile error",t])},t.prototype.submitProfile=function(e){var t,r,n,o,i,s,a,u;if(l.stop(e),!this.disabled){for(t={},a=["displayName","name","website","desc"],n=0,i=a.length;i>n;n++)r=a[n],t[r]=this.$(".js-profile-form [name="+r+"]").val();for(t.name=t.name.toLowerCase().replace(/[^a-z0-9_]/g,""),u=["displayName","website"],o=0,s=u.length;s>o;o++)r=u[o],t[r]=t[r].trim();this.disableSubmit(),this.model.update(t,{waitForServer:!0},function(e){return function(t){e.disabled=!1,e.$(".js-submit-profile").removeAttr("disabled"),t?e.$(".js-profile-form-error").removeClass("hide").text(e.errorText(t.message)):(e.$(".js-profile-form-error").addClass("hide"),e.cancelEditProfile(),y("Organization View","Changed Name and Details"))}}(this))}},t.prototype.disableSubmit=function(){this.disabled=!0,this.$(".js-submit-profile").attr("disabled","disabled")},t}(d)},{}],553:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},f={}.hasOwnProperty;n=e("jquery"),o=e(190),i=e(25),s=e(5),a=e(458),c=e(109),l=e(441),p=e(438),h=e(38),d=e(84),t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey=function(){return this.org.isPremium()?"remove or deactivate member":"remove member"},t.prototype.initialize=function(){return this.org=this.options.org},t.prototype.events={"click .js-deactivate":"deactivateMember","click .js-soft-remove":"removeMember"},t.prototype.render=function(){var e,t;return t=this.org.getMemberType(this.model),e=this.model.toJSON(),e.orgMemberType=d(["member types",t]),e.ownsOrg=this.org.owned(),e.orgIsBC=this.org.isPremium(),e.isDeactivated="deactivated"===t,e.isOrgMember="public"!==t,e.isVirtual="virtual"===t,e.canDeactivate=this.org.isPremOrgAdmin(i.me())&&!e.isVirtual&&!e.isDeactivated,e.isMe=i.isMe(this.model),this.$el.html(p.fill("org_remove_or_deactivate_member",e)),this},t.prototype._checkIfLostVisibility=function(){return i.isMe(this.model)?s.navigate("/",{trigger:!0}):void 0},t.prototype.deactivateMember=function(e){c.stop(e),this.org.deactivateMember(this.model),this._checkIfLostVisibility(),a.hide()},t.prototype.removeMember=function(e){var t;c.stop(e),n(this.el).find("#hardRemove").is(":checked")||"deactivated"===this.org.getMemberType(this.model)?(t="Hard Remove",this.org.memberList.remove(this.model,{mass:!0})):(t="Soft Remove",this.org.memberList.remove(this.model)),h("Organization","Remove Member From Organization",t),a.hide(),this._checkIfLostVisibility()},t}(l)},{}],554:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;n=e(458),i=e(441),s=e(436)("org_filtering"),a=s.renderable(function(e){var t,r;return r=e.name,t=e.isDeleteable,s.form(".js-add-tag-form",function(){return s.label(function(){return s.format("name"),s.input(".js-add-tag-name.js-autofocus",{type:"text",value:r})}),s.input(".primary",{type:"submit",value:s.l("save")}),t?s.button(".negate.u-float-right.js-delete-tag",{type:"button"},function(){return s.format("delete")}):void 0})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.events={"submit .js-add-tag-form":function(e){var t;e.preventDefault(),t=this.$(".js-add-tag-name").val().trim(),this.onSubmit(t)},"click .js-delete-tag":function(){this.onDelete()}},t.prototype.getName=function(){return""},t.prototype.render=function(){return this.$el.html(a({name:this.getName(),isDeleteable:null!=this.onDelete})),this},t}(i)},{}],555:[function(e,t,r){var n,o;n=e("react"),o=e(433)("org_account"),t.exports=n.createClass({displayName:"SettingSectionComponent",render:o.renderable(function(){var e,t,r,n,i;return i=this.props,r=i.header,t=i.contents,n=i.onChange,e=i.canChange,o.div(".window-module.u-clearfix",function(){return o.div(".window-module-title",function(){return o.h3(".u-inline",function(){return o.addElement(r)})}),o.div(".setting-item",function(){return o.div(".setting-item-detail",function(){return o.addElement(t)}),o.div(".setting-item-action",function(){var t;return t={"button-link":!0,"u-text-align-center":!0,disabled:!e},o.b(n,{
disabled:!e,class:o.classify(t)},function(){return o.format("change")})})})})})})},{}],556:[function(e,t,r){var n,o,i;n=e("react"),i=e(433)("org_account"),o=e(84),t.exports=n.createClass({displayName:"VisibilityContentsComponent",render:i.renderable(function(){var e,t,r;return t=this.props,e=t.canChange,r=t.visibility,i.div(function(){return i.div(function(){var e;switch(e=o(["org perms",r,"text"]),r){case"public":return i.p(function(){return i.icon("public"),i.format("public-helpertext",{helperText:e})});case"private":return i.p(function(){return i.icon("private"),i.format("private-helpertext",{helperText:e})});default:throw new Error("Unrecognized visibility setting: "+r)}}),e?void 0:i.p(".helper.u-float-left",function(){return i.format("you-need-to-be-an-admin-to-change-this-setting")})})})})},{}],557:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},f={}.hasOwnProperty;o=e(429),i=e(574),s=e("bluebird"),a=e("underscore"),d=e(436)(),h=e("xtend"),p=d.renderable(function(e){var t,r,n;return t=e.icon,n=e.text,r=e.iconColor,null!=t&&d.span(".badge-icon.icon-sm.plugin-icon",{style:d.stylify({"background-image":d.urlify(t+"?color="+r)})}),n?d.span(".badge-text",function(){return d.text(n)}):void 0}),c={green:"plugin-color-green",red:"plugin-color-red",yellow:"plugin-color-yellow"},u=a.values(c).join(" "),l=function(e){return c[e]},t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.tagName="div",t.prototype.className="badge hide",t.prototype.initialize=function(e){return this.pluginBadge=e.pluginBadge,this.retain(this.pluginBadge)},t.prototype.renderBadge=function(e){return this.$el.html(p(e)),this.$el},t.prototype.renderOnce=function(){var e;return e=function(t){return function(){var r;return r=s.try(function(){return null!=t.pluginBadge.dynamic?t.pluginBadge.dynamic():t.pluginBadge}).cancellable().then(function(r){var n,o,i,s;o=l(r.color),i=null!=o?"fff":"999",n=t.renderBadge(h(r,{iconColor:i})),n.removeClass(u),null!=o&&n.addClass(o),t.$el.removeClass("hide"),null!=t.pluginBadge.dynamic&&null!=r.refresh&&(s=Math.max(10,r.refresh),s+=2*Math.random()-1,t.setTimeout(e,1e3*s))}).catch(o.Error.NotHandled,function(){return t.$el.addClass("hide")}).catch(s.CancellationError,function(){}),t.cancelOnRemove(r),r.done()}}(this),e(),this},t}(i)},{}],558:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n=e("hearsay"),u=e(430),o=e(557),s=e(429),a=e(574),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.tagName="span",t.prototype.badgeView=o,t.prototype.runnerOptions=function(){return{command:"card-badges",board:this.model.getBoard(),card:this.model}},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t;return t=this.runnerOptions(),e=n.combine(u(t.board,t.card),this.model.snoop()),this.subscribe(e,function(e){return function(){return s.all(t).then(function(t){return e.removeSubviews(),e.appendSubviews(t.map(function(t,r){return e.subview(e.badgeView,e.model,{pluginBadge:t},r)}))}).done()}}(this)),this},t}(a)},{}],559:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;i=e("bluebird"),o=e(574),s=e(436)(),a=s.renderable(function(e){var t,r,n,o;switch(t=(null!=e?e:{}).content,t.type){case"iframe":o=t.url,n=t.height,r=t.context,s.iframe(".plugin-iframe",{src:o,style:n?"height:"+n+"px;":"height:200px"}),s.a(".plugin-board-bar-close-button.icon-lg.icon-close.js-close-board-bar",{href:"#"})}}),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(e){return this.content=e.content,this.retain(this.content)},t.prototype.className="plugin-board-bar",t.prototype.renderOnce=function(){return this.$el.html(a({content:this.content})),this.initIFrames(this.model),this},t}(o)},{}],560:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;s=e(124),o=e(574),i=e(109),a=e(38),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.tagName=function(){return null!=this.options.pluginButton.url?"a":"span"},t.prototype.attributes=function(){var e,t,r;return e=this.options.pluginButton,r=e.url,t=e.target,r&&s(r)?{href:r,target:null!=t?t:r}:void 0},t.prototype.initialize=function(e){return this.pluginButton=e.pluginButton,this.retain(this.pluginButton)},t.prototype.events={click:function(e){return a("Card Detail","Sidebar Plugin Button",this.pluginButton.text),i.stopPropagation(e),null!=this.pluginButton.callback?this.pluginButton.callback({el:e.currentTarget}).done():void 0}},t.prototype.template=function(){throw Error("no template specified")},t.prototype.renderOnce=function(){return this.$el.html(this.template(this.pluginButton)),this},t}(o)},{}],561:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;s=e("underscore"),o=e(429),a=e(430),i=e(574),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.buttonsSelector=".js-button-list",t.prototype.buttonView=null,t.prototype.renderContainer=function(){return this.$el},t.prototype.runnerOptions=function(){throw Error("runnerOptions not specified")},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t;return t=this.runnerOptions(),e=this.renderContainer(),this.subscribe(a(t.board,t.card),function(r){return function(){return o.all(t).then(function(t){var n;return r.$el.toggleClass("hide",0===t.length),r.removeSubviews(),n=s.sortBy(t,"text").map(function(e,t){return r.subview(r.buttonView,r.model,{pluginButton:e},t)}),r.appendSubviews(n,e)}).done()}}(this)),this},t}(i)},{}],562:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;i=e(436)(),n=e(560),s=i.renderable(function(e){var t,r;t=e.icon,r=e.text,t&&(i.span(".icon-sm.plugin-icon",{style:i.stylify({"background-image":i.urlify(t+"?color=999")})}),i.raw(" ")),i.text(r)}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.template=s,t.prototype.className="button-link",t}(n)},{}],563:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;n=e(561),o=e(562),s=e(436)("card_detail"),a=s.renderable(function(){return s.h3(function(){return s.format("plugins")}),s.div(".u-clearfix.js-button-list")}),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.tagName="div",t.prototype.className="window-module u-clearfix hide",t.prototype.buttonsSelector=".js-button-list",t.prototype.buttonView=o,t.prototype.renderContainer=function(){return this.$el.html(a()),this.$(".js-button-list")},t.prototype.runnerOptions=function(){return{command:"card-buttons",board:this.model.getBoard(),card:this.model}},t}(n)},{}],564:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;s=e(124),n=e(557),a=e(227),i=e(109),u=a.renderable(function(e){var t,r,n,o,i;return r=null!=e?e:{},t=r.callback,i=r.url,o=r.title,n=r.text,a.h3(".card-detail-item-header",function(){return a.text(o)}),i&&s(i)?a.a(".card-detail-badge.plugin-card-detail-badge.is-clickable.js-badge",{href:i,target:i},function(){return a.text(n)}):t?a.a(".card-detail-badge.plugin-card-detail-badge.is-clickable.js-badge",{href:"#"},function(){return a.text(n)}):a.span(".card-detail-badge.plugin-card-detail-badge.js-badge",function(){return a.text(n)})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.tagName="div",t.prototype.className="card-detail-item hide",t.prototype.renderBadge=function(e){return this.$el.html(u(e)),this.$(".js-badge")},t.prototype.events={"click .js-badge":function(e){return i.stopPropagation(e),null!=this.pluginBadge.callback?this.pluginBadge.callback({el:e.currentTarget}).done():void 0}},t}(n)},{}],565:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=e(558),o=e(564),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.tagName="div",t.prototype.badgeView=o,t.prototype.runnerOptions=function(){return{command:"card-detail-badges",board:this.model.getBoard(),card:this.model}},t}(n)},{}],566:[function(e,t,r){var n,o,i,s,a,u,c,l;n=e(86),o=e(425),i=e("bluebird"),s=e("react"),u=e(433)(),l=e("xtend"),a=e("underscore"),c=u.renderable(function(e){var t;return t=(null!=e?e:{}).detailsHtml,u.div(".markeddown",function(){return u.raw(t)})}),t.exports=s.createClass({displayName:"PluginGearComponent",keepInDOM:!0,propTypes:{io:s.PropTypes.instanceOf(o),model:s.PropTypes.object},getInitialState:function(){return{details:""}},componentDidMount:function(){i.props({details:this.props.io.getDetails()}).then(function(e){return function(t){return e.setState(t)}}(this))},render:function(){return c({detailsHtml:n.markdownAsHtml(this.state.details)})}})},{}],567:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;n=e(560),i=e(436)(),s=i.renderable(function(e){var t,r;t=e.icon,r=e.text,t&&i.span(".board-header-btn-icon.icon-sm.plugin-icon",{style:i.stylify({"background-image":i.urlify(t+"?color=f6f6f6")})}),i.span(".board-header-btn-text.u-text-underline",function(){return i.text(r)})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.className="board-header-btn",t.prototype.template=s,t}(n)},{}],568:[function(e,t,r){var n,o,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=e(561),o=e(567),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.tagName="span",t.prototype.className="board-header-plugin-btns",t.prototype.buttonView=o,t.prototype.runnerOptions=function(){return{command:"board-buttons",board:this.model}},t}(n)},{}],569:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;i=e("bluebird"),o=e(574),s=e(436)(),a=s.renderable(function(e){var t,r,n,o;switch(t=(null!=e?e:{}).content,t.type){case"iframe":o=t.url,n=t.height,r=t.context,s.iframe(".plugin-iframe",{src:o})}}),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(e){return this.content=e.content,this.retain(this.content)},t.prototype.className="plugin-overlay",t.prototype.renderOnce=function(){return this.$el.html(a({content:this.content})),this.initIFrames(this.model),this},t}(o)},{}],570:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n=e("jquery"),i=e(574),s=e(458),a=e(436)(),u=a.renderable(function(e){var t,r;null==e&&(e={}),r=e.url,t=e.height,a.iframe(".plugin-iframe",{src:r,style:t?"height:"+t+"px;":void 0})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(e){return this.title=e.title,this.content=e.content,this.callback=e.callback,this.retain(this.callback)},t.prototype.getViewTitle=function(){return this.title},t.prototype.keepInDOM=!0,t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html(u(this.content)),this.initIFrames(this.model),this},t.prototype.handleIFrameMessage=function(e,t){switch(t){case"done":if(null!=this.callback)return this.callback({el:e});s.hide()}},t}(i)},{}],571:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w=function(e,t){function r(){this.constructor=e}for(var n in t)_.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},_={}.hasOwnProperty;n=e("jquery"),p=e("underscore"),m=e(124),h=e(104),o=e("hearsay"),i=e(80),s=e(16),u=e(574),c=e(458),l=e("bluebird"),y=e(436)("plugin_popover"),d=e(109),b=e("xtend"),f=y.renderable(function(e){var t,r;null==e&&(e={}),r=e.showSearch,t=e.search,t&&r&&y.input(".js-search.js-autofocus",{type:"text",placeholder:t.placeholder}),y.div(".js-results")}),g=y.renderable(function(e){var t,r,n,o;n=e.search,r=e.noSearchResults,t=e.items,o=e.selectedIndex,r&&y.p(".empty.plugin-pop-over-search-empty",function(){n.empty?y.text(n.empty):y.format("no results")}),y.ul(".pop-over-list.js-list.navigable",function(){var e,r,n,i,s,a,u,c;for(r=0,i=t.length;i>r;r++)s=t[r],u=s.text,n=s.index,e=s.callback,c=s.url,a=n===o,y.li({class:y.classify({selected:a})},function(){var t;t=null!=e?{"data-index":n}:null!=c&&m(c)?{href:c,target:c}:void 0,y.a(t,function(){y.text(u)})})})}),v=y.renderable(function(e){var t;return t=(null!=e?e:{}).search,y.p(".quiet.plugin-pop-over-search-searching",function(){(null!=t?t.searching:void 0)?y.text(t.searching):y.format("searching")})}),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.initialize=function(e){return this.title=e.title,this.content=e.content,this.retain(this.content),this.searchText=this.slot("")},t.prototype.getViewTitle=function(){return this.title},t.prototype.keepInDOM=!0,t.prototype.events=function(){return{"click a[data-index]":function(e){var t,r;return t=parseInt(n(e.currentTarget).attr("data-index"),10),r=p.isFunction(this.content.items)?this.content.searchResults[t]:this.content.items[t],r.callback({el:e.currentTarget}).done()},"click a[href]":function(e){return c.hide()},"input .js-search":function(e){return this.searchText.set(n(e.currentTarget).val())},"mouseenter li":function(e){return d.selectMenuItem(this.$(".js-list"),"li",n(e.currentTarget))},keydown:function(e){var t,r;r=i.getKey(e),t=this.$(".js-list"),r===s.ArrowUp||r===s.ArrowDown?(d.stop(e),d.navMenuList(t,"li",r)):(r===s.Enter||r===s.Tab)&&(d.stop(e),t.find("li.selected a").click())}}},t.prototype.renderOnce=function(){var e,t,r,n;return n=p.isFunction(this.content.items),this.$el.html(f({search:this.content.search,showSearch:this.content.search&&(n||this.content.items.length>this.content.search.count)})),e=this.$el.find(".js-results"),r=function(e){return function(t){return l.try(function(){var r,o,i,s,a;return n?e.content.items({options:{search:t}}):(o=e.content.items,o=o.map(function(e,t){return b(e,{index:t})}),e.content.search&&(t&&(a=d.buildFuzzyMatcher(t),o=o.filter(function(e){var t,r;return r=e.text,t=e.alwaysVisible,t||a(r)})),null!=(i=null!=(s=e.content.search)?s.count:void 0)&&(r=0,o=p.filter(o,function(e,t){return e.alwaysVisible?!0:i>r?(r++,!0):!1}))),o)}).then(function(t){return n?(e.content.searchResults=t.map(function(e,t){return b(e,{index:t})}),e.retain(e.content.searchResults),e.content.searchResults):t})}}(this),this.content.search?(t=h(this.searchText,300),this.subscribe(t,function(t){return function(n){return e.html(v({search:t.content.search})),r(n).then(function(r){var n,o,i,s;return n=!p.any(r,function(e){var t;return t=e.alwaysVisible,!t}),s=null!=(o=null!=(i=r[0])?i.index:void 0)?o:-1,e.html(g({search:t.content.search,noSearchResults:n,items:r,selectedIndex:s}))}).done()}}(this))):(e.html(v()),r().then(function(t){return e.html(g({items:t,selectedIndex:0}))})),this},t}(u)},{}],572:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f=function(e,t){function r(){this.constructor=e}for(var n in t)g.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},g={}.hasOwnProperty;n=e("jquery"),o=e(452),i=e(429),a=e(458),u=e("bluebird"),d=e(227),h=e(38),c=e(109),l=e(441),m=e("xtend"),p=d.renderable(function(e){d.ul(".pop-over-list",function(){var t,r,n,o,i,s;for(t=0,n=e.length;n>t;t++)i=e[t],o=i.name,s=i.url,r=i.id,d.li(function(){d.a(".js-remove",{"data-id-attachment":r},function(){d.text(o)})})})}),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.viewTitleKey="remove attachments",t.prototype.initialize=function(e){var t;return t=e.section,this.section=t},t.prototype.events={"click .js-remove":"confirmRemove"},t.prototype.renderOnce=function(){var e;return e=this.model.getBoard(),u.map(this.section.claimed,function(t){return t.name&&t.name!==t.url?t:i.one({command:"format-url",board:e,options:{url:t.url}}).get("text").catch(i.Error.NotHandled,function(){return t.url}).then(function(e){return m(t,{name:e})})}).then(function(e){return function(t){return e.$el.html(p(t))}}(this)),this},t.prototype.confirmRemove=function(e){var t,r;return c.stop(e),t=n(e.currentTarget).attr("data-id-attachment"),r=this.model.attachmentList.get(t),o.pushView("remove attachment",{model:r,confirmBtnClass:"negate",fxConfirm:function(e){return function(e){return r.destroy(),h("Attachment","Delete Attachment",r.getType())}}(this)})},t}(l)},{}],573:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function r(){this.constructor=e}for(var n in t)y.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},y={}.hasOwnProperty;n=e("jquery"),h=e("underscore"),o=e(452),i=e("hearsay"),l=e(458),s=e(429),a=e(572),c=e(574),d=e("bluebird"),m=e(436)("plugin_section"),g=e(38),p=e(109),f=m.renderable(function(e){var t;t=e.content,m.div(".window-module.u-clearfix",function(){var e,r;m.div(".window-module-title.window-module-title-no-divider",function(){m.span(".window-module-title-icon.icon-lg.plugin-section-icon.js-icon"),m.h3(".u-inline-block.plugin-section-title.js-title"),m.div(".window-module-title-options",function(){m.a(".quiet.js-remove",{href:"#"},function(){m.format("remove")})})}),"iframe"===t.type&&(r=t.url,e=t.height,m.div(".u-gutter",function(){m.iframe(".plugin-iframe.plugin-section",{src:r,style:m.stylify({height:e?e+"px;":void 0})})}))})}),t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.initialize=function(){return this.section=new i.Slot(null)},t.prototype.renderOnce=function(){var e;if(e=this.section.get(),null==e)throw Error("updateSection not called before render");return this.$el.html(f(e)),this.subscribe(this.section,function(e){return function(t){return d.resolve(h.result(t,"title")).then(function(t){return e.$(".js-title").text(t)}).catch(s.Error.Timeout,function(){}),d.resolve(h.result(t,"icon")).then(function(t){return e.$(".js-icon").css("background-image",m.urlify(t+"?color=999"))}).catch(s.Error.Timeout,function(){})}}(this)),this.initIFrames(this.model.getBoard(),this.model,this.section),this},t.prototype.updateSection=function(e){return this.retain(e),this.section.set(e)},t.prototype.events={"click .js-remove":"confirmRemove"},t.prototype.confirmRemove=function(e){var t,r;p.stop(e),r=this.section.get(),1===r.claimed.length?(t=this.model.attachmentList.get(r.claimed[0].id),o.toggle("remove attachment",{elem:this.$(e.currentTarget),model:t,confirmBtnClass:"negate",fxConfirm:function(e){return function(e){return t.destroy(),g("Attachment","Delete Attachment",t.getType())}}(this)})):l.toggle({elem:n(e.currentTarget),view:new a({model:this.model,section:r})})},t}(c)},{}],574:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty,d=[].slice;n=e("jquery"),a=e("underscore"),o=e("hearsay"),u=e(430),s=e(441),t.exports=i=function(e){function t(){this._retained=[],this._pendingPromises=[],this._eventListeners=[],t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype._retainCallback=function(e){return null!=e&&(e.retain().done(),this._retained.push(e)),e},t.prototype.retain=function(e){a.isFunction(e)?this._retainCallback(e):a.isArray(e)?e.forEach(function(e){return function(t){return e.retain(t)}}(this)):a.isObject(e)&&this.retain(a.values(e))},t.prototype.cancelOnRemove=function(e){return this._pendingPromises.push(e),e.then(function(t){return function(){return t._pendingPromises=a.without(t._pendingPromises,e)}}(this)),e},t.prototype.remove=function(){var e,r,n,o,i,s,a,u,c,l,d,p,h,m,f;for(t.__super__.remove.apply(this,arguments),c=this._pendingPromises,r=0,i=c.length;i>r;r++)u=c[r],u.cancel();for(delete this._pendingPromises,l=this._eventListeners,n=0,s=l.length;s>n;n++)d=l[n],m=d.target,f=d.type,e=d.callback,m.removeEventListener(f,e);for(delete this._eventListeners,p=this._retained,o=0,a=p.length;a>o;o++)h=p[o],h.release().done();delete this._retained},t.prototype.addEventListener=function(e,t,r){return e.addEventListener(t,r),this._eventListeners.push({target:e,type:t,callback:r})},t.prototype.handleIFrameMessage=null,t.prototype.initIFrames=function(){var e,t,r,i,s;t=arguments[0],r=arguments[1],i=3<=arguments.length?d.call(arguments,2):[],e=this.$el.find("iframe.plugin-iframe"),s=o.combine.apply(o,i.concat(u(t,r))),a.each(e,function(e){return function(t){var r,o;o=s.use(),r=n(t),r.addClass("iframe-loading").one("load",function(n){r.removeClass("iframe-loading"),e.subscribe(s,function(){return t.contentWindow.postMessage("render","*")}),o(),null!=e.handleIFrameMessage&&e.addEventListener(window,"message",function(r){r.source===t.contentWindow&&e.handleIFrameMessage(t,r.data)})})}}(this))},t}(s)},{}],575:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n=e("jquery"),o=e(25),s=e(109),a=e(441),u=e(438),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="calendar settings",t.prototype.initialize=function(){return this.generating=!1,this.listenTo(this.model,{"change:prefs":this.render,"change:myPrefs.calendarKey":this.generationComplete})},t.prototype.events={"click .js-calendar-pref-feed:not(.disabled)":"selectFeedEnabled","click .js-calendar-feed-url:not(:disabled)":"focusInput","click .js-regen-calendar-url:not(.disabled)":"generateNewFeedURL"},t.prototype.generationComplete=function(){return this.generating=!1,this.render()},t.prototype.generateNewFeedURL=function(e){return s.stop(e),this.generating=!0,this.model.generateCalendarKey(),this.render()},t.prototype.render=function(){var e,t,r,n;return n=this.model.toJSON({prefs:!0}).prefs,r=this.model.getPref("calendarKey"),t="https://"+location.host+"/calendar/"+(o.me().id+"/"+this.model.id+"/"+r+".ics"),r||(this.generating=!0,this.model.generateCalendarKey()),e={calendar_feed_enabled:n.calendarFeedEnabled,calendar_feed_generated:null!=r&&!this.generating,calendar_feed_url:t},this.$el.html(u.fillFromModel("power_ups_calendar_prefs",this.model,e)),this},t.prototype.focusInput=function(e){return this.$(".js-calendar-feed-url").focus().select()},t.prototype.selectFeedEnabled=function(e){var t,r;return s.stop(e),t=n(e.target).closest("a"),r="enabled"===t.attr("name"),this.model.setPref("calendarFeedEnabled",r)},t}(a)},{}],576:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;n=e("jquery"),i=e(109),s=e(441),a=e(438),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="card aging settings",t.prototype.initialize=function(){return this.listenTo(this.model,{"change:prefs":this.render})},t.prototype.events={"click .js-select:not(.disabled)":"selectMode"},t.prototype.render=function(){var e,t;return t=this.model.toJSON({prefs:!0,url:!0}).prefs,e={aging_regular:"regular"===t.cardAging,aging_pirate:"pirate"===t.cardAging},this.$el.html(a.fillFromModel("power_ups_card_aging_prefs",this.model,e)),this},t.prototype.selectMode=function(e){var t,r;return i.stop(e),t=n(e.target).closest(".js-select"),r=t.attr("name"),this.model.setPref("cardAging",r)},t}(s)},{}],577:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;n=e("jquery"),o=e(109),i=e(441),a=e(438),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="voting settings",t.prototype.initialize=function(){return this.listenTo(this.model,{"change:prefs":this.render})},t.prototype.events={"click .js-voting-select:not(.disabled)":"selectPerm"},t.prototype.render=function(){var e,t,r;return e=this.model.toJSON({prefs:!0,url:!0}),t=this.model.getOrganization(),e.hasOrg=null!=(null!=t?t.id:void 0),e.orgCanSee=e.hasOrg&&("public"===(r=this.model.getPref("permissionLevel"))||"org"===r),e.premium=null!=t?t.isFeatureEnabled("observers"):void 0,e.voting_showObservers=(e.premium||e.voting_observers)&&e.hasOrg,(null!=t?t.owned():void 0)?(e.orgOwner=!0,e.orgName=t.get("displayName"),this.model.owned()||(e.setOrgNull=!0)):this.model.owned()||(e.noEditOrg=!0),this.$el.html(a.fillFromModel("power_ups_voting_prefs",this.model,e)),this},t.prototype.selectPerm=function(e){var t,r;return o.stop(e),t=n(e.target).closest(".js-voting-select"),r=t.attr("name"),this.model.setPref("voting",r)},t}(i)},{}],578:[function(e,t,r){var n,o,i,s,a,u,c,l=function(e,t){function r(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d={}.hasOwnProperty;n=e(410),i=e(373),s=e(441),a=e("underscore"),u=e(438),c=e(38),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.className="search-result-card",t.prototype.events={"click .list-card":"openCard"},t.prototype.render=function(){var e,t,r,o,s;return e=this.model.getBoard(),s=this.model.getList(),o=this.model.toJSON(),o=a.extend(o,{listName:s.get("name"),boardName:e.get("name"),permLevel:n.getPermLevelIconClassForBoard(e),archivedList:s.get("closed")}),r={hideMenu:!0,applyBoardCardFilter:!1},this.$el.html(u.fill("search_results_card",o)),t=this.subview(i,this.model,r),this.appendSubview(t,this.$(".js-list-card-container")),this},t.prototype.openCard=function(e){this.model.showDetail(),c("Search","Select Card")},t}(s)},{}],579:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k=function(e,t){function r(){this.constructor=e}for(var n in t)C.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},C={}.hasOwnProperty;n=e("jquery"),o=e(25),i=e(293),s=e(578),a=e(5),u=e(455),l=e(580),d=e(30),p=e("bluebird"),h=e(582),m=e(584),f=e(239),g=e(109),v=e(441),y=e("underscore"),b=e(35),w=e(438),_=e(38),t.exports=c=function(e){function t(){this.results=null,this.serial=0,this.suggestSerial=0,this.idCardsLoaded=[],this.cardsLimit=a.isOnSearchPage()?12:8,this.cardsDesired=this.cardsLimit,this.noMoreCardMatches=!1,this.searchStates=["no-results","no-input","searching","search-results","err"],this.searchState="no-results",t.__super__.constructor.apply(this,arguments)}return k(t,e),t.prototype.viewTitleKey="search results",t.prototype.className="search-results-view",t.prototype.displayType="mod-search-over",t.prototype.hideHeader=!0,t.prototype.maxWidth="600",t.prototype.initialize=function(){var e,t,r;return r=function(e){return function(t){return e.dynamicDebounce(t,function(e){return e.length<=1?1600:e.length<=3?800:400})}}(this),t=r(this.update).bind(this),e=r(this.renderSearchedSuggestions).bind(this),this.listenTo(f,{"change:query":function(e,r){return t(r)},"change:suggestions":this.renderSuggestions,"change:suggestionSearchTerm":function(t,r){return e(r)}}),this.listenTo(o.me().savedSearchList,"add remove reset change",this.renderSavedSearches)},t.prototype.events={"click .js-see-all-saved-searches":"seeAllSavedSearchesEvent","click .js-saved-search-name":"doSavedSearch","sortstop .js-saved-searches-list":"sortStop","click .js-save-this-search":"saveThisSearch","input .js-saved-search-name-input":"changeSearchName","submit .js-save-this-search-form":"confirmSave","click .js-save-this-search-cancel":"cancelSave","click .js-show-search-tips":"showTips","click .js-card-results .js-list a":"trackCardClick","click .js-member-results .js-list .js-select-member":"trackMemClick","click .js-org-results .js-list .list-card":"trackOrgClick","click .js-select-suggestion":"selectSuggestion","mouseenter .js-select-suggestion":"mouseenterSuggestion","mouseleave .js-select-suggestion":"mouseleaveSuggestion","click .js-show-more-cards":"showMoreCards","click .js-show-more-boards":"showMoreBoards","click .js-show-more-members":"showMoreMembers","click .js-show-more-orgs":"showMoreOrgs","mouseenter .search-result-card-hover-target":"highlightCard","mouseleave .search-result-card-hover-target":"unHighlightCard","click .js-open-help-query":"trackOpenHelpQuery","click .js-open-help a":"trackOpenHelp"},t.prototype.update=function(e){var t,r,n,o,i,s;this.err=null,this.results=y.isEmpty(e)?{}:null,++this.serial,s=this.serial,this.renderResults(),y.isEmpty(e)||(i={query:e,partial:!0,modelTypes:"cards,boards,organizations,members",board_fields:"name,url,prefs",cards_limit:this.cardsLimit+1,card_members:!0,card_board:!0,card_list:!0,card_stickers:!0,card_attachments:"cover",boards_limit:8,members_limit:8,organizations_limit:6},r=this.$(".js-open-help-query"),t=this.$(".js-open-help"),o=e.replace(/"/g,""),n=/\S/.test(o),t.toggleClass("hide",n),r.toggleClass("hide",!n).attr("href","http://help.trello.com/search?query="+encodeURIComponent(o)+"&source=trello-search").find(".js-query").text(o),d.loadSearchData(i).nodeify(function(e){return function(t,r){var n,o;return e.err=t,s!==e.serial?(o=y.pluck(null!=r&&null!=(n=r.options)?n.terms:void 0,"text"),void b("search","discarding search for "+o+", serial "+s)):(e.results=r,e.renderResults())}}(this)))},t.prototype.getMoreCards=function(e,t){var r;r=t.partial,p.try(function(t){return function(){var n,o;return t.idCardsLoaded.length<=t.cardsDesired&&!t.noMoreCardMatches?(n=Math.floor(t.cardsDesired/(t.cardsLimit+1)),o={query:e,partial:null!=r?r:!1,modelTypes:"cards",board_fields:"name,url,prefs",cards_limit:t.cardsLimit+1,cards_page:n,card_members:!0,card_board:!0,card_list:!0,
card_stickers:!0,card_attachments:"cover"},d.loadSearchData(o).then(function(e){var r;return t.idCardsLoaded=y.uniq(t.idCardsLoaded.concat(y.pluck(null!=(r=null!=e?e.cards:void 0)?r:[],"id")))}).catch(function(e){return t.err=e})):void 0}}(this)).then(function(e){return function(){return e.noMoreCardMatches=e.idCardsLoaded.length<=e.cardsDesired,e.renderCardResults(),e.$(".js-loading-cards").addClass("hide")}}(this)).done()},t.prototype.render=function(){var e;return e={savedSearchesEnabled:o.me().isFeatureEnabled("savedSearches")},this.$el.html(w.fill("search_instant_results",e)),this.update(f.getQuery()),this.renderSuggestions(),this.renderSearchedSuggestions(f.getSuggestionSearchTerm()),this},t.prototype.selectSuggestion=function(e){var t,r,o,i,s,a,u;g.stop(e),t=n(e.target).closest(".js-select-suggestion"),s=t.attr("data-suggestionphrase"),a=m.getKeywordMap()[s],o=f.getQuery(),r=m.inputIndex,i=g.removeWordAtIndex(o,r),u=g.stripExtraSpaces(i+" "+s),(null!=a?a.moreInputNeeded:void 0)||(u+=" "),f.clearSuggestions(),f.setQuery(u),f.clearSuggestionSearchTerm(),f.clearSuggestionSearchModelTypes(),_("Search","Select Suggestion")},t.prototype.mouseleaveSuggestion=function(e){return this.$(".js-select-suggestion").removeClass("selected")},t.prototype.mouseenterSuggestion=function(e){return n(e.target).closest(".js-select-suggestion").addClass("selected")},t.prototype.renderSuggestions=function(){var e,t,r,n,o,i,s,a,u,c;if(c=f.getSuggestions(),r=c.length>0,e=this.$(".js-search-suggestions"),t=e.find(".js-search-suggestions-list").empty(),r){for(n="",o=0,s=c.length;s>o;o++)i=c[o],a=m.getSuggestionObjectContainingVariantOrKey(i),u=a.obj,u.phrase=a.key,n+=w.fill("search_suggetion",u);t.append(n),this.$(".js-select-suggestion").first().addClass("selected"),e.removeClass("hide")}else e.addClass("hide");return this},t.prototype.renderSearchedSuggestions=function(e){var t,r,n,o;t=this.$(".js-search-suggestions").addClass("hide"),r=t.find(".js-search-suggestions-list").empty(),++this.suggestSerial,o=this.suggestSerial,""!==e&&(n={query:e,modelTypes:f.getSuggestionSearchModelTypes(),partial:!0,board_fields:"name,url,prefs",boards_limit:6,members_limit:6},d.loadSearchData(n).nodeify(function(e){return function(n,i){var s,a,u,c,l,d,p,h,m,f,g,v,y,b,_;if(o===e.suggestSerial&&(a=(null!=i&&null!=(g=i.boards)?g.length:void 0)>0,u=(null!=i&&null!=(v=i.members)?v.length:void 0)>0,c=a||u,l="",c&&!n)){if(a)for(y=i.boards,d=0,h=y.length;h>d;d++)_=y[d],s=_,s.phrase='board:"'+_.name+'"',l+=w.fill("search_suggetion_board",s);else if(u)for(b=i.members,p=0,m=b.length;m>p;p++)_=b[p],s=_,s.phrase="@"+_.username,f={member:w.member},l+=w.fill("search_suggetion_member",s,"",f);return r.append(l),e.$(".js-select-suggestion").first().addClass("selected"),t.removeClass("hide")}}}(this)))},t.prototype.renderResults=function(){var e,t,r,o,i,s,a,u,c,l,d,p,h,m,g,v,b;for(this.idCardsLoaded=y.pluck(null!=(a=null!=(u=this.results)?u.cards:void 0)?a:[],"id"),this.noMoreCardMatches=this.idCardsLoaded.length<=this.cardsLimit,r=y.pluck(null!=(c=null!=(l=this.results)?l.boards:void 0)?c:[],"id"),o=y.pluck(null!=(d=null!=(p=this.results)?p.members:void 0)?d:[],"id"),i=y.pluck(null!=(h=null!=(m=this.results)?m.organizations:void 0)?h:[],"id"),this.searchState=null!=this.err?"err":""===f.getQuery()?"no-input":null==this.results?"searching":y.all([this.idCardsLoaded,r,o,i],y.isEmpty)?"no-results":(this.renderCardResults(),this.renderBoardResults(r),this.renderMemberResults(o),this.renderOrganizationResults(i),"search-results"),this.renderSavedSearches(),b={err:"js-err","no-input":"js-no-input",searching:"js-searching","no-results":"js-no-results","search-results":"js-search-results"},g=this.searchStates,t=0,s=g.length;s>t;t++)v=g[t],e=b[v],n(this.el.getElementsByClassName(e)).toggleClass("hide",v!==this.searchState);return this},t.prototype.renderSavedSearches=function(){var e,t,r,n,i,s;return i="no-input"===this.searchState,e=this.$(".js-save-this-search-menu"),n=!e.hasClass("hide"),this.$(".js-saved-search-links").toggleClass("hide",i||n),t=this.$(".js-saved-searches").toggleClass("hide",!i),i?(e.addClass("hide"),this.renderSavedSearchItems(t)):(s=f.getQuery(),r=y.find(o.me().savedSearchList.models,function(e){return e.toJSON().query===s}),null!=r&&this.$(".js-current-search-name").text(r.get("name")),this.$(".js-save-this-search").toggleClass("hide",null!=r),this.$(".js-current-search").toggleClass("hide",null==r)),this},t.prototype.renderSavedSearchItems=function(e){var t,r,i,s,a;return t=e.find(".js-saved-searches-list"),t.sortable({axis:"y",delay:"75",distance:"7",containment:".js-saved-searches-list",tolerance:"pointer",items:".saved-search",start:function(e,t){var r;return u.sorting=!0,r=n(t.helper).outerHeight(),n(t.placeholder).height(r)},stop:function(e){return function(){return e.defer(function(){return u.sorting=!1})}}(this)}),r=o.me(),s=r.savedSearchList.models,this.$(".js-no-saved-searches").toggleClass("hide",s.length>0),a=function(){var e,t,r;for(r=[],e=0,t=s.length;t>e;e++)i=s[e],r.push(this.subview(h,i,{parent:this}));return r}.call(this),t.empty(),this.appendSubviews(a,t),this},t.prototype.renderCardResults=function(){var e,t,r;return e=this.$(".js-card-results"),t=e.find(".js-list"),r=this.idCardsLoaded.slice(0,this.cardsDesired).map(function(e){return function(t){var r;return r=e.modelCache.get("Card",t),e.subview(s,r)}}(this)),this.ensureSubviews(r,t),e.toggleClass("hide",0===this.idCardsLoaded.length),this.$(".js-show-more-cards").toggleClass("hide",this.noMoreCardMatches),this},t.prototype.renderBoardResults=function(e){var t,r,n,o,s;return t=this.$(".js-board-results").addClass("hide"),e.length>0&&(r=t.find(".js-list").empty(),n=function(){var t,r,n;for(n=[],t=0,r=e.length;r>t;t++)o=e[t],n.push(this.subview(i,this.modelCache.get("Board",o)));return n}.call(this),this.appendSubviews(n,r),t.removeClass("hide")),s=!1,this.$(".js-show-more-boards").toggleClass("hide",!s),this},t.prototype.renderMemberResults=function(e){var t,r,n,o,i;return t=this.$(".js-member-results").addClass("hide"),e.length>0&&(r=t.find(".js-list").empty(),o=function(){var t,r,o;for(o=[],t=0,r=e.length;r>t;t++)n=e[t],o.push(this.subview(l,this.modelCache.get("Member",n)));return o}.call(this),this.appendSubviews(o,r),t.removeClass("hide")),i=!1,this.$(".js-show-more-members").toggleClass("hide",!i),this},t.prototype.renderOrganizationResults=function(e){var t,r,n,o;return t=this.$(".js-org-results").addClass("hide"),e.length>0&&(o=function(){var t,n,o;for(o=[],t=0,n=e.length;n>t;t++)r=e[t],o.push(w.fill("organization_search_list_item",this.modelCache.get("Organization",r).toJSON()));return o}.call(this),t.removeClass("hide").find(".js-list").empty().append(o)),n=!1,this.$(".js-show-more-orgs").toggleClass("hide",!n),this},t.prototype.seeAllSavedSearchesEvent=function(){return this.clearSearch(),_("Search","Saved Search","See All Saved Searched (Go Back)")},t.prototype.clearSearch=function(){return f.setQuery("")},t.prototype.doSavedSearch=function(e){var t;return t=this.$(e.target).closest(".saved-search").find(".js-saved-search-query").text(),f.setQuery(t),_("Search","Saved Search","Open Saved Search")},t.prototype.sortStop=function(e,t){g.stopPropagation(e),t.item.trigger("movesavedsearch",[t]),_("Search","Saved Search","Reorder Saved Searches")},t.prototype.saveThisSearch=function(){return this.$(".js-saved-search-links").addClass("hide"),this.$(".js-save-this-search-menu").removeClass("hide"),this.$(".js-saved-search-name-input").val("").focus(),this.$(".js-save-this-search-submit").addClass("disabled")},t.prototype.changeSearchName=function(){var e,t;return t=this.$(".js-save-this-search-submit"),e=this.$(".js-saved-search-name-input"),t.toggleClass("disabled",0===e.val().trim().length),_("Search","See All Saved Searches")},t.prototype.confirmSave=function(e){var t,r;return g.preventDefault(e),this.$(".js-save-this-search-submit").hasClass("disabled")?void 0:(t=this.$(".js-saved-search-name-input").val().trim(),r=f.getQuery(),o.me().savedSearchList.saveSearch(t,r),this.cancelSave(),_("Search","Saved Search","Save"))},t.prototype.cancelSave=function(){return this.$(".js-saved-search-links").removeClass("hide"),this.$(".js-save-this-search-menu").addClass("hide"),_("Search","Saved Search","Cancel Save")},t.prototype.closeAllDeleteMenus=function(){var e,t,r,n,o;for(r=this.subviewsOfType(h),n=[],e=0,t=r.length;t>e;e++)o=r[e],n.push(o.cancelDeletion());return n},t.prototype.trackCardClick=function(){return _("Search","Select Item","Card")},t.prototype.trackMemClick=function(){return _("Search","Select Item","Member")},t.prototype.trackOrgClick=function(){return _("Search","Select Item","Team")},t.prototype.trackOpenHelpQuery=function(){return _("Search","Open Help with Query")},t.prototype.trackOpenHelp=function(){return _("Search","Open Help or Guide")},t.prototype.showTips=function(e){g.stop(e),this.$(".js-search-tips-helper").addClass("hide"),this.$(".js-search-tips-list").removeClass("hide"),_("Search","Show Tips")},t.prototype.showMoreCards=function(e){this.$(".js-loading-cards").removeClass("hide"),this.$(".js-show-more-cards").addClass("hide"),this.cardsDesired+=this.cardsLimit,this.getMoreCards(f.getQuery(),{partial:!0}),_("Search","Show More Cards")},t.prototype.showMoreBoards=function(e){},t.prototype.showMoreMembers=function(e){},t.prototype.showMoreOrgs=function(e){},t.prototype.highlightCard=function(e){var t;t=n(e.target).closest(".search-result-card").addClass("search-result-card-highlight-card"),t.closest(".js-list").addClass("search-result-card-highlight-section")},t.prototype.unHighlightCard=function(e){var t;t=n(e.target).closest(".search-result-card").removeClass("search-result-card-highlight-card"),t.closest(".js-list").removeClass("search-result-card-highlight-section")},t}(v)},{}],580:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;n=e("jquery"),i=e(511),s=e(109),a=e(441),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.tagName="li",t.prototype.className="search-result-member",t.prototype.events={"mouseenter .js-select-member":"hoverMember","mouseleave .js-select-member":"blurMember"},t.prototype.render=function(){return this.$el.empty(),this.appendSubview(this.subview(i,this.model,{linkName:!0})),this},t.prototype.blurMember=function(e){var t;t=n(e.target).closest(".item").removeClass("selected")},t.prototype.hoverMember=function(e){var t;t=n(e.target).closest(".item"),s.selectMenuItem(n(e.target).closest(".js-list"),".item",t)},t}(a)},{}],581:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h={}.hasOwnProperty;o=e(458),i=e("bluebird"),s=e(511),a=e(109),u=e(441),c=e("underscore"),l=e(84),d=e(112),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.previousRender=null,t.prototype.renderSearchResults=function(e,t){var r,n,o,u,p,h,m;return this.$(".js-org-members").hide(),this.$el.find(".js-error").hide(),n=this.$el.find(".js-search-results"),r=n.find(".js-list").empty(),o=this.$el.find(".js-uninvited-search-results").hide().empty(),""===e?(this.clearSearchResults(),void this.loadingEl.hide()):(h=c.isEmpty(t),u=e.trim().length>=3,p=1===t.length&&a.checkEmail(e),this.$(".js-no-results").toggleClass("hide",!h),n.toggle(!h),u||"function"==typeof this.renderOrgMembers&&this.renderOrgMembers(),this.helperEl.hide(),h||null!=t[0].id?(null!=(m=this.previousRender)&&m.cancel(),this.previousRender=i.resolve(t).map(function(e){return function(t){var r,n,o;return n=t.joined,o=t.similarity>0,delete t.joined,delete t.similarity,r={id:t.id},n&&("ghost"===t.memberType?r.extraText=l("invited"):r.extraText=l("joined"),r.className="disabled"),r.isKnownMember=o||p,d(e.modelCache,"enqueueDelta","Member",t).return(r)}}(this)).cancellable().tap(function(e){return function(){return e.deleteSubviewsOfType(s)}}(this)).each(function(e){return function(t){e.appendMemberToSearchResults(t)}}(this)).tap(function(e){return function(){var t;return e.loadingEl.hide(),t=e.$(".js-search-results .js-list li.js-autoselect:first"),a.selectMenuItem(e.$(".js-search-results .js-list"),"li",t)}}(this)).catch(i.CancellationError,function(){})):(this.renderEmailInviteToSearchResults(t[0]),n.hide(),void this.loadingEl.hide()))},t.prototype.appendMemberToSearchResults=function(e){var t,r,n,o,i;return n=this.modelCache.get("Member",e.id),i="function"==typeof(t=this.model).getOrganization?t.getOrganization():void 0,r=(null!=i?i.isPremOrgAdmin(n):void 0)?c.compact([e.className,"no-option"]).join(" "):e.className,o=this.subview(s,n,c.extend({showUnconfirmed:!0,showInactive:!0},e)),this.appendSubview(o,this.$(".js-search-results .js-list")),o.$("li").addClass(r)},t}(u)},{}],582:[function(e,t,r){var n,o,i,s,a,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;n=e(25),i=e(109),s=e(441),a=e(438),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.className="saved-search",t.prototype.events={"click .js-delete-saved-search":"deleteSavedSearch","click .js-delete-saved-search-confirm":"confirmDeletion","click .js-delete-saved-search-cancel":"cancelDeletion",movesavedsearch:"moveSavedSearch"},t.prototype.render=function(){var e;return e=this.model.toJSON(),e.allowDelete=n.me().isFeatureEnabled("savedSearches")||"@me"!==e.query,this.$el.html(a.fill("saved_search",e)),this},t.prototype.deleteSavedSearch=function(e){return this.options.parent.closeAllDeleteMenus(),this.$(".js-saved-search-name").addClass("saved-search-item-faded"),this.$(".js-delete-saved-search").addClass("hide"),this.$(".js-delete-saved-search-menu").removeClass("hide"),this.defer(function(e){return function(){return e.$(".js-delete-saved-search-menu").addClass("saved-search-delete-menu-shown")}}(this))},t.prototype.confirmDeletion=function(e){return this.model.destroy()},t.prototype.cancelDeletion=function(e){return this.$(".js-saved-search-name").removeClass("saved-search-item-faded"),this.$(".js-delete-saved-search").removeClass("hide"),this.$(".js-delete-saved-search-menu").addClass("hide").removeClass("saved-search-delete-menu-shown")},t.prototype.moveSavedSearch=function(e,t){var r,o;return o=t.item.parent().children(),r=o.index(t.item),this.model.update("pos",i.calcPos(r,n.me().savedSearchList,this.model)),this.model.collection.sort({silent:!0})},t}(s)},{}],583:[function(e,t,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=function(e,t){function r(){this.constructor=e}for(var n in t)b.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},b={}.hasOwnProperty;n=e("jquery"),o=e(5),i=e(579),s=e(80),a=e(16),u=e(458),c=e(584),d=e(239),p=e(439),h=e(109),m=e(441),f=e("underscore"),g=e(438),v=e(38),t.exports=l=function(e){function t(){this.fSearchOpen=!1,this.saveQueryDebounced=f.debounce(this.saveQuery,100),this.openSearchResultsViewDebounced=f.debounce(this.openSearchResultsView,100),this.autosuggestDebounced=f.debounce(this.autosuggest,100),p.addHandler(this,{scope:"search_box"}),t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.initialize=function(){return this.makeDebouncedMethods("renderInputState"),this.listenTo(d,{"change:query":this.renderInputQuery})},t.prototype.events={"keydown .js-search-input":"searchKeydown","input .js-search-input":"search","click .js-search-input":"openSearchResultsView","focus .js-search-input":"openSearchResultsView","click .js-open-search-page":"openSearchPage","click .js-search-focus":"openSearchResultsView","mousedown .js-search-close":"clearSearch",shortcut:"shortcut"},t.prototype.render=function(){return this.$el.html(g.fill("header_search")),this.renderInputStateDebounced(),this.$(".js-search-input").val(d.getQuery()),this},t.prototype.renderInputQuery=function(){var e,t,r;e=this.$(".js-search-input"),r=e.val(),t=d.getQuery(),e.length>0&&r!==t&&(e.val(t),h.setCaretAtEnd(e))},t.prototype.renderInputState=function(){var e,t;t=this.fSearchOpen,e=this.hasInputValue(),this.$(".js-search-input").toggleClass("header-search-input-wide focus",t),this.$(".js-search-icon, .js-close-icon, .js-open-button").toggleClass("header-search-icon-dark",t),this.$(".js-search-icon").toggleClass("hide",t),this.$(".js-close-icon").toggleClass("hide",!t),this.$(".js-open-button").toggleClass("hide",!t)},t.prototype.hasInputValue=function(){var e;return(null!=(e=this.$(".js-search-input").val())?e.length:void 0)>0},t.prototype.shortcut=function(e){return e===a.ForwardSlash?(this.focusInput(),"Search"):void 0},t.prototype.focusInput=function(){var e;e=this.$(".js-search-input"),e.length&&h.setCaretAtEnd(e)},t.prototype.clearSearch=function(e){h.stop(e),u.hide(),this.closeSearch()},t.prototype.closeSearch=function(){this.$(".js-search-input").val("").blur(),d.setQuery(""),this.fSearchOpen=!1,this.renderInputStateDebounced()},t.prototype.searchKeydown=function(e){var t,r,o,i;o=s.getKey(e),this.renderInputStateDebounced(),r=e.target.selectionStart===(i=e.target.selectionEnd)&&i===e.target.value.length,o===a.Enter||o===a.Tab||o===a.ArrowRight&&r?(t=n(".js-select-suggestion.selected").length,t&&(h.stop(e),n(".js-select-suggestion.selected").click())):(o===a.ArrowUp||o===a.ArrowDown)&&(t=n(".js-select-suggestion.selected").length,t&&(h.stop(e),h.navMenuList(n(".js-search-suggestions-list"),".js-select-suggestion",o)))},t.prototype.search=function(e){return this.autosuggestDebounced(),this.saveQueryDebounced(),this.openSearchResultsViewDebounced()},t.prototype.autosuggest=function(e){var t,r,n,o,i,s,a,u,l,p,m,g;t=this.$(".js-search-input"),m=h.getWordFromCaret(t).str,o=c.findUniqueKeywords(m),a=d.getQuery(),c.inputIndex=h.getCaretPosition(t),i=f.filter(o,function(e){var t;return t=c.getSuggestionObjectContainingVariantOrKey(e).obj.containsRegex,!t.test(a)}),d.setSuggestions(i),r=!1,l=c.getKeywordsWithSearchSuggest();for(n in l)if(p=l[n],u=p.containsRegex,u.test(m))return r=!0,g=p.suggestionsSearchModelTypes,d.setSuggestionSearchModelTypes(g),s=m.replace(RegExp("^"+n),""),void d.setSuggestionSearchTerm(s);r||(d.clearSuggestionSearchTerm(),d.clearSuggestionSearchModelTypes())},t.prototype.saveQuery=function(){var e;e=this.$(".js-search-input").val(),d.setQuery(e),/\/search/.test(location.pathname)&&o.navigate(o.getSearchUrl(e),{replace:!0})},t.prototype.getResultsView=function(){return this.subview(i,null,null,"headerSearchResultsView")},t.prototype.openSearchResultsView=function(e){var t;h.stop(e),this.fSearchOpen||o.isOnSearchPage()||(this.fSearchOpen=!0,t=this.$(".js-search-input"),t.focus(),h.setCaretAtEnd(t),u.show({elem:t,view:new i({model:this.model,modelCache:this.modelCache}),elActive:t,hidden:f.bind(this.closeSearch,this)})),this.fSearchOpen=!0,this.renderInputStateDebounced()},t.prototype.openSearchPage=function(e){var t;return h.stop(e),t=d.getQuery(),u.hide(),c.navigateToSearch(t,{trigger:!0}),v("Header","Open Search Page")},t}(m)},{}],584:[function(e,t,r){var n,o,i,s,a,u=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};n=e("jquery"),o=e(5),i=e(109),s=e("underscore"),a=e(84),t.exports=window.Search={navigateToSearch:function(e,t){var r;return r=(null!=t?t:{trigger:!1}).trigger,o.navigate(o.getSearchUrl(e),{trigger:r})},inputIndex:null,getSuggestionObjectContainingVariantOrKey:function(e){var t,r,n;if(r=this.getKeywordMap()[e],null!=r)return{key:e,obj:r};n=this.getKeywordsWithVariants();for(t in n)if(r=n[t],u.call(r.variants,e)>=0)return{key:t,obj:r};return{}},findKeywords:function(e){var t;return""===e?[]:t=s.filter(this.getKeywordsAndVariants(),function(t){return RegExp("^"+i.escapeForRegex(e)).test(t)})},findUniqueKeywords:function(e){var t,r;return t=this.findKeywords(e),r=s.uniq(t,!1,function(e){return function(t){return e.getSuggestionObjectContainingVariantOrKey(t).key}}(this))},_keywordsWith:function(e){var t,r;return s.object(function(){var n,o;n=this.getKeywordMap(),o=[];for(t in n)r=n[t],r.hasOwnProperty(e)&&o.push([t,r]);return o}.call(this))},getKeywordsWithVariants:function(){return null!=this._keywordsWithVariants?this._keywordsWithVariants:this._keywordsWithVariants=this._keywordsWith("variants")},getKeywordsWithSearchSuggest:function(){return null!=this._keywordsWithSearchSuggest?this._keywordsWithSearchSuggest:this._keywordsWithSearchSuggest=this._keywordsWith("suggestionsSearchModelTypes")},getKeywords:function(){return null!=this._keywords?this._keywords:this._keywords=s.keys(this.getKeywordMap())},getVariants:function(){var e,t;return null!=this._variants?this._variants:this._variants=s.flatten(function(){var r,n;r=this.getKeywordsWithVariants(),n=[];for(e in r)t=r[e],n.push(t.variants);return n}.call(this))},getKeywordsAndVariants:function(){return null!=this._keywordsAndVariants?this._keywordsAndVariants:this._keywordsAndVariants=this.getKeywords().concat(this.getVariants())},getKeywordMap:function(){return null!=this._keywordMap?this._keywordMap:this._keywordMap={"is:archived":{variants:["archived","is:closed","closed"],description:a("search.only include archived cards"),containsRegex:/\bis:archived\b/},"is:open":{variants:["open"],description:a("search.only include open cards"),containsRegex:/\bis:open\b/},"is:starred":{variants:["is:starred"],description:a("search.only include cards on starred boards"),containsRegex:/\bis:starred\b/},"has:attachments":{variants:["attachments"],description:a("search.only include cards with attachments"),containsRegex:/\bhas:attachments\b/},"has:cover":{variants:["cover"],description:a("search.only include cards with a cover"),containsRegex:/\bhas:cover\b/},"has:description":{variants:["description"],description:a("search.only include cards that have a description"),containsRegex:/\bhas:description\b/},"has:stickers":{variants:["stickers"],description:a("search.only include cards that have stickers"),containsRegex:/\bhas:stickers\b/},"has:members":{variants:["members"],suggestString:"has:members",description:a("search.only include cards that have members assigned"),containsRegex:/\bhas:members\b/},"@":{moreInputNeeded:!0,description:a("search.cards assigned to a member"),containsRegex:/@\S*\b/,suggestionsSearchModelTypes:"members"},"@me":{variants:["me"],description:a("search.only include cards assigned to me"),containsRegex:/\b@me\b/},"member:":{moreInputNeeded:!0,description:a("search.cards assigned to a member"),containsRegex:/\bmember:\S*\b/,suggestionsSearchModelTypes:"members"},"label:":{moreInputNeeded:!0,description:a("search.cards with this label"),containsRegex:/\blabel:\S*\b/},"#":{moreInputNeeded:!0,description:a("search.cards with this label"),containsRegex:/\b\#\S*\b/},"board:":{moreInputNeeded:!0,description:a("search.only cards on a particular board"),containsRegex:/\bboard:\S*\b/,suggestionsSearchModelTypes:"boards"},"list:":{moreInputNeeded:!0,description:a("search.cards in the list with matching text"),containsRegex:/\blist:\S*\b/},"name:":{moreInputNeeded:!0,description:a("search.cards that match text in the name"),containsRegex:/\bname:\S*\b/},"comment:":{moreInputNeeded:!0,description:a("search.cards that match text in the comment"),containsRegex:/\bcomment:\S*\b/},"checklist:":{moreInputNeeded:!0,description:a("search.cards that match text in a checklist"),containsRegex:/\bchecklist:\S*\b/},"description:":{moreInputNeeded:!0,description:a("search.cards that match text in the description"),containsRegex:/\bdescription:\S*\b/},"due:day":{variants:["day","today"],description:a("search.cards due in the next 24 hours"),containsRegex:/\bdue:day\b/},"due:week":{description:a("search.cards due in the next 7 days"),containsRegex:/\bdue:week\b/},"due:month":{description:a("search.cards due in the next 28 days"),containsRegex:/\bdue:month\b/},"due:overdue":{variants:["overdue"],description:a("search.cards that are past due"),containsRegex:/\bdue:overdue\b/},"created:day":{description:a("search.cards created in the last 24 hours"),containsRegex:/\bcreated:day\b/},"created:week":{description:a("search.cards created in the last 7 days"),containsRegex:/\bcreated:week\b/},"created:month":{description:a("search.cards created in the last 28 days"),containsRegex:/\bcreated:month\b/},"edited:day":{description:a("search.cards edited in the last 24 hours"),containsRegex:/\bedited:day\b/},"edited:week":{description:a("search.cards edited in the last 7 days"),containsRegex:/\bedited:week\b/},"edited:month":{description:a("search.cards edited in the last 28 days"),containsRegex:/\bedited:month\b/}}}}},{}],585:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n=e("jquery"),o=e(25),i=e(452),a=e(587),u=e(109),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(){return this.toggleSelectable(),this.waitForId(this.model,function(e){return function(){return e.toggleSelectable()}}(this)),this.listenTo(this.model,"change:error",this.render)},t.prototype.events={"click .js-delete-sticker":"deleteSticker"},t.prototype.enabled=function(){var e;return o.me().isFeatureEnabled("customStickers")||(null!=(e=this.options.org)?e.isFeatureEnabled("customStickers"):void 0)},t.prototype.toggleSelectable=function(){var e;return e=null!=this.model.id,this.$el.toggleClass("js-draggable-sticker",e),this.$el.toggleClass("sticker-unselectable",!e)},t.prototype.deleteSticker=function(e){return u.stop(e),i.toggle("delete sticker",{elem:n(e.target).closest(".js-delete-sticker"),top:32,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.destroy()}}(this)})},t}(a)},{}],586:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n=e("jquery"),o=e(458),s=e(588),a=e(109),u=e("underscore"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"stopEditing",this.stopEditing),this.listenTo(this.model,"startEditing",this.editSticker),this.listenTo(this.model,"disableEditing",this.disableEditing),this.listenTo(this.model,"enableEditing",this.enableEditing)},t.prototype.events={mouseenter:"mouseenter",mouseleave:"mouseleave",mousedown:"editSticker","mousedown .js-remove-sticker":"removeSticker","mousedown .js-rotate-sticker":"startRotate","mousedown .js-move-sticker":"startMove"},t.prototype.showEditControls=function(){return!0},t.prototype.disableEditing=function(){return this.$el.addClass("editing-disabled")},t.prototype.enableEditing=function(){return this.$el.removeClass("editing-disabled")},t.prototype.endCurrentEdit=function(){return n(document).off(".stickerrotate .stickermove .stickerautomove"),this.$el.removeClass("moving rotating"),n(".quick-card-editor").removeClass("invalid dragging")},t.prototype.stopEditing=function(e){var t,r,o,i,s;if(a.stop(e),this.isEditing()){for(this.endCurrentEdit(),this.$el.removeClass("editing"),n(".quick-card-editor").removeClass("quick-card-editor-editing-stickers"),o=this.model.collection.models,i=[],t=0,r=o.length;r>t;t++)s=o[t],i.push(s.trigger("enableEditing"));return i}},t.prototype.isEditing=function(){return this.$el.is(".moving, .rotating, .editing")},t.prototype.isEditingDisabled=function(){return this.$el.is(".editing-disabled")},t.prototype.isMovingOrRotating=function(){return this.$el.is(".moving, .rotating")},t.prototype.saveStickerAttrs=function(e){var t,r,n,o,i,s,u,c,l;o=e.position,i=e.rotation,s=function(e){return Math.round(100*e)/100},l={zIndex:this.model.collection.nextZIndex(this.model)},o&&(t=this.$el.closest(".list-card"),r=t.find(".js-card-stickers"),c=r.width(),u=r.height(),l.left=s(parseFloat(this.$el.css("left"))/c*100),l.top=s(parseFloat(this.$el.css("top"))/u*100)),i&&(n=a.getElemTransformMatrix(this.$el.find(".sticker-image")),l.rotate=s(a.getMatrixDegrees(n)%360)),this.model.update(l)},t.prototype.mouseenter=function(e){this.isEditingDisabled()||this.isEditing()||this.isMovingOrRotating()||this.$el.addClass("hover")},t.prototype.mouseleave=function(e){this.$el.removeClass("hover")},t.prototype.editSticker=function(e){var t,r,i,s,c,l,d,p,h;if(null==e||1===e.which){for(a.stop(e),s=!1,null!=e&&"mousedown"===e.type&&(l=e.pageX,d=e.pageY,r=function(e){return function(){return n(document).off(".stickerautomove"),clearTimeout(t)}}(this),n(document).on("mousemove.stickerautomove",function(e){return function(t){return Math.pow(t.pageX-l,2)+Math.pow(t.pageY-d,2)>25?(s=!0,r(),e.startMove(t)):void 0}}(this)),n(document).on("mouseup.stickerautomove",r),t=this.setTimeout(r,1e3)),h=u.clone(this.model.collection.models),i=0,c=h.length;c>i;i++)p=h[i],p!==this.model&&(p.trigger("stopEditing"),p.trigger("disableEditing"));this.defer(function(e){return function(){return o.hide(),e.$el.addClass("editing"),n(".quick-card-editor").addClass("quick-card-editor-editing-stickers")}}(this))}},t.prototype.startRotate=function(e){var t,r,o,i,s,u;if(this.isEditing())return a.preventDefault(e),u={x:this.$el.offset().left+this.$el.width()/2,y:this.$el.offset().top+this.$el.height()/2},o={x:e.pageX,y:e.pageY},i=a.calcDistanceFromCenter(this.$el,o.x,o.y),s=0,r=a.getElemTransformMatrix(this.$el.find(".sticker-image")),null!=r&&(s=a.getMatrixDegrees(r)),t=!1,n(document).on("mousemove.stickerrotate",function(e){return function(r){var c,l,d,p,h,m,f,g,v;t||(e.$el.removeClass("hover").addClass("rotating"),n(".quick-card-editor").addClass("dragging"),t=!0),g={x:r.pageX,y:r.pageY},l=4*a.calcDistanceFromCenter(e.$el,g.x,g.y),d=l-4*i,h=g.x-u.x,m=g.y-u.y,f=a.getDegrees(o.y-u.y,o.x-u.x),p=a.getDegrees(m,h),c=p-f,v=s+c,e.$el.find(".sticker-image").css({transform:"rotate("+v+"deg)","-webkit-transform":"rotate("+v+"deg)"})}}(this)),n(document).on("mouseup.stickerrotate",function(e){return function(){return t?(e.saveStickerAttrs({rotation:!0}),e.endCurrentEdit()):n(document).off(".stickerrotate")}}(this)),!1},t.prototype.startMove=function(e){var t,r,o,i,s,u,c,l,d,p,h,m,f;if(this.isEditing())return a.stop(e),t=this.$el.closest(".list-card"),r=t.find(".js-card-stickers"),h=r.offset(),l=h.left,d=h.top,f=this.$el.width(),m=this.$el.height(),p=r.width(),c=r.height(),o={left:-40,right:p-10,top:-40,bottom:c-10},null!=e?(s=this.$el.offset().left+this.$el.width()/2-e.pageX,u=this.$el.offset().top+this.$el.height()/2-e.pageY):(s=0,u=0),i=!1,n(document).on("mousemove.stickermove",function(e){return function(t){var r,a,c;return i||(e.$el.removeClass("hover").addClass("moving"),n(".quick-card-editor").addClass("dragging"),i=!0),r=t.pageX-l-f/2+s,a=t.pageY-d-m/2+u,c=!0,r>o.right&&(r=o.right,c=!1),r<o.left&&(r=o.left,c=!1),a>o.bottom&&(a=o.bottom,c=!1),a<o.top&&(a=o.top,c=!1),n(".quick-card-editor").toggleClass("invalid",!c),e.$el.css({left:r,top:a})}}(this)),n(document).on("mouseup.stickermove",function(e){return function(){return i?(e.saveStickerAttrs({position:!0}),e.endCurrentEdit()):n(document).off(".stickermove")}}(this)),!1},t.prototype.removeSticker=function(e){var t;this.isEditing()&&(t=u.once(function(e){return function(){e.stopEditing(),e.model.destroy(),e.$el.remove()}}(this)),this.$el.one("transitionEnd webkitTransitionEnd",t),this.setTimeout(t,100),this.$el.addClass("fade-out"))},t}(s)},{}],587:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){
this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n=e(25),i=e(109),s=e(441),u=e(438),a=e(21),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.className="sticker-select js-draggable-sticker",t.prototype.enabled=function(){var e;return!this.model.get("premium")||n.me().isFeatureEnabled("additionalStickers")||(null!=(e=this.options.org)?e.isFeatureEnabled("additionalStickers"):void 0)},t.prototype.render=function(){var e,t,r;return e=this.model.toJSON(),e.url=null!=(t=null!=(r=i.smallestPreviewBiggerThan(e.scaled,a))?r.url:void 0)?t:e.url,e.pending=null==e.image&&null==e.id&&null==e.error,this.$el.toggleClass("disabled",!this.enabled()).html(u.fill("sticker_select_item",e)).data("sticker",this.model),this},t}(s)},{}],588:[function(e,t,r){var n,o,i,s,a,u,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e(109),i=e(441),u=e(438),a=e(21),s=e(117),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.className="sticker",t.prototype.showEditControls=function(){return!1},t.prototype.render=function(){var e,t,r;return e=this.model.toJSON(),e.url=null!=(t=null!=(r=o.smallestPreviewBiggerThan(e.imageScaled,a))?r.url:void 0)?t:e.imageUrl,e.showEditControls=this.showEditControls(),this.$el.html(u.fill("sticker_on_card",e)).css({left:s(e.left)+"%",top:s(e.top)+"%"}),this},t}(i)},{}],589:[function(e,t,r){var n,o,i;i=e(436)("action"),n=e(673),o=e(714),t.exports=i.renderable(function(e,t,r){var s,a,u,c,l,d,p,h,m,f,g,v,y,b,w;return h=e.entities,g=e.saved,p=e.dateLastEdited,d=e.date,y=e.url,m=t.member,s=t.board,f=t.organization,l=t.canReply,u=t.canDelete,c=t.canEdit,a=t.canAttachLink,b=r.useEmbedly,w=r.usePreviews,v=r.showOptions,i.div(".phenom-creator",function(){return m?i.div(".member.js-show-mem-menu",{idmember:m.id},function(){return o(m)}):i.span(".icon-lg.icon-member")}),i.div(".phenom-desc",function(){var e,o,s;for(o=0,s=h.length;s>o;o++)e=h[o],n(e,t,r);return b&&i.div(".hide.embedly.js-embedly"),w?i.div(".hide.previews.js-previews"):void 0}),i.p(".phenom-meta.quiet",function(){var e,r,n,o;return g&&(y?i.a(".date.js-hide-on-sending.js-highlight-link",{dt:d,href:y}):i.span(".date.js-hide-on-sending",{dt:d,href:y})),p&&i.span(".js-date-title.js-hide-on-sending",{dt:p},function(){return i.text(" "),i.format("edited")}),i.span({class:i.classify({"js-spinner":!0,hide:g})},function(){return i.format("sending-ellipsis")}),s&&(e=t.boardPLevelAltText,r=t.boardPLevelIconClass,i.text(" - "),i.format("on-board-name",{url:s.url,name:s.name,boardPLevelAltText:e,boardPLevelIconClass:r})),f&&(n=t.orgPLevelAltText,o=t.orgPLevelIconClass,i.text(" - "),i.format("on-organization-name",{url:f.url,name:f.name,orgPLevelAltText:n,orgPLevelIconClass:o})),v?i.span(".js-hide-on-sending",function(){return l&&(i.text(" - "),i.a(".js-reply-to-action",{href:"#"},function(){return i.format("reply")})),c&&(i.text(" - "),i.a(".js-edit-action",{href:"#"},function(){return i.format("edit")})),a&&(i.text(" - "),i.a(".js-attach-link",{href:"#"},function(){return i.format("attach link")})),u?(i.text(" - "),i.a(".js-confirm-delete-action",{href:"#"},function(){return i.format("delete")})):void 0}):void 0})})},{}],590:[function(e,t,r){var n;n=e(436)("actions_empty"),t.exports=function(){return n.p(".empty-list",function(){return n.mustacheBlock("daysBack",function(){return n.format("no-actions-in-the-last-daysback-days",{daysBack:n.mustacheVar("daysBack")})}),n.mustacheBlockInverted("daysBack",function(){return n.format("no-actions")})})}},{}],591:[function(e,t,r){var n;n=e(436)("ad_business_class"),t.exports=function(){return n.format("check-out-business-class")}},{}],592:[function(e,t,r){var n;n=e(436)("ad_business_class_google_apps"),t.exports=function(){return n.span(".title",function(){return n.format("using-google-apps")}),n.span(".learn-more",function(){return n.a({href:"#"},function(){return n.format("learn-about-business-class-ellipsis")})})}},{}],593:[function(e,t,r){var n,o;o=e(436)("announcement"),n=function(e){var t;return t=["announcement"],e&&t.push(["announcement",e].join("-")),t.join(" ")},t.exports=o.renderable(function(e){var t,r,i,s;return t=e.url,i=e.title,r=e.html,s=e.type,o.div({class:n(s)},function(){o.h3(".announcement-header",function(){null!=t?o.a(".announcement-header-link",{target:"_blank",href:t},function(){return o.text(i)}):o.text(i)}),o.p(function(){return o.raw(r)}),null!=t&&o.p(".quiet",function(){return o.a({href:t,target:"_blank"},function(){return o.format("read-more-ellipsis")})})})})},{}],594:[function(e,t,r){var n;n=e(436)("archive_item"),t.exports=function(){return n.p(".item-name",function(){return n.mustacheBlock("url",function(){return n.a({href:n.mustacheVar("url")},function(){return n.text(n.mustacheVar("name"))})}),n.mustacheBlockInverted("url",function(){return n.span(function(){return n.text(n.mustacheVar("name"))})})}),n.mustacheBlock("__ed",function(){return n.div(".options",function(){return n.a(".button-link.js-reopen",{href:"#"},function(){return n.icon("refresh"),n.text(" "),n.text(n.mustacheVar("reOpenText"))}),n.mustacheBlock("canDelete",function(){return n.a(".button-link.negate.js-delete",{href:"#"},function(){return n.icon("remove","delete")})})})})}},{}],595:[function(e,t,r){var n;n=e(436)("archived_card_options"),t.exports=function(){return n.mustacheBlock("__ed",function(){return n.p(".quiet",{style:"margin-left: 8px;"},function(){return n.a(".js-reopen",{href:"#"},function(){return n.text(n.mustacheVar("reOpenText"))}),n.mustacheBlock("canDelete",function(){return n.text(" - "),n.a(".js-delete",{href:"#"},function(){return n.format("delete")})})})})}},{}],596:[function(e,t,r){var n;n=e(436)("archived_cards"),t.exports=function(){return n.div(".js-archive-items"),n.p(".empty-list.js-empty-message"),n.a(".show-more.js-more-cards",{href:"#"},function(){return n.format("load-more-cards")})}},{}],597:[function(e,t,r){var n;n=e(436)("archived_lists"),t.exports=function(){return n.ul(".archive-list.js-archive-items"),n.p(".js-empty-message.empty-list")}},{}],598:[function(e,t,r){var n;n=e(436)("atMention"),t.exports=function(){return n.span({class:"atMention"+n.mustacheBlock("isMe",function(){return" me"}),title:n.mustacheVar("fullName")},function(){return n.text(n.mustacheVar("atMention"))})}},{}],599:[function(e,t,r){var n;n=e(436)("attachment_thumb"),t.exports=n.renderable(function(e){var t,r,o,i,s,a,u,c,l,d,p,h,m,f,g,v;c=e.url,p=e.name,l=e.imgSrc,s=e.edgeColor,f=e.previewClass,u=e.ext,o=e.date,h=e.openIconClass,m=e.openText,g=e.removeText,t=e.canUseViewer,d=e.isCover,i=e.doDownload,a=e.editable,r={"attachment-thumbnail-preview":!0,"js-open-viewer":t,"attachment-thumbnail-preview-is-cover":d},v={},l&&(v["background-image"]=n.urlify(l)),s&&(v["background-color"]=s),n.a({href:c,class:n.classify(r),target:"_blank",title:p,style:n.stylify(v)},function(){f?n.span({class:["attachment-thumbnail-preview-service-logo",f].join(" ")}):l||(u?n.span(".attachment-thumbnail-preview-ext",function(){return n.text(u)}):n.span(".icon-lg.icon-attachment.attachment-thumbnail-preview-attachment-icon"))}),n.p({class:n.classify({"attachment-thumbnail-details":!0,"js-open-viewer":t})},function(){n.a(".attachment-thumbnail-details-title.js-attachment-thumbnail-details",{href:c,title:p,target:"_blank"},function(){n.text(p),o&&n.span(".u-block.quiet",function(){return n.format("added",{date:o})})}),n.span(".quiet.attachment-thumbnail-details-options",function(){var e;e={class:n.classify({"attachment-thumbnail-details-options-item":!0,"dark-hover":!0,"js-download":i}),href:c,target:"_blank"},i&&(e.download="download"),n.a(e,function(){return n.icon(h),n.text(" "),n.span(".attachment-thumbnail-details-options-item-text.js-direct-link",function(){return n.text(m)})}),a&&(n.a(".attachment-thumbnail-details-options-item.dark-hover.hide.js-make-cover",{href:"#"},function(){return n.icon("card-cover"),n.text(" "),n.span(".attachment-thumbnail-details-options-item-text",function(){return n.format("make-cover")})}),n.a(".attachment-thumbnail-details-options-item.dark-hover.hide.js-remove-cover",{href:"#"},function(){return n.icon("card-cover"),n.text(" "),n.span(".attachment-thumbnail-details-options-item-text",function(){return n.format("remove-cover")})}),n.a(".attachment-thumbnail-details-options-item.attachment-thumbnail-details-options-item-delete.dark-hover.js-confirm-delete",{href:"#"},function(){return n.icon("close"),n.text(" "),n.span(".attachment-thumbnail-details-options-item-text",function(){return n.text(g)})}))})})})},{}],600:[function(e,t,r){var n;n=e(436)("attachment_thumb_processing"),t.exports=n.renderable(function(){return n.div(".attachment-thumbnail.attachment-thumbnail-processing.js-attachment-thumb-processing",function(){return n.format("processing-ellipsis")})})},{}],601:[function(e,t,r){var n;n=e(436)("attachment_viewer"),t.exports=function(){return n.div(".attachment-viewer-header.js-close-viewer",function(){return n.span(".icon-lg.icon-close.attachment-viewer-header-close-icon")}),n.div(".attachment-viewer-underlay.js-close-viewer"),n.div(".attachment-viewer-frames.js-frames"),n.div(".attachment-viewer-overlay",function(){return n.div(".attachment-viewer-frame-details.js-display-frame-details")}),n.a(".attachment-viewer-next-frame-btn.js-show-next-frame",function(){return n.span(".icon-lg.icon-forward.light.attachment-viewer-next-frame-btn-icon")}),n.a(".attachment-viewer-prev-frame-btn.js-show-prev-frame",function(){return n.span(".icon-lg.icon-back.light.attachment-viewer-prev-frame-btn-icon")})}},{}],602:[function(e,t,r){var n;n=e(436)("attachment_viewer_frame"),t.exports=function(){return n.div({class:"attachment-viewer-frame js-close-viewer "+n.mustacheVar("directionClass"),"data-idAttachment":n.mustacheVar("id")},function(){return n.div(".attachment-viewer-frame-preview-wrapper",function(){return n.div({class:"attachment-viewer-frame-preview"+n.mustacheBlock("isImage",function(){return" attachment-viewer-frame-preview-image-wrapper"})},function(){return n.mustacheBlock("isImage",function(){return n.img(".attachment-viewer-frame-preview-image.js-stop",{src:n.mustacheVar("url"),alt:n.mustacheVar("name")})}),n.mustacheBlock("isAudio",function(){return n.audio(".attachment-viewer-frame-preview-audio.js-stop",{controls:!0,name:n.mustacheVar("name")},function(){return n.source({src:n.mustacheVar("url"),type:"audio/"+n.mustacheVar("ext")})})}),n.mustacheBlock("isVideo",function(){return n.video(".attachment-viewer-frame-preview-video.js-stop",{controls:!0,name:n.mustacheVar("name"),src:n.mustacheVar("url")})}),n.mustacheBlock("isIFrameable",function(){return n.iframe(".attachment-viewer-frame-preview-iframe.js-stop",{src:n.mustacheVar("url")})}),n.mustacheBlock("isPlaceholder",function(){return n.p(".attachment-viewer-frame-preview-placeholder",function(){return n.format("there-is-no-preview-available-for-this-attachment-opentext",{url:n.mustacheVar("url"),openText:n.mustacheVar("openText")})})})})})})}},{}],603:[function(e,t,r){var n;n=e(436)("attachment_viewer_frame_details"),t.exports=function(){return n.div(".attachment-viewer-frame-details",function(){return n.h2(".attachment-viewer-frame-details-title",function(){return n.text(n.mustacheVar("name"))}),n.p(function(){return n.mustacheBlock("date",function(){return n.format("added",{date:n.mustacheVar("date")})}),n.mustacheBlock("meta",function(){return n.text(" - "),n.text(n.mustacheVar("meta"))})}),n.p(function(){return n.span(".js-meta",function(){var e;return e={href:n.mustacheVar("url"),target:"_blank"},n.mustacheBlock("doDownload",function(){return e.download=n.mustacheVar("name")}),n.a(e,function(){return n.span({class:"icon-sm icon-"+n.mustacheVar("openIconClass")+" light attachment-viewer-option-icon"}),n.text(n.mustacheVar("openText"))}),n.mustacheBlock("__ed",function(){return n.span({class:"js-cover-options"+n.mustacheBlockInverted("canMakeCover",function(){return" hide"})},function(){return n.span({class:"js-make-cover-box"+n.mustacheBlock("isCover",function(){return" hide"})},function(){return n.a(".js-make-cover",{href:"#"},function(){return n.icon("card-cover","make-cover",{class:"light attachment-viewer-option-icon"})})}),n.span({class:"js-remove-cover-box"+n.mustacheBlockInverted("isCover",function(){return" hide"})},function(){return n.a(".js-remove-cover",{href:"#"},function(){return n.icon("card-cover","remove-cover",{class:"light attachment-viewer-option-icon"})})})}),n.a(".js-open-delete-confirm",{href:"#"},function(){return n.icon("close",{class:"light attachment-viewer-option-icon"}),n.text(n.mustacheVar("removeButtonText"))})})}),n.span(".js-confirm-delete.hide",function(){return n.text(n.mustacheVar("removeMessageText")),n.a(".attachment-viewer-delete-link.js-delete",{href:"#"},function(){return n.text(n.mustacheVar("removeConfirmText"))}),n.a(".attachment-viewer-delete-link.js-close-delete-confirm",{href:"#"},function(){return n.text(n.mustacheVar("removeCancelText"))})})})})}},{}],604:[function(e,t,r){var n;n=e(436)("avatar_change"),t.exports=function(){return n.mustacheBlock("uploadedAvatarHash",function(){return n.a({class:"avatar-option js-use-uploaded-avatar "+n.mustacheBlock("avatarSource_upload",function(){return"active"}),href:"#"},function(){return n.img(".pic",{src:n.mustacheVar("__avatarDomain")+"/"+n.mustacheVar("uploadedAvatarHash")+"/50.png"}),n.span(".text",function(){return n.format("uploaded-picture"),n.icon("check")})}),n.hr()}),n.div(".js-grav.hide",function(){return n.a({class:"avatar-option js-use-gravatar "+n.mustacheBlock("avatarSource_gravatar",function(){return"active"}),href:"#"},function(){return n.img(".pic",{src:"https://secure.gravatar.com/avatar/"+n.mustacheVar("gravatarHash")+".png?s=50&r=PG&d=404"}),n.span(".text",function(){return n.format("gravatar"),n.icon("check")})}),n.hr()}),n.a({class:"avatar-option js-no-avatar "+n.mustacheBlock("avatarSource_none",function(){return"active"}),href:"#"},function(){return n.span(".pic.member",function(){return n.span(".member-initials",function(){return n.text(n.mustacheVar("initials"))})}),n.span(".text",function(){return n.format("initials-no-avatar"),n.icon("check")})}),n.hr(),n.mustacheBlock("canTakePhoto",function(){return n.a(".button-link.js-take-photo",{href:"#"},function(){return n.icon("camera","take-photo-with-camera")}),n.hr()}),n.p(".error.hide.js-error"),n.div(".uploader",function(){return n.form(".realfile",{action:"/1/member/"+n.mustacheVar("id")+"/avatar",method:"post",enctype:"multipart/form-data"},function(){return n.input({type:"hidden",name:"token",value:""}),n.input({type:"hidden",name:"format",value:"http"}),n.input(".js-upload-avatar",{type:"file",name:"file",style:"margin-bottom: 0;",tabindex:"-1",accept:"image/*;capture=camera"})}),n.a(".button-link.fakefile",function(){return n.mustacheBlock("uploadedAvatarHash",function(){return n.icon("attachment","upload-a-new-picture")}),n.mustacheBlockInverted("uploadedAvatarHash",function(){return n.icon("attachment","upload-a-picture")})})})}},{}],605:[function(e,t,r){var n;n=e(436)("badge"),t.exports=function(){return n.span({class:"badge-icon icon-sm icon-"+n.mustacheVar("icon")}),n.mustacheBlock("text",function(){return n.span(".badge-text",function(){return n.text(n.mustacheVar("text"))})})}},{}],606:[function(e,t,r){var n,o;o=e(436)("billing_contact"),n=e(23),t.exports=o.renderable(function(e){var t,r,i;return r=e.fullName,t=e.email,i=e.locale,o.div(".error",{style:"display:hidden"}),o.form(function(){return o.label({for:"billingContactFullName"},function(){return o.format("name")}),o.input(".text",{name:"billingContactFullName",type:"text",id:"billingContactFullName",value:r,maxlength:"50"}),o.label({for:"billingContactEmail"},function(){return o.format("email")}),o.input(".text",{name:"billingContactEmail",type:"text",id:"billingContactEmail",value:t}),o.label({for:"billingContactLocale"},function(){return o.format("language")}),o.select({name:"billingContactLocale",id:"billingContactLocale"},function(){var e,t,r,s,a,u,c;for(a=[],e=0,t=n.length;t>e;e++)s=n[e],c=s.code,r=s.name,u=c.toLowerCase()===i.toLowerCase(),a.push(o.option({value:c,selected:u},function(){return o.text(r)}));return a}),o.input(".primary.js-submit",{type:"submit",value:o.l("save")})})})},{}],607:[function(e,t,r){var n;n=e(436)("board"),t.exports=function(){return n.div(".board-main-content",function(){return n.div(".board-header.u-clearfix.js-board-header"),n.div(".board-canvas")}),n.div(".board-menu.js-fill-board-menu")}},{}],608:[function(e,t,r){var n;n=e(436)("board_archive"),t.exports=function(){return n.div(".archive-controls",function(){return n.div(".archive-controls-search",function(){return n.input(".js-search.js-autofocus",{type:"text",placeholder:n.l("search archive")})}),n.a(".archive-controls-switch.quiet-button.js-switch-section",{href:"#"})}),n.div(".spinner.loading.js-loading-spinner"),n.div(".archive-content.js-archive-content")}},{}],609:[function(e,t,r){var n;n=e(436)("board_background_options"),t.exports=function(){return n.p(".u-font-weight-bold.quiet",function(){return n.format("display-type")}),n.ul(".pop-over-list",function(){return n.li(function(){return n.a(".js-select-option",{href:"#","data-background-display-type":"cover"},function(){return n.check(!n.mustacheVar("tile"),"cover")})}),n.li(function(){return n.a(".js-select-option",{href:"#","data-background-display-type":"tile"},function(){return n.check(n.mustacheVar("tile"),"tile")})})}),n.hr(),n.p(".u-font-weight-bold.quiet",function(){return n.format("board-text")}),n.ul(".pop-over-list",function(){return n.li(function(){return n.a(".js-select-option",{href:"#","data-board-brightness":"dark"},function(){return n.check(n.mustacheVar("brightnessDark"),"light")})}),n.li(function(){return n.a(".js-select-option",{href:"#","data-board-brightness":"light"},function(){return n.check(n.mustacheVar("brightnessLight"),"dark")})})}),n.hr(),n.a(".quiet-button.js-delete-background",{href:"#"},function(){return n.format("delete-background")})}},{}],610:[function(e,t,r){var n;n=e(436)("board_background_selection"),t.exports=function(){return n.span({class:"background-box "+n.mustacheBlock("pending",function(){return"background-box-unselectable"})+n.mustacheBlock("tile",function(){return" background-tile"}),style:" "+n.mustacheBlock("backgroundImageThumbnail",function(){return'background-image: url("'+n.mustacheVar("backgroundImageThumbnail")+'")'})+"; "+n.mustacheBlock("color",function(){return"background-color: "+n.mustacheVar("color")+";"})+" "},function(){return n.mustacheBlock("attribution",function(){return n.a(".background-option.js-background-attribution",{href:n.mustacheVar("url"),target:"_blank",title:n.mustacheVar("url")},function(){return n.img({src:"https://d78fikflryjgj.cloudfront.net/images/d906fe5c1274c56c5571d49705547587/cc.png",style:"height: 14px; width: 14px; vertical-align: text-top;",title:n.mustacheVar("license")}),n.span(".text",{style:"margin-left: 2px;"},function(){return n.text(n.mustacheVar("name"))})})}),n.mustacheBlock("id",function(){return n.a(".background-option.js-options",function(){return n.icon("overflow-menu-horizontal",{class:"light",style:"vertical-align: bottom;"}),n.span(".text",function(){return n.format("options")})})}),n.mustacheBlock("error",function(){return n.span(".background-info",function(){return n.span(".text",function(){return n.text(n.mustacheVar("error"))})})}),n.mustacheBlock("pending",function(){return n.span(".background-info",function(){return n.span(".spinner.small.u-float-left",{style:"margin-right: 4px;"}),n.span(".text",function(){return n.format("uploading-ellipsis")})})})})}},{}],611:[function(e,t,r){var n;n=e(436)("board_change_background"),t.exports=function(){return n.div(".board-backgrounds-list.u-clearfix.js-default-list"),n.h2(function(){return n.format("photos")}),n.div({class:"board-backgrounds-list u-relative u-clearfix js-gold-photos-list"+n.mustacheBlockInverted("enabled_additionalBackgrounds",function(){return" disabled"})}),n.h2(function(){return n.format("patterns-and-textures")}),n.div({class:"board-backgrounds-list u-relative u-clearfix js-gold-patterns-list"+n.mustacheBlockInverted("enabled_additionalBackgrounds",function(){return" disabled"})}),n.h2(function(){return n.format("custom")}),n.div({class:"board-backgrounds-list u-relative u-clearfix js-custom-list"+n.mustacheBlockInverted("enabled_customBoardBackgrounds",function(){return" disabled"})},function(){return n.div(".board-background-select.board-background-select-upload.js-uploader",function(){return n.form({action:"/1/member/"+n.mustacheVar("idMember")+"/customBoardBackgrounds",method:"post",enctype:"multipart/form-data"},function(){return n.input({type:"hidden",name:"token",value:""}),n.input({type:"hidden",name:"format",value:"http"}),n.span(".background-box",function(){return n.span(".icon-lg.icon-add")}),n.input(".upload-background.js-upload-image",{type:"file",name:"file",multiple:"multiple",accept:"image/*"})})})})}},{}],612:[function(e,t,r){var n;n=e(436)("board_closed"),t.exports=function(){return n.div(".big-message.quiet",function(){return n.h1(function(){return n.format("name-is-closed",{name:n.mustacheVar("name")})}),n.mustacheBlock("__own",function(){return n.p(function(){return n.a(".js-reopen",{href:"#"},function(){return n.format("click-here-to-re-open-it")})})}),n.mustacheBlockInverted("__own",function(){return n.mustacheBlock("__ed",function(){return n.p(function(){return n.format("you-re-a-member-of-this-board-but-only-board-admins-are-able-to-re-open-it")})})})})}},{}],613:[function(e,t,r){var n;n=e(436)("board_desc"),t.exports=function(){return n.div(".window-header.u-clearfix",function(){return n.span(".window-header-icon.icon-lg.icon-board"),n.div({class:"window-title non-empty u-inline "+n.mustacheBlock("__own",function(){return" editable "})+" ",attr:"name"},function(){return n.h2(".window-title-text.current.hide-on-edit",function(){return n.text(n.mustacheVar("name"))}),n.mustacheBlock("__own",function(){return n.p(".edits-warning.quiet",function(){return n.format("you-have-unsaved-edits-on-this-field"),n.text(" "),n.a(".js-view-edits",{href:"#"},function(){return n.format("view-edits")}),n.text(" - "),n.a(".js-discard-edits",{href:"#"},function(){return n.format("discard")})}),n.div(".edit.edit-heavy",function(){return n.textarea(".field.single-line",{type:"text"})})})})}),n.div(".window-main-col.window-main-col-full",function(){return n.div({class:"board-description u-clearfix"+n.mustacheBlock("__ed",function(){return" editable"}),attr:"desc"},function(){return n.div(".current.markeddown.hide-on-edit.u-bottom",function(){return n.mustacheBlockInverted("hasDesc",function(){return n.p(".u-bottom",function(){return n.mustacheBlock("__ed",function(){return n.a(".quiet.empty",{style:"padding: 100px 0;",href:"#"},function(){return n.format("no-description-click-to-edit")})}),n.mustacheBlockInverted("__ed",function(){return n.span(".quiet.empty",{style:"padding: 100px 0;"},function(){return n.format("no-description")})})})})}),n.mustacheBlock("__ed",function(){return n.mustacheBlock("hasDesc",function(){return n.p(".u-bottom.js-edit-desc",function(){return n.a(".quiet-button.mod-with-image.hide-on-edit",{href:"#"},function(){return n.icon("edit","edit-the-board-description",{class:"quiet-button-icon"})})})}),n.p(".edits-warning.quiet",function(){return n.format("you-have-unsaved-edits-on-this-field"),n.text(" "),n.a(".js-view-edits",{href:"#"},function(){return n.format("view-edits")}),n.text(" - "),n.a(".js-discard-edits",{href:"#"},function(){return n.format("discard")})}),n.div(".board-description-edit.edit",function(){return n.p(".helper",function(){return n.format("markdown-accepted")}),n.textarea(".field")})})})})}},{}],614:[function(e,t,r){var n;n=e(436)("board_header"),t.exports=n.renderable(function(e){var t,r,o,i,s,a,u,c,l,d;return t=e.canRename,c=e.orgLogoUrl,l=e.orgLogoUrl2x,i=e.hasBusinessClass,u=e.orgDisplayName,a=e.name,d=e.orgName,s=e.isLoggedIn,r={"board-header-btn":!0,"board-header-btn-name":!0,"js-rename-board":t,"no-edit":!t,"board-header-btn-name-with-org-logo":c},o={"board-header-btn":!0,"board-header-btn-org-name":!0,"js-open-org-menu":!0,"board-header-btn-without-icon":!i},n.a({href:"#",class:n.classify(r)},function(){return c&&n.img({class:"board-header-btn-name-org-logo",src:c,srcSet:c+" 1x, "+l+" 2x"}),n.span(".board-header-btn-text",{dir:"auto"},function(){return n.text(a)})}),u&&n.a({href:"/"+d,class:n.classify(o)},function(){return i&&n.icon("business-class",{class:"board-header-btn-icon"}),n.span(".board-header-btn-text",function(){return n.text(u)})}),n.div(".board-header-btns.mod-left",function(){return s&&n.a(".board-header-btn.js-star-board",{href:"#",title:n.l("click-to-star-or-unstar-this-board-starred-boards-show-up-at-the-top-of-your-boards-list"),"aria-label":n.l("star-or-unstar-board")},function(){return n.icon("star",{class:"board-header-btn-icon"})}),n.a(".board-header-btn.hide.js-open-desc.js-fill-desc",{href:"#"},function(){return n.icon("description",{class:"board-header-btn-icon"})}),n.a(".board-header-btn.perms-btn.js-change-vis",{href:"#",id:"permission-level"})}),n.div(".board-header-btns.mod-right",function(){return n.a(".board-header-btn.board-header-btn-filter-indicator.hide.js-filter-cards-indicator",{href:"#"},function(){return n.icon("filter",{class:"board-header-btn-icon"}),n.span(".board-header-btn-text.u-text-underline",function(){return n.format("filtering-is-on")}),n.icon("close",{class:"board-header-btn-icon-close js-filter-card-clear"})}),n.a(".board-header-btn.sub-btn.hide.js-board-header-subscribed",{href:"#"},function(){return n.icon("subscribe",{class:"board-header-btn-icon"}),n.span(".board-header-btn-text.u-text-underline",function(){return n.format("subscribed")})}),n.a(".board-header-btn.calendar-btn.hide.js-calendar",{href:"#"},function(){return n.icon("calendar",{class:"board-header-btn-icon"}),n.span(".board-header-btn-text.u-text-underline",function(){return n.format("calendar")})}),n.span(".js-plugin-header-btns"),n.a(".board-header-btn.mod-show-menu.js-show-sidebar",{href:"#"},function(){return n.icon("overflow-menu-horizontal",{class:"board-header-btn-icon"}),n.span(".board-header-btn-text.u-text-underline",function(){return n.format("show-menu")})})})})},{}],615:[function(e,t,r){var n;n=e(436)("board_header_permissions"),t.exports=n.renderable(function(e){var t,r,o;return r=e.permIconClass,o=e.permText,n.span({class:n.classify((t={"board-header-btn-icon":!0,"icon-sm":!0},t["icon-"+r]=!0,t))}),n.span(".board-header-btn-text",function(){return n.text(o)})})},{}],616:[function(e,t,r){var n;n=e(436)("board_member_profile"),t.exports=function(){return n.div(".window-header.u-clearfix",function(){return n.span(".window-header-icon.icon-lg.icon-activity"),n.h2(".window-title",function(){return n.text(n.mustacheVar("fullName")),n.span(".quiet",{style:"margin-left: 3px"},function(){return n.format("username",{username:n.mustacheVar("username")})})})}),n.div(".window-main-col.window-main-col-full",function(){return n.div(".list-actions",function(){return n.p(".js-board-member-profile-no-activity",function(){return n.format("this-member-has-no-board-activity")})}),n.a(".show-more.js-more-actions",{href:"#"},function(){return n.format("load-more-activity")})})}},{}],617:[function(e,t,r){var n;n=e(436)("board_menu_activity"),t.exports=function(){return n.div(".segmented-control",function(e){return function(){return n.a(".segmented-control-item.js-show-all.js-control-option",{href:"#"},function(){return n.format("all")}),n.a(".segmented-control-item.js-show-comments.js-control-option",{href:"#"},function(){return n.format("comments")})}}(this)),n.div(".phenom-list.js-list-activity"),n.a(".show-more.js-more-actions",{href:"#"},function(e){return function(){return n.format("load-more-activity")}}(this))}},{}],618:[function(e,t,r){var n;n=e(436)("board_menu_commenting"),t.exports=function(){return n.li(function(){return n.a(".js-select",{href:"#",name:"disabled"},function(){return n.check(n.mustacheVar("comments_disabled"),"disabled"),n.span(".sub-name",function(){return n.format("no-one-is-allowed-to-comment")})})}),n.li(function(){return n.a(".js-select",{href:"#",name:"members"},function(){return n.check(n.mustacheVar("comments_members"),"members"),n.span(".sub-name",function(){return n.format("allow-admins-and-normal-members-to-comment")})})}),n.li(function(){return n.a({href:"#",class:"js-select"+n.mustacheBlockInverted("comments_showObservers",function(){return" disabled"}),name:"observers"},function(){return n.check(n.mustacheVar("comments_observers"),"members-and-observers"),n.span(".sub-name",function(){return n.format("allow-admins-normal-members-and-observers-to-comment")})})}),n.li(function(){return n.a({href:"#",class:"js-select"+n.mustacheBlockInverted("orgCanSee",function(){return" disabled"}),name:"org"},function(){return n.check(n.mustacheVar("comments_org"),"organization-members"),n.span(".sub-name",function(){return n.format("allow-admins-normal-members-observers-and-organization-members-to-comment")})})}),n.li(function(){return n.a({href:"#",class:"js-select"+n.mustacheBlockInverted("permissionLevel_public",function(){return" disabled"}),name:"public"},function(){return n.check(n.mustacheVar("comments_public"),"public-members"),n.span(".sub-name",function(){return n.format("allow-any-trello-member-to-comment")})})})}},{}],619:[function(e,t,r){var n;n=e(436)("board_menu_default"),t.exports=n.renderable(function(e){var t,r,o,i,s,a,u,c,l,d,p,h;for(t=e.canAssign,i=e.canInviteMembers,s=e.canJoin,h=e.selfJoin,r=e.canChangeBackground,o=e.canEnablePowerUps,n.p(".error.js-file-too-large",{style:"margin: 12px 0 6px; display:none;"},function(){return n.format("file-too-large-10mb-limit")}),p=[{key:"members",jsClass:"js-list-members"},{key:"team-members",jsClass:"js-list-team-members"},{key:"invited-members",jsClass:"js-list-invited-members"},{key:"non-team-members",jsClass:"js-list-non-team-members"},{key:"observers",jsClass:"js-list-observers"},{key:"deactivated-members",jsClass:"js-deactivated-members"}],a=0,l=p.length;l>a;a++)d=p[a],c=d.key,u=d.jsClass,n.div(".board-menu-member-section."+u,function(){return n.div(".board-menu-member-section-header.js-heading",function(){return n.format(c)}),n.div(".u-clearfix.js-list",{class:n.classify({"js-list-draggable-board-members":t})})});return n.div(".board-members-extras-button.u-clearfix.js-show-extra-members-button",function(){return n.a(".quiet-button.js-show-extra-members",{href:"#"},function(){return n.format("show-hidden-members")})}),n.div(".board-members-extras-button.u-clearfix.js-hide-extra-members-button",function(){return n.a(".quiet-button.js-hide-extra-members",{href:"#"},function(){return n.format("show-fewer-members")})}),i&&n.a(".button-link.mod-full.js-open-manage-board-members",{href:"#"},function(){return n.icon("add-member","add-members-ellipsis")}),s&&(n.a(".button-link.js-join-board",{href:"#",style:"margin-bottom: 0;"},function(){return n.icon("add-member","join-board")}),h&&n.p(".helper",{style:"margin-top: 8px;"},function(){return n.format("org-members-can-join-this-board")})),n.hr(),n.ul(".board-menu-navigation",function(){return r&&n.li(".board-menu-navigation-item.mod-background",function(){return n.a(".board-menu-navigation-item-link.js-change-background",{href:"#"},function(){return n.span(".board-menu-navigation-item-link-icon.js-fill-background-preview"),n.format("change-background")})}),n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-open-card-filter",{href:"#"},function(){return n.icon("filter","filter-cards",{class:"board-menu-navigation-item-link-icon"})})}),o&&(n.li(".board-menu-navigation-item",function(){
return n.a(".board-menu-navigation-item-link.js-open-power-ups",{href:"#"},function(){return n.icon("power-up","power-ups",{class:"board-menu-navigation-item-link-icon"}),n.span(".board-menu-navigation-item-link-count.js-enabled-power-up-count")})}),n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-open-stickers",{href:"#"},function(){return n.icon("sticker","stickers",{class:"board-menu-navigation-item-link-icon"})})})),n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-open-more",{href:"#"},function(){return n.icon("overflow-menu-horizontal","more",{class:"board-menu-navigation-item-link-icon"})})})}),n.hr(),n.a(".board-menu-section-header.js-open-activity",{href:"#"},function(){return n.span(".board-menu-section-header-icon.icon-lg.icon-activity"),n.span(".board-menu-section-header-title",function(){return n.format("activity")}),n.span(".board-menu-section-header-count.js-unread-activity-count")}),n.div(".js-menu-action-list"),n.a(".show-more.js-fill-activity-button.js-open-activity",{href:"#"})})},{}],620:[function(e,t,r){var n;n=e(436)("board_menu_email"),t.exports=function(){return n.label({for:"boardEmail"},function(){return n.format("your-email-address-for-this-board")}),n.input(".non-empty.js-autofocus",{id:"boardEmail",type:"text",name:"boardEmail",readonly:"readonly",placeholder:n.l("loading-ellipsis"),value:n.mustacheVar("email"),style:"margin: 4px 0 8px;"}),n.a(".quiet-button.js-generate-address",{href:"#"},function(){return n.format("generate-a-new-email-address")}),n.a(".quiet-button.js-send-address",{href:"#"},function(){return n.format("email-me-this-address")}),n.hr(),n.label(function(){return n.format("your-emailed-cards-appear-in-ellipsis")}),n.div(".form-grid",function(){return n.div(".button-link.setting.form-grid-child.form-grid-child-twothirds",function(){return n.span(".label",function(){return n.format("list")}),n.span(".value.js-list-value",function(){return n.text(n.mustacheVar("listName"))}),n.label(function(){return n.format("list")}),n.select(".js-select-list",function(){return n.mustacheBlock("lists",function(){return n.optionSelected(n.mustacheVar("selected"),{value:n.mustacheVar("id")},function(){return n.text(n.mustacheVar("name"))})})})}),n.div(".button-link.setting.form-grid-child.form-grid-child-third",function(){return n.span(".label",function(){return n.format("position")}),n.span(".value.js-pos-value",function(){return n.text(n.mustacheVar("positionName"))}),n.label(function(){return n.format("position")}),n.select(".js-select-position",function(){return n.optionSelected(n.mustacheVar("position_top"),{value:"top"},function(){return n.format("top")}),n.optionSelected(n.mustacheVar("position_bottom"),{value:"bottom"},function(){return n.format("bottom")})})})}),n.hr(),n.p(".u-bottom.quiet",function(){return n.format("tip-dont-share-this-email-address-anyone-who-has-it-can-add-cards-as-you-when-composing-emails-the-card-title-goes-in-the-subject-and-the-card-description-in-the-body-more-email-formatting-tips")})}},{}],621:[function(e,t,r){var n;n=e(436)("board_menu_invitations"),t.exports=function(){return n.li(function(){return n.a(".js-select",{href:"#",name:"admins"},function(){return n.check(n.mustacheVar("invitations_admins"),"admins"),n.span(".sub-name",function(){return n.format("allow-only-admins-to-add-and-invite-others")})})}),n.li(function(){return n.a(".js-select",{href:"#",name:"members"},function(){return n.check(n.mustacheVar("invitations_members"),"all-members"),n.span(".sub-name",function(){return n.format("allow-members-and-admins-to-add-and-invite-others")})})})}},{}],622:[function(e,t,r){var n;n=e(436)("board_menu_more"),t.exports=function(){return n.ul(".board-menu-navigation",function(){return n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-open-settings",{href:"#"},function(){return n.icon("gear","settings",{class:"board-menu-navigation-item-link-icon"})})}),n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-open-labels",{href:"#"},function(){return n.icon("label","labels",{class:"board-menu-navigation-item-link-icon"})})}),n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-open-archive",{href:"#"},function(){return n.icon("archive","archived-items",{class:"board-menu-navigation-item-link-icon"})})})}),n.hr(),n.ul(".board-menu-navigation",function(){return n.mustacheBlock("editableByMember",function(){return n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-email",{href:"#"},function(){return n.icon("email","email-to-board-settings",{class:"board-menu-navigation-item-link-icon"})})})}),n.mustacheBlock("__loggedIn",function(){return n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-board-subscribe",{href:"#"},function(){return n.icon("subscribe",{class:"board-menu-navigation-item-link-icon"}),n.span(".js-subscribed-state")})}),n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-copy-board",{href:"#"},function(){return n.icon("board","copy-board",{class:"board-menu-navigation-item-link-icon"})})})}),n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-share",{href:"#"},function(){return n.icon("share","print-and-export",{class:"board-menu-navigation-item-link-icon"})})})}),n.mustacheBlock("canCloseOrLeave",function(){return n.hr(),n.ul(".board-menu-navigation",function(){return n.mustacheBlock("canCloseBoard",function(){return n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-close-board",{href:"#"},function(){return n.format("close-board-ellipsis")})})}),n.mustacheBlock("canLeaveBoard",function(){return n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-leave-board",{href:"#"},function(){return n.format("leave-board-ellipsis")})})})})}),n.hr(),n.form(".u-gutter",function(){return n.label({for:"id-short-url"},function(){return n.format("link-to-this-board")}),n.input(".js-short-url",{type:"text",readonly:"readonly",id:"id-short-url",value:n.mustacheVar("shortUrl")}),n.p(".quiet",function(){return n.span({class:"icon-sm icon-"+n.mustacheVar("pLevelClass"),title:n.mustacheVar("pLevelAltText")}),n.text(n.mustacheVar("helperText"))})})}},{}],623:[function(e,t,r){var n;n=e(436)("board_menu_more_activity_button"),t.exports=function(){return n.mustacheBlockInverted("hasCount",function(e){return function(){return n.format("view-all-activity-ellipsis")}}(this)),n.mustacheBlock("hasCount",function(e){return function(){return n.format("view-all-unread-activity-count-ellipsis",{count:n.mustacheVar("count")})}}(this))}},{}],624:[function(e,t,r){var n;n=e(436)("board_menu_settings"),t.exports=function(){return n.ul(".pop-over-list.inset",function(e){return function(){return n.li(function(){return n.a({class:"js-change-org"+n.mustacheBlockInverted("canChangeOrg",function(){return" disabled"}),href:"#"},function(){return n.mustacheBlock("setOrgNull",function(){return n.format("remove-from-organization")}),n.mustacheBlockInverted("setOrgNull",function(){return n.format("change-organization-ellipsis")}),n.mustacheBlock("orgDisplayName",function(){return n.span(".sub-name",function(){return n.text(n.mustacheVar("orgDisplayName"))})})})}),n.hr(),n.li(function(){return n.a({class:n.mustacheBlock("__own",function(){return"js-toggle-covers"})+n.mustacheBlockInverted("__own",function(){return" disabled"}),href:"#"},function(){return n.mustacheBlockInverted("cardCovers",function(){return n.format("enable-card-cover-images")}),n.mustacheBlock("cardCovers",function(){return n.format("card-cover-images-enabled"),n.icon("check")}),n.span(".sub-name",function(){return n.format("show-images-on-front-of-cards")})})}),n.hr(),n.li(function(){return n.a({class:n.mustacheBlock("__own",function(){return"js-change-comments"})+n.mustacheBlockInverted("__own",function(){return" disabled"}),href:"#"},function(){return n.format("commenting-permissions-ellipsis-commentsdisplay",{commentsDisplay:n.mustacheVar("commentsDisplay")})})}),n.li(function(){return n.a({class:n.mustacheBlock("__own",function(){return"js-change-add-members"})+n.mustacheBlockInverted("__own",function(){return" disabled"}),href:"#"},function(){return n.format("invitations-permissions-ellipsis-invitationsdisplay",{invitationsDisplay:n.mustacheVar("invitationsDisplay")})})}),n.hr(),n.li(function(){return n.a({class:" "+n.mustacheBlock("__own",function(){return" js-toggle-org-mem-join "})+" "+n.mustacheBlockInverted("__own",function(){return" disabled "})+" "+n.mustacheBlockInverted("hasOrg",function(){return" disabled "})+" "+n.mustacheBlock("permissionLevel_private",function(){return" disabled "})+" ",href:"#"},function(){return n.check(n.mustacheVar("selfJoin_true"),"allow-org-members-to-join"),n.span(".sub-name",function(){return n.mustacheBlock("hasOrg",function(){return n.mustacheBlock("permissionLevel_private",function(){return n.format("any-organization-member-can-join-this-board-without-being-invited-to-enable-this-the-board-cant-be-private")})}),n.mustacheBlock("hasOrg",function(){return n.mustacheBlockInverted("permissionLevel_private",function(){return n.format("any-organization-member-can-join-this-board-without-being-invited")})}),n.mustacheBlockInverted("hasOrg",function(){return n.mustacheBlock("permissionLevel_private",function(){return n.format("any-organization-member-can-join-this-board-without-being-invited-to-enable-this-the-board-has-to-be-a-part-of-an-org-and-the-board-cant-be-private")})}),n.mustacheBlockInverted("hasOrg",function(){return n.mustacheBlockInverted("permissionLevel_private",function(){return n.format("any-organization-member-can-join-this-board-without-being-invited-to-enable-this-the-board-has-to-be-a-part-of-an-org")})})})})})}}(this))}},{}],625:[function(e,t,r){var n;n=e(436)("board_menu_subscribed_state"),t.exports=function(){return n.check(n.mustacheVar("subscribed"),"subscribe")}},{}],626:[function(e,t,r){var n;n=e(436)("board_menu_vis"),t.exports=n.renderable(function(e){var t,r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b;r=e.current,u=e.isNewBoard,t=e.canChange,c=e.mustChange,i=e.hasSuperAdmins,o=e.hasOrg,d=e.orgName,f=e.privateRestricted,p=e.orgRestricted,g=e.publicRestricted,c&&d&&n.p(".quiet",function(){return n.format("illegal org visibility",{orgName:d})}),l=i?"with super admins":o?"with organization":"without organization",m={private:{iconClass:"icon-private",restricted:f},org:{iconClass:"icon-organization",restricted:p,invalid:u&&!o},public:{iconClass:"icon-public",restricted:g}},b=[];for(h in m)v=m[h],y=v.restricted,a=v.invalid,s=v.iconClass,b.push(n.li(function(){var e;return e=y||a||!t,n.a(".js-select",{class:n.classify({"light-hover":!e,disabled:e}),href:"#",name:h},function(){return n.span(".icon-sm.vis-icon",{class:s},function(){}),n.check(r===h,h),n.span(".sub-name",function(){var e;return e=null!=d?{orgName:d}:{},n.format(["permission subtext",l,h],e),t&&y?(n.raw(" "),n.span(".error",function(){return u?n.format(["illegal visibility","create"]):n.format(["illegal visibility","change"])})):void 0})})}));return b})},{}],627:[function(e,t,r){var n;n=e(436)("board_new"),t.exports=function(){return n.form(function(){return n.label({for:"boardNewTitle"},function(){return n.format("title")}),n.input(".non-empty.js-autofocus",{id:"boardNewTitle",type:"text",name:"name",placeholder:n.mustacheVar("placeholder"),value:n.mustacheVar("name"),dir:"auto"}),n.div({class:n.mustacheBlock("hideOrg",function(){return"hide"})},function(){return n.div(".u-clearfix",function(){return n.label(".u-float-left",{style:"margin-right: 8px;"},function(){return n.format("organization")}),n.mustacheBlock("canAddToOrgs",function(){return n.a(".icon-sm.icon-information.dark-hover.js-helper-add-org",{href:"#"})})}),n.mustacheBlockInverted("canAddToOrgs",function(){return n.p(".quiet",{style:"margin-bottom: 16px;"},function(){return n.format("organization-whisk-n-tsk"),n.a(".js-create-org",{href:"#"},function(){return n.format("create-an-organization")})})}),n.select({name:"org-id",class:n.mustacheBlockInverted("canAddToOrgs",function(){return"hide"})},function(){return n.option({value:""},function(){return n.format("none")}),n.mustacheBlock("orgs",function(){return n.optionSelected(n.mustacheVar("selectOrg"),{value:n.mustacheVar("id")},function(){return n.text(n.mustacheVar("displayName"))})})})}),n.input({type:"hidden",name:"permissionLevel",value:n.mustacheVar("pLevel")}),n.p(".quiet.js-vis-display"),n.ul(".pop-over-list.js-vis-chooser.hide"),n.p(".error.u-bottom.js-no-valid-org-privs.u-clearfix.hide"),n.mustacheBlock("isCopyBoard",function(){return n.div(".check-div.u-clearfix",{style:"margin-top: 10px;"},function(){return n.input({type:"checkbox",id:"idKeepCards",name:"cards",checked:!0}),n.label({for:"idKeepCards"},function(){return n.format("keep-cards")})})}),n.input(".primary.wide.js-submit.disabled",{type:"submit",value:n.l("create")})})}},{}],628:[function(e,t,r){var n;n=e(436)("board_new_vis"),t.exports=function(){return n.format("this-board-will-be-visdisplaytext",{visIconClass:n.mustacheVar("visIconClass"),visDisplayText:n.mustacheVar("visDisplayText")}),n.text(" "),n.a(".js-change-vis",{href:"#"},function(){return n.format("change")})}},{}],629:[function(e,t,r){var n;n=e(436)("board_observer_count"),t.exports=function(){return n.a(".quiet-button.js-show-observers",{href:"#",style:"margin: 4px 0 0;"},function(){return n.text(n.mustacheVar("localizedObserverCount"))})}},{}],630:[function(e,t,r){var n;n=e(436)("board_sidebar"),t.exports=function(){return n.div(".board-menu-header.js-board-menu-title",function(){return n.a(".board-menu-header-back-button.icon-lg.icon-back.js-pop-widget-view",{href:"#",title:n.l("go-back")}),n.h3(".board-menu-header-title.js-board-menu-title-text"),n.a(".board-menu-header-close-button.icon-lg.icon-close.js-hide-sidebar",{href:"#",title:n.l("close-the-board-menu")}),n.hr(".board-menu-header-divider")}),n.div(".board-menu-content.u-fancy-scrollbar.js-board-menu-content-wrapper")}},{}],631:[function(e,t,r){var n;n=e(436)("boards_page_add_org_button"),t.exports=function(){return n.div(".boards-page-board-section.u-clearfix",function(){return n.a(".quiet-button.u-float-left.js-add-org-boards-page",{href:"#"},function(){return n.format("create-a-new-organization-ellipsis")})})}},{}],632:[function(e,t,r){var n;n=e(436)("boards_sidebar"),t.exports=n.renderable(function(){return n.div(".boards-drawer-header",function(){return n.h3(function(){return n.format("boards")})}),n.div(".board-drawer-content.u-fancy-scrollbar",function(){return n.input(".js-search-boards",{type:"text",placeholder:n.l("find-boards-by-name-ellipsis")}),n.div(".js-board-drawer-boards"),n.div(".js-board-drawer-buttons")})})},{}],633:[function(e,t,r){var n;n=e(436)("boards_sidebar"),t.exports=n.renderable(function(){return n.p(".quiet.u-text-align-center.hide",{style:"margin: 6px 4px 0 0; padding: 8px 12px;"},function(){return n.format("no-boards")}),n.div(".starred-sidebar-boards-list.js-starred-boards"),n.div(".js-recent-boards"),n.div(".js-all-boards")})},{}],634:[function(e,t,r){var n;n=e(436)("boards_sidebar"),t.exports=n.renderable(function(){return n.a(".quiet-button.js-add-board",{href:"#"},function(){return n.format("create-new-board-ellipsis")}),n.a(".quiet-button.hide.js-pin",{href:"#"},function(){return n.format("always-keep-this-menu-open")}),n.a(".quiet-button.hide.js-unpin",{href:"#"},function(){return n.format("don-t-keep-this-menu-open")}),n.a(".quiet-button.js-open-closed-boards",{href:"#"},function(){return n.format("see-closed-boards-ellipsis")})})},{}],635:[function(e,t,r){var n;n=e(436)("boards_sidebar"),t.exports=n.renderable(function(){return n.ul(".sidebar-boards-list.js-board-results")})},{}],636:[function(e,t,r){var n;n=e(436)("boards_sidebar"),t.exports=n.renderable(function(){return n.a(".quiet-button.js-add-board-with-name",{href:"#"})})},{}],637:[function(e,t,r){var n,o;o=e(436)("calendar_day"),n=function(){return o.div({class:"calendar-day js-expand-day "+o.mustacheBlock("isToday",function(){return"today"})},function(){return o.div(".day-header.u-clearfix.js-toggle-day",function(){return o.h3(".date",function(){return o.text(o.mustacheVar("date"))}),o.div(".quiet.num-cards",function(){return o.div(".day-cards-header")}),o.a(".close-button.icon-sm.icon-close.dark-hover",{href:"#"})}),o.div(".calendar-day-list.js-calendar-sortable.u-fancy-scrollbar"),o.mustacheBlock("__ed",function(){return o.a(".calendar-card-composer.quiet-button.js-open-card-composer",{href:"#"},function(){return o.format("add-a-card-ellipsis")})})})},t.exports=function(){return o.mustacheVar("monthView")?o.div(".calendar-day-spacer-div",n):n()}},{}],638:[function(e,t,r){var n;n=e(436)("calendar_day_list_header"),t.exports=function(){return n.span(".calendar-list-header",{name:n.mustacheVar("listID")},function(){return n.icon("list"),n.text(" "),n.text(n.mustacheVar("listName"))})}},{}],639:[function(e,t,r){var n;n=e(436)("calendar_month"),t.exports=function(){return n.table(".calendar-table")}},{}],640:[function(e,t,r){var n;n=e(436)("calendar_toolbar"),t.exports=function(){return n.div(".calendar-header",function(){return n.div(".calendar-header-toolbar",function(){return n.h2(".calendar-header-toolbar-title.js-calendar-header"),n.div(".calendar-header-toolbar-today",function(){return n.a(".button-link.today-button.js-today",{href:"#"},function(){return n.format("today")})}),n.div(".calendar-header-toolbar-nav",function(){return n.a(".button-link.js-left-arrow.left-arrow",{href:"#"},function(){return n.icon("up")}),n.a(".button-link.js-right-arrow.right-arrow",{href:"#"},function(){return n.icon("down")})}),n.div(".calendar-header-toolbar-close",function(){return n.a(".icon-lg.icon-close.dark-hover.js-close-calendar",{href:"#"})}),n.div(".calendar-header-toolbar-type",function(){return n.a(".button-link.js-week-view.week-button",{href:"#"},function(){return n.format("week")}),n.a(".button-link.js-month-view.month-button",{href:"#"},function(){return n.format("month")})})}),n.div(".days-of-week",function(){return n.mustacheBlock("days",function(){return n.div(".quiet",function(){return n.text(n.mustacheVar("."))})})})}),n.div(".calendar-content")}},{}],641:[function(e,t,r){var n;n=e(436)("calendar_week"),t.exports=function(){return n.div(".week-horizontal-canvas")}},{}],642:[function(e,t,r){var n;n=e(436)("cant_add_board_to_org"),t.exports=function(){return n.p(".quiet",function(){return n.mustacheBlock("isOrgAdmin",function(){return n.format("organization-displayname-does-not-allow-new-boards-you-can-change-this-on-the-organization-settings-page-by-clicking-on-board-creation-restrictions",{"organization.displayName":n.mustacheVar("organization.displayName"),orgSettingsUrl:n.mustacheVar("orgSettingsUrl")})}),n.mustacheBlockInverted("isOrgAdmin",function(){return n.format("organization-displayname-does-not-allow-new-boards-only-an-admin-of-the-organization-can-change-this-setting",{"organization.displayName":n.mustacheVar("organization.displayName")})})})}},{}],643:[function(e,t,r){var n;n=e(436)("card_attach_links"),t.exports=n.renderable(function(e){return n.div(".card-attach-link-list",function(){var t,r,o,i,s,a,u,c;for(a=[],o=0,i=e.length;i>o;o++)s=e[o],c=s.url,u=s.text,r=s.domain,t=s.attached,a.push(n.div(".card-attach-link-list-item",{class:n.classify({attached:t})},function(){return n.div(".card-attach-link-list-item-title",function(){return u?n.text(u):n.format("link to domain",{domain:r})}),n.div(".card-attach-link-list-item-url.quiet",function(){return n.text(c)}),t?n.div(".card-attach-link-list-item-attached.quiet",function(){return n.span(".icon-lg.icon-check")}):n.button(".card-attach-link-list-item-attach.js-attach",{"data-url":c,"data-text":u},function(){return n.format("attach")})}));return a})})},{}],644:[function(e,t,r){var n;n=e(436)("card_composer_inline"),t.exports=function(){return n.div(".list-card.js-composer",function(){return n.div(".list-card-details.u-clearfix",function(){return n.div(".list-card-labels.u-clearfix.js-list-card-composer-labels"),n.textarea(".list-card-composer-textarea.js-card-title",{dir:"auto"},function(){return n.text(n.mustacheVar("title"))}),n.div(".list-card-members.js-list-card-composer-members")})}),n.div(".cc-controls.u-clearfix",function(){return n.div(".cc-controls-section",function(){return n.input(".primary.confirm.mod-compact.js-add-card",{type:"submit",value:n.l("add")}),n.a(".icon-lg.icon-close.dark-hover.js-cancel",{href:"#"})}),n.div(".cc-controls-section.mod-right",function(){return n.a(".icon-lg.icon-overflow-menu-horizontal.dark-background-hover.js-cc-menu",{href:"#"})})})}},{}],645:[function(e,t,r){var n;n=e(436)("card_copy"),t.exports=function(){return n.mustacheBlock("loading",function(){return n.div(".spinner.loading.js-loading-card-actions")}),n.mustacheBlockInverted("loading",function(){return n.form(function(){return n.label(function(){return n.format("title")}),n.textarea(".js-autofocus",{name:"name",style:"margin-bottom: 12px;"},function(){return n.text(n.mustacheVar("name"))}),n.mustacheBlock("hasStuff",function(){return n.p({style:"margin-bottom: 4px;"},function(){return n.strong(function(){return n.format("keep-ellipsis")})}),n.mustacheBlock("hasChecklists",function(){return n.div(".check-div.u-clearfix",function(){return n.input({id:"idKeepChecklists",type:"checkbox",name:"checklists",checked:!0}),n.label({for:"idKeepChecklists"},function(){return n.format("checklists-numchecklists",{numChecklists:n.mustacheVar("numChecklists")})})})}),n.mustacheBlock("hasLabels",function(){return n.div(".check-div.u-clearfix",function(){return n.input({id:"idKeepLabels",type:"checkbox",name:"labels",checked:!0}),n.label({for:"idKeepLabels"},function(){return n.format("labels-numlabels",{numLabels:n.mustacheVar("numLabels")})})})}),n.mustacheBlock("hasMembers",function(){return n.div(".check-div.u-clearfix",function(){return n.input({id:"idKeepMembers",type:"checkbox",name:"members",checked:!0}),n.label({for:"idKeepMembers"},function(){return n.format("members-nummembers",{numMembers:n.mustacheVar("numMembers")})})})}),n.mustacheBlock("hasAttachments",function(){return n.div(".check-div.u-clearfix",function(){return n.input({id:"idKeepAttachments",type:"checkbox",name:"attachments",checked:!0}),n.label({for:"idKeepAttachments"},function(){return n.format("attachments-numattachments",{numAttachments:n.mustacheVar("numAttachments")})})})}),n.mustacheBlock("hasComments",function(){return n.div(".check-div.u-clearfix",function(){return n.input({id:"idKeepComments",type:"checkbox",name:"comments",checked:!0}),n.label({for:"idKeepComments"},function(){return n.format("comments-numcomments",{numComments:n.mustacheVar("numComments")})})})}),n.mustacheBlock("hasStickers",function(){return n.div(".check-div.u-clearfix",function(){return n.input({id:"idKeepStickers",type:"checkbox",name:"stickers",checked:!0}),n.label({for:"idKeepStickers"},function(){return n.format("stickers-numstickers",{numStickers:n.mustacheVar("numStickers")})})})})}),n.br(),n.label(function(){return n.format("copy-to-ellipsis")}),n.mustachePartial("move_card_controls"),n.input(".primary.wide.js-submit",{type:"submit",value:n.l("create-card")})})})}},{}],646:[function(e,t,r){var n,o,i;i=e(436)("card_detail"),n=e(661),o=e(714),t.exports=i.renderable(function(e){var t,r,s,a,u,c,l;return s=e.editable,c=e.name,t=e.canComment,u=e.me,a=e.loading,l=e.showActions,r=e.canSubscribe,i.div(".window-cover.hide.js-card-cover-box.js-open-card-cover-in-viewer",function(){return i.div(".window-cover-stickers.js-display-stickers")}),i.div(".window-archive-banner.hide.js-archive-banner",function(){return i.span(".icon-lg.icon-archive.window-archive-banner-icon"),i.p(".window-archive-banner-text",function(){return i.format("this-card-is-archived")})}),i.div(".window-archive-banner.hide.js-archived-list-banner",function(){return i.span(".icon-lg.icon-archive.window-archive-banner-icon"),i.p(".window-archive-banner-text",function(){return i.format("this-card-is-in-an-archived-list")})}),i.div(".window-header",function(){var e;return i.span(".window-header-icon.icon-lg.icon-card"),e={"window-title":!0},i.div({class:i.classify(e)},function(){var e;return i.h2(".card-detail-title-assist.js-title-helper",{dir:"auto"}),e={"mod-card-back-title":!0,"js-card-detail-title-input":!0},i.textarea({class:i.classify(e),disabled:!s,dir:"auto"})}),i.div(".window-header-inline-content.hide.quiet.js-current-list"),i.div(".window-header-inline-content.hide.js-subscribed-indicator-header",function(){return i.icon("subscribe")})}),i.div(".window-main-col",function(){return i.div(".card-detail-data.u-gutter",function(){return i.div(".card-detail-item.u-clearfix.hide.js-card-detail-members",function(){return i.h3(".card-detail-item-header",function(){return i.format("members")}),i.div(".js-card-detail-members-list")}),i.div(".card-detail-item.card-detail-item-labels.u-clearfix.hide.js-card-detail-labels",function(){return i.h3(".card-detail-item-header",function(){return i.format("labels")}),i.div(".u-clearfix.js-card-detail-labels-list")}),i.div(".card-detail-item.hide.js-card-detail-due-date",function(){return i.h3(".card-detail-item-header",function(){return i.format("due-date")}),i.a(".card-detail-badge.js-card-detail-due-date-badge",{href:"#"})}),i.div(".card-detail-item.hide.js-card-detail-votes",function(){return i.h3(".card-detail-item-header",function(){return i.format("votes")}),i.a(".card-detail-badge.is-clickable.js-card-detail-votes-badge.js-show-votes",{href:"#"})}),i.div(".card-detail-item.hide.js-card-detail-age",function(){return i.h3(".card-detail-item-header",function(){return i.format("last-updated")}),i.div(".card-detail-badge.date.mod-last-updated.js-card-detail-age-badge")}),i.div(".js-plugin-badges"),i.div({class:i.classify({"card-detail-item":!0,"card-detail-item-block":!0,"u-clearfix":!0,editable:s}),attr:"desc"},function(){return i.h3(".card-detail-item-header.hide.js-show-with-desc",function(){return i.format("description")}),s&&i.a(".card-detail-item-header-edit.hide-on-edit.js-show-with-desc.js-edit-desc",{href:"#"},function(){return i.format("edit")}),i.div(".description-content.js-desc-content",function(){return i.div(".description-content-fade-button",function(){return i.span(".description-content-fade-button-text",function(){return i.format("show-full-description")})}),i.div(".current.markeddown.hide-on-edit.js-card-desc.js-show-with-desc.hide",{dir:"auto"}),s?(i.p(".u-bottom",function(){return i.a(".quiet-button.mod-with-image.hide-on-edit.js-edit-desc.js-hide-with-desc",{href:"#"},function(){return i.icon("description","edit-the-description-ellipsis",{class:"quiet-button-icon"})})}),i.div(".card-detail-edit.edit",function(){return i.a(".helper.js-format-help",{href:"#"},function(){return i.format("formatting-help")}),i.textarea(".field")}),i.p(".edits-warning.quiet",function(){return i.format("you-have-unsaved-edits-on-this-field"),i.text(" "),i.a(".js-view-edits",{href:"#"},function(){return i.format("view-edits")}),i.text(" - "),i.a(".js-discard-edits",{href:"#"},function(){return i.format("discard")})}),i.p(".edits-error.error",function(){return i.format("edit-not-saved")})):void 0})})}),i.div(".js-plugin-sections"),i.div(".window-module.js-attachments-section.u-clearfix.hide",function(){return i.div(".window-module-title.window-module-title-no-divider",function(){return i.span(".window-module-title-icon.icon-lg.icon-attachment"),i.h3(".u-inline-block",function(){return i.format("attachments")})}),i.div(".u-gutter",function(){return i.div(".u-clearfix.js-attachment-list"),i.p(".js-show-fewer-attachments.hide",function(){return i.a(".quiet-button.js-view-some-attachments",{href:"#"},function(){return i.format("show-fewer-attachments")})}),i.p(".js-show-more-attachments.hide",function(){return i.a(".quiet-button.js-view-all-attachments",{href:"#"})}),s?i.p(function(){return i.a(".quiet-button.js-attach",{href:"#"},function(){return i.format("add-an-attachment-ellipsis")})}):void 0})}),i.div(".checklist-list.window-module.js-checklist-list.js-no-higher-edits"),t&&i.div(".window-module.add-comment-section",function(){return i.div(".window-module-title.window-module-title-no-divider",function(){return i.span(".window-module-title-icon.icon-lg.icon-comment"),i.h3(function(){return i.format("add-comment")}),i.span(".editing-members.js-editing-members.hide")}),i.div(".new-comment.js-new-comment",function(){return u&&i.div(".member.member-no-menu",function(){return o(u)}),i.form(function(){return i.div(".comment-frame",function(){return i.div(".comment-box",function(){return i.textarea(".comment-box-input.js-new-comment-input",{placeholder:i.l("write-a-comment-ellipsis"),tabindex:"1",dir:"auto"}),n(s)})}),i.div(".comment-controls.u-clearfix",function(){return i.input(".primary.confirm.mod-no-top-bottom-margin.js-add-comment",{disabled:"disabled",type:"submit",value:i.l("send"),tabindex:"3"})})}),i.div(".comment-too-long-warning",function(){return i.p(function(){return i.format("your-comment-is-too-long-you-can-add-it-as-a-text-attachment-or-truncate-it")}),i.input(".primary.js-attach-comment",{type:"submit",value:i.l("add-as-an-attachment"),tabindex:4}),i.input(".js-truncate-comment",{type:"submit",value:i.l("truncate"),tabindex:5})})})}),i.div(".window-module",function(){return i.div(".window-module-title.window-module-title-no-divider",function(){return i.span(".window-module-title-icon.icon-lg.icon-activity"),i.h3(function(){return i.format("activity")})}),i.div(".js-list-actions"),a&&i.div(".spinner.loading.js-loading-card-actions"),i.p(".u-bottom",function(){return i.a(".show-more.hide.js-show-all-actions",{href:"#"},function(){return i.format("show-all-actions-ellipsis")})})})}),i.div(".window-sidebar",function(){return s&&i.div(".window-module.u-clearfix",function(){return i.h3(function(){return i.format("add")}),i.div(".u-clearfix",function(){return i.a(".button-link.js-change-card-members",{href:"#"},function(){return i.icon("member","members")}),i.a(".button-link.js-edit-labels",{href:"#"},function(){return i.icon("label","labels")}),i.a(".button-link.js-add-checklist-menu",{href:"#"},function(){return i.icon("checklist","checklist")}),i.a(".button-link.js-add-due-date",{href:"#"},function(){return i.icon("clock","due-date")}),i.a(".button-link.js-attach",{href:"#"},function(){return i.icon("attachment","attachment")})})}),i.div(".js-plugin-buttons"),s?i.div(".window-module.other-actions.u-clearfix",function(){return i.h3(function(){return i.format("actions")}),i.div(".u-clearfix",function(){return i.a(".button-link.js-move-card",{href:"#"},function(){return i.icon("move","move")}),i.a(".button-link.js-copy-card",{href:"#"},function(){return i.icon("card","copy")}),i.div(".js-subscribe-sidebar-button"),i.div(".js-vote-sidebar-button"),i.hr(),i.a(".button-link.js-archive-card",{href:"#"},function(){return i.icon("archive","archive")}),i.a(".button-link.js-unarchive-card",{href:"#"},function(){return i.icon("refresh","send-to-board")}),i.a(".button-link.negate.hide.js-delete-card",{href:"#"},function(){return i.icon("remove","delete")})})}):l&&r&&i.div(".window-module.u-clearfix",function(){return i.h3(function(){return i.format("actions")}),i.div(".u-clearfix",function(){return i.div(".js-subscribe-sidebar-button"),i.div(".js-vote-sidebar-button")})}),i.div(".window-module.u-clearfix",function(){return i.p(".quiet.u-bottom",function(){return i.a(".quiet-button.js-more-menu",{href:"#"},function(){return i.format("share-and-more-ellipsis")})})})}),i.p(".dropzone",function(){return i.format("drop-files-to-upload")})})},{}],647:[function(e,t,r){var n;n=e(436)("card_detail_add_button"),t.exports=n.renderable(function(e){
var t,r;return r=e.klass,t={"card-detail-item-add-button":!0,"dark-hover":!0},t[r]=!0,n.a({class:n.classify(t)},function(){return n.icon("add")})})},{}],648:[function(e,t,r){var n;n=e(436)("card_detail_list"),t.exports=n.renderable(function(e){var t,r;return t=e.editable,r=e.listName,n.p(".u-inline-block.u-bottom",function(){return n.format("in-list"),n.text(" "),n.a({href:"#",class:n.classify({"js-open-move-from-header":t,disabled:!t})},function(){return n.text(r)})})})},{}],649:[function(e,t,r){var n;n=e(436)("card_detail_more_menu"),t.exports=function(){return n.ul(".pop-over-list",function(){return n.li(function(){return n.a(".js-print",{href:"#"},function(){return n.format("print-ellipsis")})}),n.li(function(){return n.a(".js-export-json",{href:n.mustacheVar("jsonURL")},function(){return n.format("export-json")})})}),n.mustachePartial("meta")}},{}],650:[function(e,t,r){var n;n=e(436)("card_detail_subscribe"),t.exports=n.renderable(function(e){var t,r;return r=e.subscribed,t={"button-link":!0,"is-on":r,"js-subscribe":!r,"js-unsubscribe":r},n.a({class:n.classify(t),title:n.l("subscribe-to-the-card-to-get-notifications-when-something-changes")},function(){return n.icon("subscribe","subscribe"),n.span(".on",function(){return n.icon("check",{class:"light"})})})})},{}],651:[function(e,t,r){var n;n=e(436)("card_detail_vote_btn_sidebar"),t.exports=n.renderable(function(e){var t,r,o;return t=e.canVote,o=e.voted,t?(r={"button-link":!0,"is-on":o,"js-unvote":o,"js-vote":!o},n.a({class:n.classify(r)},function(){return n.icon("vote","vote"),n.span(".on",function(){return n.icon("check",{class:"light"})})})):void 0})},{}],652:[function(e,t,r){var n,o;o=e(436)("card_in_list"),n=e(701),t.exports=function(){return o.div(".list-card-cover.js-card-cover"),o.mustacheBlock("showEditor",function(){return o.icon("edit",{class:"list-card-operation dark-hover js-open-quick-card-editor js-card-menu"})}),o.div({class:"list-card-stickers-area"+o.mustacheBlockInverted("hasStickers",function(){return" hide"})},function(){return o.div(".stickers.js-card-stickers")}),o.div(".list-card-details",function(){return o.div(".list-card-labels.js-card-labels",function(){return o.mustacheBlock("labels",function(){return n({name:o.mustacheVar("name"),color:o.mustacheVar("color"),extraClasses:["mod-card-front"]})})}),o.mustacheBlockInverted("quickEdit",function(){return o.a(".list-card-title.js-card-name",{dir:"auto"},function(){return o.mustacheBlock("idShort",function(){return o.span(".card-short-id.hide",function(){return o.format("idshort",{idShort:o.mustacheVar("idShort")})})}),o.text(o.mustacheVar("name"))})}),o.mustacheBlock("quickEdit",function(){return o.textarea(".list-card-edit-title.js-edit-card-title",{dir:"auto"},function(){return o.text(o.mustacheVar("name"))})}),o.div(".badges"),o.div(".list-card-members.js-list-card-members",function(){return o.mustacheBlock("members",function(){return o.mustachePartial("member_on_card")})})}),o.p(".list-card-dropzone",function(){return o.format("drop-files-to-upload")})}},{}],653:[function(e,t,r){var n;n=e(436)("card_menu_meta"),t.exports=function(){return n.hr(),n.div(function(){return n.div(function(){return n.label(function(){return n.format("link-to-this-card"),n.text(" "),n.icon(n.mustacheVar("pLevelClass"),{title:n.mustacheVar("pLevelAltText")})}),n.input(".js-short-url.js-autofocus",{type:"text",readonly:"readonly",value:n.mustacheVar("shortUrl")}),n.hr()}),n.mustacheBlock("email",function(){return n.mustacheBlock("__ed",function(){return n.div(function(){return n.label(function(){return n.format("email-for-this-card")}),n.input(".js-email",{type:"text",readonly:"readonly",value:n.mustacheVar("email")}),n.p(".quiet",{stlye:"margin: 0 4px;"},function(){return n.l("emails-sent-to-this-address-will-appear-as-a-comment-by-you-on-the-card")}),n.hr()})})}),n.div(".quiet",function(){return n.mustacheBlock("idShort",function(){return n.p({style:"display: inline-block; margin: 0 8px 0 0;"},function(){return n.format("card-idshort",{idShort:n.mustacheVar("idShort")}),n.text(" ")})}),n.p({style:"display: inline-block; margin: 0;"},function(){return n.mustacheBlock("dateAdded",function(){return n.format("added",{dateAdded:n.mustacheVar("dateAdded")})}),n.mustacheBlock("__ed",function(){return n.text(" - "),n.a(".js-delete",{href:"#"},function(){return n.format("delete")})})})})})}},{}],654:[function(e,t,r){var n;n=e(436)("card_title_on_card_front"),t.exports=function(){return n.mustacheBlock("idShort",function(){return n.span(".card-short-id.hide",function(){return n.format("idshort",{idShort:n.mustacheVar("idShort")})})}),n.text(n.mustacheVar("name"))}},{}],655:[function(e,t,r){var n;n=e(436)("change_org_vis"),t.exports=function(){return n.li(function(){return n.a(".highlight-icon.js-select-members",{href:"#"},function(){return n.icon("private","private"),n.mustacheBlock("permissionLevel_private",function(){return n.icon("check")}),n.span(".sub-name",function(){return n.text(n.mustacheVar("privateText"))})})}),n.li(function(){return n.a(".highlight-icon.js-select-public",{href:"#"},function(){return n.icon("public","public"),n.mustacheBlock("permissionLevel_public",function(){return n.icon("check")}),n.span(".sub-name",function(){return n.text(n.mustacheVar("publicText"))})})})}},{}],656:[function(e,t,r){var n;n=e(436)("checklist"),t.exports=function(){return n.div({class:"window-module-title window-module-title-no-divider u-clearfix"+n.mustacheBlock("__ed",function(){return" ed grab"})},function(){return n.span(".window-module-title-icon.icon-lg.icon-checklist"),n.mustacheBlock("__ed",function(){return n.div(".editable.non-empty.checklist-title",{attr:"name"},function(){return n.h3(".current.hide-on-edit",{dir:"auto"},function(){return n.text(n.mustacheVar("name"))}),n.div(".window-module-title-options",function(){return n.mustacheBlock("__ed",function(){return n.a(".hide.hide-on-edit.quiet.js-show-checked-items",{href:"#",style:"margin: 0 8px;"}),n.a(".hide.hide-on-edit.quiet.js-hide-checked-items",{href:"#",style:"margin: 0 8px;"},function(){return n.format("hide-completed-items")}),n.a(".hide-on-edit.quiet.js-confirm-delete",{href:"#"},function(){return n.format("delete-ellipsis")})})}),n.div(".edit.edit-heavy",function(){return n.textarea(".field.full.single-line",{dir:"auto"})}),n.p(".edits-warning.quiet",function(){return n.format("you-have-unsaved-edits-on-this-field"),n.text(" "),n.a(".js-view-edits",{href:"#"},function(){return n.format("view-edits")}),n.text(" - "),n.a(".js-discard-edits",{href:"#"},function(){return n.format("discard")})})})}),n.mustacheBlockInverted("__ed",function(){return n.h3(function(){return n.text(n.mustacheVar("name"))})})}),n.div(".checklist-progress",function(){return n.span(".checklist-progress-percentage.js-checklist-progress-percent",function(){return n.text("0%")}),n.div(".checklist-progress-bar",function(){return n.div(".checklist-progress-bar-current.js-checklist-progress-bar")}),n.span(".checklist-completed-text.hide.quiet.js-completed-message",function(){return n.format("everything-in-this-checklist-is-complete")})}),n.div(".checklist-items-list.js-checklist-items-list.js-no-higher-edits"),n.mustacheBlock("__ed",function(){return n.div(".checklist-new-item.u-gutter.js-new-checklist-item",function(){return n.textarea(".checklist-new-item-text.js-new-checklist-item-input",{placeholder:n.l("add-an-item-ellipsis")}),n.div(".checklist-add-controls.u-clearfix",function(){return n.input(".primary.confirm.mod-submit-edit.js-add-checklist-item",{type:"submit",value:n.l("add")}),n.a(".icon-lg.icon-close.dark-hover.cancel.js-cancel-checklist-item",{href:"#"}),n.a(".checklist-add-controls-option.options-menu.dark-hover.js-open-editing-menu",{href:"#"},function(){return n.span(".icon-lg.icon-overflow-menu-horizontal")})})})})}},{}],657:[function(e,t,r){var n;n=e(436)("checklist_add_menu"),t.exports=n.renderable(function(e){var t;return t=e.checklistCards,n.form(function(){return n.label({for:"id-checklist"},function(){return n.format("title")}),n.input(".js-checklist-title.js-autofocus",{type:"text",id:"id-checklist",value:n.l("default-checklist-name"),dir:"auto"}),t.length>0&&n.span(function(){return n.label({for:"js-checklist-copy-source"},function(){return n.format("copy-items-from-ellipsis")}),n.select(".js-checklist-copy-source",function(){var e,r,o,i,s,a;for(n.option({value:"",selected:!0},function(){return n.format("none")}),a=[],r=0,o=t.length;o>r;r++)s=t[r],i=s.name,e=s.checklists,a.push(n.optgroup({label:i},function(){var t,r,o,s,a;for(a=[],r=0,o=e.length;o>r;r++)s=e[r],t=s.id,i=s.name,a.push(n.option({value:t},function(){return n.text(i)}));return a}));return a})}),n.input(".primary.wide.confirm.js-add-checklist",{type:"submit",value:n.l("add")})})})},{}],658:[function(e,t,r){var n;n=e(436)("checklist_item"),t.exports=function(){return n.div({class:"checklist-item-checkbox "+n.mustacheBlock("__ed",function(){return"enabled js-toggle-checklist-item"})},function(){return n.icon("check",{class:"checklist-item-checkbox-check"})}),n.div({class:"checklist-item-details non-empty "+n.mustacheBlock("__ed",function(){return"editable"}),attr:"name"},function(){return n.p(".checklist-item-details-text.current.hide-on-edit.markeddown.js-checkitem-name"),n.mustacheBlock("__ed",function(){return n.div(".edit.delete.convert.options-menu",function(){return n.textarea(".field.full.single-line.js-checkitem-input",{type:"text"})}),n.p(".edits-warning.quiet",function(){return n.format("you-have-unsaved-edits-on-this-field"),n.text(" "),n.a(".js-view-edits",{href:"#"},function(){return n.format("view-edits")}),n.text(" - "),n.a(".js-discard-edits",{href:"#"},function(){return n.format("discard")})})})})}},{}],659:[function(e,t,r){var n;n=e(436)("closed_boards"),t.exports=function(){return n.div(".window-header",function(){return n.span(".window-header-icon.icon-lg.icon-archive"),n.h2(".window-title",function(){return n.format("closed-boards")})}),n.div(".window-main-col",function(){return n.mustacheBlockInverted("empty",function(){return n.div(".window-module.u-clearfix",function(){return n.ul(".archive-list.u-gutter.js-archive-items")})}),n.mustacheBlock("empty",function(){return n.p(".empty-list",function(){return n.format("no-boards-have-been-closed")})})}),n.div(".window-sidebar",function(){return n.p(".helper",function(){return n.format("you-have-to-have-been-a-board-admin-to-re-open-a-closed-board")})})}},{}],660:[function(e,t,r){var n;n=e(436)("comment_edit_controls"),t.exports=function(){return n.div(".edit-controls.u-clearfix",function(){return n.div(".js-too-long-warning.hide",function(){return n.p(function(){return n.format("your-comment-is-too-long")})}),n.div(".js-is-empty-warning.hide",function(){return n.p(function(){return n.format("must-have-at-least-one-character")})}),n.input(".primary.confirm.js-save-edit",{type:"submit",value:n.l("save"),tabindex:"2"}),n.a(".js-discard-comment-edits.icon-lg.icon-close.dark-hover.cancel",{href:"#"})})}},{}],661:[function(e,t,r){var n;n=e(436)("comment_options"),t.exports=n.renderable(function(e){return n.div(".comment-box-options",function(){return e&&n.a(".comment-box-options-item.js-comment-add-attachment",{href:"#",title:n.l("add-an-attachment-ellipsis")},function(){return n.icon("attachment")}),n.a(".comment-box-options-item.js-comment-mention-member",{href:"#",title:n.l("mention-a-member-ellipsis")},function(){return n.icon("mention")}),n.a(".comment-box-options-item.js-comment-add-emoji",{href:"#",title:n.l("add-emoji-ellipsis")},function(){return n.icon("emoji")}),n.a(".comment-box-options-item.js-comment-add-card",{href:"#",title:n.l("add-card-ellipsis")},function(){return n.icon("card")})})})},{}],662:[function(e,t,r){var n;n=e(436)("confirm"),t.exports=function(){return n.p(function(){return n.text(n.mustacheVar("text"))}),n.input({type:"submit",class:"js-confirm "+n.mustacheVar("confirmBtnClass")+n.mustacheBlockInverted("cancelText",function(){return" full"}),value:n.mustacheVar("confirmText")}),n.mustacheBlock("cancelText",function(){return n.input(".js-cancel",{type:"submit",value:n.mustacheVar("cancelText")})})}},{}],663:[function(e,t,r){var n;n=e(436)("confirm_merge"),t.exports=function(){return n.p(function(){return n.text(n.mustacheVar("text"))}),n.ul(".pop-over-member-list.js-member"),n.input(".js-confirm.full",{type:"submit",value:n.mustacheVar("confirmText")})}},{}],664:[function(e,t,r){var n;n=e(436)("connect_failed"),t.exports=function(){return n.text(n.mustacheVar("msg")),n.br(),n.a(".app-alert-item-button",{href:"#",onclick:"window.location.reload()"},function(){return n.format("reload-page")})}},{}],665:[function(e,t,r){var n;n=e(436)("crop_photo"),t.exports=function(){return n.img(".crop-image"),n.button(".primary.js-done",function(){return n.format("looks-good")}),n.button(".js-back",function(){return n.format("try-again-ellipsis")})}},{}],666:[function(e,t,r){var n;n=e(436)("date_picker"),t.exports=n.renderable(function(e){return n.div(".datepicker-select.u-clearfix",function(){return n.div(".datepicker-select-date",function(){return n.label(".datepicker-select-label",function(){return n.format("date"),n.input(".datepicker-select-input.js-dpicker-date-input.js-autofocus",{type:"text",placeholder:n.l("enter-date"),tabindex:101})})}),n.div(".datepicker-select-time",function(){return n.label(".datepicker-select-label",function(){return n.format("time"),n.input(".datepicker-select-input.js-dpicker-time-input",{type:"text",placeholder:n.l("enter-time"),tabindex:102})})})}),n.div(".pickers.js-dpicker-cal"),n.div(".datepicker-confirm-btns",function(){return n.input(".primary.wide.confirm",{type:"submit",value:n.l("save"),tabindex:103}),n.button(".negate.remove-date.js-remove-date",{type:"button",tabindex:104},function(){return n.format("remove")})}),n.div(".js-enable-cal.hide",function(){return n.hr(),n.p(function(){return n.a(".quiet-button.mod-with-image.js-enable-calendar-powerup",{href:"#"},function(){return n.icon("power-up","enable-the-calendar-power-up",{class:"quiet-button-icon"})})}),n.p(".u-bottom.quiet",function(){return n.format("you-ll-get-a-calendar-view-of-your-cards-and-an-ical-feed-woo")})}),n.div(".js-cal-enabled.hide",function(){return n.hr(),n.p(".helper",function(){return e?n.format("click-the-calendar-button-in-the-board-header-to-open-the-calendar-to-change-calendar-settings-click-power-ups-in-the-board-menu"):n.format("click-the-calendar-button-in-the-board-header-to-open-the-calendar")})})})},{}],667:[function(e,t,r){var n;n=e(436)("dialog_close_button"),t.exports=function(){return n.a(".icon-lg.icon-close.dialog-close-button.js-close-window",{href:"#"})}},{}],668:[function(e,t,r){var n;n=e(436)("edit_controls"),t.exports=function(){return n.div(".edit-controls.u-clearfix",function(){return n.input(".primary.confirm.mod-submit-edit.js-save-edit",{type:"submit",value:n.l("save")}),n.a(".icon-lg.icon-close.dark-hover.cancel.js-cancel-edit",{href:"#"}),n.a(".option.delete.js-delete-item",{href:"#"},function(){return n.format("delete")}),n.a(".option.convert.js-convert-item-to-card",{href:"#"},function(){return n.format("convert-to-card")}),n.a(".option.options-menu.dark-hover.js-open-editing-menu",{href:"#"},function(){return n.span(".icon-lg.icon-overflow-menu-horizontal")})})}},{}],669:[function(e,t,r){var n;n=e(436)(),t.exports=n.renderable(function(e){var t,r,o,i,s,a,u,c,l,d;for(u=e.members,l=[],o=0,a=u.length;a>o;o++)c=u[o],t=c.avatarHash,r=c.fullName,d=c.username,s=c.initials,i=c.icon,l.push(n.span(".edit-in-progress",function(){return n.span(".inline-member",function(){var e;return e=r+" ("+d+")",t?n.img(".inline-member-av",{src:[window.avatarDomain,t,"30.png"].join("/"),alt:e,title:e}):n.span(".quiet.initials",{title:e},function(){return n.text(s)})}),i?n.icon(i,{class:"icon"}):void 0}));return l})},{}],670:[function(e,t,r){var n;n=e(436)("embedly"),t.exports=function(){return n.div({class:"embed embed-"+n.mustacheVar("type")+" embed-provider-"+n.mustacheVar("provider_name")},function(){return n.mustacheBlockInverted("type_photo",function(){return n.mustacheBlock("requireHttps",function(){return n.raw(n.mustacheVar("htmlHttps"))}),n.mustacheBlockInverted("requireHttps",function(){return n.raw(n.mustacheVar("html"))})}),n.mustacheBlock("type_photo",function(){return n.a({href:n.mustacheVar("originalUrl"),target:"_blank"},function(){return n.img({src:n.mustacheVar("url")})})})})}},{}],671:[function(e,t,r){var n;n=e(436)("empty_list"),t.exports=function(){return n.p({class:"empty-list "+n.mustacheVar("classes"),style:n.mustacheVar("style")},function(){return n.text(n.mustacheVar("message"))})}},{}],672:[function(e,t,r){var n,o,i,s,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;i=e(661),o=e("react"),s=e(433)("entity"),t.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.displayName="Entity",t.prototype.render=s.renderable(function(){var e,t,r,n,o,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,M;switch(b=this.props,c=b.entity,o=b.context,f=b.options,j=c.type,_=c.text,j){case"text":case"list":case"checklist":case"plugin":case"date":return s.span(function(){return s.text(_)});case"card":return S=c.url,s.a(".action-card",{href:S},function(){return s.text(_)});case"board":return S=c.url,s.a({href:S},function(){return s.text(_)});case"organization":return S=c.url,s.a({href:S},function(){return s.text(_||s.l("an-organization"))});case"checkItem":return m=c.nameHtml,m?s.raw(m):s.text(_);case"comment":return k=c.textHtml,t=o.canEdit,x=f.truncateComment,s.div(".comment-container",function(){var e;return e={"action-comment":!0,markeddown:!0,"js-comment":!0,"is-truncated":x},s.div({class:s.classify(e)},function(){return x&&s.div(".action-comment-fade-button.js-expand-comment"),s.div(".current-comment.js-friendly-links.js-open-card",function(){return s.raw(k)}),t?s.div(".comment-box",function(){return s.textarea(".comment-box-input.js-text",{tabindex:"1"},function(){return s.text(_)}),i()}):void 0})});case"label":return n=c.color,r={"card-label":!0},r[n+"-label"]=!0,C=_||n+" label (default)",s.span({class:s.classify(r),title:C},function(){return _?s.text(_):s.raw("&nbsp;")});case"attachment":return h=c.link,S=c.url,p=c.isTrelloAttachment,d=c.isTrello,l=c.id,h?p?s.a(".js-open-attachment-viewer",{href:S,"data-idattachment":l},function(){return s.text(_)}):d?s.a(".js-friendly-links",{href:S},function(){return s.text(_)}):s.a(".js-friendly-links",{href:S,target:"_blank"},function(){return s.text(_)}):s.span(".attachment-deleted",function(){return s.text(_)});case"attachmentPreview":if(y=c.previewUrlForRes,g=c.originalUrl,l=c.id,w=f.showCompactAttachmentPreview,y)return r={"js-open-attachment-viewer":!w,"js-open-card":w,"js-friendly-links":!0},v={"attachment-image-preview":!0,"mod-compact-image-preview":w},s.a({class:s.classify(r),href:g,target:"_blank","data-idattachment":l},function(){return s.img({class:s.classify(v),src:y})});break;case"member":return l=c.id,e=c.avatarHash,M=c.username,s.span(".inline-member.js-show-mem-menu",{idMember:l},function(){return e&&(C=_+" ("+M+")",s.img(".inline-member-av",{src:[window.avatarDomain,e,"30.png"].join("/"),alt:C,title:C})),s.span(".u-font-weight-bold",function(){return s.text(_)})});case"relDate":return u=c.date,a=c.current,s.span(".rel-date",{dt:u,text:_},function(){return s.text(a)});case"plugin":return s.text(s.mustacheVar("text"))}}),t}(o.Component)},{}],673:[function(e,t,r){var n,o;o=e(436)("entity"),n=e(661),t.exports=o.renderable(function(e,t,r){var i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S;switch(x=e.type,w=e.text,x){case"text":case"list":case"checklist":case"plugin":case"date":return o.text(w);case"card":return j=e.url,o.a(".action-card",{href:j},function(){return o.text(w)});case"board":return j=e.url,o.a({href:j},function(){return o.text(w)});case"organization":return j=e.url,o.a({href:j},w||o.l("an-organization"));case"checkItem":return f=e.nameHtml,f?o.raw(f):o.text(w);case"comment":return _=e.textHtml,s=t.canEdit,C=r.truncateComment,o.div(".comment-container",function(){var e;return e={"action-comment":!0,markeddown:!0,"js-comment":!0,"is-truncated":C},o.div({class:o.classify(e),dir:"auto"},function(){return C&&o.div(".action-comment-fade-button.js-expand-comment"),o.div(".current-comment.js-friendly-links.js-open-card",function(){return o.raw(_)}),s?o.div(".comment-box",function(){return o.textarea(".comment-box-input.js-text",{tabindex:"1"},function(){return o.text(w)}),n()}):void 0})});case"label":return u=e.color,a={"card-label":!0},a[u+"-label"]=!0,k=w||u+" label (default)",o.span({class:o.classify(a),title:k},function(){return w?o.text(w):o.raw("&nbsp;")});case"attachment":return m=e.link,j=e.url,h=e.isTrelloAttachment,p=e.isTrello,d=e.id,m?h?o.a(".js-open-attachment-viewer",{href:j,"data-idattachment":d},function(){return o.text(w)}):p?o.a(".js-friendly-links",{href:j},function(){return o.text(w)}):o.a(".js-friendly-links",{href:j,target:"_blank"},function(){return o.text(w)}):o.span(".attachment-deleted",function(){return o.text(w)});case"attachmentPreview":if(y=e.previewUrlForRes,g=e.originalUrl,d=e.id,b=r.showCompactAttachmentPreview,y)return a={"js-open-attachment-viewer":!b,"js-open-card":b,"js-friendly-links":!0},v={"attachment-image-preview":!0,"mod-compact-image-preview":b},o.a({class:o.classify(a),href:g,target:"_blank","data-idattachment":d},function(){return o.img({class:o.classify(v),src:y})});break;case"member":return d=e.id,i=e.avatarHash,S=e.username,o.span(".inline-member.js-show-mem-menu",{idMember:d},function(){return i&&(k=w+" ("+S+")",o.img(".inline-member-av",{src:[window.avatarDomain,i,"30.png"].join("/"),alt:k,title:k})),o.span(".u-font-weight-bold",function(){return o.text(w)})});case"relDate":return l=e.date,c=e.current,o.span(".rel-date",{dt:l,text:w},function(){return o.text(c)});case"plugin":return o.text(o.mustacheVar("text"))}})},{}],674:[function(e,t,r){var n;n=e(436)("error"),t.exports=n.renderable(function(e){var t,r,o,i,s,a,u,c,l;switch(s=e.isLoggedIn,l=e.url,r=e.errorType,a=e.modelType,t=e.email,c=function(e){return n.div(".big-message.with-picture.quiet",function(){return n.img({src:"https://d78fikflryjgj.cloudfront.net/images/656dc3a1db8d11cde974d7402898fb75/TacoBouncer.png",width:"459",height:"238"}),n.h1(function(){return n.format("roooooo-are-you")}),n.p(function(){return n.format(e)}),n.div(".callout",function(){return n.ol(function(){return n.li(function(){return n.format("check-your-email-at-email",{email:t})}),n.li(function(){return n.format("look-for-an-email-with-the-subject-trello-account-confirmation")}),n.li(function(){return n.format("click-on-the-confirmation-link-done")})})}),n.p(function(){return n.format("dont-see-anything-from-us"),n.raw(" "),n.a(".quiet.js-resend-confirmation-email",{href:"#"},function(){return n.format("resend-confirmation-link")})})})},u=function(e,t,r){return n.div(".big-message.quiet",function(){n.h1(function(){return n.format(e)}),s?n.p(function(){return n.format(r)}):n.p(function(){return n.format(t,{url:l})})})},i=function(e){return n.div(".big-message.quiet",function(){return n.h1(function(){return n.format(e)}),n.p(function(){return n.format("ask-for-a-new-link")})})},o=function(e){return n.div(".big-message.quiet",function(){return n.h1(function(){return n.format(e)})})},r){case"notFound":return u("page-not-found","this-page-may-be-private-you-may-be-able-to-view-it-by-logging-in","this-page-may-be-private-if-someone-gave-you-this-link-they-may-need-to-invite-you-to-one-of-their-boards-or-organizations");case"boardNotFound":return u("board-not-found","this-board-may-be-private-you-may-be-able-to-view-it-by-logging-in","this-board-may-be-private-if-someone-gave-you-this-link-they-may-need-to-invite-you-to-one-of-their-boards-or-organizations");case"cardNotFound":return u("card-not-found","this-card-may-be-on-a-private-board-you-may-be-able-to-view-it-by-logging-in","this-card-may-be-on-a-private-board-if-someone-gave-you-this-link-they-may-need-to-invite-you-to-one-of-their-boards-or-organizations");case"boardInvitationNotFound":return i("board-invitation-not-valid");case"orgInvitationNotFound":return i("org-invitation-not-valid");case"memberMustBeInEnterprise":return o("member-must-be-in-enterprise");case"unconfirmedOrgNotFound":return c("please-confirm-your-email-address-to-view-this-org");case"unconfirmedBoardNotFound":return c("please-confirm-your-email-address-to-view-this-board");default:return n.div(".big-message.quiet",function(){return n.h1(function(){return n.format("page-not-found")})})}})},{}],675:[function(e,t,r){var n;n=e(436)("filter_cards"),t.exports=function(){return n.input(".js-input.js-autofocus",{type:"text",attr:"title",value:n.mustacheVar("title"),style:"margin-bottom: 0;"}),n.div(".js-filter-search-results")}},{}],676:[function(e,t,r){var n;n=e(436)("filter_cards_search_results"),t.exports=function(){return n.mustacheBlock("showHelper",function(){return n.p(".quiet",{style:"padding: 10px 8px 2px; margin-bottom: 0;"},function(){return n.format("type-to-filter-by-term-or-search-for-labels-members-or-due-times")})}),n.mustacheBlock("showLabels",function(){return n.hr(),n.ul({class:"label-list"+n.mustacheBlock("limitLabels",function(){return" limited"})},function(){return n.mustacheBlock("labels",function(){return n.li({class:"label-list-item"+n.mustacheBlock("isActive",function(){return" is-active"})},function(){return n.a(".label-list-item-link.js-toggle-label-filter",{href:"#","data-name":n.mustacheVar("color"),"data-idlabel":n.mustacheVar("id")},function(){return n.div(".label-list-item-link-label",function(){return n.span({class:"card-label mod-square card-label-"+n.mustacheVar("color")})}),n.mustacheBlock("name",function(){return n.span(".label-list-item-link-name",function(){return n.text(n.mustacheVar("name"))})}),n.mustacheBlockInverted("name",function(){return n.span(".label-list-item-link-name.mod-quiet",function(){return n.format("color-label-default",{color:n.mustacheVar("defaultColorName")})})}),n.icon("check",{class:"label-list-item-link-icon"})})})}),n.mustacheBlock("limitLabels",function(){return n.li(".label-list-item.js-show-all-labels-elem",function(){return n.a(".label-list-item-link.js-show-all-labels",{href:"#"},function(){return n.span(".label-list-item-link-name.mod-quiet",function(){return n.format("show-all-labels-remaininglabels-hidden",{remainingLabels:n.mustacheVar("remainingLabels")})})})})})})}),n.mustacheBlock("showMembers",function(){return n.hr(),n.ul({class:"pop-over-member-list checkable js-mem-list"+n.mustacheBlock("limitMembers",function(){return" limited"})},function(){return n.mustacheBlock("members",function(){return n.mustachePartial("select_member")})}),n.mustacheBlock("limitMembers",function(){return n.ul(".pop-over-member-list",function(){return n.li(".item",function(){return n.a(".name.quiet.js-show-all-members",{href:"#",style:"padding-left: 42px; font-weight: normal; margin-top: 4px;"},function(){return n.format("show-all-members-remainingmembers-hidden",{remainingMembers:n.mustacheVar("remainingMembers")})})})})})}),n.mustacheBlock("showDueTimes",function(){return n.hr(),n.ul(".pop-over-list.checkable.navigable.inset.normal-weight",function(){return n.mustacheBlock("dueOptions",function(){return n.li({class:"item "+n.mustacheBlock("isActive",function(){return" active"})},function(){return n.a(".js-due-filter",{href:"#",time:n.mustacheVar("time"),style:"padding-left: 40px;"},function(){return n.text(n.mustacheVar("desc")),n.icon("check")})})})})}),n.hr(),n.ul(".pop-over-list.inset.normal-weight",function(){return n.li(function(){return n.a({href:"#",class:"js-clear-all"+n.mustacheBlockInverted("isFiltering",function(){return" disabled"}),style:"padding-left: 40px;"},function(){return n.format("clear-filter")})})})}},{}],677:[function(e,t,r){var n;n=e(436)("formatting_help"),t.exports=function(){return n.p(function(){return n.format("trello-uses-markdown-for-formatting-here-are-the-basics-see-the-complete-syntax")}),n.hr(),n.p(".quiet",function(){return n.format("first-level-header")}),n.code(function(){return n.format("making-scrambled-eggs-a-primer"),n.br(),n.text("\n    ===============================\n  ")}),n.hr(),n.p(".quiet",function(){return n.format("second-level-header")}),n.code(function(){return n.format("1-1-preparation"),n.br(),n.text("\n    ----------------\n  ")}),n.hr(),n.p(".quiet",function(){return n.format("paragraphs")}),n.code(function(){return n.format("add-two-new-lines-to-start-a-new-paragraph-crack-two-eggs-into-the-bowl-and-whisk")}),n.hr(),n.p(".quiet",function(){return n.format("bold")}),n.code(function(){return n.format("carefully-crack-the-eggs")}),n.hr(),n.p(".quiet",function(){return n.format("emphasis")}),n.code(function(){return n.format("whisk-the-eggs-vigorously")}),n.hr(),n.p(".quiet",function(){return n.format("lists")}),n.code(function(){return n.format("ingredients"),n.br(),n.br(),n.format("eggs"),n.br(),n.format("oil"),n.br(),n.format("optional-milk")}),n.hr(),n.p(".quiet",function(){return n.format("links")}),n.code(function(){return n.format("to-download-a-pdf-version-of-the-recipe-click-here-https-example-com-scrambled-eggs-pdf")}),n.hr(),n.p(".quiet",function(){return n.format("images")}),n.code(function(){return n.format("the-finished-dish-https-example-com-eggs-png")})}},{}],678:[function(e,t,r){var n;n=e(436)("header_add_menu"),t.exports=function(){return n.ul(".pop-over-list",function(){return n.li(function(){return n.a(".js-new-board",{href:"#"},function(){return n.format("create-board-ellipsis-a-board-is-a-collection-of-cards-ordered-in-a-list-of-lists-use-it-to-manage-a-project-track-a-collection-or-organize-anything")})}),n.li(function(){return n.a(".js-new-org",{href:"#"},function(){return n.format("create-personal-organization-ellipsis-an-organization-is-a-group-of-boards-and-people-use-it-to-group-boards-in-your-company-team-or-family")})}),n.li(function(){return n.a(".js-new-bc-org",{href:"#"},function(){return n.format("create-business-organization-ellipsis-with-business-class-your-team-has-more-security-administrative-controls-and-superpowers")})})})}},{}],679:[function(e,t,r){var n,o;o=e(436)("header_announcements"),n=e(593),t.exports=o.renderable(function(e){return e.forEach(n),o.div(".announcement-elsewhere",function(){return o.p(".quiet",{style:"margin: 0 4px 5px;"},function(){return o.format("for-more-updates-check-out-ellipsis")}),o.a(".announcement-elsewhere-blog.js-blog",{target:"_blank",href:"http://blog.trello.com"},function(){return o.span(".announcement-elsewhere-blog-icon.icon-lg.icon-board"),o.span(".u-text-underline",function(){return o.format("trello-blog")})}),o.a(".announcement-elsewhere-social.js-t",{target:"_blank",href:"https://www.twitter.com/trello"},function(){return o.span(".icon-lg.icon-twitter")}),o.a(".announcement-elsewhere-social.js-fb",{target:"_blank",href:"https://www.facebook.com/TrelloApp"},function(){return o.span(".icon-lg.icon-facebook")}),o.a(".announcement-elsewhere-social.js-g",{target:"_blank",href:"https://plus.google.com/103127084407107005900/posts"},function(){return o.span(".icon-lg.icon-google")})})})},{}],680:[function(e,t,r){var n;n=e(436)("header_boards_menu_button"),t.exports=function(){return n.a(".header-btn.header-boards.js-boards-menu",{href:"#"},function(){return n.span(".header-btn-icon.icon-lg.icon-board.light"),n.span(".header-btn-text",function(){return n.format("boards")})})}},{}],681:[function(e,t,r){var n;n=e(436)("header_channel_picker"),t.exports=function(){return n.mustacheBlock("cookie",function(){return n.p(function(){return n.format("you-have-a-version-cookie-set-this-is-a-feature-intended-for-client-developers-and-testers-and-will-prevent-you-from-changing-channels")}),n.input(".js-remove-cookie.wide.primary",{type:"button",value:n.l("remove-cookie")})}),n.mustacheBlockInverted("cookie",function(){return n.ul(".pop-over-list",function(){
return n.mustacheBlock("channels",function(){return n.li(function(){return n.a(".js-select",{href:"#",name:n.mustacheVar("name")},function(){return n.text(n.mustacheVar("displayName")),n.mustacheBlock("active",function(){return n.icon("check")})})})}),n.mustacheBlock("dev",function(){return n.hr(),n.li(function(){return n.a(".js-select-dev",{href:"#",name:n.mustacheVar("name")},function(){return n.format("pick-a-version")})}),n.hr(),n.pre({style:"margin-bottom: 0;"},function(){return n.text(n.mustacheVar("version"))})})})})}},{}],682:[function(e,t,r){var n;n=e(436)("header_info_menu"),t.exports=n.renderable(function(){var e;return n.div(".js-fill-tip"),n.a({class:"next-tip-link js-new-tip",href:"#"},n.l("get-new-tip")),n.hr(),e=function(e,t,r){return n.li(".meta-link-list-item",function(){return n.a({class:"meta-link-list-item-link js-meta-page-link",href:e,"data-metapagename":t,target:"_blank"},n.l(r))})},n.ul(".meta-link-list",function(){return e("/tour","Tour","tour"),e("/pricing","Pricing","pricing"),e("/platforms","Apps","apps"),e("http://blog.trello.com","Blog","blog"),n.span(".js-more-menu-button",function(){return n.li(".meta-link-list-item",function(){return n.a({class:"meta-link-list-item-link js-meta-page-more-link",href:"#"},n.l("more"))})}),n.span(".js-more-menu.hide",function(){return e("http://help.trello.com","Help","help"),e("/jobs","Jobs","jobs"),e("https://developers.trello.com","Developers","developers"),e("/about","About","about"),e("/legal","Legal","legal")})})})},{}],683:[function(e,t,r){var n,o,i;i=e(436)("header_invite"),n=window.avatarDomain,o=function(e,t,r){var o;return o=t+" ("+r+")",{src:[n,e,"30.png"].join("/"),alt:o,title:o}},t.exports=i.renderable(function(e){var t,r,n,s,a,u,c,l,d,p;return a=e.isInviter,n=e.ghost,l=e.modelName,c=e.memberAdder,t=e.avatarHash,r=e.fullName,p=e.username,d=e.modelType,u=e.isLoggedIn,s=e.isBoard,i.div(".invited-message",function(){return i.a(".js-ignore-invite.icon-lg.icon-close.dialog-close-button",{href:"#"}),i.h1(function(){return a?i.format("you-invited-ghost-fullname-to-collaborate-on-modelname",{"ghost.fullName":n.fullName,modelName:l}):c?i.format("fullname-has-invited-you-to-collaborate-on-modelname",{fullName:c.fullName,modelName:l}):i.format("youve-been-invited-to-collaborate-on-modelname",{modelName:l})}),u?(a||i.p({style:"min-height: 20px;"},function(){return n.email?(i.format("your-account"),t&&i.img(".inline-member-av",o(t,r,p)),i.format("fullname-username-hasnt-logged-in-with-ghost-email",{fullName:r,username:p,"ghost.email":n.email})):void 0}),a?i.a(".button.js-create-new-account.primary",{href:"#"},function(){return i.format("create-new-account-for-ghost-fullname",{"ghost.fullName":n.fullName})}):(i.a(".button.js-join-model.primary",{href:"#"},function(){return s?i.format("add-this-email-to-my-account-and-join-board"):i.format("add-this-email-to-my-account-and-join-org")}),i.a(".button.js-create-new-account",{href:"#"},function(){return i.format("create-new-account")}))):i.a(".button.primary.js-join-model",{href:"#"},function(){return s?i.format("join-board"):i.format("join-org")})})})},{}],684:[function(e,t,r){var n;n=e(436)("header_logo"),t.exports=function(){return n.a(".header-logo.js-home-via-logo",{href:"/","aria-label":n.l("trello-home")},function(){return n.span(".header-logo-loading"),n.span(".header-logo-default")})}},{}],685:[function(e,t,r){var n;n=e(436)("header_member_menu"),t.exports=n.renderable(function(e){var t,r,o,i,s,a,u,c,l;return u=e.hasAccount,l=e.profileUrl,s=e.cardsUrl,r=e.billingUrl,t=e.accountUrl,o=e.blogUrl,i=e.canLogOut,a=function(e,t,r){return n.li(function(){var o;return o={class:r,href:e},n.a(o,function(){return n.format(t)})})},c=function(e){return n.ul(".pop-over-list",e)},c(function(){return a(l,"profile","js-profile"),a(s,"cards","js-cards"),u&&a(r,"billing","js-billing"),a(t,"settings","js-account")}),n.hr(),c(function(){return a("/contact","help","js-help"),a("/shortcuts","shortcuts","js-shortcuts"),a("#","change-locale","js-change-locale")}),n.hr(),c(function(){return n.li(function(){return n.a(".js-logout",{href:"#"},function(){n.format("log-out"),i||(n.br(),n.format("you-ll-need-to-set-a-password-first"))})})})})},{}],686:[function(e,t,r){var n;n=e(436)("header_notification_list_menu"),t.exports=function(){return n.mustacheBlockInverted("hasNotifications",function(){return n.p(".empty",{style:"padding: 24px 6px;"},function(){return n.format("no-notifications")})}),n.mustacheBlock("hasNotifications",function(){return n.ul(".pop-over-list.mod-add-top-margin",function(){return n.li(function(){return n.a(".js-view-all-notifications",{href:n.mustacheVar("noteUrl")},function(){return n.mustacheBlock("remainingUnread",function(){return n.format("see-all-notifications-remainingunread-more-unread",{remainingUnread:n.mustacheVar("remainingUnread")})}),n.mustacheBlockInverted("remainingUnread",function(){return n.format("see-all-notifications")})})}),n.li(function(){return n.a(".js-change-email-frequency",{href:"#"},function(){return n.format("change-notification-email-frequency")})}),n.mustacheBlock("canAllowDesktopNotifications",function(){return n.li(function(){return n.a(".js-allow-desktop-notifications",{href:"#"},function(){return n.format("allow-desktop-notifications")})})})})})}},{}],687:[function(e,t,r){var n;n=e(436)("header_promo_nav"),t.exports=function(){return n.nav(".promo-nav",function(){return n.a(".promo-nav-button",{href:"/"},function(){return n.format("home")}),n.a(".promo-nav-button",{href:"/tour"},function(){return n.format("tour")}),n.a(".promo-nav-button",{href:"http://blog.trello.com",target:"_blank"},function(){return n.format("blog")})})}},{}],688:[function(e,t,r){var n;n=e(436)("header_public_board"),t.exports=function(){return n.p(".u-bottom",function(){return n.mustacheBlock("interactionText",function(){return n.span(".u-inline-block",function(){return n.text(n.mustacheVar("interactionText"))})}),n.span(".u-inline-block",function(){return n.format("sign-up-for-free-or-learn-more-about-trello",{signupUrl:n.mustacheVar("signupUrl"),tourUrl:n.mustacheVar("tourUrl")})})})}},{}],689:[function(e,t,r){var n;n=e(436)("header_search"),t.exports=function(){return n.a(".header-btn.open-search-btn.js-open-search-page",{href:"/search",title:n.l("search-for-boards-cards-members-and-organizations")},function(){return n.span(".header-btn-icon.icon-lg.icon-search.light")}),n.div(".header-search",function(){return n.input(".header-search-input.js-search-input.js-disable-on-dialog",{type:"text",autocomplete:"off",autocorrect:"off",spellcheck:"false",value:n.mustacheVar("query")}),n.span(".header-search-icon.icon-lg.icon-search.light.js-search-icon.js-search-focus"),n.span(".header-search-icon.header-search-icon-close.icon-lg.icon-close.light.hide.js-close-icon.js-search-close"),n.a(".header-search-icon.header-search-icon-open.icon-lg.icon-external-link.light.hide.js-open-button.js-open-search-page",{href:"#"})})}},{}],690:[function(e,t,r){var n;n=e(436)("header_signup_login"),t.exports=function(){return n.a(".header-btn.header-signup",{href:"/signup"+n.mustacheBlock("escapedReturnUrl",function(){return"?returnUrl="+n.mustacheVar("escapedReturnUrl")})},function(){return n.format("sign-up")}),n.a(".header-btn.header-login.no-right-margin",{href:"/login"+n.mustacheBlock("escapedReturnUrl",function(){return"?returnUrl="+n.mustacheVar("escapedReturnUrl")})},function(){return n.format("log-in")})}},{}],691:[function(e,t,r){var n;n=e(436)("header_user"),t.exports=function(){return n.mustacheBlock("__loggedIn",function(){return n.a(".header-btn.js-open-add-menu",{href:"#","aria-label":n.l("create-board-or-org")},function(){return n.span(".header-btn-icon.icon-lg.icon-add.light")}),n.a(".header-btn.header-member.js-open-header-member-menu",{href:"#","aria-label":n.l("member-menu")},function(){return n.span({class:"member"+n.mustacheBlock("hasCrown",function(){return" has-crown"})}),n.span(".header-btn-text.js-member-name")}),n.a(".header-btn.js-open-header-info-menu",{href:"#","aria-label":n.l("open-information-menu")},function(){return n.span(".header-btn-icon.icon-lg.icon-information.light")}),n.a(".header-btn.header-notifications.js-open-header-notifications-menu",{href:"#","aria-label":n.l("notifications-menu")},function(){return n.span(".header-btn-icon.icon-lg.icon-notification.light")}),n.mustacheBlock("showChannelPicker",function(){return n.a(".header-btn.header-btn-channel-picker.js-open-channel-picker",{href:"#","aria-label":n.l("switch-channels")},function(){return n.span(".header-btn-icon.icon-lg.icon-gear.light")})})}),n.mustacheBlockInverted("__loggedIn",function(){return n.mustachePartial("header_signup_login")})}},{}],692:[function(e,t,r){var n;n=e(436)("header_version_picker"),t.exports=function(){return n.div(".form-grid",function(){return n.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return n.span(".label",function(){return n.format("head")}),n.span(".value",function(){return n.text(n.mustacheVar("active.name"))}),n.label(function(){return n.format("head")}),n.select(".js-select-head",function(){return n.mustacheBlock("heads",function(){return n.optionSelected(n.mustacheVar("selected"),{value:n.mustacheVar("value")},function(){return n.text(n.mustacheVar("displayName")),n.mustacheBlock("selected",function(){return n.format("current")})})})})}),n.mustacheBlock("versions.2.value",function(){return n.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return n.span(".label",function(){return n.format("version")}),n.span(".value",function(){return n.text(n.mustacheVar("active.version"))}),n.label(function(){return n.format("version")}),n.select(".js-select-version",function(){return n.mustacheBlock("versions",function(){return n.optionSelected(n.mustacheVar("selected"),{value:n.mustacheVar("value")},function(){return n.text(n.mustacheVar("displayName")),n.mustacheBlockInverted("active",function(){return n.text(" "),n.format("disabled")}),n.mustacheBlock("selected",function(){return n.text(" "),n.format("current")})})})})})})})}},{}],693:[function(e,t,r){var n;n=e(436)("header_warning_banner"),t.exports=function(){return n.p(".u-bottom",function(){return n.mustacheBlock("knownEmailProvider",function(){return n.format("please-confirm-your-email-address-email-check-your-inbox",{email:n.mustacheVar("email"),emailInboxUrl:n.mustacheVar("emailInboxUrl")}),n.a(".header-banner-link-left.quiet.js-resend-confirmation-email",{href:"#"},function(){return n.format("resend-email")})}),n.mustacheBlockInverted("knownEmailProvider",function(){return n.format("please-confirm-your-email-address-email",{email:n.mustacheVar("email")}),n.a(".header-banner-link-left.quiet.js-resend-confirmation-email",{href:"#"},function(){return n.format("resend-email")})})})}},{}],694:[function(e,t,r){var n;n=e(436)("header_warning_password"),t.exports=function(){return n.p(".u-bottom",function(){return n.format("we-ve-automatically-created-an-account-for-email-with-the-username-username",{email:n.mustacheVar("email"),username:n.mustacheVar("username")}),n.a(".quiet.js-change-password",{href:"/my/account"},function(){return n.format("add-a-password")})})}},{}],695:[function(e,t,r){var n;n=e(436)("hybrid_signup_login"),t.exports=function(){return n.div(".form-parts-container.u-clearfix",function(){return n.div(".form-tabs.js-tabs",function(){return n.a(".signup-form-tab.js-tab.active",{"data-content":"signup-form"},function(){return n.format("sign-up")}),n.a(".login-form-tab.js-tab",{"data-content":"login-form"},function(){return n.format("log-in")})}),n.div({class:"signup-form js-signup-form-pos js-form-part"+n.mustacheBlockInverted("hasAccount",function(){return" js-default-active"}),"data-id":"signup-form"},function(){return n.h1(function(){return n.format("new-to-trello")}),n.p(function(){return n.format("create-an-account-to-edit-this-board-create-new-boards-and-more")}),n.div(".tooltip.mod-margin.js-insert-tooltip"),n.form({action:"/signup-invitation",method:"post"},function(){return n.div(".quiet.js-bad-full-name.hide",function(){return n.format("your-name-must-be-at-least-4-characters")}),n.label({for:"display-name-create"},function(){return n.format("full-name")}),n.input({type:"text",name:"fullName",id:"display-name-create",value:n.mustacheVar("fullName")}),n.div(function(){return n.div(".quiet.js-bad-email.hide",function(){return n.format("you-must-enter-a-valid-email-address")}),n.div(".quiet.js-used-email.hide",function(){return n.format("that-email-address-is-in-use")}),n.label({for:"email-create"},function(){return n.format("email")}),n.input({type:"email",name:"email",id:"email-create",value:n.mustacheVar("email"),autocomplete:"off",autocorrect:"off",spellcheck:"false",autocapitalize:"off"})}),n.div(".quiet.js-bad-password.hide",function(){return n.format("password-is-too-short")}),n.label({for:"password-create"},function(){return n.format("password")}),n.input({type:"password",name:"password",id:"password-create"}),n.input({type:"hidden",name:"returnUrl",value:n.mustacheVar("returnUrl")}),n.input({type:"hidden",name:"idModel",value:""}),n.input({type:"hidden",name:"type",value:""}),n.input({type:"hidden",name:"token",value:""}),n.input(".primary.js-create-account",{type:"submit",value:n.l("okay-lets-go")})})}),n.div({class:"login-form js-login-form-pos js-form-part"+n.mustacheBlock("hasAccount",function(){return" js-default-active"}),"data-id":"login-form"},function(){return n.h1(function(){return n.format("already-have-an-account")}),n.p(function(){return n.format("hello-old-friend-just-log-in-and-you-ll-be-added")}),n.a(".button.primary",{href:"/login"+n.mustacheBlock("escapedReturnUrl",function(){return"?returnUrl="+n.mustacheVar("escapedReturnUrl")})},function(){return n.format("log-in")})}),n.div(".active-box.js-active-box.start")})}},{}],696:[function(e,t,r){t.exports={actions_empty:e(590),ad_business_class:e(591),ad_business_class_google_apps:e(592),archive_item:e(594),archived_card_options:e(595),archived_cards:e(596),archived_lists:e(597),atMention:e(598),attachment_viewer:e(601),attachment_viewer_frame:e(602),attachment_viewer_frame_details:e(603),avatar_change:e(604),badge:e(605),board:e(607),board_archive:e(608),board_background_options:e(609),board_background_selection:e(610),board_change_background:e(611),board_closed:e(612),board_desc:e(613),board_header:e(614),board_header_permissions:e(615),board_member_profile:e(616),board_menu_activity:e(617),board_menu_commenting:e(618),board_menu_default:e(619),board_menu_email:e(620),board_menu_invitations:e(621),board_menu_more:e(622),board_menu_more_activity_button:e(623),board_menu_settings:e(624),board_menu_subscribed_state:e(625),board_menu_vis:e(626),board_new:e(627),board_new_vis:e(628),board_observer_count:e(629),board_sidebar:e(630),boards_page_add_org_button:e(631),calendar_day:e(637),calendar_day_list_header:e(638),calendar_month:e(639),calendar_toolbar:e(640),calendar_week:e(641),cant_add_board_to_org:e(642),card_composer_inline:e(644),card_copy:e(645),card_detail_more_menu:e(649),card_in_list:e(652),card_menu_meta:e(653),card_title_on_card_front:e(654),change_org_vis:e(655),checklist:e(656),checklist_add_menu:e(657),checklist_item:e(658),closed_boards:e(659),comment_edit_controls:e(660),confirm:e(662),confirm_merge:e(663),connect_failed:e(664),crop_photo:e(665),dialog_close_button:e(667),edit_controls:e(668),embedly:e(670),empty_list:e(671),error:e(674),filter_cards:e(675),filter_cards_search_results:e(676),formatting_help:e(677),header_add_menu:e(678),header_boards_menu_button:e(680),header_channel_picker:e(681),header_logo:e(684),header_notification_list_menu:e(686),header_promo_nav:e(687),header_public_board:e(688),header_search:e(689),header_signup_login:e(690),header_user:e(691),header_version_picker:e(692),header_warning_banner:e(693),header_warning_password:e(694),hybrid_signup_login:e(695),index:e(696),invitation:e(697),kiln_changeset_preview:e(699),kiln_changeset_thumbnail:e(700),label_edit_component:e(702),list:e(703),list_add:e(704),list_bulk_card_move:e(705),list_copy:e(706),list_menu:e(707),manage_members_select_role:e(709),member:e(710),member_account:e(711),member_application:e(712),member_application_list:e(713),member_billing_org_link:e(715),member_billing_org_link_list:e(716),member_boards_list_ad:e(717),member_cards_base:e(718),member_cards_board:e(719),member_cards_card:e(720),member_cards_date:e(721),member_cards_filter:e(722),member_detail_profile_edit:e(724),member_detail_profile_info:e(725),member_gold_earned:e(726),member_gold_intro:e(727),member_inline:e(728),member_list_item_detail:e(730),member_login:e(731),member_on_board_menu:e(732),member_on_card:e(733),member_on_card_menu:e(734),member_profile:e(735),member_profile_info:e(736),member_session:e(737),member_session_list:e(738),members_voted:e(739),menu:e(740),menu_base:e(741),move_card_controls:e(743),observer_list:e(744),org_bc_intro:e(745),org_boards_for_member:e(746),org_create:e(747),org_detail_profile_edit:e(749),org_detail_profile_info:e(750),org_export:e(751),org_export_empty:e(752),org_export_item:e(753),org_link_ga_helper:e(754),org_member_activity:e(755),org_member_cards:e(756),org_pref_restriction:e(757),org_prefs_nonorg_invites:e(758),org_prefs_restrict_invites:e(759),org_prefs_vis:e(760),org_remove_or_deactivate_member:e(761),organization_list_item:e(762),organization_search_list_item:e(763),pop_over_ad:e(764),popover_add_email:e(765),popover_add_list:e(766),popover_auto_mentioner:e(767),popover_board_header_org_menu:e(768),popover_card_completer:e(769),popover_card_from_calendar:e(770),popover_change_board_org:e(771),popover_change_labels:e(772),popover_change_roles:e(773),popover_change_set_password:e(774),popover_change_user_info:e(775),popover_confirm_member_delete:e(776),popover_emoji_completer:e(777),popover_emoji_uploader:e(778),popover_filter_pos_results:e(779),popover_helper_new_board_add_org:e(780),popover_insertion_menu:e(781),popover_member_searcher:e(782),popover_move_card:e(783),popover_move_list:e(784),popover_org_logo:e(785),popover_rename_board:e(786),popover_select_members:e(787),popover_selector_menu:e(788),popover_set_email_freq:e(789),popover_share:e(790),power_up_item:e(791),power_up_item_details:e(792),power_ups_about_calendar:e(793),power_ups_about_card_aging:e(794),power_ups_about_voting:e(795),power_ups_calendar_prefs:e(796),power_ups_card_aging_prefs:e(797),power_ups_detail_navbar:e(798),power_ups_voting_prefs:e(799),product_promo_button:e(800),quick_card_editor:e(801),saved_search:e(802),search_instant_results:e(803),search_results_card:e(804),search_suggetion:e(805),search_suggetion_board:e(806),search_suggetion_member:e(807),select_card:e(808),select_emoji:e(809),select_labels:e(810),select_member:e(811),select_org_to_upgrade:e(812),shortcuts:e(813),sticker_on_card:e(814),sticker_pack_selection_list:e(815),sticker_select:e(816),sticker_select_item:e(817),sticker_select_item_upload:e(818),sync_error:e(819),take_photo:e(820),tooltip_content:e(823),woof_header:e(824)}},{}],697:[function(e,t,r){var n;n=e(436)("invitation"),t.exports=function(){return n.div(".phenom.invitation",function(){return n.mustacheBlock("MemberInviter",function(){return n.div(".creator.member.no-menu",function(){return n.mustachePartial("member")})}),n.div(".phenom-desc",function(){return n.p(function(){return n.mustacheBlock("MemberInviter",function(){return n.format("fullname-created-an-invitation-to",{fullName:n.mustacheVar("fullName")})}),n.span(".invitee",function(){return n.mustacheBlock("MemberInvited",function(){return n.mustachePartial("member_inline")}),n.mustacheBlockInverted("MemberInvited",function(){return n.text(n.mustacheVar("email")),n.mustacheBlockInverted("email",function(){return n.format("someone-new")})})})})}),n.p(".phenom-meta.quiet",function(){return n.mustacheBlock("dateExpires",function(){return n.span(".expiration-date",function(){return n.format("expires",{dateExpires:n.mustacheVar("dateExpires")})})}),n.mustacheBlock("canRemove",function(){return n.text(" - "),n.a(".u-inline-block.js-remove-invitation",{href:"#"},function(){return n.format("delete-invitation")})})})})}},{}],698:[function(e,t,r){var n;n=e(436)("invite_add_name"),t.exports=n.renderable(function(e){var t,r,o,i;return r=e.email,o=e.fullName,t=e.canAddAsObserver,i=e.modelType,n.p(".quiet",function(){if("Board"===i)return n.format("we dont know that person…board",{email:r});if("Organization"===i)return n.format("we dont know that person…team",{email:r});throw new Error("Expected either Board or Organization as modelType; got "+i)}),n.p(".error.hide.js-name-error",function(){return n.format("full-name-must-be-more-than-4-characters")}),n.form(".js-email-data",function(){return n.label(function(){return n.format("full-name")}),n.input(".js-autofocus.js-full-name",{type:"text",value:o}),n.input(".js-email",{type:"hidden",value:r}),t&&n.span(".check-div.quiet.u-clearfix",{style:n.stylify({"margin-left":"24px","padding-top":"2px","font-size":"12px","line-height":"15px"})},function(){return n.input({type:"checkbox",id:"addAsObserver"}),n.label({for:"addAsObserver"},function(){return n.format("include-this-member-as-a-view-only-observer")})}),n.input(".wide.primary.js-send-email-invite",{type:"submit",value:n.l("send")})})})},{}],699:[function(e,t,r){var n;n=e(436)("kiln_changeset_preview"),t.exports=function(){var e,t;return t=null!=(e=n.mustacheVar("reviews"))?e:[],n.div(".attachment-extra-info-header",function(){var e;return e=0===t.length?"changeset-no-reviews":"changeset",n.format(e,{url:n.mustacheVar("url"),shortHash:n.mustacheVar("shortHash"),author:n.mustacheVar("author")}),n.mustacheBlock("reviews",function(){return n.span(".quiet",function(){return n.a({href:n.mustacheVar("url"),target:"_blank"},function(){return n.text(n.mustacheVar("status"))})})})}),n.div(".attachment-extra-info-details.markeddown",function(){return n.raw(n.mustacheVar("commitMessageHtml"))})}},{}],700:[function(e,t,r){var n;n=e(436)("kiln_changeset_thumbnail"),t.exports=function(){return n.span({title:n.mustacheVar("commitMessage")},function(){return n.text(n.mustacheVar("shortCommitMessage"))}),n.span(".block.quiet",function(){var e,t,r;return r=null!=(t=n.mustacheVar("reviews"))?t:[],e=n.mustacheVar("date"),0!==r.length||e?0===r.length&&e?n.format("no-reviews-date",{date:e}):r.length>0&&!e?n.format("reviews-no-date"):r.length>0&&e&&n.format("reviews-date",{date:e}):n.format("no-reviews-no-date"),n.mustacheBlock("reviews",function(){return n.span(function(){return n.a({href:n.mustacheVar("url"),target:"_blank"},function(){return n.text(n.mustacheVar("status"))})})})})}},{}],701:[function(e,t,r){var n;n=e(436)("label"),t.exports=n.renderable(function(e){var t,r,o,i,s,a,u;if(o=e.color,u=e.name,i=e.extraClasses,r={"card-label":!0},o&&(r["card-label-"+o]=!0),i)for(s=0,a=i.length;a>s;s++)t=i[s],r[t]=!0;return n.span({class:n.classify(r),title:null!=u?u:o+" label (default)"},function(){return u?n.text(u):n.raw("&nbsp;")})})},{}],702:[function(e,t,r){var n;n=e(436)("label_edit_component"),t.exports=function(){return n.label({for:"labelName"},function(){return n.format("name")}),n.input(".js-autofocus.js-label-name",{id:"labelName",type:"text",name:"name",value:n.mustacheVar("label.name")}),n.label(function(){return n.format("select-a-color")}),n.mustacheBlock("colors",function(){return n.span({class:"card-label mod-edit-label mod-clickable card-label-"+n.mustacheVar("color")+" palette-color js-palette-color","data-color":n.mustacheVar("color")},function(){return n.span({class:"card-label-color-select-icon icon-sm icon-check light "+n.mustacheBlockInverted("selected",function(){return"hide"})+" js-palette-select"})})}),n.p(".u-bottom",function(){return n.format("no-color")}),n.p(".u-bottom.quiet",function(){return n.format("this-wont-show-up-on-the-front-of-cards")}),n.div(".u-clearfix",function(){return n.input(".primary.wide.js-submit",{type:"submit",value:n.mustacheVar("submitText")}),n.div(".u-float-right.js-accessory-view-holder")})}},{}],703:[function(e,t,r){var n;n=e(436)("list"),t.exports=n.renderable(function(e){var t,r,o;return r=e.name,o=e.subscribed,t=e.loggedIn,n.div(".list.js-list-content",function(){var e;return e={"list-header":!0,"js-list-header":!0,"u-clearfix":!0,"is-menu-shown":t,"is-subscribe-shown":o},n.div({class:n.classify(e)},function(){var e;return e={"list-header-name":!0,"mod-list-name":!0,"js-list-name-input":!0},n.div(".list-header-target.js-editing-target"),n.h2(".list-header-name-assist.js-list-name-assist",{dir:"auto"},r),n.textarea({class:n.classify(e),spellcheck:"false",dir:"auto"},r),n.p(".list-header-num-cards.hide.js-num-cards"),n.div(".list-header-extras",function(){var e;return e={"list-header-extras-subscribe":!0,"js-list-subscribed":!0},o||(e.hide=!0),n.span({class:n.classify(e)},function(){return n.icon("subscribe")}),t?n.a(".list-header-extras-menu.dark-hover.js-open-list-menu",{href:"#"},function(){return n.icon("overflow-menu-horizontal")}):void 0})}),n.a(".open-card-composer.js-open-card-composer",{href:"#"},function(){return n.format("add-a-card-ellipsis")})})})},{}],704:[function(e,t,r){var n;n=e(436)("list_add"),t.exports=function(){return n.form(function(){return n.span(".placeholder.js-open-add-list",function(){return n.format("add-a-list-ellipsis")}),n.input(".list-name-input",{type:"text",name:"name",placeholder:n.l("add-a-list-ellipsis"),autocomplete:"off",dir:"auto"}),n.div(".list-add-controls.u-clearfix",function(){return n.input(".primary.mod-list-add-button.js-save-edit",{type:"submit",value:n.l("save")}),n.a(".icon-lg.icon-close.dark-hover.js-cancel-edit",{href:"#"})})})}},{}],705:[function(e,t,r){var n;n=e(436)("list_bulk_card_move"),t.exports=function(){return n.form(function(){return n.ul(".pop-over-list",function(){return n.mustacheBlock("lists",function(){return n.li(function(){return n.a({href:"#",class:"js-select-list highlight-icon "+n.mustacheBlock("current",function(){return" disabled"}),name:n.mustacheVar("id")},function(){return n.text(n.mustacheVar("name")),n.mustacheBlock("current",function(){return n.text(" "),n.format("current")})})})})})})}},{}],706:[function(e,t,r){var n;n=e(436)("list_copy"),t.exports=function(){return n.label(function(){return n.format("name")}),n.textarea(".js-autofocus",{name:"name"},function(){return n.text(n.mustacheVar("name"))}),n.input(".primary.wide.js-submit",{type:"submit",value:n.l("create-list")})}},{}],707:[function(e,t,r){var n;n=e(436)("list_menu"),t.exports=function(){return n.ul(".pop-over-list",function(){return n.mustacheBlock("__ed",function(){return n.li(function(){return n.a(".js-add-card",{href:"#"},function(){return n.format("add-card-ellipsis")})}),n.li(function(){return n.a(".js-copy-list",{href:"#"},function(){return n.format("copy-list-ellipsis")})}),n.li(function(){return n.a(".js-move-list",{href:"#"},function(){return n.format("move-list-ellipsis")})})}),n.li(function(){return n.a(".highlight-icon.js-list-subscribe",{href:"#"},function(){return n.check(n.mustacheVar("subscribed"),"subscribe")})})}),n.mustacheBlock("__ed",function(){return n.hr(),n.ul(".pop-over-list",function(){return n.li(function(){return n.a(".js-move-cards",{href:"#"},function(){return n.format("move-all-cards-in-this-list-ellipsis")})}),n.li(function(){return n.a(".js-archive-cards",{href:"#"},function(){return n.format("archive-all-cards-in-this-list-ellipsis")})})})}),n.mustacheBlock("__ed",function(){return n.hr(),n.ul(".pop-over-list",function(){return n.li(function(){return n.a(".js-close-list",{href:"#"},function(){return n.format("archive-this-list")})})})})}},{}],708:[function(e,t,r){var n;n=e(436)("manage_members"),t.exports=n.renderable(function(e){var t,r,o,i,s,a,u,c,l,d,p,h;return r=e.canInviteMembers,h=e.placeholder,o=e.disableAddingExternalMembers,i=e.isBCOrgAdmin,d=e.orgSettingsURL,t=e.canAddMembers,l=e.orgName,a=e.isPerUser,s=e.isMonthly,u=e.isYearly,p=e.perUserPrice,c=e.orgMemsView,null==l&&(l=""),r&&(n.div(".search-with-spinner",function(){return n.input(".js-search-input.js-autofocus",{type:"text",style:"margin-bottom: 0;",placeholder:h}),n.div(".spinner.small.hide.js-loading")}),n.div(".manage-member-section.js-helper",function(){return n.p(".u-bottom.quiet",{style:"padding: 6px;"},function(){return n.format("search-for-a-person-in-trello-by-name-or-email-address-or-enter-an-email-address-to-invite-someone-new")})})),o&&(n.div(".search-with-spinner",function(){return n.input(".js-search-input.js-autofocus",{type:"text",style:"margin-bottom: 0;",placeholder:h}),n.div(".spinner.small.hide.js-loading")}),n.p(".warning",function(){return i?n.format("only-organization-members-can-be-added-to-this-board-to-change-this-visit-the-organization-settings-page-and-click-inviting-non-org-members-to-boards",{orgSettingsURL:d}):n.format("only-organization-members-can-be-added-to-this-board-check-with-an-organization-admin-to-change-this-setting")})),n.div(".manage-member-section.hide.js-board-members",function(){return n.ul(".pop-over-member-list.options.js-list")}),n.div(".manage-member-section.hide",function(){return n.h4(function(){return n.format("error")}),n.p(".error",function(){return n.format("the-user-or-email-could-not-be-invited-due-to-an-organization-restriction")})}),n.div(".manage-member-section.hide.js-error",function(){return n.p(".error",{style:"margin: 16px 8px 6px;"})}),t&&(n.div(".manage-member-section.hide.js-uninvited-search-results"),n.div(".manage-member-section.hide.js-search-results",function(){return n.h4(function(){return n.format("select-to-add")}),n.ul(".pop-over-member-list.options.js-list")}),n.div(".manage-member-section.hide.js-no-results",function(){return n.p(".quiet.u-text-align-center",{style:"padding: 16px 4px;"},function(){return n.format("no-results")})}),n.div(".manage-member-section.hide.js-org-members",function(){return n.h4(function(){return n.format("orgname-members",{orgName:l})}),n.ul(".pop-over-member-list.options.u-clearfix.js-list",{class:n.classify({collapsed:c}),style:n.stylify({"margin-bottom":c?"8px":void 0})}),n.a(".quiet-button.js-add-all-org-members",{href:"#",style:"margin-top: 8px;"}),n.a(".quiet-button.js-more-org-members.hide",{href:"#",style:"margin-top: 8px;"},function(){return n.format("view-all-members")})})),r&&n.div(".js-ad"),a&&(n.hr(),n.p(".quiet.u-bottom",{style:"padding: 6px;"},function(){return s&&n.format("business-class-pricing-is-per-user-adding-a-member-will-increase-the-price-by-jpsprice-per-month",{jpsPrice:p}),u?n.format("business-class-pricing-is-per-user-adding-a-member-will-increase-the-price-by-jpsprice-per-year",{jpsPrice:p}):void 0})),r?(n.hr(),n.a(".quiet-button.js-show-invitation-link",{href:"#"},function(){return n.format("you-can-also-invite-people-by-giving-them-a-special-link")}),n.div(".manage-member-invitation-link.hide.js-invitation-link-container",function(){return n.p(function(){return n.format("anyone-you-share-this-link-with-will-be-able-to-join"),n.span(".quiet",function(){return n.raw(" "),n.format("beta")})}),n.input(".js-invitation-link",{type:"text",readonly:"readonly",placeholder:n.l("loading")}),n.a(".quiet-button.js-deactivate-link",{href:"#"},function(){return n.format("disable-this-link")})})):void 0})},{}],709:[function(e,t,r){var n;n=e(436)("manage_members_select_role"),t.exports=function(){return n.ul(".pop-over-list",function(){return n.mustacheBlock("showAdmin",function(){return n.li(function(){return n.a(".js-invite.js-select-admin",{href:"#"},function(){return n.format("admin-roletext-admin",{roleText_admin:n.mustacheVar("roleText_admin")})})})}),n.li(function(){return n.a(".js-invite.js-select-member",{href:"#"},function(){return n.format("normal-roletext-normal",{roleText_normal:n.mustacheVar("roleText_normal")})})}),n.mustacheBlock("showObserver",function(){return n.li(function(){return n.a(".js-invite.js-select-observer",{href:"#"},function(){return n.format("observer"),n.icon("business-class"),
n.span(".sub-name",function(){return n.text(n.mustacheVar("roleText_observer"))})})})})})}},{}],710:[function(e,t,r){var n;n=e(436)("member"),t.exports=function(){return n.mustacheBlock("avatarHash",function(){return n.img(".member-avatar",{height:"30",width:"30",src:n.mustacheVar("__avatarDomain")+"/"+n.mustacheVar("avatarHash")+"/30.png",srcset:n.mustacheVar("__avatarDomain")+"/"+n.mustacheVar("avatarHash")+"/30.png 1x, "+n.mustacheVar("__avatarDomain")+"/"+n.mustacheVar("avatarHash")+"/50.png 2x",alt:n.mustacheVar("fullName")+" ("+n.mustacheVar("username")+")",title:n.mustacheVar("fullName")+" ("+n.mustacheVar("username")+")"})}),n.mustacheBlockInverted("avatarHash",function(){return n.span(".member-initials",{title:n.mustacheVar("fullName")+" ("+n.mustacheVar("username")+")"},function(){return n.text(n.mustacheVar("initials"))})}),n.mustacheBlockInverted("isDeactivated",function(){return n.mustacheBlock("isBoardAdmin",function(){return n.span(".member-type.admin",{title:n.l("this-member-is-an-admin-of-this-board")})}),n.mustacheBlock("isOrganizationAdmin",function(){return n.span(".member-type.admin",{title:n.l("this-member-is-an-admin-of-this-organization")})})}),n.span(".member-gold-badge",{title:n.l("this-member-has-trello-gold")})}},{}],711:[function(e,t,r){var n;n=e(436)("member_account"),t.exports=function(){return n.div(".window-module.u-clearfix",function(){return n.div(".window-module-title",function(){return n.h3(function(){return n.format("account-details")})}),n.a(".big-link.js-change-name-and-bio",{href:"#"},function(){return n.span(".text",function(){return n.format("change-name-initials-or-bio")})}),n.a(".big-link.js-change-avatar",{href:"#"},function(){return n.span(".text",function(){return n.format("change-avatar")})}),n.a(".big-link.js-change-password",{href:"#"},function(){return n.span(".text",function(){return n.mustacheBlock("hasPassword",function(){return n.format("change-password")}),n.mustacheBlockInverted("hasPassword",function(){return n.format("set-password")})})}),n.a(".big-link.js-change-locale",{href:"#"},function(){return n.span(".text",function(){return n.format("change-locale")})})}),n.mustacheBlock("showMobileLoginPassword",function(){return n.div(".window-module.u-clearfix",function(){return n.div(".window-module-title",function(){return n.h3(function(){return n.format("mobile-application-sign-in")})}),n.div(".u-gutter",function(){return n.input(".js-mobile-temp-password",{type:"button",value:n.l("generate-mobile-login-password")})})})}),n.div(".window-module.js-credentials-section",function(){return n.div(".window-module-title",function(){return n.h3(function(){return n.format("credentials")})}),n.div(".js-credentials-list.u-gutter",function(){return n.div(".spinner.loading")}),n.div(".u-gutter",function(){return n.input(".js-add-email",{type:"button",value:n.l("add-a-new-email-address")})})}),n.div(".window-module.u-clearfix",function(){return n.div(".window-module-title",function(){return n.h3(function(){return n.format("notifications")})}),n.a(".big-link.js-change-email-freq",{href:"#"},function(){return n.span(".text",function(){return n.format("change-notification-email-frequency")})}),n.mustacheBlock("canAllowDesktopNotifications",function(){return n.a(".big-link.js-allow-desktop-notifications",{href:"#"},function(){return n.span(".text",function(){return n.format("allow-desktop-notifications")})})})}),n.div(".window-module.u-clearfix",function(){return n.div(".window-module-title",function(){return n.h3(function(){return n.format("accessibility")})}),n.a(".big-link.js-toggle-cb-mode",{href:"#"},function(){return n.span(".text",function(){return n.mustacheBlock("cbEnabled",function(){return n.format("disable-color-blind-friendly-mode")}),n.mustacheBlockInverted("cbEnabled",function(){return n.format("enable-color-blind-friendly-mode")})})})}),n.div(".window-module",function(){return n.div(".window-module-title",function(){return n.h3(function(){return n.format("applications")})}),n.div(".js-member-applications",function(){return n.div(".spinner.loading")})}),n.div(".window-module",function(){return n.div(".window-module-title",function(){return n.h3(function(){return n.format("sessions")})}),n.div(".js-member-sessions.u-gutter",function(){return n.div(".spinner.loading")})}),n.div(".window-module.u-clearfix",function(){return n.div(".window-module-title",function(){return n.h3(function(){return n.format("two-factor-auth")})}),n.a(".big-link.js-configure-2fa",{href:"/2fa"},function(){return n.span(".text",function(){return n.format("configure-two-factor-authentication")})})}),n.div(".window-module",function(){return n.a(".quiet-button.u-gutter.js-confirm-delete-member",{href:"#",style:"margin-top: 32px;"},function(){return n.format("permanently-delete-your-entire-account-forever")})})}},{}],712:[function(e,t,r){var n;n=e(436)("member_application"),t.exports=function(){return n.div(".member-applications-list-item-details",function(){return n.h5(function(){return n.mustacheBlock("identifier",function(){return n.text(n.mustacheVar("identifier"))}),n.mustacheBlockInverted("identifier",function(){return n.format("unknown-application")})}),n.ul(".quiet",function(){return n.mustacheBlock("permissions",function(){return n.li(function(){return n.text(n.mustacheVar("."))})})}),n.p(".quiet",function(){return n.format("approved-dateapproved",{dateApproved:n.mustacheVar("dateApproved")}),n.br(),n.mustacheBlock("neverExpires",function(){return n.format("never-expires")}),n.mustacheBlockInverted("neverExpires",function(){return n.format("expires-dateexpires",{dateExpires:n.mustacheVar("dateExpires")})})})}),n.div(".member-applications-list-item-button",function(){return n.input(".js-revoke",{type:"button",value:n.l("revoke")})})}},{}],713:[function(e,t,r){var n;n=e(436)("member_application_list"),t.exports=function(){return n.mustacheBlockInverted("hasTokens",function(){return n.p(".big-link.none",function(){return n.format("no-applications-are-using-your-trello-account")})}),n.mustacheBlock("hasTokens",function(){return n.div(".member-applications-list.u-gutter.js-list-member-applications")})}},{}],714:[function(e,t,r){var n;n=e(436)("member"),t.exports=n.renderable(function(e){var t,r,o,i,s,a,u,c,l,d;return t=e.avatarHash,d=e.username,i=e.fullName,s=e.initials,u=e.isDeactivated,a=e.isBoardAdmin,c=e.isOrganizationAdmin,l=i+" ("+d+")",t?(r=[window.avatarDomain,t,"30.png"].join("/"),o=[window.avatarDomain,t,"50.png"].join("/"),n.img({class:"member-avatar",height:"30",width:"30",src:r,srcset:r+" 1x, "+o+" 2x",alt:l,title:l})):n.span(".member-initials",{title:l},function(){return n.text(s)}),u||(a&&n.span(".member-type.admin",{title:n.l("this-member-is-an-admin-of-this-board")}),c&&n.span(".member-type.admin",{title:n.l("this-member-is-an-admin-of-this-organization")})),n.span(".member-gold-badge",{title:n.l("this-member-has-trello-gold")})})},{}],715:[function(e,t,r){var n;n=e(436)("member_billing_org_link"),t.exports=function(){return n.li(function(){return n.a({href:n.mustacheVar("billingLink")},function(){return n.format("displayname-billing-page",{displayName:n.mustacheVar("displayName")})})})}},{}],716:[function(e,t,r){var n;n=e(436)("member_billing_org_link_list"),t.exports=function(){return n.div(".u-gutter.markeddown",function(){return n.div({style:"max-width: 450px;"},function(){return n.h3(function(){return n.format("looking-for-your-organization-s-billing-page")}),n.ul(".js-org-link-list"),n.p(".quiet",function(){return n.format("this-is-your-personal-billing-page-you-can-manage-the-billing-for-your-business-class-organizations-on-the-above-pages")})}),n.hr()})}},{}],717:[function(e,t,r){var n;n=e(436)("member_boards_list_ad"),t.exports=function(){return n.text(n.mustacheVar("copyHtml")),n.icon("close",{class:"dark-hover ad-close js-close-ad",href:"#"})}},{}],718:[function(e,t,r){var n;n=e(436)("member_cards_base"),t.exports=function(){return n.div(".window-module.u-gutter",function(){return n.a(".quiet-button.mod-with-image.js-toggle-sort",{href:"#"},function(){return n.icon("overflow-menu-horizontal",{class:"quiet-button-icon"}),n.span(".js-sort-text")})}),n.div(".js-cards-content")}},{}],719:[function(e,t,r){var n;n=e(436)("member_cards_board"),t.exports=function(){return n.div(".window-module-title",function(){return n.span(".window-module-title-icon.icon-lg.icon-board"),n.h3(function(){return n.a({href:n.mustacheVar("boardUrl")},function(){return n.text(n.mustacheVar("name"))})}),n.mustacheBlock("org",function(){return n.a(".u-inline-block.quiet",{style:"margin: 0 2px;",href:"/"+n.mustacheVar("name")},function(){return n.text(n.mustacheVar("displayName"))})}),n.span({class:"icon-sm icon-"+n.mustacheVar("permissionLevel")})}),n.div(".card-grid.u-gutter.u-clearfix.js-list")}},{}],720:[function(e,t,r){var n;n=e(436)("member_cards_card"),t.exports=function(){return n.div(".js-card"),n.p(".list-card-position.quiet",function(){return n.mustacheBlock("showBoard",function(){return n.format("in-listname-on-boardname",{listName:n.mustacheVar("listName"),boardName:n.mustacheVar("boardName")})}),n.mustacheBlockInverted("showBoard",function(){return n.format("in-listname",{listName:n.mustacheVar("listName")})})})}},{}],721:[function(e,t,r){var n;n=e(436)("member_cards_date"),t.exports=function(){return n.div(".window-module-title",function(){return n.span({class:"window-module-title-icon icon-lg icon-"+n.mustacheVar("iconType")}),n.h3(function(){return n.text(n.mustacheVar("header"))})}),n.div(".card-grid.u-gutter.u-clearfix.js-list")}},{}],722:[function(e,t,r){var n;n=e(436)("member_cards_filter"),t.exports=function(){return n.ul(".pop-over-list.checkable",function(){return n.li({class:n.mustacheBlock("board",function(){return"active"})},function(){return n.a(".highlight-icon.js-sort-by-board",{href:"#"},function(){return n.check(n.mustacheVar("board"),"sort-by-board")})}),n.li({class:n.mustacheBlock("date",function(){return"active"})},function(){return n.a(".highlight-icon.js-sort-by-due-date",{href:"#"},function(){return n.check(n.mustacheVar("date"),"sort-by-due-date")})})})}},{}],723:[function(e,t,r){var n;n=e(436)("member_detail"),t.exports=n.renderable(function(e){var t,r,o,i,s,a,u,c,l,d;return l=e.showOrgs,r=e.avatarHash,i=e.fullName,a=e.hasCrown,o=e.editable,u=e.initials,d=e.username,c=e.isMe,s=e.hasAccount,t=e.accountProblem,n.div(".tabbed-pane-header",function(){return n.div(".tabbed-pane-header-wrapper.u-clearfix",function(){return n.a({class:n.classify({"tabbed-pane-header-image":!0,"profile-image":!0,"is-editable":o,"js-change-avatar-profile":o,"is-gold":a}),href:"#"},function(){return r?n.img(".profile-image-image",{src:[avatarDomain,r,"170.png"].join("/"),alt:i}):n.span(".profile-image-initials",function(){return n.text(u)}),n.span(".profile-image-change-text",function(){return n.format("change-avatar")})}),n.div(".tabbed-pane-header-details",function(){return n.div(".js-current-details"),o?n.form(".js-profile-form.hide"):void 0})})}),n.div(".tabbed-pane-nav.u-clearfix",function(){return n.ul(function(){n.li(".tabbed-pane-nav-item",function(){return n.a(".tabbed-pane-nav-item-button.js-member-profile",{href:["",d].join("/")},function(){return n.format("profile")})}),n.li(".tabbed-pane-nav-item",function(){return n.a(".tabbed-pane-nav-item-button.js-member-cards",{href:["",d,"cards"].join("/")},function(){return n.format("cards")})}),c&&(n.li(".tabbed-pane-nav-item",function(){return n.a(".tabbed-pane-nav-item-button.js-member-account",{href:["",d,"account"].join("/")},function(){return n.format("settings")})}),t?n.li(".tabbed-pane-nav-item",function(){return n.a(".tabbed-pane-nav-item-button.js-billing",{href:["",d,"billing"].join("/")},function(){return n.format("billing-issue")})}):s?n.li(".tabbed-pane-nav-item",function(){return n.a(".tabbed-pane-nav-item-button.js-billing",{href:["",d,"billing"].join("/")},function(){return n.format("billing")})}):n.li(".tabbed-pane-nav-item",function(){return n.a(".tabbed-pane-nav-item-button.js-billing",{href:["",d,"billing"].join("/")},function(){return n.span(".icon-lg.icon-trello-gold.mod-inline.icon-trello-gold-color"),n.text(" "),n.format("trello-gold")})}))})}),n.div(".tabbed-pane-main-col.u-clearfix",function(){return n.div(".tabbed-pane-main-col-loading.hide.js-loading-page",function(){return n.span(".tabbed-pane-main-col-loading-spinner.spinner")}),n.div(".tabbed-pane-main-col-wrapper.js-content")})})},{}],724:[function(e,t,r){var n;n=e(436)("member_detail_profile_edit"),t.exports=function(){return n.p(".error.js-profile-form-error.hide"),n.label(function(){return n.format("full-name")}),n.input({type:"text",name:"fullName",value:n.mustacheVar("fullName"),dir:"auto"}),n.label(function(){return n.format("username")}),n.input({type:"text",name:"username",value:n.mustacheVar("username")}),n.label(function(){return n.format("initials")}),n.input({type:"text",name:"initials",value:n.mustacheVar("initials")}),n.label(function(){return n.format("bio-optional")}),n.textarea({name:"bio",dir:"auto"},function(){return n.text(n.mustacheVar("bio"))}),n.input(".primary.wide.js-submit-profile",{type:"submit",value:n.l("save")}),n.input(".js-cancel-edit-profile",{type:"button",value:n.l("cancel")})}},{}],725:[function(e,t,r){var n;n=e(436)("member_detail_profile_info"),t.exports=function(){return n.div(".tabbed-pane-header-details-name",function(){return n.h1(".u-inline",function(){return n.text(n.mustacheVar("fullName"))}),n.p(".window-title-extra.quiet",function(){return n.format("at-username",{username:n.mustacheVar("username")})}),n.mustacheBlock("hasCrown",function(){return n.span(".member-profile-gold-badge",function(){return n.icon("trello-gold",{class:"member-profile-gold-badge-icon"}),n.mustacheBlock("__ed",function(){return n.format("you-ve-got-trello-gold")}),n.mustacheBlockInverted("__ed",function(){return n.format("has-trello-gold")})})})}),n.div(".tabbed-pane-header-details-content",{dir:"auto"},function(){return n.mustacheBlock("bioHtml",function(){return n.raw(n.mustacheVar("bioHtml"))})}),n.mustacheBlock("__ed",function(){return n.a(".button-link.tabbed-pane-header-details-edit.js-edit-profile",{href:"#"},function(){return n.icon("edit","edit-profile")})})}},{}],726:[function(e,t,r){var n;n=e(436)("member_gold_earned"),t.exports=function(){return n.div(".window-module.gold-earned-modal",function(){return n.mustacheBlock("showClose",function(){return n.a(".icon-lg.icon-close.dark-hover.gold-earned-modal-close.js-close-modal",{href:"#"})}),n.img(".gold-earned-modal-image",{src:"https://d78fikflryjgj.cloudfront.net/images/3cbf48993d46484c5d82cc9c1844a54b/TrelloGoldIcon.png"}),n.h1(function(){return n.mustacheBlock("hasInvitations",function(){return n.format("youve-earned-trello-gold")}),n.mustacheBlockInverted("hasInvitations",function(){return n.format("youve-got-trello-gold")})}),n.p(function(){return n.text(n.mustacheVar("localizedCongratulations"))}),n.p(function(){return n.format("the-following-people-have-joined-trello-on-your-recommendation-or-invite"),n.ul(function(){return n.mustacheVar("joinedNames").forEach(function(e){return n.li(function(){return n.text(e)})})})}),n.p(".gold-earned-modal-learn-more.quiet",function(){return n.a({href:"/gold"},function(){return n.format("learn-more-about-trello-gold")})}),n.mustacheBlockInverted("hasGold",function(){return n.a(".gold-earned-modal-button.button.primary.js-start-using-gold",{href:"#"},function(){return n.format("start-using-trello-gold")})}),n.mustacheBlock("showClose",function(){return n.p(".quiet",{style:"margin-top: 16px;"},function(){return n.format("you-can-visit-your-account-settings-page-later-to-redeem-your-credits"),n.a(".js-close-modal",{href:"#"},function(){return n.format("okay-thanks-close-this-header-thing")})})})})}},{}],727:[function(e,t,r){var n;n=e(436)("member_gold_intro"),t.exports=function(){return n.div(".product-intro-modal.gold-intro",function(){return n.a(".icon-lg.icon-close.dark-hover.product-intro-close.js-close-intro-helper",{href:"#"}),n.div(".product-intro-header",function(){return n.img(".product-intro-logo",{src:"https://d78fikflryjgj.cloudfront.net/images/6d243fedef388195ac2dd4bf3f6fcfa5/TrelloGoldLogo.png",alt:"Trello Gold"})}),n.hr(),n.h2(function(){return n.format("yessssss-youve-got-trello-gold")}),n.p(function(){return n.format("here-s-what-you-need-to-know-to-get-started-ellipsis")}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.text("1")}),n.h3(function(){return n.format("stickers")}),n.p(function(){return n.format("check-out-the-stickers-pane-on-the-menu-of-any-board-you-can-view-and-stick-additional-stickers-and-upload-your-own-from-there")})}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.text("2")}),n.h3(function(){return n.format("board-backgrounds")}),n.p(function(){return n.format("check-out-the-settings-pane-in-the-menu-of-any-board-and-select-change-board-background-from-there-you-can-view-and-use-additional-backgrounds-and-upload-your-own")})}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.text("3")}),n.h3(function(){return n.format("larger-attachments")}),n.p(function(){return n.format("you-can-now-upload-files-up-to-250mb-just-select-a-file-via-attach-file-ellipsis-on-the-back-of-the-card-or-drag-and-drop-from-your-desktop")})}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.text("4")}),n.h3(function(){return n.format("uploading-custom-emoji")}),n.p(function(){return n.format("while-on-a-card-open-the-comment-field-click-the-menu-button-in-the-bottom-right-hand-corner-and-select-upload-emoji-you-can-upload-images-and-name-the-emoji-from-there")})}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.text("5")}),n.h3(function(){return n.format("billing-page")}),n.p(function(){return n.format("check-out-the-billing-tab-for-future-reference-you-can-see-when-your-account-will-renew-update-your-credit-card-info-see-billing-history-and-so-on-if-you-signed-up-via-credits-you-can-check-when-your-credits-expire-and-you-can-enter-a-credit-card-and-sign-up-for-a-subscription")})}),n.p(function(){return n.format("this-will-be-in-the-trello-gold-user-guide-for-future-reference-enjoy-and-thanks-for-upgrading")}),n.p(".product-intro-close-bottom.u-text-align-center.quiet",function(){return n.a(".js-close-intro-helper.dark-hover",{href:"#"},function(){return n.icon("close","got-it-close-this-helper",{class:"dark-hover"})})})})}},{}],728:[function(e,t,r){var n;n=e(436)("member_inline"),t.exports=function(){return n.mustacheBlock("avatarHash",function(){return n.img(".inline-member-av",{src:n.mustacheVar("__avatarDomain")+"/"+n.mustacheVar("avatarHash")+"/30.png",alt:n.mustacheVar("fullName")+" ("+n.mustacheVar("username")+")",title:n.mustacheVar("fullName")+" ("+n.mustacheVar("username")+")"})}),n.span(".u-font-weight-bold",function(){return n.text(n.mustacheVar("fullName"))})}},{}],729:[function(e,t,r){var n;n=e(436)("member_large_avatar"),t.exports=n.renderable(function(e){var t,r,o,i;return t=e.avatarHash,r=e.fullName,i=e.username,o=r+" ("+i+")",n.img({src:[window.avatarDomain,t,"original.png"].join("/"),alt:o,title:o})})},{}],730:[function(e,t,r){var n;n=e(436)("member_list_item_detail"),t.exports=function(){return n.div({class:"member member-no-menu"+n.mustacheBlock("isVirtual",function(){return" member-virtual"})+n.mustacheBlock("isDeactivated",function(){return" member-deactivated"})},function(){return n.mustachePartial("member")}),n.div(".details",function(){return n.p(".name-line",function(){return n.span(".full-name",function(){return n.text(n.mustacheVar("fullName"))})}),n.p(".u-bottom.quiet",function(){return n.mustacheBlock("username",function(){return n.span(".quiet.u-inline-block",function(){return n.format("at-username",{username:n.mustacheVar("username")})})}),n.mustacheBlock("showGoogleApps",function(){return n.mustacheBlock("gMail",function(){return n.mustacheBlock("username",function(){return n.text("- ")}),n.icon("google"),n.text(n.mustacheVar("gMail"))})})})}),n.div(".options",function(){return n.mustacheBlock("isOrgMember",function(){return n.mustacheBlock("showActivity",function(){return n.a(".option.quiet-button.js-view-activity",{href:"#"},function(){return n.format("activity")})}),n.mustacheBlock("allowTypeChange",function(){return n.a(".option.button-link.role-button.js-change-role",{href:"#"},function(){return n.text(n.mustacheVar("orgMemberType")),n.icon("overflow-menu-horizontal")})}),n.mustacheBlockInverted("allowTypeChange",function(){return n.p(".option.status.quiet",function(){return n.text(n.mustacheVar("orgMemberType"))})}),n.mustacheBlock("allowReactivate",function(){return n.a(".option.quiet-button.js-reactivate",{href:"#"},function(){return n.format("reactivate")})}),n.mustacheBlock("isMe",function(){return n.a({class:"option button-link remove-button js-remove-or-deactivate "+n.mustacheBlockInverted("canRemove",function(){return"disabled"}),href:"#"},function(){return n.mustacheBlock("orgIsBC",function(){return n.icon("close","leave-ellipsis")}),n.mustacheBlockInverted("orgIsBC",function(){return n.icon("close","leave")})})}),n.mustacheBlockInverted("isMe",function(){return n.mustacheBlock("ownsOrg",function(){return n.a({class:"option button-link remove-button js-remove-or-deactivate "+n.mustacheBlockInverted("canRemove",function(){return"disabled"}),href:"#"},function(){return n.icon("close","remove-ellipsis")})})})}),n.mustacheBlockInverted("isOrgMember",function(){return n.mustacheBlock("showGoogleApps",function(){return n.mustacheBlockInverted("hidden",function(){return n.a(".option.quiet-button.js-hide-member",{href:"#"},function(){return n.format("dismiss")})}),n.mustacheBlock("hidden",function(){return n.a(".option.quiet-button.js-unhide-member",{href:"#"},function(){return n.format("always-show")})}),n.a(".option.button-link.primary.js-invite-to-org",{href:"#"},function(){return n.icon("add","add-member")})})})})}},{}],731:[function(e,t,r){var n;n=e(436)("member_login"),t.exports=function(){return n.p(".member-login-email.u-bottom",function(){return n.text(n.mustacheVar("email"))}),n.mustacheBlock("primary",function(){return n.p(".u-bottom.quiet",function(){return n.format("primary-email")})}),n.mustacheBlockInverted("primary",function(){return n.a(".js-primary.u-bottom.quiet",{href:"#"},function(){return n.format("set-as-primary-email")})}),n.p(".member-login-date-added.u-bottom.quiet",function(){return n.format("added",{dateAdded:n.mustacheVar("dateAdded")})}),n.mustacheBlockInverted("primary",function(){return n.icon("close",{class:"member-login-remove dark-hover js-remove"})})}},{}],732:[function(e,t,r){var n;n=e(436)("member_on_board_menu"),t.exports=function(){return n.li(function(){return n.mustacheBlock("type",function(){return n.a({class:n.mustacheBlock("canChangeRole",function(){return"js-change-role"})+n.mustacheBlockInverted("canChangeRole",function(){return"disabled"}),href:"#"},function(){return n.format("change-permissions-ellipsis-type",{type:n.mustacheVar("type")})})}),n.mustacheBlockInverted("type",function(){return n.a({class:n.mustacheBlock("canChangeRole",function(){return"js-change-role"})+n.mustacheBlockInverted("canChangeRole",function(){return"disabled"}),href:"#"},function(){return n.format("change-permissions-ellipsis")})})}),n.li(function(){return n.a({href:n.mustacheVar("boardProfileUrl")},function(){return n.format("view-member-s-board-activity")})}),n.mustacheBlock("canRemove",function(){return n.li(function(){return n.a(".js-remove-member",function(){return n.mustacheBlock("isMe",function(){return n.format("leave-board-ellipsis")}),n.mustacheBlockInverted("isMe",function(){return n.format("remove-from-board-ellipsis")})})})}),n.mustacheBlockInverted("canRemove",function(){return n.mustacheBlock("isMe",function(){return n.mustacheBlock("isMoreThanOneMember",function(){return n.mustacheBlock("memberIsAdmin",function(){return n.li(function(){return n.hr(),n.p(".quiet.u-bottom",function(){return n.format("you-can-t-leave-because-you-are-the-only-admin-to-make-another-user-an-admin-click-their-avatar-select-change-permissions-ellipsis-and-select-admin")})})})})})}),n.mustacheBlock("isGhost",function(){return n.li(function(){return n.hr(),n.p(".quiet.u-bottom",function(){return n.format("this-user-will-be-able-to-access-this-board-once-they-sign-up-with-trello-and-confirm-their-email-address")})})})}},{}],733:[function(e,t,r){var n;n=e(436)("member_on_card"),t.exports=function(){return n.div({class:"member js-member-on-card-menu"+n.mustacheBlock("isDeactivated",function(){return" member-deactivated"})+n.mustacheBlock("isVirtual",function(){return" member-virtual"}),"data-idmem":n.mustacheVar("id")},function(){return n.mustachePartial("member")})}},{}],734:[function(e,t,r){var n;n=e(436)("member_on_card_menu"),t.exports=function(){return n.mustacheBlock("__ed",function(){return n.li(function(){return n.a(".js-remove-member",function(){return n.format("remove-from-card")})})})}},{}],735:[function(e,t,r){var n;n=e(436)("member_profile"),t.exports=function(){return n.div(".window-module",function(){return n.div(".window-module-title",function(){return n.span(".window-module-title-icon.icon-lg.icon-organization"),n.h3(function(){return n.format("organizations")})}),n.div(".u-gutter.js-list-orgs")}),n.div(".window-module",function(){return n.div(".window-module-title",function(){return n.span(".window-module-title-icon.icon-lg.icon-activity"),n.h3(function(){return n.format("activity")})}),n.div(".list-actions"),n.p(".u-bottom",function(){return n.a(".show-more.js-more-actions",{href:"#"},function(){return n.format("load-more-activity")})})})}},{}],736:[function(e,t,r){var n;n=e(436)("member_profile_info"),t.exports=function(){return n.div(".member-profile-info.u-clearfix",{name:n.mustacheVar("username")},function(){return n.div(".member",function(){return n.mustachePartial("member")}),n.div(".info",function(){return n.h3(".u-bottom",function(){return n.a(".js-profile",{href:"/"+n.mustacheVar("username")},function(){return n.text(n.mustacheVar("fullName"))})}),n.p(".quiet.u-bottom",function(){return n.format("at-username",{username:n.mustacheVar("username")})}),n.mustacheBlock("bio",function(){return n.p(".member-profile-info-bio.quiet",{title:n.mustacheVar("bio")},function(){return n.raw(n.mustacheVar("bioHtml"))})}),n.p(".quiet.u-bottom",function(){return n.mustacheBlock("showMemberOptions",function(){return n.mustacheBlock("orgCardsUrl",function(){return n.a({href:n.mustacheVar("orgCardsUrl")},function(){return n.format("view-org-cards")})}),n.mustacheBlock("__ed",function(){return n.span(function(){return n.a(".js-remove-mem",{href:"#"},function(){return n.format("remove-from-org")})})})})})})})}},{}],737:[function(e,t,r){var n;n=e(436)("member_session"),t.exports=function(){return n.mustacheBlock("type_support",function(){return n.p(".u-bottom",function(){return n.format("authorization-for-trello-support-ticket-data-ticket",{"data.ticket":n.mustacheVar("data.ticket")}),n.br(),n.span(".quiet",function(){return n.format("expires",{dateExpires:n.mustacheVar("dateExpires")}),n.raw(" "),n.a(".quiet.js-revoke",{href:"#"},function(){return n.format("revoke")})})})}),n.mustacheBlockInverted("type_support",function(){return n.p(".u-bottom",function(){return n.strong(function(){return n.text(n.mustacheVar("ipAddress"))}),n.span(".quiet"),n.br(),n.span(".quiet",function(){return n.mustacheBlock("isRecent",function(){return n.mustacheBlock("isCurrent",function(){return n.format("last-used-less-than-an-hour-ago-current-session")}),n.mustacheBlockInverted("isCurrent",function(){return n.format("last-used-less-than-an-hour-ago")})}),n.mustacheBlockInverted("isRecent",function(){return n.mustacheBlock("isCurrent",function(){return n.format("last-used-current-session",{dateLastUsed:n.mustacheVar("dateLastUsed")})}),n.mustacheBlockInverted("isCurrent",function(){return n.format("last-used",{dateLastUsed:n.mustacheVar("dateLastUsed")})})})})})})}},{}],738:[function(e,t,r){var n;n=e(436)("member_session_list"),t.exports=function(){return n.div(".js-sessions"),n.input(".js-log-out-other",{type:"button",value:n.l("log-out-other-sessions")})}},{}],739:[function(e,t,r){var n;n=e(436)("members_voted"),t.exports=function(){return n.mustacheBlock("loading",function(){return n.p(".quiet.u-text-align-center",{style:"margin: 24px 0;"},function(){return n.format("loading-ellipsis")})}),n.mustacheBlockInverted("loading",function(){return n.div({class:"list-voters u-clearfix "+n.mustacheBlock("fewMembers",function(){return"compact"})},function(){return n.mustacheBlock("members",function(){return n.div(".voter",function(){return n.div(".member.member-no-menu",function(){return n.mustachePartial("member")}),n.mustacheBlock("fewMembers",function(){return n.p(".title",function(){return n.text(n.mustacheVar("fullName")),n.text(" "),n.span(".quiet",function(){return n.format("username",{username:n.mustacheVar("username")})})})})})})}),n.mustacheBlock("moreMembers",function(){return n.a(".show-more.mod-compact.js-more-members-voted",{href:"#"},function(){return n.format("show-all-voters-lengthdiff-more",{lengthDiff:n.mustacheVar("lengthDiff")})})}),n.mustacheBlock("canVote",function(){return n.hr(),n.mustacheBlock("voted",function(){return n.a(".quiet-button.u-text-align-center.js-unvote",{href:"#"},function(){return n.format("remove-your-vote")})}),n.mustacheBlockInverted("voted",function(){return n.button(".button.primary.full.js-vote",{href:"#"},function(){return n.format("vote")})})})})}},{}],740:[function(e,t,r){var n;n=e(436)("menu"),t.exports=function(){return n.ul(".pop-over-list",function(){return n.li(function(){return n.ul(".dynamic-pop-over-list")}),n.mustacheBlock("menu_cards",function(){return n.li(function(){return n.a({class:n.mustacheVar("js_class"),href:n.mustacheBlock("url",function(){return n.mustacheVar("url")})+n.mustacheBlockInverted("url",function(){return"#"})},function(){return n.text(n.mustacheVar("name"))})})})})}},{}],741:[function(e,t,r){var n;n=e(436)("menu_base"),t.exports=function(){return n.ul(".pop-over-list",function(){return n.li(function(){return n.ul(".boards-pop-over-list")}),n.raw(n.mustacheVar("content"))})}},{}],742:[function(e,t,r){var n;n=e(436)("mini_profile"),t.exports=n.renderable(function(e){var t,r,o,i,s,a,u,c;return t=e.avatarHash,i=e.fullName,c=e.username,s=e.initials,r=e.bio,o=e.email,u=e.showEmail,a=e.isMe,n.div(".mini-profile",function(){return n.div(".mini-profile-member.member-large",function(){var e;return a?n.a(".av-btn.change.js-change-av",{href:"#"},function(){return n.format("change")}):t&&n.a(".av-btn.js-view-large",{href:"#"}),e=i+" ("+c+")",t?n.img(".member-avatar",{height:"50",width:"50",src:[window.avatarDomain,t,"50.png"].join("/"),alt:e,title:e}):n.span(".member-initials",{title:e},function(){return n.text(s)})}),n.div(".mini-profile-info",function(){return n.h3(".mini-profile-info-title",function(){return n.a(".mini-profile-info-title-link.js-profile",{href:"/"+c},function(){return n.text(i)})}),n.p(".quiet.u-bottom",function(){return n.format("at-username",{username:c})}),r&&n.p(".mini-profile-info-bio.quiet",function(){return n.text(r)}),u&&n.p(".u-bottom.quiet",function(){return n.text(o)}),a?n.p(".u-bottom",function(){return n.a(".quiet.js-edit-profile",{href:"#"},function(){return n.format("edit-profile-info")})}):void 0})})})},{}],743:[function(e,t,r){var n;n=e(436)("move_card_controls"),t.exports=function(){return n.mustacheBlockInverted("hideBoard",function(){return n.div(".form-grid",function(){return n.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return n.span(".label",function(){return n.format("board")}),n.span(".value.js-board-value"),n.label(function(){return n.format("board")}),n.select(".js-select-board",function(){return n.mustacheBlock("organizations",function(){return n.optgroup({label:n.mustacheVar("displayName")},function(){
return n.mustacheBlock("boards",function(){return n.optionSelected(n.mustacheVar("selected"),{value:n.mustacheVar("id")},function(){return n.text(n.mustacheVar("name")),n.mustacheBlock("selected",function(){return n.text(" "),n.format("current")})})})})})})})})}),n.div(".form-grid",function(){return n.div(".button-link.setting.form-grid-child.form-grid-child-threequarters",function(){return n.span(".label",function(){return n.format("list")}),n.span(".value.js-list-value"),n.label(function(){return n.format("list")}),n.select(".js-select-list")}),n.div(".button-link.setting.form-grid-child.form-grid-child-quarter",function(){return n.span(".label",function(){return n.format("position")}),n.span(".value.js-pos-value"),n.label(function(){return n.format("position")}),n.select(".js-select-position")})})}},{}],744:[function(e,t,r){var n;n=e(436)("observer_list"),t.exports=function(){return n.ul({class:"pop-over-member-list js-list "+n.mustacheBlock("__ed",function(){return"js-list-draggable-board-members"})})}},{}],745:[function(e,t,r){var n;n=e(436)("org_bc_intro"),t.exports=function(){return n.div(".product-intro-modal.bc-intro",function(){return n.a(".icon-lg.icon-close.dark-hover.product-intro-close.js-close-intro-helper",{href:"#"}),n.div(".product-intro-header",function(){return n.img(".product-intro-logo",{src:"https://d78fikflryjgj.cloudfront.net/images/9b9b5d825b48e46a607311eeef8c2e67/trello-business-class-with-text.png",alt:"Trello Business Class"})}),n.hr(),n.div(".product-intro-section",function(){return n.h2(function(){return n.format("welcome-to-business-class")}),n.p(function(){return n.format("to-get-started")})}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.text("1")}),n.h3(function(){return n.format("visit-the-members-tab-to-manage-members")}),n.p(function(){return n.format("you-can-link-your-google-apps-domain-change-roles-and-deactivate-members-and-view-member-activity-on-the-members-tab-above")})}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.text("2")}),n.h3(function(){return n.format("check-out-the-organization-settings-page")}),n.p(function(){return n.format("to-check-out-organization-and-board-invite-restrictions-and-board-creation-restrictions-click-the-organization-settings-tab-above")})}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.text("3")}),n.h3(function(){return n.format("organize-your-boards-with-collections")}),n.p(function(){return n.format("scroll-down-on-this-page-to-see-your-teams-boards-and-click-create-a-collecction")})}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.text("4")}),n.h3(function(){return n.format("supercharge-your-boards-with-Power-Ups")}),n.p(function(){return n.format("open-the-power-ups-menu-in-the-menu-on-the-right-side-of-your-teams-boards-to-integrate-trello")})}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.text("5")}),n.h3(function(){return n.format("create-bulk-exports-in-one-click")}),n.p(function(){return n.mustacheBlock("hasCSVExport",function(){return n.format("click-the-export-tab-to-open-the-export-dialog-exports-include-all-of-your-organization-s-data-optionally-including-attachments-exports-will-be-in-csv-and-json-format")}),n.mustacheBlockInverted("hasCSVExport",function(){return n.format("click-the-export-tab-to-open-the-export-dialog-exports-include-all-of-your-organization-s-data-optionally-including-attachments-exports-will-be-in-json-format")})})}),n.mustacheBlock("hasGoldMembers",function(){return n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.text("6")}),n.h3(function(){return n.format("use-board-backgrounds-and-stickers")}),n.p(function(){return n.format("open-the-board-menu-and-select-stickers-or-change-background-you-ll-see-additional-stickers-and-backgrounds-plus-you-can-upload-your-own")})})}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.mustacheBlock("hasGoldMembers",function(){return n.text("7")}),n.mustacheBlockInverted("hasGoldMembers",function(){return n.text("6")})}),n.h3(function(){return n.format("for-billing-info-ellipsis")}),n.p(function(){return n.format("to-see-billing-history-change-a-credit-card-or-change-the-billing-contact-click-the-billing-tab-above")})}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.mustacheBlock("hasGoldMembers",function(){return n.text("8")}),n.mustacheBlockInverted("hasGoldMembers",function(){return n.text("7")})}),n.h3(function(){return n.format("check-the-user-guide")}),n.p({style:"margin-bottom: 0;"},function(){return n.format("everything-else-is-outlined-in-the-business-class-user-guide-business-class-features-are-usually-marked-with-this-icon")})}),n.p(".product-intro-close-bottom.u-text-align-center.quiet",function(){return n.a(".js-close-intro-helper.dark-hover",{href:"#"},function(){return n.icon("close","got-it-close-this-helper",{class:"dark-hover"})})})})}},{}],746:[function(e,t,r){var n;n=e(436)("org_boards_for_member"),t.exports=function(){return n.ul(".pop-over-list",function(){return n.mustacheBlock("boards",function(){return n.li(function(){return n.a({href:n.mustacheVar("url")},function(){return n.text(n.mustacheVar("name")),n.text(" "),n.span(".quiet",function(){return n.format("membertype",{memberType:n.mustacheVar("memberType")})})})})})})}},{}],747:[function(e,t,r){var n;n=e(436)("org_create"),t.exports=function(){return n.form(function(){return n.p(".error",{style:"display:none"}),n.label({for:"org-display-name"},function(){return n.format("name")}),n.input(".js-autofocus.js-display-name",{type:"text",name:"displayName",id:"org-display-name",value:n.mustacheVar("displayName"),dir:"auto"}),n.label({for:"org-desc"},function(){return n.format("description-optional")}),n.textarea({id:"org-desc",name:"desc",dir:"auto"},function(){return n.text(n.mustacheVar("desc"))}),n.input(".primary.wide.js-save",{type:"submit",value:n.l("create")})}),n.hr(),n.p(".quiet",function(){return n.format("an-organization-is-a-group-of-boards-and-people-it-helps-keep-your-company-team-or-family-organized")}),n.p(".quiet.u-bottom",function(){return n.format("business-class-gives-your-organization-more-security-administrative-controls-and-superpowers"),n.text(" "),n.a(".js-business-class",{href:"/business-class",target:"_blank"},function(){return n.format("learn-more")})})}},{}],748:[function(e,t,r){var n;n=e(436)("org_detail"),t.exports=n.renderable(function(e){var t,r,o,i,s,a,u,c,l,d,p;return d=e.name,r=e.editable,l=e.logoHash,s=e.isEnterprise,p=e.paysWithPurchaseOrder,i=e.isBusinessClassAdmin,u=e.isInOrg,c=e.isOrgAdmin,o=e.hasAccount,t=e.accountProblem,a=e.isFullWidth,s=e.isEnterprise,n.div(".tabbed-pane-header",function(){return n.div(".tabbed-pane-header-wrapper.u-clearfix",function(){return n.a({class:n.classify({"tabbed-pane-header-image":!0,"profile-image":!0,"is-editable":r,"js-change-org-logo":r}),href:"#"},function(){return l?n.img(".profile-image-image",{src:[logoDomain,l,"170.png"].join("/")}):n.span(".profile-image-icon.icon-lg.icon-organization"),n.span(".profile-image-change-text",function(){return n.format("change-logo")})}),n.div(".tabbed-pane-header-details",function(){return n.div(".js-current-details"),r?n.form(".js-profile-form.hide"):void 0})})}),n.div(".tabbed-pane-nav.u-clearfix",function(){return n.ul(function(){var e;n.li(".tabbed-pane-nav-item",function(){return n.a(".tabbed-pane-nav-item-button.js-org-profile",{href:["",d].join("/")},function(){return n.format("boards")})}),n.li(".tabbed-pane-nav-item",function(){return n.a(".tabbed-pane-nav-item-button.js-org-members",{href:["",d,"members"].join("/")},function(){return n.format("members")})}),i&&n.li(".tabbed-pane-nav-item",function(){return n.a(".tabbed-pane-nav-item-button.js-org-export",{href:["",d,"export"].join("/")},function(){return n.icon("business-class"),n.format("export")})}),u&&n.li(".tabbed-pane-nav-item",function(){return n.a(".tabbed-pane-nav-item-button.js-org-account",{href:["",d,"account"].join("/")},function(){return n.format("settings")})}),!c||s||p||(e=["",d,"billing"].join("/"),n.li(".tabbed-pane-nav-item",function(){return o?t?n.a(".tabbed-pane-nav-item-button.js-billing",{href:e},function(){return n.format("billing-issue")}):n.a(".tabbed-pane-nav-item-button.js-billing",{href:e},function(){return n.format("billing")}):n.a(".tabbed-pane-nav-item-button.dark-hover.js-billing",{href:e},function(){return n.span(".icon-sm.icon-business-class.mod-inline.icon-business-class-color"),n.text(" "),n.format("business class")})}))})}),n.div(".tabbed-pane-main-col.u-clearfix",function(){return n.div(".tabbed-pane-main-col-loading.hide.js-loading-page",function(){return n.span(".tabbed-pane-main-col-loading-spinner.spinner")}),n.div({class:n.classify({"tabbed-pane-main-col-wrapper":!0,"js-content":!0,"is-full-width":a})})})})},{}],749:[function(e,t,r){var n;n=e(436)("org_detail_profile_edit"),t.exports=function(){return n.p(".error.js-profile-form-error.hide"),n.label(function(){return n.format("name")}),n.input({type:"text",name:"displayName",value:n.mustacheVar("displayName"),dir:"auto"}),n.label(function(){return n.format("short-name")}),n.input({type:"text",name:"name",value:n.mustacheVar("name")}),n.label(function(){return n.format("website")}),n.input({type:"text",name:"website",value:n.mustacheVar("website")}),n.label(function(){return n.format("description-optional")}),n.textarea({name:"desc",dir:"auto"},function(){return n.text(n.mustacheVar("desc"))}),n.input(".primary.wide.js-submit-profile",{type:"submit",value:n.l("save")}),n.input(".js-cancel-edit-profile",{type:"button",value:n.l("cancel")})}},{}],750:[function(e,t,r){var n;n=e(436)("org_detail_profile_info"),t.exports=n.renderable(function(e){var t,r,o,i,s,a,u,c,l,d,p,h;return i=e.displayName,a=e.isEnterprise,s=e.isBusinessClass,d=e.permissionLevel,c=e.pLevelAltText,l=e.pLevelDisplayText,o=e.descriptionHtml,h=e.websiteHref,p=e.website,t=e.accountProblem,u=e.name,r=e.canEdit,n.div(".tabbed-pane-header-details-name",function(){return n.h1(".u-inline",function(){return n.text(i)}),a?n.span(".window-title-extra",function(){return n.icon("enterprise"),n.format("enterprise")}):s&&n.span(".window-title-extra",function(){return n.icon("business-class"),n.format("business-class")}),n.span(".window-title-extra",function(){return n.icon(d,{title:c}),n.text(l)})}),n.div(".tabbed-pane-header-details-content",{dir:"auto"},function(){return null!=o&&n.raw(o),null!=h&&n.p(function(){return n.a({href:h},function(){return n.text(p)})}),t?n.div({style:"padding: 4px 8px; background-color: orange; margin-bottom: 8px;"},function(){return n.p(".u-bottom",function(){return n.format("oops-there-is-a-problem-with-your-billing-information-visit-billing-to-fix-it",{name:u})})}):void 0}),r?n.a(".button-link.tabbed-pane-header-details-edit.js-edit-profile",{href:"#"},function(){return n.icon("edit","edit-profile")}):void 0})},{}],751:[function(e,t,r){var n;n=e(436)("org_export"),t.exports=function(){return n.div(".window-module.org-export-header",function(){return n.button(".org-export-header-button.primary.js-create-new-export",function(){return n.format("create-new-export")}),n.div(".org-export-header-options.u-clearfix",function(){return n.input({id:"includeAttachments",type:"checkbox"}),n.label(".quiet.u-inline.u-font-weight-normal",{for:"includeAttachments"},function(){return n.format("include-raw-attachments-ellipsis")})}),n.p(".quiet.org-export-header-text",function(){return n.mustacheBlock("hasCSV",function(){return n.format("downloads-will-be-in-a-zip-format-that-includes-members-boards-and-all-other-data-in-csv-and-json-formats-if-you-choose-to-include-raw-attachments-they-will-be-in-their-native-format-otherwise-they-will-include-a-link-to-the-version-in-trello")}),n.mustacheBlockInverted("hasCSV",function(){return n.format("downloads-will-be-in-a-zip-format-that-includes-members-boards-and-all-other-data-in-json-format-if-you-choose-to-include-raw-attachments-they-will-be-in-their-native-format-otherwise-they-will-include-a-link-to-the-version-in-trello")})})}),n.div(".window-module.org-export-list",function(){return n.div(".window-module-title",function(){return n.span(".window-module-title-icon.icon-lg.icon-archive"),n.h3(function(){return n.format("exports")})}),n.div(".u-gutter.u-clearfix.js-list-exports")})}},{}],752:[function(e,t,r){var n;n=e(436)("org_export_empty"),t.exports=function(){return n.p(".quiet",{style:"padding: 7px 0;"},function(){return n.format("no-exports-click-create-new-export-to-generate-a-new-one")})}},{}],753:[function(e,t,r){var n;n=e(436)("org_export_item"),t.exports=function(){return n.div({class:"org-export-list-item u-clearfix"+n.mustacheBlock("generating",function(){return" org-export-list-item-generating"})},function(){return n.mustacheBlock("generating",function(){return n.p(".org-export-list-item-title",function(){return n.mustacheBlock("status",function(){return n.text(n.mustacheVar("stage")),n.mustacheBlock("total",function(){return n.format("progress-of-total",{progress:n.mustacheVar("progress"),total:n.mustacheVar("total")})})}),n.mustacheBlockInverted("status",function(){return n.format("creating-new-export-ellipsis")})})}),n.mustacheBlockInverted("generating",function(){return n.p(".org-export-list-item-title",function(){return n.mustacheBlock("attachments",function(){return n.format("time-size-includes-attachments",{time:n.mustacheVar("time"),size:n.mustacheVar("size")})}),n.mustacheBlockInverted("attachments",function(){return n.format("time-size",{time:n.mustacheVar("time"),size:n.mustacheVar("size")})})}),n.a(".button-link.org-export-list-item-button.js-download-export",{href:n.mustacheVar("exportUrl"),target:"_blank"},function(){return n.format("download")})})})}},{}],754:[function(e,t,r){var n;n=e(436)("org_link_ga_helper"),t.exports=function(){return n.div(".ga-link-helper-section",function(){return n.p(function(){return n.format("1-first-you-must-enable-administrative-api-access-for-your-google-apps-domain-you-can-find-instructions-for-doing-so-here")}),n.p(function(){return n.format("2-next-you-ll-need-to-add-the-trello-business-class-app-from-the-google-apps-marketplace-to-your-domain-the-button-below-will-get-you-there")}),n.p(function(){return n.format("3-when-there-be-sure-you-are-signed-in-to-the-google-account-with-the-correct-domain-you-want-to-use-click-the-integrate-with-google-button-then-follow-the-prompts")}),n.p(function(){return n.format("4-you-ll-see-other-users-from-your-google-apps-domain-on-this-page-when-configured-correctly")})}),n.a(".button.js-link",{style:"width: 100%; padding: 7px 0;",target:"_blank",href:"https://chrome.google.com/webstore/detail/trello-business-class/hmhbhkhihjbjgghmkhhniddhlojffhil"},function(){return n.format("go-to-google-apps-marketplace")})}},{}],755:[function(e,t,r){var n;n=e(436)("org_member_activity"),t.exports=function(){return n.ul(".pop-over-list",function(){return n.li(function(){return n.mustacheBlock("hasBoards",function(){return n.a(".js-view-org-boards-for-member",{href:"#"},function(){return n.format("on-boardcount",{boardCount:n.mustacheVar("boardCount")})})}),n.mustacheBlockInverted("hasBoards",function(){return n.a(".disabled",{href:"#"},function(){return n.format("on-boardcount",{boardCount:n.mustacheVar("boardCount")})})})}),n.mustacheBlock("orgCardsUrl",function(){return n.li(function(){return n.a(".js-view-member-org-cards",{href:n.mustacheVar("orgCardsUrl")},function(){return n.format("view-members-org-cards")})})})}),n.mustacheBlock("lastActive",function(){return n.hr(),n.p(".quiet.u-bottom",function(){return n.format("fullname-was-last-active-in-this-organization",{fullName:n.mustacheVar("fullName"),lastActive:n.mustacheVar("lastActive")})})})}},{}],756:[function(e,t,r){var n;n=e(436)("org_member_cards"),t.exports=function(){return n.div(".window-module",function(){return n.mustacheBlock("memberData",function(){return n.mustachePartial("member_profile")})}),n.div(".js-cards")}},{}],757:[function(e,t,r){var n;n=e(436)("org_pref_restriction"),t.exports=function(){return n.li(function(){return n.text(n.mustacheVar("restriction")),n.a(".dark-hover.js-restricted-address",{href:"#","data-pattern":n.mustacheVar("restriction")},function(){return n.icon("close",{class:"option close"})})})}},{}],758:[function(e,t,r){var n;n=e(436)("org_prefs_nonorg_invites"),t.exports=function(){return n.ul(".pop-over-list",function(){return n.li(function(){return n.a({href:"#"},function(){return n.check(!n.mustacheVar("externalMembersDisabled"),"allow"),n.span(".sub-name",function(){return n.format("anyone-from-inside-or-outside-of-the-organization-can-be-added-to-a-board-inside-your-organization")})})}),n.li(function(){return n.a({href:"#"},function(){return n.check(n.mustacheVar("externalMembersDisabled"),"dont-allow"),n.span(".sub-name",function(){return n.format("only-members-inside-your-organization-will-be-able-to-join-your-organization-s-boards")})})})})}},{}],759:[function(e,t,r){var n;n=e(436)("org_prefs_restrict_invites"),t.exports=function(){return n.form(".form-grid.js-form",function(){return n.div(".form-grid-child-threequarters.u-relative",function(){return n.input(".js-input-restricted.js-autofocus",{type:"text",placeholder:n.l("add-a-domain-or-address-ellipsis"),style:"margin-bottom: 6px;"}),n.span(".spinner.small.hide.js-loading",{style:"position: absolute; top: 12px; right: 8px; z-index: 2;"})}),n.div(".form-grid-child-quarter",function(){return n.input(".mod-inline-with-text-input.primary.js-form-submit-input",{type:"submit",value:n.l("add")})})}),n.p(".u-bottom.quiet",{style:"padding: 6px;"},function(){return n.format("choose-which-email-domains-and-addresses-can-be-added-to-the-organization-for-example-if-you-only-wanted-users-with-trello-com-email-addresses-to-be-able-to-be-added-to-the-organization-enter-trello-com")}),n.p(".error.u-bottom.js-errors",{style:"display: none; margin-top: 8px;"}),n.div(".manage-member-section.js-restriction-list",{style:"margin-top: 16px;"+n.mustacheBlockInverted("hasRestrictions",function(){return" display: none;"})},function(){return n.h4(function(){return n.format("allowed-domains-and-addresses")}),n.ul(".closeable-list.js-list")})}},{}],760:[function(e,t,r){var n;n=e(436)("org_prefs_vis"),t.exports=function(){return n.div({style:"margin: 12px 0 0;"},function(){return n.p(function(){return n.format("who-can-create-public-boards")}),n.ul(".pop-over-list.checkable.left-check.normal-weight",{"data-vis":"public"},function(){return n.li({class:n.mustacheBlock("boardVisibilityRestrict_public_org",function(){return"active"})},function(){return n.a({href:"#","data-restriction":"org"},function(){return n.format("any-organization-member")})}),n.li({class:n.mustacheBlock("boardVisibilityRestrict_public_admin",function(){return"active"})},function(){return n.a({href:"#","data-restriction":"admin"},function(){return n.format("only-organization-admins")})}),n.li({class:n.mustacheBlock("boardVisibilityRestrict_public_none",function(){return"active"})},function(){return n.a({href:"#","data-restriction":"none"},function(){return n.format("nobody")})})})}),n.hr(),n.div({style:"margin: 12px 0 0;"},function(){return n.p(function(){return n.format("who-can-create-organization-visible-boards")}),n.ul(".pop-over-list.checkable.left-check.normal-weight",{"data-vis":"org"},function(){return n.li({class:n.mustacheBlock("boardVisibilityRestrict_org_org",function(){return"active"})},function(){return n.a({href:"#","data-restriction":"org"},function(){return n.format("any-organization-member")})}),n.li({class:n.mustacheBlock("boardVisibilityRestrict_org_admin",function(){return"active"})},function(){return n.a({href:"#","data-restriction":"admin"},function(){return n.format("only-organization-admins")})}),n.li({class:n.mustacheBlock("boardVisibilityRestrict_org_none",function(){return"active"})},function(){return n.a({href:"#","data-restriction":"none"},function(){return n.format("nobody")})})})}),n.hr(),n.div({style:"margin: 12px 0 0;"},function(){return n.p(function(){return n.format("who-can-create-private-boards")}),n.ul(".pop-over-list.checkable.left-check.normal-weight",{"data-vis":"private"},function(){return n.li({class:n.mustacheBlock("boardVisibilityRestrict_private_org",function(){return"active"})},function(){return n.a({href:"#","data-restriction":"org"},function(){return n.format("any-organization-member")})}),n.li({class:n.mustacheBlock("boardVisibilityRestrict_private_admin",function(){return"active"})},function(){return n.a({href:"#","data-restriction":"admin"},function(){return n.format("only-organization-admins")})}),n.li({class:n.mustacheBlock("boardVisibilityRestrict_private_none",function(){return"active"})},function(){return n.a({href:"#","data-restriction":"none"},function(){return n.format("nobody")})})})})}},{}],761:[function(e,t,r){var n;n=e(436)("org_remove_or_deactivate_member"),t.exports=function(){return n.ul(".pop-over-list",function(){return n.li(".u-clearfix",function(){return n.a(".js-soft-remove",{href:"#"},function(){return n.span(".u-clearfix",function(){return n.mustacheBlock("isMe",function(){return n.format("leave-organization")}),n.mustacheBlockInverted("isMe",function(){return n.format("remove-from-organization")})}),n.span(".sub-name",function(){return n.mustacheBlock("isDeactivated",function(){return n.format("remove-all-access-to-the-organization-and-all-boards")}),n.mustacheBlockInverted("isDeactivated",function(){return n.mustacheBlock("orgIsBC",function(){return n.format("remove-all-access-to-the-organization")}),n.mustacheBlockInverted("orgIsBC",function(){return n.format("remove-all-access-to-the-organization-the-member-will-remain-on-all-their-boards-in-this-organization-they-will-receive-a-notification")})})})}),n.mustacheBlock("orgIsBC",function(){return n.mustacheBlockInverted("isDeactivated",function(){return n.mustacheBlockInverted("isMe",function(){return n.span(".check-div.quiet.u-clearfix",{style:"margin-left: 24px; padding-top: 2px; font-size: 12px; line-height: 15px;"},function(){return n.input({type:"checkbox",id:"hardRemove",name:"hard",checked:!0}),n.label({for:"hardRemove"},function(){return n.format("check-this-box-to-remove-the-member-from-all-boards")})})})})})}),n.mustacheBlock("canDeactivate",function(){return n.mustacheBlockInverted("isMe",function(){return n.li(".u-clearfix",function(){return n.a(".js-deactivate",{href:"#"},function(){return n.format("deactivate-disable-members-access-to-organization-boards-but-allow-other-organization-members-to-see-what-the-cards-and-boards-the-member-was-on")})})})})})}},{}],762:[function(e,t,r){var n;n=e(436)("organization_list_item"),t.exports=function(){return n.a({href:n.mustacheVar("url")},function(){return n.span(".item-name",function(){return n.text(n.mustacheVar("displayName"))}),n.mustacheBlock("hasBusinessClass",function(){return n.icon("business-class")}),n.span({class:"icon-sm icon-"+n.mustacheVar("visIconClass")})})}},{}],763:[function(e,t,r){var n;n=e(436)("organization_search_list_item"),t.exports=function(){return n.li(function(){return n.a(".link-item",{href:"/"+n.mustacheVar("name")},function(){return n.span(".item-name",function(){return n.text(n.mustacheVar("displayName"))})})})}},{}],764:[function(e,t,r){var n;n=e(436)("pop_over_ad"),t.exports=function(){return n.a(".icon-sm.icon-close.dark-hover.ad-close.js-close-ad",{href:"#"}),n.mustacheBlock("iconClass",function(){return n.span({class:"pop-over-ad-icon "+n.mustacheVar("iconClass")})}),n.div(".ad-copy",function(){return n.raw(n.mustacheVar("copyHtml"))})}},{}],765:[function(e,t,r){var n;n=e(436)("popover_add_email"),t.exports=function(){return n.form(function(){return n.p(".error",{id:"account-error"}),n.div(".field",function(){return n.label({for:"email"},function(){return n.format("new-email-address")}),n.input({id:"email",type:"email",name:"email",value:""})}),n.input(".primary.js-save-changes",{type:"submit",value:n.l("send-confirmation-email")})}),n.hr(),n.p(".quiet.u-bottom",function(){return n.format("we-ll-send-an-email-to-the-address-you-enter-click-the-link-in-the-email-to-confirm-the-address")})}},{}],766:[function(e,t,r){var n;n=e(436)("popover_add_list"),t.exports=function(){return n.form(function(){return n.div(".form-grid",function(){return n.div(".form-grid-child.form-grid-child-threequarters",function(){return n.label({for:"list-name"},function(){return n.format("name")}),n.input(".js-list-name.js-autofocus",{type:"text",id:"list-name",value:n.l("default-list-name"),style:"margin-bottom: 0;"})}),n.div(".form-grid-child.form-grid-child-quarter",function(){return n.div(".button-link.setting",{style:"margin-top: 4px;"},function(){return n.span(".label",function(){return n.format("position")}),n.span(".value.js-pos-value"),n.label(function(){return n.format("position")}),n.select(".js-select-list-pos")})})}),n.input(".primary.wide.js-add-list",{type:"submit",value:n.l("add")})})}},{}],767:[function(e,t,r){var n;n=e(436)("popover_auto_mentioner"),t.exports=function(){return n.mustacheBlock("button",function(){return n.input(".js-filter-mentionables.js-autofocus",{type:"text",placeholder:n.l("search-members-ellipsis")})}),n.p(".quiet.js-empty-list.hide",{style:"padding: 8px 8px 0;"},function(){return n.format("no-matching-members")}),n.ul(".pop-over-member-list.js-available-members"),n.mustacheBlock("button",function(){return n.div(".js-select-multiple-options.hide",function(){return n.hr(),n.ul(".pop-over-list",function(){return n.mustacheBlock("showAllCardMembers",function(){return n.li(function(){return n.a(".js-select-all-card-members",{href:"#"},function(){return n.format("mention-all-card-members")})})}),n.mustacheBlock("showAllBoardMembers",function(){return n.li(function(){return n.a(".js-select-all-board-members",{href:"#"},function(){return n.format("mention-all-board-members")})})}),n.mustacheBlock("showAllCommenters",function(){return n.li(function(){return n.a(".js-select-all-commenters",{href:"#"},function(){return n.format("mention-all-commenters")})})})})})})}},{}],768:[function(e,t,r){var n;n=e(436)("popover_board_header_org_menu"),t.exports=function(){return n.ul(".pop-over-list",function(){return n.mustacheBlock("canChangeOrg",function(){return n.li(function(){return n.a(".js-change-org",{href:"#"},function(){return n.mustacheBlock("setOrgNull",function(){return n.format("remove-from-organization")}),n.mustacheBlockInverted("setOrgNull",function(){return n.format("change-organization-ellipsis")})})})}),n.li(function(){return n.a(".js-view-org",{href:"/"+n.mustacheVar("name")},function(){return n.format("view-organization-page")})})})}},{}],769:[function(e,t,r){var n;n=e(436)("popover_card_completer"),t.exports=function(){return n.mustacheBlock("button",function(){return n.input(".js-search.js-autofocus",{type:"text",placeholder:n.l("search-for-a-card-ellipsis")})}),n.div({class:"js-loading"+n.mustacheBlock("hideLoading",function(){return" hide"})},function(){return n.span(".loading.spinner")}),n.div(".js-results",function(){return n.ul(".pop-over-list.navigable.js-card-list")}),n.div(".js-no-results.hide",function(){return n.p(".u-bottom",function(){return n.format("no-results")})})}},{}],770:[function(e,t,r){var n;n=e(436)("popover_card_from_calendar"),t.exports=function(){return n.div(function(){return n.textarea(".js-card-title",function(){return n.text(n.mustacheVar("title"))})}),n.div(".button-link.list-button-link.setting",function(){return n.span(".label",function(){return n.format("list")}),n.span(".value.js-list-value"),n.label(function(){return n.format("list")}),n.select(".js-select-list")}),n.div(".button-link.pos-button-link.setting",function(){return n.span(".label",function(){return n.format("position")}),n.span(".value.js-pos-value"),n.label(function(){return n.format("position")}),n.select(".js-select-position")}),n.input(".primary.wide.js-add-card",{type:"submit",value:n.l("add")})}},{}],771:[function(e,t,r){var n;n=e(436)("popover_change_board_org"),t.exports=function(){return n.form(function(){return n.label(function(){return n.format("organization")}),n.select(".js-org",function(){return n.optionSelected(!n.mustacheVar("orgs"),{value:""},function(){return n.format("none")}),n.mustacheBlock("orgs",function(){return n.optionSelected(n.mustacheVar("select"),{value:n.mustacheVar("id")},function(){return n.text(n.mustacheVar("displayName"))})})}),n.mustacheBlock("isPrivate",function(){return n.div(".check-div.js-check-div",function(){return n.label(function(){return n.input(".js-make-org-visible",{type:"checkbox",checked:"checked"}),n.format("make-board-visible-to-organization")})})}),n.mustacheBlockInverted("allowsSelfJoin",function(){return n.div(".check-div.js-check-div",function(){return n.label(function(){return n.input(".js-make-org-joinable",{type:"checkbox",checked:"checked"}),n.format("allow-any-org-member-to-join-this-board")})})}),n.input(".js-submit.wide.primary",{type:"submit",value:n.l("change")})})}},{}],772:[function(e,t,r){var n;n=e(436)("popover_change_labels"),t.exports=function(){return n.input(".js-autofocus.js-label-search",{type:"text",placeholder:n.l("search-labels-ellipsis"),value:n.mustacheVar("searchInit"),autocomplete:"off"}),n.ul(".edit-labels-pop-over.js-labels-list"),n.mustacheBlock("__ed",function(){return n.div(function(){return n.a(".quiet-button.full.js-add-label",{href:"#"},function(){return n.format("create-a-new-label")}),n.a(".quiet-button.full.hide.js-show-more",{href:"#"},function(){return n.format("show-more-labels")}),n.hr(),n.a(".quiet-button.full.js-toggle-color-blind-mode",{href:"#"},function(){return n.mustacheBlock("isColorBlindEnabled",function(){return n.format("disable-color-blind-friendly-mode")}),n.mustacheBlockInverted("isColorBlindEnabled",function(){return n.format("enable-color-blind-friendly-mode")})})})})}},{}],773:[function(e,t,r){var n;n=e(436)("popover_change_roles"),t.exports=function(){return n.ul(".pop-over-list",function(){return n.li(function(){return n.a({class:n.mustacheBlock("canMakeAdmin",function(){return"js-make-admin highlight-icon"})+n.mustacheBlockInverted("canMakeAdmin",function(){return" disabled"})},function(){return n.check(n.mustacheVar("memberIsAdmin"),"admin"),n.span(".sub-name",function(){return n.text(n.mustacheVar("roleText_admin"))})})}),n.li(function(){return n.a({class:n.mustacheBlock("canMakeMember",function(){return"highlight-icon js-make-member "})+n.mustacheBlockInverted("canMakeMember",function(){return" disabled"})},function(){return n.check(n.mustacheVar("memberIsNormal"),"normal"),n.span(".sub-name",function(){return n.text(n.mustacheVar("roleText_normal"))})})}),n.mustacheBlock("showObserver",function(){return n.li(function(){return n.a({class:n.mustacheBlock("canMakeObserver",function(){return"highlight-icon js-make-observer "})+n.mustacheBlockInverted("canMakeObserver",function(){return" disabled"})},function(){return n.format("observer"),n.icon("business-class"),n.mustacheBlock("memberIsObserver",function(){return n.icon("check")}),n.span(".sub-name",function(){return n.text(n.mustacheVar("roleText_observer"))})})})})}),n.mustacheBlockInverted("isMoreThanOneAdmin",function(){return n.mustacheBlock("memberIsAdmin",function(){return n.hr(),n.p(".quiet.u-bottom",function(){return n.format("you-can-t-change-roles-because-there-must-be-at-least-one-admin")})})})}},{}],774:[function(e,t,r){var n;n=e(436)("popover_change_set_password"),t.exports=function(){return n.form(function(){return n.mustacheBlock("hasPassword",function(){return n.label({for:"o_password"},function(){return n.format("old-password")}),n.input({id:"o_password",type:"password",name:"oldpassword",value:""})}),n.label({for:"password1"},function(){return n.mustacheBlock("hasPassword",function(){
return n.format("new-password")}),n.mustacheBlockInverted("hasPassword",function(){return n.format("password")})}),n.input({id:"password1",type:"password",name:"password",value:""}),n.label({for:"password2"},function(){return n.mustacheBlock("hasPassword",function(){return n.format("new-password-again")}),n.mustacheBlockInverted("hasPassword",function(){return n.format("password-again")})}),n.input({id:"password2",type:"password",name:"password2",value:""}),n.p(".error",{id:"password-error"}),n.input(".primary.js-save-changes",{type:"submit",value:n.l("save")})}),n.mustacheBlockInverted("hasPassword",function(){return n.hr(),n.p(".quiet.u-bottom",function(){return n.format("you-havent-set-a-password-yet-you-can-set-a-password-so-you-can-log-onto-trello-with-just-your-username-or-email-address")})})}},{}],775:[function(e,t,r){var n;n=e(436)("popover_change_user_info"),t.exports=function(){return n.form(function(){return n.p(".error",{id:"account-error"}),n.div(".field",function(){return n.label({for:"fullName"},function(){return n.format("full-name")}),n.input({id:"fullName",type:"text",name:"fullName",value:n.mustacheVar("fullName")})}),n.div(".field",function(){return n.label({for:"initials"},function(){return n.format("initials")}),n.input({id:"initials",type:"text",name:"initials",value:n.mustacheVar("initials")})}),n.div(".field",function(){return n.label({for:"username"},function(){return n.format("username")}),n.input({id:"username",type:"text",name:"username",value:n.mustacheVar("username"),required:!0,autocomplete:"off",autocorrect:"off",spellcheck:"false",autocapitalize:"off"})}),n.div(".field",function(){return n.label({for:"bio"},function(){return n.format("bio")}),n.textarea({id:"bio",type:"text",name:"bio"},function(){return n.text(n.mustacheVar("bio"))})}),n.input(".primary.js-save-changes",{type:"submit",value:n.l("save")})}),n.hr(),n.p(".quiet.u-bottom",function(){return n.format("your-initials-are-used-in-place-of-your-avatar-if-your-avatar-is-not-set-usernames-require-a-minimum-of-3-characters-alphanumeric-only")})}},{}],776:[function(e,t,r){var n;n=e(436)("popover_confirm_member_delete"),t.exports=function(){return n.p(function(){return n.format("deleting-your-member-account-username-will-be-permanent",{username:n.mustacheVar("username")})}),n.p(function(){return n.b(function(){return n.format("you-will-lose-access-to-your-boards-and-organizations")})}),n.p(function(){return n.format("would-you-like-us-to-send-an-email-to-email-that-contains-a-link-that-you-can-use-to-delete-your-account",{email:n.mustacheVar("email")})}),n.input(".js-delete-member",{type:"submit",value:n.l("send-the-email")}),n.input(".js-cancel-delete",{type:"submit",value:n.l("never-mind")})}},{}],777:[function(e,t,r){var n;n=e(436)("popover_emoji_completer"),t.exports=function(){return n.mustacheBlock("button",function(){return n.input(".js-filter-emoji.js-autofocus",{type:"text",placeholder:n.l("search-for-emoji-ellipsis")})}),n.div(".js-results",function(){return n.ul(".pop-over-emoji-list.js-available-emoji"),n.hr(),n.ul(".pop-over-list",function(){return n.li(function(){return n.a(".js-upload-emoji",{href:"#","data-emojiname":""},function(){return n.format("upload-emoji")})})})}),n.div(".js-no-results.hide",function(){return n.p(".u-bottom.js-no-matching-emoji-helper"),n.a(".button.primary.full.js-upload-emoji",{href:"#","data-emojiname":""})})}},{}],778:[function(e,t,r){var n;n=e(436)("popover_emoji_uploader"),t.exports=function(){return n.mustacheBlockInverted("canUpload",function(){return n.div(".warning",function(){return n.mustacheBlockInverted("hasGold",function(){return n.p(function(){return n.format("you-can-upload-custom-emoji-with-trello-gold-learn-more-about-trello-gold")})}),n.mustacheBlockInverted("hasBCGold",function(){return n.p(".u-bottom",function(){return n.format("you-can-get-custom-emoji-for-your-entire-organization-with-business-class-learn-more-about-business-class")})})}),n.hr()}),n.form({action:"/1/member/"+n.mustacheVar("id")+"/customEmoji",method:"post",enctype:"multipart/form-data"},function(){return n.input({type:"hidden",name:"token",value:""}),n.input({type:"hidden",name:"format",value:"http"}),n.label({for:"emojiImage"},function(){return n.format("upload-image")}),n.input(".js-upload-emoji-file.upload-emoji",{id:"emojiImage",type:"file",name:"file",tabindex:"-1",accept:"image/*"}),n.label({for:"emojiName"},function(){return n.format("emoji-name")}),n.input(".js-emoji-name",{id:"emojiName",type:"text",name:"name",value:n.mustacheVar("emojiName")}),n.p(".quiet",function(){return n.format("the-name-will-default-to-the-name-of-the-uploaded-file-you-can-change-it-here-though")}),n.p(".warning.hide.js-invalid-name",function(){return n.format("the-emoji-name-can-only-contain-letters-numbers-and-underscores")}),n.div(".js-emoji-preview",{style:"margin-bottom: 12px;"},function(){return n.p({style:"margin-bottom: 4px;"},function(){return n.strong(function(){return n.format("preview")})}),n.span(".js-emoji-preview-name",function(){return n.text(n.mustacheVar("emojiName"))}),n.text(" → "),n.img(".js-emoji-preview.emoji")}),n.input(".primary.wide.js-upload-emoji",{type:"submit",value:n.l("create-custom-emoji")}),n.div(".error.hide",function(){return n.format("upload-failed")})}),n.mustacheBlock("canUpload",function(){return n.mustacheBlockInverted("hasBCGold",function(){return n.hr(),n.p(".u-bottom",function(){return n.format("you-can-also-get-custom-emoji-for-your-entire-organization-with-business-class-learn-more-about-business-class")})})})}},{}],779:[function(e,t,r){var n;n=e(436)("popover_filter_pos_results"),t.exports=function(){return n.ul(".pop-over-list.navigable.normal-weight.js-pos-results",function(){var e;return e=[["js-select-pos-keyword",n.mustacheVar("keywordList")],["js-select-pos-pos",n.mustacheVar("indexList")],["js-select-pos-list",n.mustacheVar("listList")]],e.forEach(function(e){var t,r;return t=e[0],r=e[1],r.forEach(function(e){return n.li(function(){return n.a({href:"#",name:e.value,class:t},function(){return n.format("position-in-list",{index:e.indexString,listName:e.listName})})})})})})}},{}],780:[function(e,t,r){var n;n=e(436)("popover_helper_new_board_add_org"),t.exports=function(){return n.p(function(){return n.format("an-organization-is-a-collection-of-members-and-boards-they-make-sharing-and-working-within-a-group-even-easier")}),n.a(".button.js-create-org",{href:"#"},function(){return n.format("create-an-organization")})}},{}],781:[function(e,t,r){var n;n=e(436)("popover_insertion_menu"),t.exports=function(){return n.ul(".pop-over-list",function(){return n.li(function(){return n.a(".js-open-emoji-selector",{href:"#"},function(){return n.format("select-emoji-ellipsis")})}),n.li(function(){return n.a(".js-open-mention-selector",{href:"#"},function(){return n.format("mention-member-ellipsis")})})})}},{}],782:[function(e,t,r){var n;n=e(436)("popover_member_searcher"),t.exports=function(){return n.mustacheBlock("showSearch",function(){return n.input(".js-filter-members.js-autofocus",{type:"text",placeholder:n.l("search-members-ellipsis")})}),n.ul(".pop-over-member-list.checkable.js-members-list")}},{}],783:[function(e,t,r){var n;n=e(436)("popover_move_card"),t.exports=function(){return n.mustachePartial("move_card_controls"),n.input(".primary.wide.js-submit",{type:"submit",value:n.l("move")})}},{}],784:[function(e,t,r){var n;n=e(436)("popover_move_list"),t.exports=function(){return n.div(".form-grid",function(){return n.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return n.span(".label",function(){return n.format("board")}),n.span(".value.js-board-value"),n.label(function(){return n.format("board")}),n.select(".js-select-board",function(){return n.mustacheBlock("organizations",function(){return n.optgroup({label:n.mustacheVar("displayName")},function(){return n.mustacheBlock("boards",function(){return n.optionSelected(n.mustacheVar("selected"),{value:n.mustacheVar("id")},function(){return n.text(n.mustacheVar("name")),n.mustacheBlock("selected",function(){return n.text(" "),n.format("current")})})})})})})})}),n.div(".form-grid",function(){return n.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return n.span(".label",function(){return n.format("position")}),n.span(".value.js-pos-value"),n.label(function(){return n.format("position")}),n.select(".js-select-list-pos")})}),n.input(".primary.wide.js-commit-position",{type:"submit",value:n.l("move")})}},{}],785:[function(e,t,r){var n;n=e(436)("popover_org_logo"),t.exports=function(){return n.p(".error.hide.js-error"),n.div(".uploader",function(){return n.form(".realfile",{action:"/1/organization/"+n.mustacheVar("id")+"/logo",method:"post",enctype:"multipart/form-data"},function(){return n.input({type:"hidden",name:"token",value:""}),n.input({type:"hidden",name:"format",value:"http"}),n.input(".js-upload-logo",{type:"file",name:"file",style:"margin-bottom: 0;",tabindex:"-1"})}),n.a(".button-link.fakefile",function(){return n.icon("organization","upload-a-new-logo")})}),n.mustacheBlock("logoHash",function(){return n.hr(),n.a(".quiet-button.js-remove-logo",{href:"#"},function(){return n.format("remove-logo")})})}},{}],786:[function(e,t,r){var n;n=e(436)("popover_rename_board"),t.exports=function(){return n.form(function(){return n.label(function(){return n.format("name")}),n.input(".js-board-name.js-autofocus",{type:"text",value:n.mustacheVar("boardName"),dir:"auto"}),n.input(".primary.wide.js-rename-board",{type:"submit",value:n.l("rename")})})}},{}],787:[function(e,t,r){var n;n=e(436)("popover_select_members"),t.exports=n.renderable(function(e){var t,r;return t=e.includeOrgMembers,r=function(e){return t&&n.h4(function(){return n.format(e)}),n.div(".js-loading",function(){return n.p(".empty",{style:"padding: 24px 6px"},function(){return n.format("loading")})}),n.div(".js-no-results.hide",function(){return n.p(".empty",{style:"padding: 24px 6px"},function(){return n.format("no-results")})}),n.ul(".pop-over-member-list.checkable.u-clearfix.js-mem-list")},n.input(".js-search-mem.js-autofocus",{type:"text",placeholder:n.l("search-members")}),n.div(".manage-member-section.js-board-members",function(){return r("board-members")}),t?(n.div(".manage-member-section.js-org-members",function(){return r("team-members")}),n.div(".js-show-org-members",function(){return n.a(".quiet-button",{href:"#",style:"margin-top: 8px;"},function(){return n.format("show-team-members")})})):void 0})},{}],788:[function(e,t,r){var n;n=e(436)("popover_selector_menu"),t.exports=function(){return n.ul(".pop-over-list",function(){return n.li(function(){return n.a(".js-mem-selector",{href:"#"},function(){return n.format("members-ellipsis")})}),n.li(function(){return n.a(".js-label-selector",{href:"#"},function(){return n.format("labels-ellipsis")})}),n.li(function(){return n.a(".js-pos-selector",{href:"#"},function(){return n.format("position-ellipsis")})})})}},{}],789:[function(e,t,r){var n;n=e(436)("popover_set_email_freq"),t.exports=function(){return n.ul(".pop-over-list",{name:"minutesBetweenSummaries"},function(){return n.li(function(){return n.a(".highlight-icon",{value:"-1"},function(){return n.check(n.mustacheVar("minutesBetweenSummaries_-1"),"never"),n.span(".sub-name",function(){return n.format("don-t-send-emails")})})}),n.li(function(){return n.a(".highlight-icon",{value:"60"},function(){return n.check(n.mustacheVar("minutesBetweenSummaries_60"),"periodically"),n.span(".sub-name",function(){return n.format("send-emails-about-once-an-hour")})})}),n.li(function(){return n.a(".highlight-icon",{value:"1"},function(){return n.check(n.mustacheVar("minutesBetweenSummaries_1"),"instantly"),n.span(".sub-name",function(){return n.format("send-emails-as-soon-as-possible")})})})})}},{}],790:[function(e,t,r){var n;n=e(436)("popover_share"),t.exports=function(){return n.ul(".pop-over-list",function(){return n.li(function(){return n.a(".js-print",{href:"#",title:n.l("print-using-the-browser-s-print-function-you-can-use-file")},function(){return n.format("print-ellipsis")})}),n.mustacheBlock("hasCsvExport",function(){return n.li(function(){return n.a(".js-export-csv",{href:n.mustacheVar("csvURL"),title:n.l("export-the-board-data-in-csv-format")},function(){return n.format("export-csv")})})}),n.li(function(){return n.a(".js-export-json",{href:n.mustacheVar("jsonURL"),title:n.l("export-the-board-data-in-json-format")},function(){return n.format("export-json")})})}),n.mustacheBlockInverted("hasCsvExport",function(){return n.hr(),n.p(".quiet",{style:"margin: 16px 8px 8px;"},function(){return n.mustacheBlock("needsUpgradeForCsv",function(){return n.a({href:n.mustacheVar("upgradeUrl")},function(){return n.format("there-s-an-update-to-business-class-available-with-csv-export")})}),n.mustacheBlockInverted("needsUpgradeForCsv",function(){return n.format("looking-for-csv-export-check-out-business-class")})})})}},{}],791:[function(e,t,r){var n;n=e(436)("power_up_item"),t.exports=function(){return n.div(".power-up-item-icon",function(){return n.img(".power-up-item-icon-image.mod-rounded",{src:n.mustacheVar("iconSrc"),alt:"Power-Up Icon"}),n.icon("check",{class:"power-up-item-enabled-icon"})}),n.div(".power-up-item-details",function(){return n.h4(".power-up-item-details-header.js-show-details",function(){return n.text(n.mustacheVar("displayName")),n.icon("information",{class:"power-up-item-details-info-icon"})})}),n.div(".power-up-item-actions",function(){return n.a(".power-up-item-actions-button.mod-settings.button-link.js-show-settings",{href:"#"},function(){return n.icon("gear")}),n.mustacheBlock("canEnable",function(){return n.a(".power-up-item-actions-button.mod-enable.button-link.js-enable",{href:"#"},function(){return n.format("enable")}),n.a(".power-up-item-actions-button.mod-disable.button-link.js-disable",{href:"#"},function(){return n.format("disable")})})})}},{}],792:[function(e,t,r){var n;n=e(436)("power_up_item_details"),t.exports=function(){return n.p(function(){return n.text(n.mustacheVar("about"))}),n.mustacheBlock("showScreenshots",function(){return n.h4(function(){return n.format("screenshots")}),n.mustacheBlock("screenshots",function(){return n.img({src:n.mustacheVar("."),alt:n.mustacheVar("name")+" Screenshot"})})})}},{}],793:[function(e,t,r){var n;n=e(436)("power_ups_about_calendar"),t.exports=function(){return n.format("enable-the-calendar-power-up-to-gain-access-to-the-trello-calendar-view-display-cards-with-due-dates-in-a-weekly-or-monthly-format-for-a-time-based-overview-of-cards-most-useful-for-time-sensitive-projects-and-projects-with-multiple-due-dates")}},{}],794:[function(e,t,r){var n;n=e(436)("power_ups_about_card_aging"),t.exports=function(){return n.format("cards-will-visibly-age-as-time-passes-without-any-activity-regular-mode-will-cause-old-cards-to-become-progressively-more-transparent-pirate-mode-will-cause-old-cards-to-crack-and-tear-like-an-old-treasure-map-once-cards-have-new-activity-on-them-their-age-counter-is-reset-and-they-appear-new-again-age-thresholds-are-1-2-and-4-weeks")}},{}],795:[function(e,t,r){var n;n=e(436)("power_ups_about_voting"),t.exports=function(){return n.format("enable-this-power-up-to-allow-users-to-vote-on-your-cards-votes-are-stored-and-synchronized-between-all-users-sharing-this-board-choose-between-multiple-permission-levels-for-which-users-can-vote-on-cards-view-the-number-of-votes-on-each-card-from-the-main-trello-list-pane-or-in-a-cards-detail-pane")}},{}],796:[function(e,t,r){var n;n=e(436)("power_ups_calendar_prefs"),t.exports=function(){return n.h4(function(){return n.format("enable-icalendar-feed")}),n.ul(".pop-over-list",function(){return n.li(function(){return n.a({href:"#",class:"js-select js-calendar-pref-feed "+n.mustacheBlockInverted("__own",function(){return"disabled"}),name:"enabled"},function(){return n.span(".name",function(){return n.format("enabled")}),n.mustacheBlock("calendar_feed_enabled",function(){return n.icon("check")})})}),n.li(function(){return n.a({href:"#",class:"js-select js-calendar-pref-feed "+n.mustacheBlockInverted("__own",function(){return"disabled"}),name:"disabled"},function(){return n.span(".name",function(){return n.format("disabled")}),n.mustacheBlockInverted("calendar_feed_enabled",function(){return n.icon("check")})})})}),n.mustacheBlock("calendar_feed_enabled",function(){return n.hr(),n.h4(function(){return n.format("your-personal-icalendar-feed")}),n.input(".full.js-calendar-feed-url",{type:"text",value:n.mustacheBlock("calendar_feed_generated",function(){return n.mustacheVar("calendar_feed_url")})+n.mustacheBlockInverted("calendar_feed_generated",function(){return"Generating..."})}),n.div(function(){return n.a(".button.js-regen-calendar-url",{href:"#"},function(){return n.mustacheBlock("calendar_feed_generated",function(){return n.format("regenerate-your-feed-url")}),n.mustacheBlockInverted("calendar_feed_generated",function(){return n.format("generating")})})})})}},{}],797:[function(e,t,r){var n;n=e(436)("power_ups_card_aging_prefs"),t.exports=function(){return n.h2(function(){return n.format("how-do-you-want-the-aged-cards-to-look")}),n.ul(".pop-over-list",function(){return n.li(function(){return n.a({href:"#",class:"js-select "+n.mustacheBlockInverted("__own",function(){return"disabled"}),name:"regular"},function(){return n.span(".name",function(){return n.format("regular-mode")}),n.mustacheBlock("aging_regular",function(){return n.icon("check")}),n.span(".sub-name",function(){return n.format("older-cards-become-more-transparent")})})}),n.li(function(){return n.a({href:"#",class:"js-select "+n.mustacheBlockInverted("__own",function(){return"disabled"}),name:"pirate"},function(){return n.span(".name",function(){return n.format("pirate-mode")}),n.mustacheBlock("aging_pirate",function(){return n.icon("check")}),n.span(".sub-name",function(){return n.format("older-cards-crackle-and-tear")})})})})}},{}],798:[function(e,t,r){var n;n=e(436)("power_ups_detail_navbar"),t.exports=function(){return n.a({class:"nav-item js-toolbar-select "+n.mustacheBlock("screenshots",function(){return"active"}),href:"#",name:"screenshots"},function(){return n.format("screenshots")}),n.a({class:"nav-item js-toolbar-select "+n.mustacheBlock("settings",function(){return"active"}),href:"#",name:"settings"},function(){return n.format("settings")})}},{}],799:[function(e,t,r){var n;n=e(436)("power_ups_voting_prefs"),t.exports=function(){return n.h4(function(){return n.format("who-is-allowed-to-vote-on-cards")}),n.ul(".pop-over-list",function(){return n.li(function(){return n.a({href:"#",class:n.mustacheBlock("__own",function(){return"js-voting-select"})+" "+n.mustacheBlockInverted("__own",function(){return"disabled"}),name:"members"},function(){return n.span(".name",function(){return n.format("members")}),n.mustacheBlock("voting_members",function(){return n.icon("check")}),n.span(".sub-name",function(){return n.format("all-board-members-can-vote")})})}),n.li(function(){return n.a({href:"#",class:n.mustacheBlock("__own",function(){return"js-voting-select"})+" "+n.mustacheBlockInverted("__own",function(){return"disabled"})+" "+n.mustacheBlockInverted("voting_showObservers",function(){return"disabled"}),name:"observers"},function(){return n.span(".name",function(){return n.format("members-and-observers")}),n.mustacheBlock("voting_observers",function(){return n.icon("check")}),n.span(".sub-name",function(){return n.format("available-only-on-boards-with-observers")})})}),n.li(function(){return n.a({href:"#",class:n.mustacheBlock("__own",function(){return"js-voting-select"})+" "+n.mustacheBlockInverted("__own",function(){return"disabled"})+" "+n.mustacheBlockInverted("orgCanSee",function(){return"disabled"}),name:"org"},function(){return n.span(".name",function(){return n.format("organization-members")}),n.mustacheBlock("voting_org",function(){return n.icon("check")}),n.span(".sub-name",function(){return n.format("available-only-on-boards-within-an-organization")})})}),n.li(function(){return n.a({href:"#",class:n.mustacheBlock("__own",function(){return"js-voting-select"})+" "+n.mustacheBlockInverted("__own",function(){return"disabled"})+" "+n.mustacheBlockInverted("permissionLevel_public",function(){return"disabled"}),name:"public"},function(){return n.span(".name",function(){return n.format("public-members")}),n.mustacheBlock("voting_public",function(){return n.icon("check")}),n.span(".sub-name",function(){return n.format("available-on-public-boards")})})})})}},{}],800:[function(e,t,r){var n;n=e(436)("product_promo_button"),t.exports=function(){return n.div(".product-promo-button-overlay",function(){return n.span(".product-promo-button",function(){return n.format("get-trello-gold"),n.br(),n.format("or-business-class")})})}},{}],801:[function(e,t,r){var n;n=e(436)("quick_card_editor"),t.exports=function(){return n.span(".icon-lg.icon-close.quick-card-editor-close-icon.js-close-editor"),n.div(".quick-card-editor-card",{style:"top: "+n.mustacheVar("top")+"px; left: "+n.mustacheVar("left")+"px; width: "+n.mustacheVar("width")+"px;"},function(){return n.div(".list-card.list-card-quick-edit.js-stop",{style:"width: "+n.mustacheVar("width")+"px;"},function(){return n.mustachePartial("card")}),n.input(".primary.wide.js-save-edits",{type:"submit",value:n.l("save")}),n.div({class:"quick-card-editor-buttons"+n.mustacheBlock("leftButtons",function(){return" quick-card-editor-buttons-left"})},function(){return n.a(".quick-card-editor-buttons-item.js-edit-labels",{href:"#"},function(){return n.icon("label",{class:"light"}),n.span(".quick-card-editor-buttons-item-text",function(){return n.format("edit-labels")})}),n.a(".quick-card-editor-buttons-item.js-edit-members",{href:"#"},function(){return n.icon("member",{class:"light"}),n.span(".quick-card-editor-buttons-item-text",function(){return n.format("change-members")})}),n.a(".quick-card-editor-buttons-item.js-move-card",{href:"#"},function(){return n.icon("move",{class:"light"}),n.span(".quick-card-editor-buttons-item-text",function(){return n.format("move")})}),n.a(".quick-card-editor-buttons-item.js-copy-card",{href:"#"},function(){return n.icon("card",{class:"light"}),n.span(".quick-card-editor-buttons-item-text",function(){return n.format("copy")})}),n.a(".quick-card-editor-buttons-item.js-edit-due-date",{href:"#"},function(){return n.icon("clock",{class:"light"}),n.span(".quick-card-editor-buttons-item-text",function(){return n.format("change-due-date")})}),n.mustacheBlockInverted("closed",function(){return n.a(".quick-card-editor-buttons-item.js-archive",{href:"#"},function(){return n.icon("archive",{class:"light"}),n.span(".quick-card-editor-buttons-item-text",function(){return n.format("archive")})})})})})}},{}],802:[function(e,t,r){var n;n=e(436)("saved_search"),t.exports=function(){return n.a(".saved-search-item.js-saved-search-name",{href:"#"},function(){return n.span(".saved-search-item-name",function(){return n.text(n.mustacheVar("name"))}),n.text(" "),n.span(".saved-search-query.quiet.js-saved-search-query",function(){return n.text(n.mustacheVar("query"))})}),n.mustacheBlock("allowDelete",function(){return n.a(".saved-search-delete.dark-hover.quiet.js-delete-saved-search",{href:"#"},function(){return n.icon("close")}),n.span(".saved-search-delete-menu.quiet.hide.js-delete-saved-search-menu",function(){return n.format("are-you-sure-you-want-to-delete"),n.a(".saved-search-delete-menu-item.js-delete-saved-search-confirm",{href:"#"},function(){return n.format("yes-delete")}),n.a(".saved-search-delete-menu-item.js-delete-saved-search-cancel",{href:"#"},function(){return n.format("no-keep-this")})})})}},{}],803:[function(e,t,r){var n;n=e(436)("search_instant_results"),t.exports=function(){var e;return e=function(e){return n.format(e,{archived:"archived",attachments:"attachments",board:"board",checklist:"checklist",comment:"comment",cover:"cover",created:"created",day:"day",description:"description",due:"due",edited:"edited",has:"has",id:"id",is:"is",label:"label",list:"list",member:"member",members:"members",month:"month",name:"name",open:"open",overdue:"overdue",starred:"starred",stickers:"stickers",week:"week"})},n.div(".search-header-options",function(){return n.div(".js-saved-search-links",function(){return n.a(".quiet.dark-hover.search-header-options-option.js-see-all-saved-searches",{href:"#"},function(){return n.icon("back","back-to-saved-searches")}),n.a(".quiet.dark-hover.search-header-options-option.js-save-this-search",{href:"#"},function(){return n.icon("star","save-this-search")}),n.span(".quiet.search-header-options-option.mod-save.js-current-search.hide",{href:"#"},function(){return n.icon("star"),n.span(".js-current-search-name")})})}),n.mustacheBlock("picker",function(){return n.div(".js-search-results.u-clearfix.u-relative.hide",function(){return n.div(".search-results-section.js-card-results.u-clearfix.hide",function(){return n.div(".js-search-results-title.results-title"),n.div(".js-list")})})}),n.mustacheBlockInverted("picker",function(){return n.div(".search-results-section.js-save-this-search-menu.hide",function(){return n.mustacheBlock("savedSearchesEnabled",function(){return n.div(".search-results-section-header",function(){return n.h4(function(){return n.format("what-would-you-like-to-call-this-search")})}),n.form(".js-save-this-search-form",function(){return n.input(".js-saved-search-name-input",{type:"text",style:"margin-bottom: 4px;"}),n.input(".primary.js-save-this-search-submit",{type:"submit",value:n.l("save")}),n.a(".quiet.js-save-this-search-cancel",{href:"#",style:"margin-left: 6px;"},function(){return n.format("nevermind")})})}),n.mustacheBlockInverted("savedSearchesEnabled",function(){return n.h2(function(){return n.format("upgrade-to-add-new-saved-searches")}),n.p({style:"font-size: 16px; line-height: 1.2;"},function(){return n.format("you-can-add-new-saved-searches-with-trello-gold-or-get-saved-searches-for-your-entire-organization-with-business-class")}),n.p(function(){return n.a(".button",{target:"_blank",href:"/gold"},function(){return n.format("check-out-trello-gold")}),n.a(".button",{target:"_blank",href:"/business-class"},function(){return n.format("check-out-business-class")})}),n.hr()})}),n.div(".search-results-section.js-search-suggestions.u-clearfix.hide",function(){return n.div(".search-results-section-header",function(){return n.h4(function(){return n.format("did-you-mean-ellipsis")})}),n.div(".js-search-suggestions-list")}),n.div(".search-results-section.js-saved-searches.u-clearfix.hide",function(){return n.div(".search-results-section-header",function(){return n.h4(function(){return n.format("saved-searches")})}),n.p(".quiet.hide.js-no-saved-searches",function(){return n.format("you-have-no-saved-searches-to-save-a-search-start-searching-and-click-save-this-search-in-the-upper-corner")}),n.div(".js-saved-searches-list"),n.hr()}),n.div(".js-search-results.u-clearfix.u-relative.hide",function(){return n.div(".search-results-section.js-card-results.u-clearfix.hide",function(){return n.div(".search-results-section-header.u-clearfix",function(){return n.h4(function(){return n.format("cards")})}),n.div(".js-list"),n.span(".search-loading.hide.js-loading-cards",{href:"#"},function(){return n.format("loading-ellipsis")}),n.a(".show-more.hide.js-show-more-cards",{href:"#"},function(){return n.format("show-more-cards-ellipsis")})}),n.div(".search-results-section.js-board-results.u-clearfix.hide",function(){return n.div(".search-results-section-header",function(){return n.h4(function(){return n.format("boards")})}),n.ul(".board-results-list.js-list"),n.a(".show-more.hide.js-show-more-boards",{href:"#"},function(){return n.format("show-more-boards-ellipsis")})}),n.div(".search-results-section.js-member-results.u-clearfix.hide",function(){return n.div(".search-results-section-header",function(){return n.h4(function(){return n.format("members")})}),n.ul(".js-list.pop-over-member-list"),n.a(".show-more.hide.js-show-more-members",{href:"#"},function(){return n.format("show-more-members-ellipsis")})}),n.div(".search-results-section.js-org-results.u-clearfix.hide",function(){return n.div(".search-results-section-header",function(){return n.h4(function(){return n.format("organizations")})}),n.ul(".org-list.js-list"),n.a(".show-more.hide.js-show-more-orgs",{href:"#"},function(){return n.format("show-more-organizations-ellipsis")})})})}),n.div(".search-tips.hide.js-no-input",function(){return n.p(".search-tips-helper.quiet.js-search-tips-helper",function(){return e("refine-your-search-with-operators-like-at-member-label-is-archived-and-has-attachments"),n.text(" "),n.a(".js-show-search-tips",{href:"#"},function(){return n.format("learn-more-ellipsis")})}),n.div(".search-tips-list.js-search-tips-list.hide",function(){return n.p(".quiet",function(){return e("search-operators-help-you-find-specific-cards-and-create-highly-tailored-lists-trello-will-suggest-operators-for-you-as-you-type-but-here-s-a-full-list-to-keep-in-mind-you-can-add-to-any-operator-to-do-a-negative-search-such-as-has-members-to-search-for-cards-without-any-members-assigned")}),n.dl(function(){return n.dt(function(){return n.format("at-name")}),n.dd(function(){return e("returns-cards-assigned-to-a-member-if-you-start-typing-at-trello-will-suggest-members-for-you-member-also-works-at-me-will-include-only-your-cards")}),n.dt(function(){return n.format("label")}),n.dd(function(){return e("returns-labeled-cards-trello-will-suggest-labels-for-you-if-you-start-typing-and-the-label-you-are-looking-for-label-also-works")}),n.dt(function(){return e("board-id")}),n.dd(function(){return e("returns-cards-within-a-specific-board-if-you-start-typing-board-trello-will-suggest-boards-for-you-you-can-search-by-board-name-too-such-as-board-trello-to-search-only-cards-on-boards-with-trello-in-the-board-name")}),n.dt(function(){return e("list-name")}),n.dd(function(){return e("returns-cards-within-the-list-named-name-or-whatever-you-type-besides-name")}),n.dt(function(){return e("has-attachments")}),n.dd(function(){return e("returns-cards-with-attachments-has-description-has-cover-has-members-and-has-stickers-also-work-as-you-would-expect")}),n.dt(function(){return e("due-day")}),n.dd(function(){return e("returns-cards-due-within-24-hours-due-week-due-month-and-due-overdue-also-work-as-expected-you-can-search-for-a-specific-day-range-for-example-adding-due-14-to-search-will-include-cards-due-in-the-next-14-days")}),n.dt(function(){return e("created-day")}),n.dd(function(){return e("returns-cards-created-in-the-last-24-hours-created-week-and-created-month-also-work-as-expected-you-can-search-for-a-specific-day-range-for-example-adding-created-14-to-the-search-will-include-cards-created-in-the-last-14-days")}),n.dt(function(){return e("edited-day")}),n.dd(function(){return e("returns-cards-edited-in-the-last-24-hours-edited-week-and-edited-month-also-work-as-expected-you-can-search-for-a-specific-day-range-for-example-adding-edited-21-to-the-search-will-include-cards-edited-in-the-last-21-days")}),n.dt(function(){return e("description-checklist-comment-and-name")}),n.dd(function(){return e("returns-cards-matching-the-text-of-card-descriptions-checklists-comments-or-names-for-example-comment-fix-it-will-return-cards-with-fix-it-in-a-comment")}),n.dt(function(){return e("is-open-and-is-archived")}),n.dd(function(){return n.format("returns-cards-that-are-either-open-or-archived-trello-returns-both-types-by-default")}),n.dt(function(){return e("is-starred")}),n.dd(function(){return n.format("only-include-cards-on-starred-boards")})})})}),n.div(".search-warning.hide.js-no-results",function(){return n.format("no-results")}),n.p(".search-warning.hide.js-searching",function(){return n.format("searching-ellipsis")}),n.p(".search-warning.hide.js-err",function(){return n.format("your-search-produced-an-error")}),n.div(".search-results-section.js-help.u-clearfix",function(){return n.div(".search-results-section-header",function(){
return n.h4(function(){return n.format("looking-for-help-using-trello")})}),n.a(".js-open-help-query.hide",{href:"http://help.trello.com?source=trello-search",target:"help"},function(){return n.format("search-our-help-site-for")}),n.span(".js-open-help",function(){return n.format("visit-our-help-site-or-read-the-guide")})})}},{}],804:[function(e,t,r){var n;n=e(436)("search_results_card"),t.exports=function(){return n.div(".search-result-card-container.js-list-card-container",function(){return n.div(".search-result-card-container-fade")}),n.div(".search-result-card-details",function(){return n.p(".u-bottom",function(){return n.a(".search-result-card-details-name",{href:n.mustacheVar("url")},function(){return n.text(n.mustacheVar("name"))})}),n.p(".u-bottom.quiet",function(){return n.format("in-listname-archived-on-boardname",{listName:n.mustacheVar("listName"),archived:n.mustacheVar("archived"),boardName:n.mustacheVar("boardName"),permLevel:n.mustacheVar("permLevel")})})}),n.a(".search-result-card-hover-target",{href:n.mustacheVar("url")})}},{}],805:[function(e,t,r){var n;n=e(436)("search_suggetion"),t.exports=function(){return n.a(".search-suggestion.js-select-suggestion",{href:"#","data-suggestionphrase":n.mustacheVar("phrase")},function(){return n.span(".search-suggestion-string",function(){return n.text(n.mustacheVar("phrase"))}),n.span(".search-suggestion-desc",function(){return n.text(n.mustacheVar("description"))})})}},{}],806:[function(e,t,r){var n;n=e(436)("search_suggetion_board"),t.exports=function(){return n.a(".search-suggestion.search-suggestion-board.js-select-suggestion",{href:"#","data-suggestionphrase":n.mustacheVar("phrase")},function(){return n.span(".search-suggestion-board-image"),n.span(".search-suggestion-dec",function(){return n.format("cards-on-the-board-name",{name:n.mustacheVar("name")})})})}},{}],807:[function(e,t,r){var n;n=e(436)("search_suggetion_member"),t.exports=function(){return n.a(".search-suggestion.search-suggestion-member.js-select-suggestion",{href:"#","data-suggestionphrase":n.mustacheVar("phrase")},function(){return n.span(".member.search-suggestion-member-av",function(){return n.mustachePartial("member")}),n.span(function(){return n.format("cards-assigned-to-fullname",{fullName:n.mustacheVar("fullName")})})})}},{}],808:[function(e,t,r){var n;n=e(436)("select_card"),t.exports=function(){return n.li(".item",function(){return n.a(".name.js-select-card",{href:"#",title:n.mustacheVar("name"),id:n.mustacheVar("id")},function(){return n.span(".item-name",function(){return n.text(n.mustacheVar("name")),n.mustacheBlock("closed",function(){return n.text(" "),n.span(".quiet",function(){return n.format("archived")})})}),n.mustacheBlock("boardName",function(){return n.span(".sub-name",function(){return n.format("in-boardname",{boardName:n.mustacheVar("boardName")})})})})})}},{}],809:[function(e,t,r){var n;n=e(436)("select_emoji"),t.exports=function(){return n.li(".item",function(){return n.a(".name.js-select-emoji",{href:"#",title:n.mustacheVar("name")},function(){return n.img(".emoji",{src:n.mustacheVar("image")}),n.span(".emoji-name",{name:n.mustacheVar("name")},function(){return n.text(n.mustacheVar("name"))})})})}},{}],810:[function(e,t,r){var n;n=e(436)("select_labels"),t.exports=function(){return n.mustacheBlock("labels",function(){return n.li(function(){return n.mustacheBlock("__ed",function(){return n.a(".card-label-edit-button.icon-sm.icon-edit.js-edit-label",{href:"#","data-idlabel":n.mustacheVar("id")})}),n.span({class:"card-label mod-selectable card-label-"+n.mustacheVar("color")+" "+n.mustacheBlock("isActive",function(){return"active"})+" js-select-label","data-idlabel":n.mustacheVar("id"),"data-color":n.mustacheVar("color")},function(){return n.mustacheBlock("name",function(){return n.text(n.mustacheVar("name"))}),n.icon("check",{class:"card-label-selectable-icon light"})})})})}},{}],811:[function(e,t,r){var n;n=e(436)("select_member"),t.exports=function(){return n.li({class:"item"+n.mustacheBlock("isActive",function(){return" active"})+n.mustacheBlock("unconfirmed",function(){return" unconfirmed"})+n.mustacheBlock("inactive",function(){return" inactive"})+n.mustacheBlock("isKnownMember",function(){return" js-autoselect"})+" js-member-item"},function(){return n.a({href:n.mustacheBlock("url",function(){return n.mustacheVar("url")})+n.mustacheBlockInverted("url",function(){return"#"}),class:"name js-select-member "+n.mustacheBlock("extraText",function(){return"multi-line"}),idMember:n.mustacheVar("id"),title:n.mustacheVar("fullName")+n.mustacheBlock("username",function(){return" ("+n.mustacheVar("username")+")"}),autocompleteText:n.mustacheVar("username")},function(){return n.span({class:"member js-member"+n.mustacheBlock("isVirtual",function(){return" virtual"})},function(){return n.mustachePartial("member")}),n.span(".full-name",{name:n.mustacheVar("fullName")+n.mustacheBlock("username",function(){return" ("+n.mustacheVar("username")+")"})},function(){return n.text(n.mustacheVar("fullName")),n.text(" "),n.mustacheBlock("username",function(){return n.format("username",{username:n.mustacheVar("username")})})}),n.mustacheBlock("extraText",function(){return n.div(".extra-text.quiet",function(){return n.format("extratext",{extraText:n.mustacheVar("extraText")})})}),n.icon("check",{class:"checked-icon"}),n.icon("forward",{class:"light option js-open-option"}),n.mustacheBlock("inactive",function(){return n.span(".quiet.sub-name",function(){return n.format("inactive-account")})}),n.mustacheBlock("unconfirmed",function(){return n.span(".quiet.sub-name",function(){return n.format("unconfirmed-user")})})})})}},{}],812:[function(e,t,r){var n,o;o=e(436)("select_org_to_upgrade"),n=e(82),t.exports=function(){return o.div(".select-org-to-upgrade",function(){return o.h2(".select-org-to-upgrade-header",function(){return o.format("select-an-organization-to-upgrade-to-business-class")}),o.ul(".select-org-to-upgrade-list",function(){return o.mustacheBlock("orgs",function(){return o.li(".select-org-to-upgrade-list-item",function(){return o.a({href:o.mustacheVar("orgUrl"),class:"select-org-to-upgrade-list-item-link"+o.mustacheBlock("isDisabled",function(){return" disabled js-disabled"})},function(){return o.mustacheBlock("logoHash",function(){return o.img(".select-org-to-upgrade-list-item-link-image",{src:o.mustacheVar("__logoDomain")+"/"+o.mustacheVar("logoHash")+"/30.png",alt:o.mustacheVar("displayName")+" logo"})}),o.mustacheBlockInverted("logoHash",function(){return o.span(".icon-lg.icon-organization.select-org-to-upgrade-list-item-link-image")}),o.span(".select-org-to-upgrade-list-item-link-name",function(){return o.text(o.mustacheVar("displayName"))}),o.span(".select-org-to-upgrade-list-item-link-details.quiet",function(){return o.text(n("members",o.mustacheVar("memberCount"))),o.text(". "),o.mustacheBlock("isPremium",function(){return o.mustacheBlockInverted("needsBCUpgrade",function(){return o.format("this-organization-already-has-business-class")}),o.mustacheBlock("needsBCUpgrade",function(){return o.mustacheBlock("isAdmin",function(){return o.format("an-update-is-available")}),o.mustacheBlockInverted("isAdmin",function(){return o.format("an-update-is-available-you-need-to-be-an-admin-to-upgrade")})})})})})})})}),o.mustacheBlockInverted("orgs",function(){return o.p({style:"margin: 24px 0;"},function(){return o.format("you-don-t-have-any-organizations"),o.raw(" "),o.a(".js-create-org",{href:"#"},function(){return o.format("click-here-to-create-one")})})})})}},{}],813:[function(e,t,r){var n,o;o=e(436)("shortcuts"),n=function(e,t,r){return o.div(".shortcut-list-item",function(){return o.h3(".shortcut-list-item-header",function(){return o.format(t)}),o.div(".shortcut-list-item-keys",function(){var t,r,n,i;for(i=[],t=0,n=e.length;n>t;t++)r=e[t],i.push(o.span(".keyboard-key",function(){return o.text(r)}));return i}),o.div(".short-list-item-desc",function(){return r()})})},t.exports=function(){return o.div(".window-header.u-clearfix",function(){return o.span(".window-header-icon.icon-lg.icon-information"),o.h2(".window-title",function(){return o.format("keyboard-shortcuts")})}),o.div(".shortcut-list.markeddown",function(){return o.hr(),n(["←","↓ / J","↑ / K","→"],"navigate-cards",function(){return o.p(function(){return o.format("pressing-the-arrow-keys-will-select-adjacent-cards-on-a-board-pressing-j-will-select-the-card-below-the-current-card-pressing-k-will-select-the-card-above-the-current-card")})}),n(["B"],"open-header-boards-menu",function(){return o.p(function(){return o.format("pressing-b-opens-the-boards-menu-in-the-header-you-can-search-for-boards-and-navigate-boards-with-the-up-and-down-arrows-pressing-enter-with-a-board-selected-will-open-it")})}),n(["/"],"focus-search-box",function(){return o.p(function(){return o.format("pressing-puts-the-cursor-in-the-search-box-in-the-header")})}),n(["C"],"archive-card",function(){return o.p(function(){return o.format("pressing-c-will-archive-a-card")})}),n(["D"],"due-date",function(){return o.p(function(){return o.format("pressing-d-will-open-the-due-date-picker-for-a-card")})}),n(["E"],"quick-edit-mode",function(){return o.p(function(){return o.format("if-hovering-over-a-card-pressing-e-will-open-quick-edit-mode-which-lets-you-quickly-edit-the-title-and-other-card-attributes")})}),n(["esc"],"close-menu-cancel-editing",function(){return o.p(function(){return o.format("pressing-esc-will-close-an-open-dialog-window-or-pop-over-or-cancel-edits-and-comments-you-are-composing")})}),n(["Command/Control","Enter"],"save-text",function(){return o.p(function(){return o.format("meta-enter-copy")})}),n(["enter"],"open-card",function(){return o.p(function(){return o.format("pressing-enter-will-open-the-currently-selected-card-pressing-shift-enter-while-submitting-a-card-will-open-it-immediately-after-creating-it")})}),n(["F"],"open-card-filter-menu",function(){return o.p(function(){return o.format("use-f-to-open-the-card-filter-menu-the-search-by-title-input-is-automatically-focused")})}),n(["L"],"label",function(){return o.p(function(){return o.format("pressing-l-opens-a-pop-over-of-the-available-labels-clicking-a-label-will-add-or-remove-it-from-the-card")}),o.p(function(){return o.format("pressing-one-of-the-following-number-keys-will-apply-or-remove-that-label")}),o.table(function(){return o.thead(function(){return o.tr(function(){return o.th(function(){return o.format("key")}),o.th(function(){return o.format("label-color")})})}),o.tbody(function(){var e,t;return e=function(e){var t,r,n,i;for(i=[],t=0,n=e.length;n>t;t++)r=e[t],i.push(o.tr(function(){return o.td(function(){return o.text(r[0])}),o.td(function(){return o.format(r[1])})}));return i},t=[["1","green"],["2","yellow"],["3","orange"],["4","red"],["5","purple"],["6","blue"],["7","sky"],["8","lime"],["9","pink"],["0","black"]],e(t)})})}),n(["M"],"add-remove-members",function(){return o.p(function(){return o.format("pressing-m-opens-the-add-remove-members-menu-clicking-a-member-s-avatar-will-assign-or-unassign-that-person")})}),n(["N"],"insert-new-card",function(){return o.p(function(){return o.format("pressing-n-opens-a-pop-over-that-allows-you-to-add-a-card-after-the-currently-selected-card")})}),n(["<",">"],"move-card-to-adjacent-list",function(){return o.p(function(){return o.format("pressing-the-left-or-right-angle-brackets-lt-and-gt-will-move-a-card-to-the-adjacent-left-or-right-list")})}),n(["Q"],"my-cards-filter",function(){return o.p(function(){return o.format("pressing-the-q-key-toggles-the-cards-assigned-to-me-filter")})}),n(["S"],"subscribe",function(){return o.p(function(){return o.format("pressing-s-will-subscribe-you-to-or-unsubscribe-you-from-a-card-subscribing-to-a-card-will-give-you-notifications-for-most-actions-to-that-card")})}),n(["space"],"assign-self",function(){return o.p(function(){return o.format("pressing-space-will-assign-or-unassign-yourself-to-a-card")})}),n(["T"],"edit-title",function(){return o.p(function(){return o.format("if-viewing-a-card-pressing-t-will-edit-the-title-if-hovering-over-a-card-pressing-t-will-open-the-card-and-edit-the-title")})}),n(["V"],"vote",function(){return o.p(function(){return o.format("pressing-v-will-add-or-remove-your-vote-on-a-card-if-the-voting-power-up-is-enabled")})}),n(["W"],"toggle-board-menu",function(){return o.p(function(){return o.format("pressing-w-will-collapse-or-expand-the-board-menu-the-sidebar-on-the-right")})}),n(["X"],"clear-all-filters",function(){return o.p(function(){return o.format("use-x-to-clear-all-active-card-filters")})}),n(["?"],"open-shortcuts-page",function(){return o.p(function(){return o.format("pressing-will-open-the-shortcuts-page")})}),n(["@"],"autocomplete-members",function(){return o.p(function(){return o.format("when-writing-a-comment-you-can-type-at-plus-a-member-s-name-username-or-initials-and-get-a-list-of-matching-members-you-can-navigate-that-list-with-the-up-and-down-arrows-pressing-enter-or-tab-with-a-member-selected-will-mention-that-user-in-the-comment-the-mentioned-user-will-get-a-notification-once-submitted")}),o.p(function(){return o.format("when-adding-a-new-card-you-can-use-the-same-method-to-assign-members-to-cards-before-submitting-them")})}),n(["#"],"autocomplete-labels",function(){return o.p(function(){return o.format("when-adding-a-new-card-you-can-type-plus-the-label-s-color-or-title-and-get-a-list-of-matching-labels-you-can-use-the-up-and-down-arrows-to-navigate-the-resulting-list-pressing-enter-or-tab-will-add-the-label-to-the-composed-card-the-labels-will-be-added-to-the-card-when-you-submit")})}),n(["^"],"autocomplete-position",function(){return o.p(function(){return o.format("when-adding-a-new-card-you-can-type-plus-a-list-name-or-position-in-a-list-you-can-also-type-top-or-bottom-to-add-to-the-top-or-bottom-of-the-current-list-you-can-use-the-up-and-down-arrows-to-navigate-the-resulting-list-pressing-enter-or-tab-will-automatically-change-the-position-of-the-composed-card")})})})}},{}],814:[function(e,t,r){var n;n=e(436)("sticker_on_card"),t.exports=function(){return n.img(".sticker-image",{src:n.mustacheVar("url"),style:"-webkit-transform: rotate("+n.mustacheVar("rotate")+"deg);transform: rotate("+n.mustacheVar("rotate")+"deg);",alt:n.mustacheVar("image")}),n.mustacheBlock("showEditControls",function(){return n.div(".sticker-controls",function(){return n.span(".sticker-control-btn.rotate-btn.js-rotate-sticker",function(){return n.format("rotate")}),n.span(".sticker-control-btn.move-btn.js-move-sticker",function(){return n.format("move")}),n.span(".sticker-control-btn.remove-btn.js-remove-sticker",function(){return n.format("remove")})})})}},{}],815:[function(e,t,r){var n;n=e(436)("sticker_pack_selection_list"),t.exports=function(){return n.h2(function(){return n.text(n.mustacheVar("displayName"))}),n.div(".sticker-list.u-clearfix.js-sticker-list.u-relative")}},{}],816:[function(e,t,r){var n;n=e(436)("sticker_select"),t.exports=function(){return n.div(".sticker-list.u-clearfix.js-standard-sticker-list"),n.div(".js-premium-stickers"),n.h2(function(){return n.format("custom-stickers")}),n.div(".sticker-list.u-clearfix.js-custom-sticker-list")}},{}],817:[function(e,t,r){var n;n=e(436)("sticker_select_item"),t.exports=function(){return n.mustacheBlock("pending",function(){return n.img(".sticker-select-image.sticker-select-pending",{src:n.mustacheVar("url")})}),n.mustacheBlockInverted("pending",function(){return n.img(".sticker-select-image.sticker-select-shadow",{src:n.mustacheVar("url")}),n.img(".sticker-select-image.sticker-select-fixed",{src:n.mustacheVar("url")}),n.img(".sticker-select-image.sticker-select-peel",{src:n.mustacheVar("url")})}),n.mustacheBlock("id",function(){return n.span(".sticker-select-option.sticker-select-option-delete-button.js-delete-sticker",function(){return n.icon("close",{class:"sticker-select-option-icon"}),n.span(".sticker-select-option-text.u-text-underline",function(){return n.format("delete")})})}),n.mustacheBlock("error",function(){return n.span(".sticker-select-option",function(){return n.span(".sticker-select-option-text",function(){return n.text(n.mustacheVar("error"))})})}),n.mustacheBlock("pending",function(){return n.span(".sticker-select-option",function(){return n.span(".spinner.small.u-float-left",{style:"margin-right: 4px;"}),n.span(".sticker-select-option-text",function(){return n.format("uploading-ellipsis")})})})}},{}],818:[function(e,t,r){var n;n=e(436)("sticker_select_item_upload"),t.exports=function(){return n.form({action:"/1/member/"+n.mustacheVar("id")+"/customStickers",method:"post",enctype:"multipart/form-data"},function(){return n.input({type:"hidden",name:"token",value:""}),n.input({type:"hidden",name:"format",value:"http"}),n.div(".sticker-select.sticker-select-upload",function(){return n.span(".sticker-select-upload-icon.icon-lg.icon-add"),n.input({type:"file",name:"file",class:"sticker-select-upload-input js-upload-image "+n.mustacheBlockInverted("enabled_customStickers",function(){return" disabled"}),multiple:"multiple",accept:"image/*"})})})}},{}],819:[function(e,t,r){var n;n=e(436)("sync_error"),t.exports=function(){return n.format("you-have-been-disconnected-from-the-trello-server-for-too-long"),n.br(),n.a(".app-alert-item-button",{href:"#",onclick:"window.location.reload();"},function(){return n.format("reload-now")})}},{}],820:[function(e,t,r){var n;n=e(436)("take_photo"),t.exports=function(){return n.video({class:"video"+n.mustacheBlockInverted("connected",function(){return" hide"}),autoplay:!0,style:"width:100%"}),n.mustacheBlock("error",function(){return n.p(".error",function(){return n.text(n.mustacheVar("error"))})}),n.mustacheBlock("connected",function(){return n.button(".primary.wide.js-snap",function(){return n.format("snap-photo")})}),n.mustacheBlockInverted("connected",function(){return n.mustacheBlock("error",function(){return n.p(function(){return n.format("couldnt-find-a-camera-to-connect-to-ellipsis")})}),n.mustacheBlockInverted("error",function(){return n.p(function(){return n.format("trying-to-access-your-computers-camera-ellipsis-check-the-banner-at-the-top-of-the-page")})}),n.p(".u-bottom",function(){return n.a(".quiet-button.js-connect-camera",{href:"#"},function(){return n.format("try-again")})})})}},{}],821:[function(e,t,r){var n;n=e(436)("tips"),t.exports=n.renderable(function(e){var t,r,o,i,s;return r=e.id,o=e.imgUrl1x,i=e.imgUrl2x,t=e.bgcolor,s=e.url,n.a({class:"tip js-tip",href:s,"data-tipid":r,target:"_blank"},function(){return n.div({class:"tip-image",style:"background-color: "+t+";"},function(){return n.img({class:"tip-image-img",src:o,srcset:o+" 1x, "+i+" 2x"})}),n.h3(".tip-text",n.l(r))})})},{}],822:[function(e,t,r){var n;n=e(436)("tooltip"),t.exports=n.renderable(function(e){return n.span(".tooltip-trigger.quiet.js-tooltip-trigger",function(){return n.icon("information",{class:"js-tooltip-anchor"}),n.text(e)})})},{}],823:[function(e,t,r){var n;n=e(436)("tooltip_content"),t.exports=function(){return n.div(".tooltip-content.js-tooltip-content",function(){return n.icon("close",{class:"tooltip-close-button js-tooltip-close-button"}),n.p(function(){return n.text(n.mustacheVar("tooltipText"))})})}},{}],824:[function(e,t,r){var n;n=e(436)("woof_header"),t.exports=function(){return n.a(".header-btn.header-woof",{href:"#"},function(){return n.span(".taco-talk-small-icon"),n.span(".header-btn-text",function(){return n.span(".left-arrow"),n.span(".js-phrase")})})}},{}],825:[function(e,t,r){(function(){var t,n=this,o=n.Backbone,i=[],s=i.push,a=i.slice,u=i.splice;t="undefined"!=typeof r?r:n.Backbone={},t.VERSION="0.9.10";var c=n._;c||"undefined"==typeof e||(c=e("underscore")),t.$=n.jQuery||n.Zepto||n.ender,t.noConflict=function(){return n.Backbone=o,this},t.emulateHTTP=!1,t.emulateJSON=!1;var l=/\s+/,d=function(e,t,r,n){if(!r)return!0;if("object"==typeof r)for(var o in r)e[t].apply(e,[o,r[o]].concat(n));else{if(!l.test(r))return!0;for(var i=r.split(l),s=0,a=i.length;a>s;s++)e[t].apply(e,[i[s]].concat(n))}},p=function(e,t){var r,n=-1,o=e.length;switch(t.length){case 0:for(;++n<o;)(r=e[n]).callback.call(r.ctx);return;case 1:for(;++n<o;)(r=e[n]).callback.call(r.ctx,t[0]);return;case 2:for(;++n<o;)(r=e[n]).callback.call(r.ctx,t[0],t[1]);return;case 3:for(;++n<o;)(r=e[n]).callback.call(r.ctx,t[0],t[1],t[2]);return;default:for(;++n<o;)(r=e[n]).callback.apply(r.ctx,t)}},h=t.Events={on:function(e,t,r){if(!d(this,"on",e,[t,r])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:r,ctx:r||this}),this},once:function(e,t,r){if(!d(this,"once",e,[t,r])||!t)return this;var n=this,o=c.once(function(){n.off(e,o),t.apply(this,arguments)});return o._callback=t,this.on(e,o,r),this},off:function(e,t,r){var n,o,i,s,a,u,l,p;if(!this._events||!d(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events={},this;for(s=e?[e]:c.keys(this._events),a=0,u=s.length;u>a;a++)if(e=s[a],n=this._events[e]){if(i=[],t||r)for(l=0,p=n.length;p>l;l++)o=n[l],(t&&t!==o.callback&&t!==o.callback._callback||r&&r!==o.context)&&i.push(o);this._events[e]=i}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!d(this,"trigger",e,t))return this;var r=this._events[e],n=this._events.all;return r&&p(r,t),n&&p(n,arguments),this},listenTo:function(e,t,r){var n=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=c.uniqueId("l"));return n[o]=e,e.on(t,"object"==typeof t?this:r,this),this},stopListening:function(e,t,r){var n=this._listeners;if(n){if(e)e.off(t,"object"==typeof t?this:r,this),t||r||delete n[e._listenerId];else{"object"==typeof t&&(r=this);for(var o in n)n[o].off(t,r,this);this._listeners={}}return this}}};h.bind=h.on,h.unbind=h.off,c.extend(t,h);var m=t.Model=function(e,t){var r,n=e||{};this.cid=c.uniqueId("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(n=this.parse(n,t)||{}),(r=c.result(this,"defaults"))&&(n=c.defaults({},n,r)),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};c.extend(m.prototype,h,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return c.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return c.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,r){var n,o,i,s,a,u,l,d;if(null==e)return this;if("object"==typeof e?(o=e,r=t):(o={})[e]=t,r||(r={}),!this._validate(o,r))return!1;i=r.unset,a=r.silent,s=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=c.clone(this.attributes),this.changed={}),d=this.attributes,l=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(n in o)t=o[n],c.isEqual(d[n],t)||s.push(n),c.isEqual(l[n],t)?delete this.changed[n]:this.changed[n]=t,i?delete d[n]:d[n]=t;if(!a){s.length&&(this._pending=!0);for(var p=0,h=s.length;h>p;p++)this.trigger("change:"+s[p],this,d[s[p]],r)}if(u)return this;if(!a)for(;this._pending;)this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,c.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,c.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!c.isEmpty(this.changed):c.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?c.clone(this.changed):!1;var t,r=!1,n=this._changing?this._previousAttributes:this.attributes;for(var o in e)c.isEqual(n[o],t=e[o])||((r||(r={}))[o]=t);return r},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(e){e=e?c.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success;return e.success=function(e,r,n){return e.set(e.parse(r,n),n)?void(t&&t(e,r,n)):!1},this.sync("read",this,e)},save:function(e,t,r){var n,o,i,s,a=this.attributes;return null==e||"object"==typeof e?(n=e,r=t):(n={})[e]=t,!n||r&&r.wait||this.set(n,r)?(r=c.extend({validate:!0},r),this._validate(n,r)?(n&&r.wait&&(this.attributes=c.extend({},a,n)),void 0===r.parse&&(r.parse=!0),o=r.success,r.success=function(e,t,r){e.attributes=a;var i=e.parse(t,r);return r.wait&&(i=c.extend(n||{},i)),c.isObject(i)&&!e.set(i,r)?!1:void(o&&o(e,t,r))},i=this.isNew()?"create":r.patch?"patch":"update","patch"===i&&(r.attrs=n),s=this.sync(i,this,r),n&&r.wait&&(this.attributes=a),s):!1):!1},destroy:function(e){e=e?c.clone(e):{};var t=this,r=e.success,n=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(e,t,o){(o.wait||e.isNew())&&n(),r&&r(e,t,o)},this.isNew())return e.success(this,null,e),!1;var o=this.sync("delete",this,e);return e.wait||n(),o},url:function(){var e=c.result(this,"urlRoot")||c.result(this.collection,"url")||A();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return!this.validate||!this.validate(this.attributes,e)},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=c.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,t||{}),!1):!0}});var f=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this.models=[],this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,c.extend({silent:!0},t))};c.extend(f.prototype,h,{model:m,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){e=c.isArray(e)?e.slice():[e],t||(t={});var r,n,o,i,a,l,d,p,h,m;for(d=[],p=t.at,h=this.comparator&&null==p&&0!=t.sort,m=c.isString(this.comparator)?this.comparator:null,r=0,n=e.length;n>r;r++)(o=this._prepareModel(i=e[r],t))?(a=this.get(o))?t.merge&&(a.set(i===o?o.attributes:i,t),h&&!l&&a.hasChanged(m)&&(l=!0)):(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)):this.trigger("invalid",this,i,t);if(d.length&&(h&&(l=!0),this.length+=d.length,null!=p?u.apply(this.models,[p,0].concat(d)):s.apply(this.models,d)),l&&this.sort({silent:!0}),t.silent)return this;for(r=0,n=d.length;n>r;r++)(o=d[r]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},remove:function(e,t){e=c.isArray(e)?e.slice():[e],t||(t={});var r,n,o,i;for(r=0,n=e.length;n>r;r++)i=this.get(e[r]),i&&(delete this._byId[i.id],delete this._byId[i.cid],o=this.indexOf(i),this.models.splice(o,1),this.length--,t.silent||(t.index=o,i.trigger("remove",i,this,t)),this._removeReference(i));return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,c.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,c.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return null==e?void 0:(this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[e.id||e.cid||e[this._idAttr]||e])},at:function(e){return this.models[e]},where:function(e){return c.isEmpty(e)?[]:this.filter(function(t){for(var r in e)if(e[r]!==t.get(r))return!1;return!0})},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return c.invoke(this.models,"get",e)},update:function(e,t){t=c.extend({add:!0,merge:!0,remove:!0},t),t.parse&&(e=this.parse(e,t));var r,n,o,i,s=[],a=[],u={};if(c.isArray(e)||(e=e?[e]:[]),t.add&&!t.remove)return this.add(e,t);for(n=0,o=e.length;o>n;n++)r=e[n],i=this.get(r),t.remove&&i&&(u[i.cid]=!0),(t.add&&!i||t.merge&&i)&&s.push(r);if(t.remove)for(n=0,o=this.models.length;o>n;n++)r=this.models[n],u[r.cid]||a.push(r);return a.length&&this.remove(a,t),s.length&&this.add(s,t),this},reset:function(e,t){t||(t={}),t.parse&&(e=this.parse(e,t));for(var r=0,n=this.models.length;n>r;r++)this._removeReference(this.models[r]);return t.previousModels=this.models.slice(),this._reset(),e&&this.add(e,c.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e=e?c.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success;return e.success=function(e,r,n){var o=n.update?"update":"reset";e[o](r,n),t&&t(e,r,n)},this.sync("read",this,e)},create:function(e,t){if(t=t?c.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,n=t.success;return t.success=function(e,t,o){o.wait&&r.add(e,o),n&&n(e,t,o)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models.length=0,this._byId={}},_prepareModel:function(e,t){if(e instanceof m)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var r=new this.model(e,t);return r._validate(e,t)?r:!1},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,r,n){("add"!==e&&"remove"!==e||r===this)&&("destroy"===e&&this.remove(t,n),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))},sortedIndex:function(e,t,r){t||(t=this.comparator);var n=c.isFunction(t)?t:function(e){return e.get(t)};return c.sortedIndex(this.models,e,n,r)}});var g=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];c.each(g,function(e){f.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.models),c[e].apply(c,t)}});var v=["groupBy","countBy","sortBy"];c.each(v,function(e){f.prototype[e]=function(t,r){var n=c.isFunction(t)?t:function(e){return e.get(t)};return c[e](this.models,n,r)}});var y=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},b=/\((.*?)\)/g,w=/(\(\?)?:\w+/g,_=/\*\w+/g,k=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(y.prototype,h,{initialize:function(){},route:function(e,r,n){return c.isRegExp(e)||(e=this._routeToRegExp(e)),n||(n=this[r]),t.history.route(e,c.bind(function(o){var i=this._extractParameters(e,o);n&&n.apply(this,i),this.trigger.apply(this,["route:"+r].concat(i)),this.trigger("route",r,i),t.history.trigger("route",this,r,i)},this)),this},navigate:function(e,r){return t.history.navigate(e,r),this},_bindRoutes:function(){if(this.routes)for(var e,t=c.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(k,"\\$&").replace(b,"(?:$1)?").replace(w,function(e,t){return t?e:"([^/]+)"}).replace(_,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var C=t.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},x=/^[#\/]|\s+$/g,j=/^\/+|\/+$/g,S=/msie [\w.]+/,M=/\/$/;C.started=!1,c.extend(C.prototype,h,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var r=this.root.replace(M,"");e.indexOf(r)||(e=e.substr(r.length));
}else e=this.getHash();return e.replace(x,"")},start:function(e){if(C.started)throw new Error("Backbone.history has already been started");C.started=!0,this.options=c.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),n=document.documentMode,o=S.exec(navigator.userAgent.toLowerCase())&&(!n||7>=n);this.root=("/"+this.root+"/").replace(j,"/"),o&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(r)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(x,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),C.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(e){var t=this.fragment=this.getFragment(e),r=c.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return r},navigate:function(e,t){if(!C.started)return!1;if(t&&t!==!0||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var r=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,r){if(r){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),t.history=new C;var B=t.View=function(e){this.cid=c.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},T=/^(\S+)\s*(.*)$/,O=["model","collection","el","id","attributes","className","tagName","events"];c.extend(B.prototype,h,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,r){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],r!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(e||(e=c.result(this,"events"))){this.undelegateEvents();for(var t in e){var r=e[t];if(c.isFunction(r)||(r=this[e[t]]),!r)throw new Error('Method "'+e[t]+'" does not exist');var n=t.match(T),o=n[1],i=n[2];r=c.bind(r,this),o+=".delegateEvents"+this.cid,""===i?this.$el.on(o,r):this.$el.on(o,i,r)}}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=c.extend({},c.result(this,"options"),e)),c.extend(this,c.pick(e,O)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var e=c.extend({},c.result(this,"attributes"));this.id&&(e.id=c.result(this,"id")),this.className&&(e.class=c.result(this,"className"));var r=t.$("<"+c.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}}});var L={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.prepareData=function(e,t,r){return"create"==e||"update"==e||"patch"==e?JSON.stringify(t.toJSON(r)):null},t.sync=function(e,r,n){var o=L[e];c.defaults(n||(n={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var i={type:o,dataType:"json"};if(n.url||(i.url=c.result(r,"url")||A()),null==n.data&&r&&(i.contentType="application/json",i.data=t.prepareData(e,r,n)),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{}),n.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){i.type="POST",n.emulateJSON&&(i.data._method=o);var s=n.beforeSend;n.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",o),s?s.apply(this,arguments):void 0}}"GET"===i.type||n.emulateJSON||(i.processData=!1);var a=n.success;n.success=function(e){a&&a(r,e,n),r.trigger("sync",r,e,n)};var u=n.error;n.error=function(e){u&&u(r,e,n),r.trigger("error",r,e,n)};var l=n.xhr=t.ajax(c.extend(i,n));return r.trigger("request",r,l,n),l},t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var P=function(e,t){var r,n=this;r=e&&c.has(e,"constructor")?e.constructor:function(){return n.apply(this,arguments)},c.extend(r,n,t);var o=function(){this.constructor=r};return o.prototype=n.prototype,r.prototype=new o,e&&c.extend(r.prototype,e),r.__super__=n.prototype,r};m.extend=f.extend=y.extend=B.extend=C.extend=P;var A=function(){throw new Error('A "url" property or function must be specified')}}).call(this)},{}]},{},[41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56]);for(;e.length>0;){var n=e;e=[],n.forEach(function(e){e()})}
